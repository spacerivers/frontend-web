const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-9nWxpARV.js","assets/vendor-DJ1oPbzn.js","assets/index-BihgQmCv.js","assets/router-BLkwbmX3.js","assets/charts-BO6COj6_.js","assets/index-Dl7YX8PE.js"])))=>i.map(i=>d[i]);
var Ci=Object.defineProperty;var ki=(t,s,a)=>s in t?Ci(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var ys=(t,s,a)=>ki(t,typeof s!="symbol"?s+"":s,a);import{r as c,a as mn,R as rt}from"./vendor-DJ1oPbzn.js";import{u as Aa,a as Ti,L as ba,N as xn,b as Di,B as Ii,R as Ai,c as Ve}from"./router-BLkwbmX3.js";import{R as ua,L as Pi,C as ma,X as xa,Y as ha,T as Gs,a as pa,b as $r,B as hn,A as Ei,c as Ua,P as Mi,d as Fi,e as Ri,f as Li}from"./charts-BO6COj6_.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var pn={exports:{}},Pa={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oi=c,zi=Symbol.for("react.element"),$i=Symbol.for("react.fragment"),_i=Object.prototype.hasOwnProperty,Bi=Oi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ui={key:!0,ref:!0,__self:!0,__source:!0};function gn(t,s,a){var r,n={},i=null,l=null;a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(r in s)_i.call(s,r)&&!Ui.hasOwnProperty(r)&&(n[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)n[r]===void 0&&(n[r]=s[r]);return{$$typeof:zi,type:t,key:i,ref:l,props:n,_owner:Bi.current}}Pa.Fragment=$i;Pa.jsx=gn;Pa.jsxs=gn;pn.exports=Pa;var e=pn.exports,fn,_r=mn;fn=_r.createRoot,_r.hydrateRoot;const qi="modulepreload",Hi=function(t){return"/"+t},Br={},yn=function(s,a,r){let n=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(a.map(o=>{if(o=Hi(o),o in Br)return;Br[o]=!0;const m=o.endsWith(".css"),h=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${h}`))return;const d=document.createElement("link");if(d.rel=m?"stylesheet":qi,m||(d.as="script"),d.crossOrigin="",d.href=o,u&&d.setAttribute("nonce",u),document.head.appendChild(d),m)return new Promise((g,p)=>{d.addEventListener("load",g),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return n.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return s().catch(i)})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),fe=(t,s)=>{const a=c.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:u="",children:o,...m},h)=>c.createElement("svg",{ref:h,...Wi,width:n,height:n,stroke:r,strokeWidth:l?Number(i)*24/Number(n):i,className:["lucide",`lucide-${Vi(t)}`,u].join(" "),...m},[...s.map(([d,g])=>c.createElement(d,g)),...Array.isArray(o)?o:[o]]));return a.displayName=`${t}`,a};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=fe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=fe("AlarmClockCheck",[["circle",{cx:"12",cy:"13",r:"8",key:"3y4lt7"}],["path",{d:"M5 3 2 6",key:"18tl5t"}],["path",{d:"m22 6-3-3",key:"1opdir"}],["path",{d:"M6.38 18.7 4 21",key:"17xu3x"}],["path",{d:"M17.64 18.67 20 21",key:"kv2oe2"}],["path",{d:"m9 13 2 2 4-4",key:"6343dt"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=fe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=fe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=fe("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=fe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=fe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=fe("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=fe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=fe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=fe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=fe("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=fe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=fe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=fe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=fe("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=fe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=fe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=fe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=fe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=fe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=fe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=fe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=fe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=fe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=fe("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=fe("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=fe("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=fe("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=fe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=fe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=fe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=fe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=fe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=fe("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=fe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=fe("FilterX",[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055",key:"1fi1da"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=fe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=fe("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=fe("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=fe("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=fe("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=fe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=fe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=fe("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=fe("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=fe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=fe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=fe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=fe("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=fe("Layers3",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m6.08 9.5-3.5 1.6a1 1 0 0 0 0 1.81l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9a1 1 0 0 0 0-1.83l-3.5-1.59",key:"1e5n1m"}],["path",{d:"m6.08 14.5-3.5 1.6a1 1 0 0 0 0 1.81l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9a1 1 0 0 0 0-1.83l-3.5-1.59",key:"1iwflc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=fe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=fe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=fe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=fe("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=fe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=fe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=fe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=fe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=fe("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=fe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=fe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=fe("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=fe("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=fe("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=fe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=fe("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=fe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=fe("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=fe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=fe("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=fe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=fe("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=fe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=fe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=fe("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=fe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=fe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=fe("Sliders",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=fe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=fe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=fe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=fe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=fe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=fe("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=fe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=fe("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=fe("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=fe("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=fe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=fe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=fe("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=fe("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=fe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=fe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Nl=[{id:1,title:"Task deadline approaching",time:"2 min ago",type:"warning"},{id:2,title:"New team member added",time:"1 hour ago",type:"info"},{id:3,title:"Budget alert triggered",time:"3 hours ago",type:"error"},{id:4,title:"Project milestone completed",time:"1 day ago",type:"success"}];function ga(){return[{id:"blue",name:"Blue",description:"Calm, trustworthy and stable",preview:"#3b82f6",colors:{primary:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a"}}},{id:"borealTeal",name:"Boreal Teal",description:"A calm, nature inspired theme",preview:"#0F6973",colors:{primary:{50:"#F2F8F8",100:"#E5F0F0",200:"#DAE7E7",300:"#BBD3D3",400:"#80AEB1",500:"#488C92",600:"#0F6973",700:"#0F555F",800:"#0A414B",900:"#05373C"}}},{id:"emerald",name:"Emerald",description:"Nature-inspired, fresh green theme",preview:"#10b981",colors:{primary:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b"}}},{id:"purple",name:"Purple",description:"Creative and premium",preview:"#a855f7",colors:{primary:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7c3aed",800:"#6b21a8",900:"#581c87"}}},{id:"fuchsia",name:"Fuchsia",description:"Vibrant and energetic pink-purple",preview:"#d946ef",colors:{primary:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#d8b4fe",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75"}}},{id:"rose",name:"Rose",description:"Warm pink-red",preview:"#f43f5e",colors:{primary:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337"}}},{id:"orange",name:"Orange",description:"Bright, fruity, and energetic",preview:"#f97316",colors:{primary:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12"}}}]}class wl{constructor(){ys(this,"authServiceUrl");ys(this,"coreServiceUrl");ys(this,"integrationServiceUrl");this.authServiceUrl="https://auth-service-934386870199.us-central1.run.app",this.coreServiceUrl="https://core-service-934386870199.us-central1.run.app/api",this.integrationServiceUrl="/api/integration"}getServiceUrl(s){return s.startsWith("/auth/")||s.includes("/rbac/")||s.includes("/api-keys")||s.includes("/access-logs")?`${this.authServiceUrl}${s}`:s.includes("/integrations")||s.includes("/mappings")||s.includes("/preview")||s.includes("/process")||s.includes("/upload")&&!s.includes("/settings")||s.includes("/entities")?`${this.integrationServiceUrl}${s}`:s.includes("/users")||s.includes("/units")||s.includes("/dashboard/")||s.includes("/analytics/")||s.includes("/system/")||s.includes("/settings")||s.includes("/ui-settings")||s.includes("/user-settings")||s.includes("/custom-fields")||s.includes("/pay-periods")||s.includes("/overtime-rules")||s.includes("/shift-rules")||s.includes("/break-rules")||s.includes("/labour-rates")||s.includes("/pay-groups")||s.includes("/wbs")||s.includes("/projects")||s.includes("/tasks")||s.includes("/cost-codes")||s.includes("/divisions")||s.includes("/vendors")?`${this.coreServiceUrl}${s}`:`${this.coreServiceUrl}${s}`}async request(s,a={}){const r=this.getServiceUrl(s),n=localStorage.getItem("spacerivers_token"),i={headers:{"Content-Type":"application/json",...n&&{Authorization:`Bearer ${n}`},...a.headers}};try{const l=await fetch(r,{...i,...a}),u=await l.json();return l.ok?s.includes("/auth/")?{success:u.success!==!1,data:u,message:u.message}:{success:!0,data:u,message:u.message}:{success:!1,error:u.error||u.message||`HTTP ${l.status}`,message:u.error||u.message||"Request failed"}}catch(l){return{success:!1,error:l instanceof Error?l.message:"Network error",message:"Network error occurred"}}}async get(s){return this.request(s,{method:"GET"})}async post(s,a){return this.request(s,{method:"POST",body:a?JSON.stringify(a):void 0})}async put(s,a){return this.request(s,{method:"PUT",body:a?JSON.stringify(a):void 0})}async delete(s){return this.request(s,{method:"DELETE"})}async patch(s,a){return this.request(s,{method:"PATCH",body:a?JSON.stringify(a):void 0})}}const le=new wl,Sl={get:()=>le.get("/analytics")},Cl={stats:async()=>({success:!0,data:{totalJobs:0,completedJobs:0,failedJobs:0,totalCopies:0,reprints:0,activePrinters:0}})},Bm={listStagingEmployees:t=>{const s=new URLSearchParams({...t!=null&&t.page?{page:String(t.page)}:{},...t!=null&&t.limit?{limit:String(t.limit)}:{},...t!=null&&t.status?{status:t.status}:{},...t!=null&&t.validationStatus?{validationStatus:t.validationStatus}:{},...t!=null&&t.q?{q:t.q}:{}}).toString();return le.get(`/inbound/employees${s?`?${s}`:""}`)},validateStagingEmployees:t=>le.post("/inbound/employees/validate",{ids:t}),moveStagingEmployees:t=>le.post("/inbound/employees/move",{ids:t}),rejectStagingEmployees:(t,s)=>le.post("/inbound/employees/reject",{ids:t,reason:s}),getAuditLogs:t=>{const s=new URLSearchParams({...t!=null&&t.entityType?{entityType:t.entityType}:{},...t!=null&&t.recordId?{recordId:t.recordId}:{},...t!=null&&t.page?{page:String(t.page)}:{},...t!=null&&t.limit?{limit:String(t.limit)}:{}}).toString();return le.get(`/inbound/audit-logs${s?`?${s}`:""}`)},compareStagingEmployee:t=>le.get(`/inbound/employees/${t}/compare`),deleteStagingEmployee:t=>le.delete(`/inbound/employees/${t}`),deleteStagingEmployees:t=>le.post("/inbound/employees/delete",{ids:t}),updateStagingEmployeeStatus:(t,s)=>le.patch(`/inbound/employees/${t}/status`,{status:s}),listStagingProjects:t=>{const s=new URLSearchParams({...t!=null&&t.page?{page:String(t.page)}:{},...t!=null&&t.limit?{limit:String(t.limit)}:{},...t!=null&&t.status?{status:t.status}:{},...t!=null&&t.validationStatus?{validationStatus:t.validationStatus}:{},...t!=null&&t.q?{q:t.q}:{}}).toString();return le.get(`/inbound/projects${s?`?${s}`:""}`)},validateStagingProjects:t=>le.post("/inbound/projects/validate",{ids:t}),moveStagingProjects:t=>le.post("/inbound/projects/move",{ids:t}),rejectStagingProjects:(t,s)=>le.post("/inbound/projects/reject",{ids:t,reason:s}),compareStagingProject:t=>le.get(`/inbound/projects/${t}/compare`),deleteStagingProject:t=>le.delete(`/inbound/projects/${t}`),deleteStagingProjects:t=>le.post("/inbound/projects/delete",{ids:t}),updateStagingProjectStatus:(t,s)=>le.patch(`/inbound/projects/${t}/status`,{status:s}),listStagingPhases:t=>{const s=new URLSearchParams({...t!=null&&t.page?{page:String(t.page)}:{},...t!=null&&t.limit?{limit:String(t.limit)}:{},...t!=null&&t.status?{status:t.status}:{},...t!=null&&t.validationStatus?{validationStatus:t.validationStatus}:{},...t!=null&&t.q?{q:t.q}:{}}).toString();return le.get(`/inbound/phases${s?`?${s}`:""}`)},validateStagingPhases:t=>le.post("/inbound/phases/validate",{ids:t}),moveStagingPhases:t=>le.post("/inbound/phases/move",{ids:t}),rejectStagingPhases:(t,s)=>le.post("/inbound/phases/reject",{ids:t,reason:s}),compareStagingPhase:t=>le.get(`/inbound/phases/${t}/compare`),deleteStagingPhase:t=>le.delete(`/inbound/phases/${t}`),deleteStagingPhases:t=>le.post("/inbound/phases/delete",{ids:t}),updateStagingPhaseStatus:(t,s)=>le.patch(`/inbound/phases/${t}/status`,{status:s})},Qe={getPayPeriods:(t,s)=>le.get(`/pay-periods${t||s!==void 0?"?"+new URLSearchParams({q:t,inUse:s==null?void 0:s.toString()}).toString():""}`),getPayPeriod:t=>le.get(`/pay-periods/${t}`),createPayPeriod:t=>le.post("/pay-periods",t),updatePayPeriod:(t,s)=>le.put(`/pay-periods/${t}`,s),deletePayPeriod:t=>le.delete(`/pay-periods/${t}`),getOvertimeRules:(t,s)=>le.get(`/overtime-rules${t||s!==void 0?"?"+new URLSearchParams({q:t,inUse:s==null?void 0:s.toString()}).toString():""}`),getOvertimeRule:t=>le.get(`/overtime-rules/${t}`),createOvertimeRule:t=>le.post("/overtime-rules",t),updateOvertimeRule:(t,s)=>le.put(`/overtime-rules/${t}`,s),deleteOvertimeRule:t=>le.delete(`/overtime-rules/${t}`),getShiftRules:(t,s)=>le.get(`/shift-rules${t||s!==void 0?"?"+new URLSearchParams({q:t,inUse:s==null?void 0:s.toString()}).toString():""}`),getShiftRule:t=>le.get(`/shift-rules/${t}`),createShiftRule:t=>le.post("/shift-rules",t),updateShiftRule:(t,s)=>le.put(`/shift-rules/${t}`,s),deleteShiftRule:t=>le.delete(`/shift-rules/${t}`),getBreakRules:(t,s)=>le.get(`/break-rules${t||s!==void 0?"?"+new URLSearchParams({q:t,inUse:s==null?void 0:s.toString()}).toString():""}`),getBreakRule:t=>le.get(`/break-rules/${t}`),createBreakRule:t=>le.post("/break-rules",t),updateBreakRule:(t,s)=>le.put(`/break-rules/${t}`,s),deleteBreakRule:t=>le.delete(`/break-rules/${t}`),getLabourRates:(t,s)=>le.get(`/labour-rates${t||s!==void 0?"?"+new URLSearchParams({q:t,inUse:s==null?void 0:s.toString()}).toString():""}`),getLabourRate:t=>le.get(`/labour-rates/${t}`),createLabourRate:t=>le.post("/labour-rates",t),updateLabourRate:(t,s)=>le.put(`/labour-rates/${t}`,s),deleteLabourRate:t=>le.delete(`/labour-rates/${t}`),getPayGroups:(t,s)=>le.get(`/pay-groups${t||s!==void 0?"?"+new URLSearchParams({q:t,inUse:s==null?void 0:s.toString()}).toString():""}`),getPayGroup:t=>le.get(`/pay-groups/${t}`),createPayGroup:t=>le.post("/pay-groups",t),updatePayGroup:(t,s)=>le.put(`/pay-groups/${t}`,s),deletePayGroup:t=>le.delete(`/pay-groups/${t}`)},hr=c.createContext(void 0),kl=({children:t})=>{const[s,a]=c.useState(null),[r,n]=c.useState([]),[i,l]=c.useState(!0),[u,o]=c.useState(null),m=async()=>{var v,j;try{l(!0),o(null),console.log("Loading theme from API...");const D=await le.get("/settings/ui_theme");console.log("Theme response:",D.data);const C=D.data;if(!C)throw new Error("No theme data received");a(C),d(C)}catch(D){console.error("Failed to load theme:",D);const C=((j=(v=D.response)==null?void 0:v.data)==null?void 0:j.error)||D.message||"Failed to load theme settings";o(C);const f=g();a(f),d(f)}finally{l(!1)}},h=async()=>{try{n(ga())}catch(v){console.error("Failed to load available themes:",v),n(ga())}},d=v=>{var D,C;const j=document.documentElement;if(console.log("Applying theme to DOM:",((D=v.theme)==null?void 0:D.name)||"unknown"),(C=v.theme)!=null&&C.colors){const f=v.theme.colors;Object.entries(f.primary).forEach(([w,b])=>{j.style.setProperty(`--color-primary-${w}`,b)}),j.style.setProperty("--tw-ring-color",v.theme.colors.primary[500]),Object.entries(f.secondary).forEach(([w,b])=>{j.style.setProperty(`--color-secondary-${w}`,b)}),Object.entries(f.success).forEach(([w,b])=>{j.style.setProperty(`--color-success-${w}`,b)}),Object.entries(f.warning).forEach(([w,b])=>{j.style.setProperty(`--color-warning-${w}`,b)}),Object.entries(f.danger).forEach(([w,b])=>{j.style.setProperty(`--color-danger-${w}`,b)})}if(v.typography){const f=v.typography;j.style.setProperty("--font-family-primary",f.fontFamily.primary),j.style.setProperty("--font-family-secondary",f.fontFamily.secondary),j.style.setProperty("--font-family-mono",f.fontFamily.mono),Object.entries(f.fontSize).forEach(([w,b])=>{j.style.setProperty(`--font-size-${w}`,b)}),Object.entries(f.fontWeight).forEach(([w,b])=>{j.style.setProperty(`--font-weight-${w}`,b)})}if(v.layout){const f=v.layout;j.style.setProperty("--sidebar-width",f.sidebar.width),j.style.setProperty("--header-height",f.header.height),j.style.setProperty("--content-max-width",f.content.maxWidth),j.style.setProperty("--content-padding",f.content.padding)}if(v.components){const f=v.components;j.style.setProperty("--button-border-radius",f.button.borderRadius),j.style.setProperty("--button-shadow",f.button.shadow),j.style.setProperty("--card-border-radius",f.card.borderRadius),j.style.setProperty("--card-shadow",f.card.shadow),j.style.setProperty("--card-padding",f.card.padding),j.style.setProperty("--input-border-radius",f.input.borderRadius),j.style.setProperty("--input-border-width",f.input.borderWidth)}},g=()=>({theme:{name:"blue",colors:{primary:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a"},secondary:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827"},success:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b"},warning:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f"},danger:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d"},information:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e"}}},typography:{fontFamily:{primary:"'Century Gothic', 'CenturyGothic', 'ui-sans-serif', 'system-ui', 'sans-serif'",secondary:"system-ui",mono:"JetBrains Mono"},fontSize:{xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem"},fontWeight:{normal:"400",medium:"500",semibold:"600",bold:"700"}},layout:{sidebar:{width:"280px",collapsed:!1,position:"left"},header:{height:"64px",sticky:!0},content:{maxWidth:"1200px",padding:"24px"}},components:{button:{borderRadius:"0.5rem",shadow:"sm",animation:"smooth"},card:{borderRadius:"0.75rem",shadow:"md",padding:"1rem"},input:{borderRadius:"0.5rem",borderWidth:"1px",focusRing:!0}}}),p=async v=>{var j,D;try{if(o(null),!s)throw console.error("Cannot update theme: no current theme loaded"),new Error("No theme loaded");const C={...s,...v},f={theme:C.theme,typography:C.typography,layout:C.layout,components:C.components};console.log("Sending clean theme update:",Object.keys(f)),a(f),d(f)}catch(C){console.error("Failed to update theme:",C);const f=((D=(j=C.response)==null?void 0:j.data)==null?void 0:D.error)||C.message||"Failed to update theme settings";throw o(f),C}},x=async()=>{try{o(null),await le.post("/ui-settings/reset"),await m()}catch(v){throw console.error("Failed to reset theme:",v),o("Failed to reset theme settings"),v}},A=async v=>{try{o(null);const j=r.find(C=>C.id===v);if(!j)throw new Error("Theme not found");const D={...s,theme:{name:j.name,colors:{...s==null?void 0:s.theme.colors,primary:j.colors.primary}}};await p(D)}catch(j){throw console.error("Failed to apply theme:",j),o("Failed to apply theme"),j}},y=async()=>{await m()};c.useEffect(()=>{n(ga()),m(),h()},[]);const N={theme:s,availableThemes:r,isLoading:i,error:u,updateTheme:p,resetTheme:x,applyTheme:A,refreshTheme:y};return e.jsx(hr.Provider,{value:N,children:t})},Tl=()=>{const t=c.useContext(hr);return t===void 0?{theme:null,availableThemes:[],isLoading:!0,error:null,updateTheme:async()=>{},resetTheme:async()=>{},applyTheme:async()=>{},refreshTheme:async()=>{}}:t},Dl="/assets/vendor-fokN_5Yg.png",Rn=({setShowState:t,elementRef:s})=>{c.useEffect(()=>{const a=r=>{s.current&&!s.current.contains(r.target)&&t(!1)};return t?document.addEventListener("mousedown",a):document.removeEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[t])},Il=({notifications:t})=>{const[s,a]=c.useState(!1),r=c.useRef(null);return Rn({setShowState:a,elementRef:r}),e.jsxs("div",{className:"relative z-[60]",ref:r,children:[e.jsxs("button",{onClick:()=>a(!s),className:"relative p-3 rounded-full header-button text-white",children:[e.jsx(Ys,{size:20}),e.jsx("div",{className:"absolute top-1 right-2 w-2 h-2 bg-red-400 text-xs rounded-full flex p-2 justify-center items-center",children:t.length})]}),s&&e.jsxs("div",{className:"absolute p-3 right-0 top-full mt-2 w-80 bg-white shadow-xl border border-gray-200 rounded-lg",style:{boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)",zIndex:9999},children:[e.jsx("div",{className:"p-2 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold header-text",children:"Notifications"}),e.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700",children:"Mark all read"})]})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:t.map(n=>e.jsx("div",{className:"p-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-1 ${n.type==="warning"?"bg-yellow-500":n.type==="error"?"bg-red-500":n.type==="success"?"bg-green-500":"bg-blue-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.title}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.time})]})]})},n.id))}),e.jsx("div",{className:"p-3 border-t border-gray-200",children:e.jsx("button",{className:"w-full text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View all notifications"})})]})]})},Al=[{id:1,icon:e.jsx(Ot,{className:"text-blue-500 w-5 h-5"}),name:"Office Building",status:"In Progress",team:"Construction Crew A",due:"Nov 12, 2025"},{id:2,icon:e.jsx(Ot,{className:"text-green-500 w-5 h-5"}),name:"Highway Bridge",status:"Completed",team:"Bridge Team Alpha",due:"Oct 5, 2025"},{id:3,icon:e.jsx(Ot,{className:"text-yellow-500 w-5 h-5"}),name:"Shopping Mall",status:"Delayed",team:"Retail Division",due:"Dec 20, 2025"}],Pl=[{id:1,icon:e.jsx(Ze,{className:"text-green-500 w-5 h-5"}),title:"Task completed: Foundation Work",user:"John Smith",time:"2 minutes ago"},{id:2,icon:e.jsx(_e,{className:"text-blue-500 w-5 h-5"}),title:"New project: Office Building",user:"Sarah Johnson",time:"1 hour ago"},{id:3,icon:e.jsx(Ct,{className:"text-yellow-500 w-5 h-5"}),title:"Deadline approaching: Electrical Installation",user:"Mike Wilson",time:"3 hours ago"},{id:4,icon:e.jsx(ot,{className:"text-purple-500 w-5 h-5"}),title:"Team updated: Construction Crew A",user:"Lisa Brown",time:"5 hours ago"}],El=({showActivities:t,setShowActivities:s})=>{const[a,r]=c.useState("activity");return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 bg-black/30 z-[9998]",onClick:()=>s(!1)}),e.jsxs("div",{className:`fixed top-0 right-0 h-full w-96 bg-white shadow-xl z-50 transform transition-transform duration-300 z-[9999] ${t?"translate-x-0":"translate-x-full"}`,children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Recent Activities"}),e.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("div",{className:"p-4 h-full flex flex-col",children:[e.jsxs("div",{className:"relative flex bg-gray-100 rounded-full p-1 mb-4",children:[e.jsx("button",{onClick:()=>r("projects"),className:`flex-1 py-2 text-sm font-medium rounded-full transition-all ${a==="projects"?"bg-white shadow text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Projects"}),e.jsx("button",{onClick:()=>r("activity"),className:`flex-1 py-2 text-sm font-medium rounded-full transition-all ${a==="activity"?"bg-white shadow text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Activity"})]}),e.jsxs("div",{className:"overflow-y-auto flex-1 space-y-3 pr-1",children:[a==="projects"&&Al.map(n=>e.jsxs("div",{className:"flex items-start space-x-3 bg-gray-50 hover:bg-gray-100 rounded-lg p-3 transition cursor-pointer",children:[e.jsx("div",{children:n.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:n.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[n.team,"  Due ",n.due]}),e.jsx("p",{className:`text-xs font-medium mt-1 ${n.status==="Completed"?"text-green-600":n.status==="In Progress"?"text-blue-600":"text-yellow-600"}`,children:n.status})]})]},n.id)),a==="activity"&&Pl.map(n=>e.jsxs("div",{className:"flex items-start space-x-3 bg-gray-50 hover:bg-gray-100 rounded-lg p-3 transition cursor-pointer",children:[e.jsx("div",{children:n.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:n.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:[n.user,"  ",n.time]})]})]},n.id))]})]})]})]})},pt={Dashboard:["dashboard_view"],Jobs:["projects_view","tasks_view","wbs_view"],Schedule:["scheduling_view"],TimeOff:["timemanagement_view"],Reports:["reports_view"],Data:["units_view","divisions_view","categories_view","cost_codes_view","vendors_view"],Auth:["users_view","rbac_modules_view","rbac_permissions_view","rbac_roles_view"],System:["system_view"]},Ln=[{id:"home",title:"Home",link:"/dashboard",icon:rl,permissions:pt.Dashboard},{id:"jobs",title:"Jobs",link:"",icon:Ot,permissions:pt.Jobs,subRoutes:[{id:"projects",title:"Projects",link:"/project-planning/projects",icon:el,permissions:pt.Jobs},{id:"phases",title:"Phases",link:"/project-planning/phases",icon:Dn,permissions:pt.Jobs},{id:"wbs",title:"WBS",link:"/project-planning/wbs",icon:tl,permissions:pt.Jobs}]},{id:"schedule",title:"Schedule",link:"",icon:Je,permissions:pt.Schedule,subRoutes:[{id:"schedule-view",title:"Schedule",link:"/scheduling/view",icon:Je,permissions:pt.Schedule},{id:"dependencies",title:"Dependencies",link:"/scheduling/dependencies",icon:Fa,permissions:pt.Schedule},{id:"critical-path",title:"Critical Path",link:"/scheduling/critical-path",icon:Pn,permissions:pt.Schedule}]},{id:"time-off",title:"Time Off",link:"",icon:Oe,permissions:pt.TimeOff,subRoutes:[{id:"time-editor",title:"Time Editor",link:"/time-management/time-editor",icon:Yi,permissions:pt.TimeOff},{id:"time-clock",title:"Time Clock",link:"/time-management/time-clock",icon:Oe,permissions:pt.TimeOff},{id:"time-sheet",title:"Time Sheet",link:"/time-management/time-sheet",icon:Je,permissions:pt.TimeOff}]},{id:"reports",title:"Reports",link:"/reports",icon:_t,permissions:pt.Reports},{id:"integration",title:"Integration",link:"/admin/integrations",icon:Qs},{id:"more",title:"More",link:"",icon:ea,subRoutes:[{id:"data",title:"Data",link:"/master-data",icon:wn,permissions:pt.Data},{id:"auth",title:"Auth",link:"/admin/auth",icon:ms,permissions:pt.Auth},{id:"process",title:"Process",link:"/admin/process",icon:Zi},{id:"system",title:"System",link:"/admin/system",icon:hl,permissions:pt.System},{id:"settings",title:"Settings",link:"/settings",icon:kt}]}],Ml=()=>{const[t,s]=c.useState(""),[a,r]=c.useState(!1),n=Ln.filter(i=>i.title.toLowerCase().includes(t.toLowerCase()));return e.jsxs("div",{className:"relative z-[60]",children:[e.jsx("button",{onClick:()=>r(!a),className:"relative p-3 rounded-full header-button text-white",children:e.jsx(xt,{size:20})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>r(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-2xl p-6",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 border-b pb-4",children:[e.jsx(xt,{className:"text-gray-500"}),e.jsx("input",{type:"text",autoFocus:!0,placeholder:"Search...",value:t,onChange:i=>s(i.target.value),className:"w-full outline-none px-2 py-1 text-gray-700 focus:outline-none focus:ring-0 focus:border-transparent"}),e.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsx("div",{className:"mt-4 max-h-60 overflow-y-auto min-h-[300px] ",children:n.length>0?e.jsx("ul",{className:"space-y-2",children:n.map((i,l)=>e.jsx("li",{className:"p-2 rounded-lg hover:bg-gray-100 cursor-pointer",children:i.title},l))}):e.jsx("p",{className:"text-center text-gray-500 py-4",children:"No results found."})})]})})]})};class Fl{constructor(){ys(this,"baseUrl");this.baseUrl="https://auth-service-934386870199.us-central1.run.app"}async request(s,a={}){const r=`${this.baseUrl}${s}`,n=localStorage.getItem("spacerivers_token"),i={"Content-Type":"application/json",...a.headers};n&&(i.Authorization=`Bearer ${n}`);const l=await fetch(r,{...a,headers:i});if(!l.ok){const u=await l.json().catch(()=>({}));throw new Error(u.detail||`HTTP error! status: ${l.status}`)}return l.status===204||l.headers.get("content-length")==="0"?{}:l.json()}async login(s){return this.request("/auth/login",{method:"POST",body:JSON.stringify(s)})}async selectTenant(s){return this.request("/auth/select-tenant",{method:"POST",body:JSON.stringify(s)})}async getCurrentUser(){return this.request("/auth/me/")}async refreshToken(){return this.request("/auth/refresh/",{method:"POST"})}async logout(){await this.request("/auth/logout/",{method:"POST"})}async getUsers(s){const a=new URLSearchParams;s!=null&&s.skip&&a.append("skip",s.skip.toString()),s!=null&&s.limit&&a.append("limit",s.limit.toString()),s!=null&&s.search&&a.append("search",s.search);const r=a.toString(),n=r?`/users/?${r}`:"/users/";return this.request(n)}async getUser(s){return this.request(`/users/${s}`)}async createUser(s){return this.request("/users/",{method:"POST",body:JSON.stringify(s)})}async updateUser(s,a){return this.request(`/users/${s}`,{method:"PUT",body:JSON.stringify(a)})}async deleteUser(s){await this.request(`/users/${s}`,{method:"DELETE"})}async getMyProfile(){return this.request("/users/me/profile/")}async updateMyProfile(s){return this.request("/users/me/profile/",{method:"PUT",body:JSON.stringify(s)})}async getModules(s){const a=new URLSearchParams;s!=null&&s.skip&&a.append("skip",s.skip.toString()),s!=null&&s.limit&&a.append("limit",s.limit.toString()),s!=null&&s.search&&a.append("search",s.search);const r=a.toString(),n=r?`/rbac/modules/?${r}`:"/rbac/modules/";return this.request(n)}async getModule(s){return this.request(`/rbac/modules/${s}`)}async createModule(s){return this.request("/rbac/modules/",{method:"POST",body:JSON.stringify(s)})}async updateModule(s,a){return this.request(`/rbac/modules/${s}`,{method:"PUT",body:JSON.stringify(a)})}async deleteModule(s){await this.request(`/rbac/modules/${s}`,{method:"DELETE"})}async getPermissions(s){const a=new URLSearchParams;s!=null&&s.skip&&a.append("skip",s.skip.toString()),s!=null&&s.limit&&a.append("limit",s.limit.toString()),s!=null&&s.search&&a.append("search",s.search);const r=a.toString(),n=r?`/rbac/permissions/?${r}`:"/rbac/permissions/";return this.request(n)}async getPermission(s){return this.request(`/rbac/permissions/${s}`)}async getPermissionsByModule(s){return this.request(`/rbac/permissions/module/${s}`)}async createPermission(s){return this.request("/rbac/permissions/",{method:"POST",body:JSON.stringify(s)})}async updatePermission(s,a){return this.request(`/rbac/permissions/${s}`,{method:"PUT",body:JSON.stringify(a)})}async deletePermission(s){await this.request(`/rbac/permissions/${s}`,{method:"DELETE"})}async getRoles(s){const a=new URLSearchParams;s!=null&&s.skip&&a.append("skip",s.skip.toString()),s!=null&&s.limit&&a.append("limit",s.limit.toString()),s!=null&&s.search&&a.append("search",s.search);const r=a.toString(),n=r?`/rbac/roles/?${r}`:"/rbac/roles/";return this.request(n)}async getRole(s){return this.request(`/rbac/roles/${s}`)}async createRole(s){return this.request("/rbac/roles/",{method:"POST",body:JSON.stringify(s)})}async updateRole(s,a){return this.request(`/rbac/roles/${s}`,{method:"PUT",body:JSON.stringify(a)})}async deleteRole(s){await this.request(`/rbac/roles/${s}`,{method:"DELETE"})}async getApiKeys(s){const a=new URLSearchParams;s!=null&&s.skip&&a.append("skip",s.skip.toString()),s!=null&&s.limit&&a.append("limit",s.limit.toString()),s!=null&&s.search&&a.append("search",s.search);const r=a.toString(),n=r?`/api-keys/?${r}`:"/api-keys/";return this.request(n)}async getApiKey(s){return this.request(`/api-keys/${s}`)}async createApiKey(s){return this.request("/api-keys/",{method:"POST",body:JSON.stringify(s)})}async updateApiKey(s,a){return this.request(`/api-keys/${s}`,{method:"PUT",body:JSON.stringify(a)})}async deleteApiKey(s){await this.request(`/api-keys/${s}`,{method:"DELETE"})}async regenerateApiKey(s){return this.request(`/api-keys/${s}/regenerate/`,{method:"POST"})}async healthCheck(){return this.request("/health/")}}const mt=new Fl;class Rl{constructor(){ys(this,"tokenKey","spacerivers_token");ys(this,"userKey","spacerivers_user")}getToken(){return localStorage.getItem(this.tokenKey)}getUser(){const s=localStorage.getItem(this.userKey);return s?JSON.parse(s):null}setAuth(s,a){localStorage.setItem(this.tokenKey,s),localStorage.setItem(this.userKey,JSON.stringify(a))}clearAuth(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.userKey)}async login(s){try{console.log("Attempting login with:",s.email);const a=await mt.login(s);return console.log("FastAPI response:",a),a.requires_tenant_selection?{requires_tenant_selection:!0,available_tenants:a.available_tenants}:a.access_token&&a.user?(this.setAuth(a.access_token,a.user),{success:!0,token:a.access_token,user:a.user}):(console.log("Login failed, returning error"),{success:!1,error:"Login failed"})}catch(a){return console.log("Login exception in authService:",a),{success:!1,error:a.message||"Login failed"}}}async logout(){try{await mt.logout()}catch(s){console.error("Logout error:",s)}finally{this.clearAuth()}}isAuthenticated(){const s=this.getToken(),a=this.getUser();return!!(s&&a&&a.isActive)}getAuthState(){const s=this.getToken(),a=this.getUser();return{isAuthenticated:!!(s&&a&&a.isActive),user:a,token:s,loading:!1,error:null}}hasPermission(s){const a=this.getUser();return!a||!a.permissions?!1:a.permissions.includes(s)}hasAnyPermission(s){const a=this.getUser();return!a||!a.permissions?!1:s.some(r=>a.permissions.includes(r))}hasAllPermissions(s){const a=this.getUser();return!a||!a.permissions?!1:s.every(r=>a.permissions.includes(r))}async refreshSession(){try{const s=this.getToken();if(!s)return null;const a=await le.get("/auth/me",{headers:{Authorization:`Bearer ${s}`}});return a.success&&a.data&&a.data.data?(this.setAuth(s,a.data.data),a.data.data):null}catch(s){return console.error("Session refresh error:",s),this.clearAuth(),null}}async validateToken(){try{const s=this.getToken();return s?(await le.get("/auth/validate",{headers:{Authorization:`Bearer ${s}`}})).success:!1}catch{return!1}}}const ns=new Rl,Ll={isAuthenticated:!1,user:null,token:null,loading:!0,error:null},Ol=(t,s)=>{switch(s.type){case"LOGIN_START":return{...t,loading:!0,error:null};case"LOGIN_SUCCESS":return{...t,isAuthenticated:!0,user:s.payload.user,token:s.payload.token,loading:!1,error:null};case"LOGIN_FAILURE":return{...t,isAuthenticated:!1,user:null,token:null,loading:!1,error:s.payload};case"LOGOUT":return{...t,isAuthenticated:!1,user:null,token:null,loading:!1,error:null};case"CLEAR_ERROR":return{...t,error:null};case"SET_LOADING":return{...t,loading:s.payload};default:return t}},On=c.createContext(void 0),zl=({children:t})=>{const[s,a]=c.useReducer(Ol,Ll);c.useEffect(()=>{(async()=>{try{const d=ns.getAuthState();d.isAuthenticated?await ns.validateToken()?a({type:"LOGIN_SUCCESS",payload:{user:d.user,token:d.token}}):(ns.clearAuth(),a({type:"LOGOUT"})):a({type:"SET_LOADING",payload:!1})}catch(d){console.error("Auth initialization error:",d),a({type:"SET_LOADING",payload:!1})}})()},[]);const r=c.useCallback(async h=>{a({type:"LOGIN_START"});try{const d=await ns.login(h);if(console.log("Auth service response:",d),d.requires_tenant_selection)return d;if((d.success||d.token)&&d.user)return a({type:"LOGIN_SUCCESS",payload:{user:d.user,token:d.token}}),d;throw console.log("Login failed, dispatching error:",d.error),a({type:"LOGIN_FAILURE",payload:d.error||"Login failed"}),new Error(d.error||"Login failed")}catch(d){throw console.log("Login exception:",d),a({type:"LOGIN_FAILURE",payload:d.message||"Login failed"}),d}},[]),n=c.useCallback(async()=>{try{await ns.logout()}catch(h){console.error("Logout error:",h)}finally{a({type:"LOGOUT"})}},[]),i=c.useCallback(()=>{a({type:"CLEAR_ERROR"})},[]),l=c.useCallback(h=>ns.hasPermission(h),[]),u=c.useCallback(h=>ns.hasAnyPermission(h),[]),o=c.useCallback(h=>ns.hasAllPermissions(h),[]),m=c.useMemo(()=>({...s,login:r,logout:n,clearError:i,hasPermission:l,hasAnyPermission:u,hasAllPermissions:o}),[s,r,n,i,l,u,o]);return e.jsx(On.Provider,{value:m,children:t})},Ye=()=>{const t=c.useContext(On);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},$l=()=>{const{user:t,logout:s}=Ye(),[a,r]=c.useState(!1),n=c.useRef(null);Rn({setShowState:r,elementRef:n});const i=async()=>{try{await s()}catch(l){console.error(l)}};return e.jsxs("div",{className:"relative z-[60]",ref:n,children:[e.jsx("button",{onClick:()=>r(!a),className:"flex items-center gap-2",children:e.jsx("div",{className:"rounded-full flex items-center justify-center overflow-hidden header-button",style:{width:"44px",height:"44px"},children:e.jsx(wt,{className:"h-5 w-5"})})}),a&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white rounded-lg shadow-xl border border-gray-200",style:{boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)",zIndex:9999},children:[e.jsx("div",{className:"p-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full header-button overflow-hidden border border-gray-800",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(wt,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:(t==null?void 0:t.firstName)||(t==null?void 0:t.email)||"User"}),e.jsx("p",{className:"text-sm text-gray-500",children:(t==null?void 0:t.email)||""})]})]})}),e.jsxs("div",{className:"p-2",children:[e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(wt,{}),"Profile Settings"]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(kt,{}),"Preferences"]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(al,{}),"Help & Support"]}),e.jsx("div",{className:"border-t border-gray-200 my-2"}),e.jsxs("button",{onClick:i,className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(ol,{}),"Sign Out"]})]})]})]})},_l=()=>{const{theme:t}=Tl(),[s,a]=c.useState(!1);return e.jsx("header",{className:"bg-white flex items-center px-2 pe-4 flex-shrink-0 relative z-50",style:{height:(t==null?void 0:t.layout.header.height)||"64px"},children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex gap-1 justify-center items-center px-3",children:[e.jsx("img",{className:"h-10 w-10",src:Dl,alt:"vendor-logo"}),e.jsx("span",{className:"text-xl text-gray-900 font-semibold",style:{fontFamily:(t==null?void 0:t.typography.fontFamily.primary)||'"Segoe UI", sans-serif'},children:"Lunara Constructions"})]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ml,{}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>a(!0),className:"p-3 rounded-full header-button header-button text-white",title:"Recent Projects & Activity",children:e.jsx(Je,{size:20})}),s&&e.jsx(El,{showActivities:s,setShowActivities:a})]}),e.jsx(Il,{notifications:Nl}),e.jsx($l,{})]})]})})},zn="/assets/space-river-logo-evLb63TV.png",Bl=({anchorRect:t,children:s,onMouseEnter:a,onMouseLeave:r})=>{const n=c.useRef(null),[i,l]=c.useState(null),u=()=>{if(!t||!n.current)return l(null);const o=8,m=n.current,h=m.offsetWidth,d=m.offsetHeight,g=window.innerWidth,p=window.innerHeight;let x=t.right+o,A=t.top;x+h>g-o&&(x=t.left-h-o),x<o&&(x=o),A+d>p-o&&(A=Math.max(o,t.bottom-d)),A<o&&(A=o),l({position:"fixed",top:A,left:x,zIndex:9999})};return c.useLayoutEffect(()=>{u()},[t,s]),c.useEffect(()=>{const o=()=>u(),m=()=>u();return window.addEventListener("resize",o),window.addEventListener("scroll",m,!0),()=>{window.removeEventListener("resize",o),window.removeEventListener("scroll",m,!0)}},[t,s]),t?mn.createPortal(e.jsx("div",{ref:n,onMouseEnter:a,onMouseLeave:r,style:i??{position:"fixed",top:t.top,left:t.right+4,zIndex:9999},className:"rounded-lg px-3 py-5 bg-white shadow-xl border border-gray-200",children:s}),document.body):null},Ul=()=>{const[t,s]=c.useState(),[a,r]=c.useState(null),n=Aa(),i=Ti(),l=c.useRef(null),u=()=>{l.current&&(window.clearTimeout(l.current),l.current=null)},o=(m=150)=>{u(),l.current=window.setTimeout(()=>{s(""),r(null),l.current=null},m)};return c.useEffect(()=>()=>u(),[]),e.jsxs("aside",{className:"sidebar h-screen flex flex-col items-center overflow-y-auto",children:[e.jsx("div",{className:"py-3 px-3 flex justify-center items-center border-b border-white",children:e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsx("img",{src:zn,alt:"Space Rivers",className:"w-7 h-7"}),e.jsx("span",{className:"text-[6px] font-semibold text-white pt-1",children:"SPACE RIVERS"})]})}),e.jsx("nav",{className:"flex flex-col p-2 pt-6",children:e.jsx("ul",{className:"space-y-1 flex flex-col gap-3",children:Ln.map(m=>{const{id:h,link:d,icon:g,title:p,subRoutes:x=[]}=m,A=g,y=n.pathname===d||x.some(N=>n.pathname===N.link);return e.jsxs("li",{onMouseEnter:N=>{u(),s(h),r(N.currentTarget.getBoundingClientRect())},onMouseLeave:()=>{o()},children:[e.jsx(ba,{id:`sidebar-${h}`,to:d,onClick:N=>{var v;if(!d){N.preventDefault(),i(((v=x[0])==null?void 0:v.link)||"/");return}s("")},className:`w-full flex items-center justify-center p-1 transition-all duration-200 group rounded-lg hover:bg-white hover:text-blue-700 ${y?"shadow-sm bg-white sidebar-active-text":""} ${t===h?"bg-white text-blue-700":"text-white"}`,children:e.jsxs("div",{className:"flex flex-col justify-center items-center gap-1",children:[e.jsx(A,{className:"h-6 w-6 flex-shrink-0"}),e.jsxs("span",{className:"font-medium text-xs",children:[" ",p]})]})}),!!x.length&&t===h&&e.jsx(Bl,{anchorRect:a,onMouseEnter:()=>{u()},onMouseLeave:()=>{o()},children:e.jsx("ul",{className:"space-y-3",children:x.map(N=>{const{id:v,title:j,link:D,icon:C}=N,f=C,w=n.pathname===D;return e.jsx("li",{children:e.jsx(ba,{to:D,onClick:()=>s(""),className:`block p-2 hover:bg-gray-200 rounded-lg sidebar-active-text hover:text-blue-700 ${w?"bg-gray-300":""}`,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{size:14,className:"h-6 w-6 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm",children:j})]})})},v)})})})]},h)})})})]})},ql={toasts:[]};function Hl(t,s){switch(s.type){case"ADD_TOAST":return{toasts:[s.toast,...t.toasts]};case"REMOVE_TOAST":return{toasts:t.toasts.filter(a=>a.id!==s.id)};case"HIDE_TOAST":return{toasts:t.toasts.map(a=>a.id===s.id?{...a,visible:!1}:a)};case"SHOW_TOAST":return{toasts:t.toasts.map(a=>a.id===s.id?{...a,visible:!0}:a)};case"UPDATE_TOAST":return{toasts:t.toasts.map(a=>a.id===s.id?{...a,...s.patch}:a)};default:return t}}const $n=c.createContext(null);function Wl(t=""){return t+Math.random().toString(36).slice(2,9)}function Vl({intent:t}){switch(t){case"success":return e.jsx(Ze,{className:"w-5 h-5"});case"error":return e.jsx(it,{className:"w-5 h-5"});case"info":return e.jsx(zs,{className:"w-5 h-5"});default:return e.jsx(zs,{className:"w-5 h-5"})}}function Gl(t){const s="fixed z-50 p-4 flex flex-col space-y-2 pointer-events-none w-full max-w-full",a=t.startsWith("top")?"top-4":"bottom-4";let r="";return t.endsWith("left")?r="items-start left-4":t.endsWith("center")?r="items-center left-1/2 transform -translate-x-1/2":r="items-end right-4",`${s} ${a} ${r}`}function Yl({children:t,defaultTimeout:s=5e3}){const[a,r]=c.useReducer(Hl,ql),n=c.useRef({}),i=c.useCallback(o=>{const m=Wl("toast_"),h={id:m,title:o.title,description:o.description,intent:o.intent||"neutral",timeout:typeof o.timeout=="number"?o.timeout:s,delay:o.delay||0,closable:o.closable!==!1,position:o.position||"top-right",createdAt:Date.now(),visible:!1,actions:o.actions,onClose:o.onClose};if(r({type:"ADD_TOAST",toast:h}),h.delay&&h.delay>0){const g=window.setTimeout(()=>r({type:"SHOW_TOAST",id:m}),h.delay);n.current[m]=g}else r({type:"SHOW_TOAST",id:m});if(h.timeout&&h.timeout>0){const g=()=>{const p=window.setTimeout(()=>r({type:"HIDE_TOAST",id:m}),h.timeout);n.current[m]=p};if(h.delay&&h.delay>0){const p=window.setTimeout(g,h.delay+0);n.current[m]=p}else g()}return{id:m,dismiss:()=>{const g=n.current[m];g&&window.clearTimeout(g),r({type:"REMOVE_TOAST",id:m})}}},[s]),l=c.useCallback(o=>{const m=n.current[o];m&&window.clearTimeout(m),r({type:"REMOVE_TOAST",id:o})},[]);c.useEffect(()=>()=>{Object.values(n.current).forEach(o=>{o&&window.clearTimeout(o)}),n.current={}},[]);const u=c.useMemo(()=>{const o={"top-left":[],"top-center":[],"top-right":[],"bottom-left":[],"bottom-center":[],"bottom-right":[]};for(const m of a.toasts)o[m.position].push(m);return o},[a.toasts]);return e.jsxs($n.Provider,{value:{addToast:i,removeToast:l},children:[t,["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"].map(o=>e.jsx("div",{className:Gl(o),"aria-live":"polite",children:e.jsx("div",{className:`w-full max-w-md pointer-events-none ${o.endsWith("center")?"mx-auto":""}`,children:u[o].map(m=>e.jsx(Kl,{toast:m,onRequestClose:()=>{var h;l(m.id),(h=m.onClose)==null||h.call(m)}},m.id))})},o))]})}function Kl({toast:t,onRequestClose:s}){const a=c.useRef(null),r=c.useRef(null);c.useEffect(()=>{if(!t.visible){const i=window.setTimeout(()=>s(),300);return()=>window.clearTimeout(i)}},[t.visible,s]);const n={success:"bg-green-50 border-green-200 text-green-900",error:"bg-red-50 border-red-200 text-red-900",info:"bg-blue-50 border-blue-200 text-blue-900",neutral:"bg-white border-gray-200 text-gray-900"}[t.intent||"neutral"];return e.jsx("div",{className:`pointer-events-auto transform transition-all duration-300 ease-out mb-2 ${t.visible?"opacity-100 translate-y-0":"opacity-0 translate-y-2"} `,children:e.jsxs("div",{onMouseEnter:()=>{r.current&&(r.current.style.animationPlayState="paused"),a.current&&window.clearTimeout(a.current)},onMouseLeave:()=>{r.current&&(r.current.style.animationPlayState="running")},className:`w-full border rounded-lg shadow-sm overflow-hidden ${n} pointer-events-auto flex items-center gap-3 p-3`,children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx(Vl,{intent:t.intent||"neutral"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[t.title&&e.jsx("div",{className:"font-semibold text-sm",children:t.title}),t.description&&e.jsx("div",{className:"text-xs mt-1 line-clamp-3",children:t.description}),t.actions&&e.jsx(e.Fragment,{children:t.actions})]}),t.closable!==!1&&e.jsx("button",{"aria-label":"Close toast",onClick:()=>s(),className:"ml-2 flex-shrink-0 p-1 rounded focus:outline-none focus:ring-2 focus:ring-offset-1",children:e.jsx(zt,{className:"w-4 h-4"})})]})})}function Um(){const t=c.useContext($n);if(!t)throw new Error("useToast must be used within ToastProvider");return t}const Pe=()=>{const t=c.useContext(hr);return t===void 0?{theme:null,availableThemes:[],isLoading:!0,error:null,updateTheme:async()=>{},resetTheme:async()=>{},applyTheme:async()=>{},refreshTheme:async()=>{}}:t},Jl={sm:"max-w-3xl",md:"max-w-4xl",lg:"max-w-5xl",xl:"max-w-7xl","2xl":"max-w-screen-2xl",full:"max-w-full"},Xl={none:"",sm:"px-4 py-4",md:"p-6",lg:"px-8 py-2"},ct=({children:t,maxWidth:s="xl",padding:a="md",centerContent:r=!1,className:n=""})=>e.jsx("div",{className:`
        w-full mx-auto
        ${Jl[s]}
        ${Xl[a]}
        ${r?"flex flex-col items-center":""}
        ${n}
      `,children:t}),Zl={1:"grid-cols-1",2:"grid-cols-1 lg:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-4",6:"grid-cols-2 md:grid-cols-3 lg:grid-cols-6",12:"grid-cols-12"},Ql={none:"gap-0",sm:"gap-1",md:"gap-5",lg:"gap-8",xl:"gap-12"},Js=({children:t,cols:s=3,gap:a="md",responsive:r=!0,className:n=""})=>e.jsx("div",{className:`
        grid
        ${r?Zl[s]:`grid-cols-${s}`}
        ${Ql[a]}
        ${n}
      `,children:t}),Be=({title:t,subtitle:s,description:a,icon:r,children:n,headerActions:i,variant:l="default",spacing:u="md",className:o=""})=>{const{theme:m}=Pe(),h={default:"bg-transparent",bordered:"border rounded-lg bg-white",filled:"bg-gray-50 rounded-lg",elevated:"bg-white shadow-sm border rounded-lg"},g=l==="default"?"":{none:"",sm:"p-1",md:"p-3",lg:"p-8"}[u];return e.jsxs("div",{className:`${h[l]} ${o}`,style:{borderColor:m==null?void 0:m.theme.colors.primary[200]},children:[(t||s||a||i)&&e.jsx("div",{className:`${g} ${l!=="default"?"border-b":"mb-4"}`,style:{borderColor:m==null?void 0:m.theme.colors.primary[200]},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[(t||r)&&e.jsxs("div",{className:`flex items-center gap-3 ${l==="default"?"mb-2":""}`,children:[r&&e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-md flex items-center justify-center bg-primary-100",style:{backgroundColor:m?`${m.theme.colors.primary[100]}`:void 0},children:e.jsx(r,{size:18,className:"text-primary-600",style:{color:m?m.theme.colors.primary[600]:void 0}})}),e.jsxs("div",{className:"flex-1 min-w-0 px-3",children:[t&&e.jsx("h2",{className:`font-semibold ${l==="default"?"text-2xl":"text-lg "}`,style:{color:m==null?void 0:m.theme.colors.primary[900],fontFamily:m==null?void 0:m.typography.fontFamily.primary},children:t}),s&&e.jsx("p",{className:"text-sm text-gray-600 my-2",children:s})]})]}),a&&e.jsx("p",{className:"mt-2 text-sm text-gray-600 leading-relaxed",children:a})]}),i&&e.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:i})]})}),e.jsx("div",{className:l==="default"?"":g,children:n})]})},ta=({children:t,spacing:s="md",className:a=""})=>{const r={sm:"space-y-4",md:"space-y-6",lg:"space-y-8",xl:"space-y-12"};return e.jsx("div",{className:`${r[s]} ${a}`,children:t})},eo=()=>{const{theme:t}=Pe(),[s,a]=c.useState(""),r=(u,o)=>{navigator.clipboard.writeText(u),a(o),setTimeout(()=>a(""),2e3)},n=[{title:"Create New Unit",description:"Create a new measurement unit in the system",method:"POST",endpoint:"/api/units",headers:{"X-API-Key":"your_api_key_here","Content-Type":"application/json"},body:`{
  "name": "Kilogram",
  "symbol": "kg",
  "type": "weight",
  "description": "Unit of mass"
}`,response:`{
  "message": "Unit created successfully",
  "unit": {...}
}`}],i=[{name:"X-API-Key Header",description:"Include your API key in the request header",example:"X-API-Key: tk_your_api_key_here"},{name:"Authorization Header",description:"Use Bearer token format",example:"Authorization: Bearer tk_your_api_key_here"}],l=[{permission:"units:read",description:"Read access to units",endpoints:["GET /api/units","GET /api/units/{id}"]},{permission:"units:write",description:"Create and update units",endpoints:["POST /api/units","PUT /api/units/{id}"]},{permission:"units:delete",description:"Delete units",endpoints:["DELETE /api/units/{id}"]},{permission:"analytics:read",description:"Read access to analytics data",endpoints:["GET /api/analytics/*"]},{permission:"system:admin",description:"Full administrative access",endpoints:["All endpoints"]}];return e.jsx(ct,{maxWidth:"full",padding:"lg",children:e.jsxs(ta,{spacing:"lg",children:[e.jsx(Be,{title:"API Documentation",subtitle:"Learn how to integrate with the Civica API",icon:jn,variant:"default"}),e.jsx(Be,{title:"Base URL",icon:Qs,variant:"elevated",children:e.jsx("div",{className:"bg-gray-100 p-1 rounded-lg",children:e.jsx("code",{className:"text-base font-mono",children:"https://your-domain.com/api"})})}),e.jsxs(Be,{title:"Authentication",icon:ms,variant:"elevated",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"All API requests require authentication using an API key. You can include your API key in the request headers."}),e.jsx("div",{className:"space-y-4",children:i.map((u,o)=>e.jsxs("div",{className:"border rounded-lg p-1",style:{borderColor:t==null?void 0:t.theme.colors.primary[200]},children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:u.name}),e.jsx("p",{className:"text-gray-600 mb-2",children:u.description}),e.jsx("div",{className:"bg-gray-100 p-3 rounded",children:e.jsx("code",{className:"text-sm",children:u.example})})]},o))})]}),e.jsx(Be,{title:"API Permissions",subtitle:"API keys can be configured with specific permissions to control access to different endpoints.",icon:Oa,variant:"elevated",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permission"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Endpoints"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((u,o)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("code",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm",children:u.permission})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:u.description}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsx("ul",{className:"space-y-1",children:u.endpoints.map((m,h)=>e.jsx("li",{className:"font-mono text-xs",children:m},h))})})]},o))})]})})}),e.jsx(Be,{title:"Code Examples",icon:Xi,variant:"elevated",children:e.jsx("div",{className:"space-y-6",children:n.map((u,o)=>e.jsxs("div",{className:"border rounded-lg p-1",style:{borderColor:t==null?void 0:t.theme.colors.primary[200]},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:u.title}),e.jsx("p",{className:"text-sm -gray-600 mt-1",children:u.description})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${u.method==="GET"?"bg-green-100 text-green-800":u.method==="POST"?"bg-blue-100 text-blue-800":u.method==="PUT"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:u.method})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-gray-900 mb-2",children:"Endpoint"}),e.jsxs("div",{className:"flex items-center justify-between bg-gray-100 p-3 rounded",children:[e.jsx("code",{className:"text-sm",children:u.endpoint}),e.jsx("button",{onClick:()=>r(u.endpoint,`endpoint-${o}`),className:"text-gray-500 hover:text-gray-700",children:s===`endpoint-${o}`?e.jsx(dr,{className:"h-4 w-4"}):e.jsx(Ts,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Headers"}),e.jsx("div",{className:"bg-gray-100 p-3 rounded",children:e.jsx("pre",{className:"text-sm overflow-x-auto",children:Object.entries(u.headers).map(([m,h])=>e.jsxs("div",{children:[m,": ",h]},m))})})]}),u.params&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Query Parameters"}),e.jsx("div",{className:"bg-gray-100 p-3 rounded",children:e.jsx("pre",{className:"text-sm overflow-x-auto",children:Object.entries(u.params).map(([m,h])=>e.jsxs("div",{children:[m,"=",h]},m))})})]}),u.body&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Request Body"}),e.jsx("div",{className:"bg-gray-100 p-3 rounded",children:e.jsx("pre",{className:"text-sm overflow-x-auto",children:u.body})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Response"}),e.jsx("div",{className:"bg-gray-100 p-3 rounded",children:e.jsx("pre",{className:"text-sm overflow-x-auto",children:u.response})})]})]})]},o))})}),e.jsx(Be,{title:"Error Handling",subtitle:"The API uses standard HTTP status codes to indicate the success or failure of requests.",variant:"elevated",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Example"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-sm font-medium",children:"200"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"Success"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:"Request completed successfully"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm font-medium",children:"201"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"Created"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:"Resource created successfully"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-medium",children:"400"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"Bad Request"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:"Invalid request parameters"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-medium",children:"401"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"Unauthorized"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:"Invalid or missing API key"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-medium",children:"403"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"Forbidden"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:"Insufficient permissions"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-medium",children:"404"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"Not Found"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:"Resource not found"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-medium",children:"500"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"Internal Server Error"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:"Server error occurred"})]})]})]})})}),e.jsx(Be,{title:"Rate Limiting",subtitle:"API requests are rate-limited to ensure fair usage and system stability.",variant:"elevated",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:[e.jsxs("div",{className:"border rounded-lg p-1",style:{borderColor:t==null?void 0:t.theme.colors.primary[200]},children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Standard API Keys"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:" 100 requests per minute"}),e.jsx("li",{children:" 1,000 requests per hour"}),e.jsx("li",{children:" 10,000 requests per day"})]})]}),e.jsxs("div",{className:"border rounded-lg p-1",style:{borderColor:t==null?void 0:t.theme.colors.primary[200]},children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Admin API Keys"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:" 500 requests per minute"}),e.jsx("li",{children:" 5,000 requests per hour"}),e.jsx("li",{children:" 50,000 requests per day"})]})]})]})})]})})},os=({variant:t="info",children:s,className:a="",message:r})=>{const{theme:n}=Pe(),l={success:"success",error:"danger",warning:"warning",info:"primary"}[t];return e.jsx("div",{className:`p-3 border ${a}`,style:{backgroundColor:(n==null?void 0:n.theme.colors[l][50])||"#eff6ff",borderColor:(n==null?void 0:n.theme.colors[l][200])||"#bfdbfe",color:(n==null?void 0:n.theme.colors[l][800])||"#1e40af",borderRadius:(n==null?void 0:n.components.card.borderRadius)||"0.5rem",fontFamily:n==null?void 0:n.typography.fontFamily.primary,fontSize:n==null?void 0:n.typography.fontSize.sm},children:r||s})},as={components:{button:{variants:{primary:{bg:"bg-primary-600",hover:"hover:bg-primary-700",text:"text-white",focus:"focus:ring-primary-500",shadow:"shadow-sm",shadowHover:"hover:shadow-md"},secondary:{bg:"bg-secondary-600",hover:"hover:bg-secondary-700",text:"text-white",focus:"focus:ring-secondary-500",shadow:"shadow-sm",shadowHover:"hover:shadow-md"},outline:{bg:"bg-white",hover:"hover:bg-primary-50",text:"text-primary-700",border:"border border-primary-300",focus:"focus:ring-primary-500",shadow:"shadow-sm",shadowHover:"hover:shadow-md"},danger:{bg:"bg-danger-600",hover:"hover:bg-danger-700",text:"text-white",focus:"focus:ring-danger-500",shadow:"shadow-sm",shadowHover:"hover:shadow-md"},success:{bg:"bg-success-600",hover:"hover:bg-success-700",text:"text-white",focus:"focus:ring-success-500",shadow:"shadow-sm",shadowHover:"hover:shadow-md"},warning:{bg:"bg-warning-600",hover:"hover:bg-warning-700",text:"text-white",focus:"focus:ring-warning-500",shadow:"shadow-sm",shadowHover:"hover:shadow-md"},ghost:{bg:"bg-transparent",hover:"hover:bg-primary-100",text:"text-primary-700",focus:"focus:ring-primary-500",shadow:"shadow-none",shadowHover:"hover:shadow-none"}},sizes:{xs:{padding:"px-2 py-1",fontSize:"text-xs",iconSize:"h-3 w-3"},sm:{padding:"px-3 py-1.5",fontSize:"text-sm",iconSize:"h-4 w-4"},md:{padding:"px-4 py-2",fontSize:"text-sm",iconSize:"h-5 w-5"},lg:{padding:"px-6 py-3",fontSize:"text-base",iconSize:"h-5 w-5"},xl:{padding:"px-8 py-4",fontSize:"text-lg",iconSize:"h-6 w-6"}}},badge:{variants:{primary:{bg:"bg-primary-100",text:"text-primary-800"},secondary:{bg:"bg-secondary-100",text:"text-secondary-800"},success:{bg:"bg-success-100",text:"text-success-800"},warning:{bg:"bg-warning-100",text:"text-warning-800"},danger:{bg:"bg-danger-100",text:"text-danger-800"},info:{bg:"bg-primary-100",text:"text-primary-800"}},sizes:{sm:{padding:"px-2 py-0.5",fontSize:"text-xs"},md:{padding:"px-2.5 py-0.5",fontSize:"text-xs"},lg:{padding:"px-3 py-1",fontSize:"text-sm"}}},input:{base:{border:"border border-gray-300",borderRadius:"rounded-lg",padding:"px-3 py-2",fontSize:"text-sm",focus:"focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:"disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"placeholder-gray-400"},variants:{default:{bg:"bg-white",text:"text-gray-900"},error:{bg:"bg-white",text:"text-gray-900",border:"border-danger-300",focus:"focus:ring-danger-500 focus:border-danger-500"},success:{bg:"bg-white",text:"text-gray-900",border:"border-success-300",focus:"focus:ring-success-500 focus:border-success-500"}}},card:{base:{bg:"bg-white",borderRadius:"rounded-lg",shadow:"shadow-sm",border:"border border-gray-200"},header:{padding:"px-6 py-4"},body:{padding:"p-3"}},toggle:{variants:{primary:{checked:"bg-blue-600",unchecked:"bg-gray-200"},success:{checked:"bg-green-600",unchecked:"bg-gray-200"},warning:{checked:"bg-yellow-600",unchecked:"bg-gray-200"},danger:{checked:"bg-red-600",unchecked:"bg-gray-200"}},sizes:{sm:{track:"h-4 w-7",thumb:"h-3 w-3",translate:"translate-x-3"},md:{track:"h-5 w-9",thumb:"h-4 w-4",translate:"translate-x-4"},lg:{track:"h-6 w-11",thumb:"h-5 w-5",translate:"translate-x-5"}}}}},to=(t,s)=>{const a=as.components.button.variants[t],r=as.components.button.sizes[s];return{base:"inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",variant:`${a.bg} ${a.hover} ${a.text} ${a.focus} ${a.shadow} ${a.shadowHover}`,size:`${r.padding} ${r.fontSize}`,iconSize:r.iconSize}},so=(t,s)=>{const a=as.components.badge.variants[t],r=as.components.badge.sizes[s];return{base:"inline-flex items-center font-medium rounded-full",variant:`${a.bg} ${a.text}`,size:`${r.padding} ${r.fontSize}`}},ao=(t="default")=>{const s=as.components.input.base,a=as.components.input.variants[t];return{base:`${s.border} ${s.borderRadius} ${s.padding} ${s.fontSize} ${s.focus} ${s.disabled} ${s.placeholder}`,variant:`${a.bg} ${a.text} ${a.border} ${a.focus}`}},pr=()=>{const t=as.components.card;return{base:`${t.base.bg} ${t.base.borderRadius} ${t.base.shadow} ${t.base.border}`,header:t.header.padding,body:t.body.padding}},ro=(t,s)=>{const a=as.components.toggle.variants[t],r=as.components.toggle.sizes[s];return{track:`${r.track} ${a.checked} ${a.unchecked} relative inline-flex flex-shrink-0 border-2 border-transparent rounded-full transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,thumb:`${r.thumb} ${r.translate} pointer-events-none inline-block rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200`}},xe=({children:t,variant:s="primary",size:a="md",loading:r=!1,disabled:n,className:i="",icon:l,iconPosition:u="left",fullWidth:o=!1,...m})=>{const{theme:h}=Pe(),d=to(s,a),g=h?{borderRadius:h.components.button.borderRadius,boxShadow:h.components.button.shadow==="sm"?"0 1px 2px 0 rgb(0 0 0 / 0.05)":h.components.button.shadow==="md"?"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)":h.components.button.shadow==="lg"?"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)":"none"}:{},p=`
    ${d.base}
    ${d.variant}
    ${d.size}
    ${o?"w-full":""}
    ${i}
    sr-${s}
  `,x=()=>r?e.jsxs("svg",{className:`animate-spin -ml-1 mr-2 ${d.iconSize}`,fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):l?e.jsx("span",{className:`${d.iconSize} ${u==="left"?"mr-2":"ml-2"}`,children:l}):null;return e.jsxs("button",{className:p,style:g,disabled:n||r,...m,children:[u==="left"&&x(),t,u==="right"&&x()]})};function Ue({title:t,open:s,onClose:a,children:r,size:n="lg"}){const{theme:i}=Pe();if(c.useEffect(()=>{const u=o=>{o.key==="Escape"&&s&&a()};return s&&(document.addEventListener("keydown",u),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",u),document.body.style.overflow="unset"}},[s,a]),!s)return null;const l={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl","2xl":"max-w-5xl"};return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm transition-opacity",onClick:a}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex max-w-full pl-10",children:e.jsx("div",{className:`w-screen ${l[n]}`,style:{animation:"slideIn 0.3s ease-out"},children:e.jsxs("div",{className:"h-full flex flex-col bg-white shadow-xl rounded-s-3xl",children:[t&&e.jsx("div",{className:"px-6 py-4 border-b-2 rounded-tl-3xl",style:{background:i==null?void 0:i.theme.colors.primary[50],borderColor:i==null?void 0:i.theme.colors.primary[400]},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-sm font-semibold",style:{fontFamily:i==null?void 0:i.typography.fontFamily.primary,fontSize:i==null?void 0:i.typography.fontSize["2xl"],fontWeight:i==null?void 0:i.typography.fontWeight.semibold,color:i==null?void 0:i.theme.colors.primary[900]},children:t}),e.jsx("button",{onClick:a,className:"rounded-lg font-semibold transition-colors p-3 sr-close",style:{color:i==null?void 0:i.theme.colors.primary[900],borderRadius:(i==null?void 0:i.components.button.borderRadius)||"0.5rem"},children:e.jsx(zt,{size:24})})]})}),e.jsxs("div",{className:`flex-1 relative overflow-y-auto ${t?"":"rounded-s-3xl"}`,style:{borderBottomLeftRadius:t?"1.5rem":""},children:[!t&&e.jsx("button",{onClick:a,className:"absolute left-4 top-6 rounded-full font-semibold transition-colors p-3 sr-close",style:{color:i==null?void 0:i.theme.colors.primary[900]},children:e.jsx(zt,{size:24})}),r]})]})})}),e.jsx("style",{children:`
        @keyframes slideIn {
          from {
            transform: translateX(100%);
          }
          to {
            transform: translateX(0);
          }
        }
      `})]})}const he=({label:t,children:s,icon:a,postText:r,isRequired:n=!1,className:i=""})=>{const{theme:l}=Pe();return e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{className:`block text-base font-semibold mb-1 flex gap-1 ${i}`,style:{fontFamily:l==null?void 0:l.typography.fontFamily.primary,fontSize:l==null?void 0:l.typography.fontSize.sm,color:l==null?void 0:l.theme.colors.primary[700]},children:[a&&e.jsx(e.Fragment,{children:a}),t,n&&e.jsx("span",{className:"text-red-500",children:"*"}),r&&e.jsx("span",{className:"text-gray-500",children:r})]}),s]})},no=()=>{const[t,s]=c.useState([]),[a,r]=c.useState(!0),[n,i]=c.useState(""),[l,u]=c.useState(""),[o,m]=c.useState(""),[h,d]=c.useState(1),[g,p]=c.useState(1),[x,A]=c.useState(0),[y,N]=c.useState(!1),[v,j]=c.useState(!1),[D,C]=c.useState(!1),[f,w]=c.useState(!1),[b,z]=c.useState(!1),[P,S]=c.useState(null),[k,G]=c.useState(""),[B,E]=c.useState(!1),{theme:M}=Pe(),[F,_]=c.useState({name:"",description:"",expiresInDays:365,permissions:[]}),L=["jobs:read","jobs:write","jobs:delete","Cost Code:read","Cost Code:write","Cost Code:delete","employee:read","employee:write","employee:delete","timesheed:read","timesheed:write","system:admin"],R=async(I=1)=>{try{r(!0),i("");const U=new URLSearchParams({page:I.toString(),limit:"20"});l&&U.append("search",l),o&&U.append("status",o);const ce=await fetch(`/api/api-keys?${U}`);if(!ce.ok)throw new Error("Failed to fetch API keys");const T=await ce.json();s(T.apiKeys),d(T.currentPage),p(T.totalPages),A(T.totalKeys)}catch(U){i(U instanceof Error?U.message:"Failed to fetch API keys")}finally{r(!1)}};c.useEffect(()=>{R()},[]),c.useEffect(()=>{R(h)},[l,o]);const q=async()=>{try{i("");const I=await fetch("/api/api-keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!I.ok){const ce=await I.json();throw new Error(ce.error||"Failed to create API key")}const U=await I.json();G(U.apiKey),E(!0),N(!1),X(),R()}catch(I){i(I instanceof Error?I.message:"Failed to create API key")}},V=async()=>{if(P)try{i("");const I=await fetch(`/api/api-keys/${P._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!I.ok){const U=await I.json();throw new Error(U.error||"Failed to update API key")}j(!1),X(),R()}catch(I){i(I instanceof Error?I.message:"Failed to update API key")}},Z=async()=>{if(P)try{i("");const I=await fetch(`/api/api-keys/${P._id}`,{method:"DELETE"});if(!I.ok){const U=await I.json();throw new Error(U.error||"Failed to delete API key")}C(!1),S(null),R()}catch(I){i(I instanceof Error?I.message:"Failed to delete API key")}},be=async()=>{if(P)try{i("");const I=await fetch(`/api/api-keys/${P._id}/regenerate`,{method:"POST"});if(!I.ok){const ce=await I.json();throw new Error(ce.error||"Failed to regenerate API key")}const U=await I.json();G(U.apiKey),E(!0),w(!1),R()}catch(I){i(I instanceof Error?I.message:"Failed to regenerate API key")}},X=()=>{_({name:"",description:"",expiresInDays:365,permissions:[]})},ve=I=>{S(I),_({name:I.name,description:I.description,expiresInDays:Math.ceil((new Date(I.expiresAt).getTime()-new Date().getTime())/(1e3*60*60*24)),permissions:I.permissions}),j(!0)},ee=I=>{S(I),C(!0)},me=I=>{S(I),w(!0)},se=I=>{navigator.clipboard.writeText(I)},Q=I=>I.isActive?new Date(I.expiresAt)<=new Date?"text-orange-600 bg-orange-100":"text-green-600 bg-green-100":"text-red-600 bg-red-100",W=I=>I.isActive?new Date(I.expiresAt)<=new Date?"Expired":"Active":"Inactive",K=I=>I.isActive?new Date(I.expiresAt)<=new Date?e.jsx(it,{className:"h-4 w-4"}):e.jsx(Ze,{className:"h-4 w-4"}):e.jsx(rr,{className:"h-4 w-4"});return e.jsx(ct,{maxWidth:"full",padding:"none",children:e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white px-6 py-4 border-b flex items-center justify-between",style:{borderColor:M==null?void 0:M.theme.colors.primary[200]},children:[e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(xe,{onClick:()=>window.open("/admin/api-docs","_blank"),variant:"outline",icon:e.jsx(jn,{className:"h-4 w-4"}),children:"API Docs"}),e.jsx(xe,{onClick:()=>N(!0),variant:"primary",icon:e.jsx(_e,{className:"h-4 w-4"}),children:"Create API Key"})]})]}),e.jsxs("div",{className:"space-y-3 mt-4",children:[n&&e.jsx("div",{children:e.jsx(os,{type:"error",message:n})}),e.jsx("div",{className:"bg-white rounded-xl",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(xt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search API keys...",value:l,onChange:I=>u(I.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{borderColor:M==null?void 0:M.theme.colors.primary[300]}})]})}),e.jsxs("select",{value:o,onChange:I=>m(I.target.value),className:"border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{borderColor:M==null?void 0:M.theme.colors.primary[300]},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"expired",children:"Expired"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl border overflow-hidden",style:{borderColor:M==null?void 0:M.theme.colors.primary[200]},children:a?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),"Loading API keys..."]}):t.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:l||o?"No API keys found matching your filters":"No API keys available"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Key Prefix"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Used"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usage"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(I=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.name}),e.jsx("div",{className:"text-sm text-gray-500",children:I.description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:[I.keyPrefix,"..."]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Q(I)}`,children:[K(I),e.jsx("span",{className:"ml-1",children:W(I)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx("span",{children:new Date(I.expiresAt).toLocaleDateString()})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I.lastUsed?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx("span",{children:new Date(I.lastUsed).toLocaleString()})]}):e.jsx("span",{className:"text-gray-400",children:"Never"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Gi,{className:"h-4 w-4"}),e.jsx("span",{children:I.usageCount})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>ve(I),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(Tt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>me(I),className:"text-orange-600 hover:text-orange-900",title:"Regenerate",children:e.jsx(ls,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ee(I),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(lt,{className:"h-4 w-4"})})]})})]},I._id))})]})})}),g>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",t.length," of ",x," API keys (Page ",h," of ",g,")"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>d(h-1),disabled:h===1,className:"px-3 py-1 border rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",style:{borderColor:M==null?void 0:M.theme.colors.primary[300]},children:"Previous"}),e.jsx("button",{onClick:()=>d(h+1),disabled:h===g,className:"px-3 py-1 border rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",style:{borderColor:M==null?void 0:M.theme.colors.primary[300]},children:"Next"})]})]}),e.jsx(Ue,{title:"Create API Key",open:y,onClose:()=>{N(!1),X()},size:"md",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(he,{label:"Name",children:e.jsx("input",{type:"text",value:F.name,onChange:I=>_({...F,name:I.target.value}),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter API key name",style:{borderColor:M==null?void 0:M.theme.colors.primary[300]}})}),e.jsx(he,{label:"Description",children:e.jsx("textarea",{value:F.description,onChange:I=>_({...F,description:I.target.value}),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter description",rows:3,style:{borderColor:M==null?void 0:M.theme.colors.primary[300]}})}),e.jsx(he,{label:"Expires In (Days)",children:e.jsx("input",{type:"number",value:F.expiresInDays,onChange:I=>_({...F,expiresInDays:parseInt(I.target.value)}),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{borderColor:M==null?void 0:M.theme.colors.primary[300]},min:"1",max:"3650"})}),e.jsx(he,{label:"Permissions",children:e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:L.map(I=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:F.permissions.includes(I),onChange:U=>{U.target.checked?_({...F,permissions:[...F.permissions,I]}):_({...F,permissions:F.permissions.filter(ce=>ce!==I)})},className:"rounded text-blue-600 focus:ring-blue-500",style:{borderColor:M==null?void 0:M.theme.colors.primary[300]}}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:I})]},I))})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{onClick:()=>{N(!1),X()},className:"px-4 py-2 border text-gray-700 rounded-lg hover:bg-gray-50",style:{borderColor:M==null?void 0:M.theme.colors.primary[300]},children:"Cancel"}),e.jsx("button",{onClick:q,disabled:!F.name,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Create"})]})]})}),v&&P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-1 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit API Key"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:F.name,onChange:I=>_({...F,name:I.target.value}),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{borderColor:M==null?void 0:M.theme.colors.primary[300]}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:F.description,onChange:I=>_({...F,description:I.target.value}),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{borderColor:M==null?void 0:M.theme.colors.primary[300]},rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Permissions"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:L.map(I=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:F.permissions.includes(I),onChange:U=>{U.target.checked?_({...F,permissions:[...F.permissions,I]}):_({...F,permissions:F.permissions.filter(ce=>ce!==I)})},className:"rounded text-blue-600 focus:ring-blue-500",style:{borderColor:M==null?void 0:M.theme.colors.primary[300]}}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:I})]},I))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>{j(!1),X()},className:"px-4 py-2 border text-gray-700 rounded-lg hover:bg-gray-50",style:{borderColor:M==null?void 0:M.theme.colors.primary[300]},children:"Cancel"}),e.jsx("button",{onClick:V,disabled:!F.name,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Update"})]})]})}),D&&P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-1 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Delete API Key"}),e.jsxs("p",{className:"text-gray-600 mb-1",children:['Are you sure you want to delete the API key "',P.name,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 border text-gray-700 rounded-lg hover:bg-gray-50",style:{borderColor:M==null?void 0:M.theme.colors.primary[300]},children:"Cancel"}),e.jsx("button",{onClick:Z,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})}),f&&P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-1 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Regenerate API Key"}),e.jsxs("p",{className:"text-gray-600 mb-1",children:['Are you sure you want to regenerate the API key "',P.name,'"? The old key will no longer work.']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 border text-gray-700 rounded-lg hover:bg-gray-50",style:{borderColor:M==null?void 0:M.theme.colors.primary[300]},children:"Cancel"}),e.jsx("button",{onClick:be,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",children:"Regenerate"})]})]})}),B&&k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-1 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"API Key Generated"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your new API key has been generated. Copy it now as it won't be shown again."}),e.jsx("div",{className:"bg-gray-100 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("code",{className:"text-sm break-all",children:B?k:""}),e.jsx("button",{onClick:()=>E(!B),className:"ml-2 text-gray-500 hover:text-gray-700",children:B?e.jsx(Vt,{className:"h-4 w-4"}):e.jsx(jt,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsxs("button",{onClick:()=>se(k),className:"px-4 py-2 border text-gray-700 rounded-lg hover:bg-gray-50 flex items-center space-x-2",style:{borderColor:M==null?void 0:M.theme.colors.primary[300]},children:[e.jsx(Ts,{className:"h-4 w-4"}),e.jsx("span",{children:"Copy"})]}),e.jsx("button",{onClick:()=>{E(!1),G("")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Done"})]})]})})]})]})})},ie=({label:t,error:s,variant:a="default",className:r="",...n})=>{const{theme:i}=Pe(),l=ao(a),u=i?{borderRadius:i.components.input.borderRadius,borderWidth:i.components.input.borderWidth}:{};return e.jsxs("div",{className:"w-full",children:[t&&e.jsx("label",{className:"block text-sm font-semibold mb-1",style:{fontFamily:i==null?void 0:i.typography.fontFamily.primary,fontSize:i==null?void 0:i.typography.fontSize.sm,color:i==null?void 0:i.theme.colors.primary[700]},children:t}),e.jsx("input",{className:`
          w-full ${l.base} ${l.variant}
          ${r}
        `,style:u,...n}),s&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s})]})},vt=({children:t,className:s="",style:a,onClick:r})=>{const{theme:n}=Pe(),i=pr(),l=n?{borderRadius:n.components.card.borderRadius,boxShadow:n.components.card.shadow==="sm"?"0 1px 2px 0 rgb(0 0 0 / 0.05)":n.components.card.shadow==="md"?"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)":n.components.card.shadow==="lg"?"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)":"none",padding:n.components.card.padding,...a}:a||{};return e.jsx("div",{className:`${i.base} ${s}`,style:l,onClick:r,children:t})},io=({children:t,className:s=""})=>{const a=pr();return e.jsx("div",{className:`${a.header} ${s}`,children:t})},_n=({children:t,className:s=""})=>{const a=pr();return e.jsx("div",{className:`${a.body} ${s}`,children:t})},Vs=({children:t,variant:s="primary",size:a="md",className:r=""})=>{const n=so(s,a),i=`
    ${n.base}
    ${n.variant}
    ${n.size}
    ${r}
  `;return e.jsx("span",{className:i,children:t})};function lo({items:t,columns:s,rowId:a,searchKeys:r=[],filters:n=[],loading:i=!1,onEdit:l,onDelete:u,onDeleteMany:o,onSelectionChange:m,bulkActionsLeft:h,onExport:d,onImport:g,defaultPageSize:p=10}){const[x,A]=c.useState(""),[y,N]=c.useState({}),[v,j]=c.useState([]),[D,C]=c.useState(null),[f,w]=c.useState(t),[b,z]=c.useState(!1),[P,S]=c.useState(()=>{const ee={};for(const me of s)ee[String(me.key)]=me.visible!==!1;return ee}),[k,G]=c.useState(1),[B,E]=c.useState(p),M=c.useMemo(()=>s.filter(ee=>P[String(ee.key)]),[s,P]);c.useEffect(()=>{const ee={};for(const me of s)ee[String(me.key)]=me.visible!==!1;S(ee)},[s]),c.useEffect(()=>{let ee=[...t];if(x&&(ee=ee.filter(me=>r.some(se=>{const Q=me[se];return Q&&Q.toString().toLowerCase().includes(x.toLowerCase())}))),Object.entries(y).forEach(([me,se])=>{se&&(ee=ee.filter(Q=>{const W=Q[me];if(me==="startDate"||me==="endDate"){const K=Q.createdAt||Q.timestamp||W;if(!K)return!0;const I=new Date(K),U=new Date(se);if(me==="startDate")return I>=U;if(me==="endDate")return I<=U}return typeof W=="boolean"?W.toString()===se:W===se}))}),D){const{key:me,direction:se}=D,Q=s.find(W=>String(W.key)===me);ee.sort((W,K)=>{let I,U;if(Q!=null&&Q.sortValue?(I=Q.sortValue(W),U=Q.sortValue(K)):(I=me.split(".").reduce((H,ne)=>H==null?void 0:H[ne],W),U=me.split(".").reduce((H,ne)=>H==null?void 0:H[ne],K)),I=I??"",U=U??"",typeof I=="number"&&typeof U=="number")return se==="asc"?I-U:U-I;const ce=I.toString().toLowerCase(),T=U.toString().toLowerCase();return ce<T?se==="asc"?-1:1:ce>T?se==="asc"?1:-1:0})}w(ee),G(1)},[t,x,y,D,r]);const F=Math.max(1,Math.ceil(f.length/B)),_=c.useMemo(()=>{const ee=(k-1)*B;return f.slice(ee,ee+B)},[f,k,B]),L=ee=>{C(me=>(me==null?void 0:me.key)===ee?me.direction==="asc"?{key:ee,direction:"desc"}:null:{key:ee,direction:"asc"})},R=()=>{if(v.length===_.length){const ee=[];j(ee),m&&m(ee)}else{const ee=_.map(me=>a(me));j(ee),m&&m(ee)}},q=ee=>{j(me=>{const se=me.includes(ee)?me.filter(Q=>Q!==ee):[...me,ee];return m&&m(se),se})},V=async()=>{v.length===0||!o||confirm(`Are you sure you want to delete ${v.length} items?`)&&(await o(v),j([]))},Z=ee=>{d&&d(ee,f)},be=ee=>{var se;const me=(se=ee.target.files)==null?void 0:se[0];me&&g&&g(me),ee.target.value=""},X=ee=>(D==null?void 0:D.key)!==ee?e.jsx(Ft,{className:"h-4 w-4 text-gray-400"}):D.direction==="asc"?e.jsx(Ki,{className:"h-4 w-4 text-blue-500"}):e.jsx(Ft,{className:"h-4 w-4 text-blue-500"}),ve=(ee,me)=>{if(me.render)return me.render(ee);const se=ee[me.key];return me.key==="isActive"?se?e.jsx(Vs,{variant:"success",children:"Active"}):e.jsx(Vs,{variant:"secondary",children:"Inactive"}):me.key==="isBaseUnit"?se?e.jsx(Vs,{variant:"primary",children:"Yes"}):e.jsx(Vs,{variant:"secondary",children:"No"}):se==null||se===""?"-":String(se)};return e.jsx(vt,{children:e.jsxs(_n,{children:[e.jsxs("div",{className:"mb-1",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(xt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search...",value:x,onChange:ee=>A(ee.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"flex items-center space-x-2 gap-3",children:[n.map(ee=>ee.key==="startDate"||ee.key==="endDate"?e.jsx("input",{type:"datetime-local",placeholder:ee.label,value:y[ee.key]||"",onChange:me=>N(se=>({...se,[ee.key]:me.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},ee.key):e.jsx("select",{value:y[ee.key]||"",onChange:me=>N(se=>({...se,[ee.key]:me.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:ee.options.map(me=>e.jsx("option",{value:me.value,children:me.label},me.value))},ee.key)),d&&e.jsxs("div",{className:"flex items-center space-x-1 gap-3",children:[e.jsxs(xe,{variant:"outline",size:"sm",onClick:()=>Z("csv"),children:[e.jsx(Ht,{className:"h-4 w-4 mr-1"}),"CSV"]}),e.jsxs(xe,{variant:"outline",size:"sm",onClick:()=>Z("json"),children:[e.jsx(Ht,{className:"h-4 w-4 mr-1"}),"JSON"]})]}),g&&e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:".csv,.json",onChange:be,className:"hidden",id:"import-file"}),e.jsx("label",{htmlFor:"import-file",children:e.jsxs(xe,{variant:"outline",size:"sm",as:"span",children:[e.jsx(ja,{className:"h-4 w-4 mr-1"}),"Import"]})})]}),e.jsxs(xe,{variant:"outline",size:"sm",onClick:()=>z(ee=>!ee),children:[e.jsx(kt,{className:"h-4 w-4 mr-1"}),"Settings"]})]})]}),b&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5 bg-gray-50 mb-4 flex flex-col justify-center",children:[e.jsx("div",{className:"text-sm font-semibold mb-3",children:"Visible Columns"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:s.map(ee=>e.jsxs("label",{className:"text-sm flex items-center gap-2 w-full sm:w-1/3 lg:w-1/4",children:[e.jsx("input",{type:"checkbox",checked:!!P[String(ee.key)],onChange:me=>S(se=>({...se,[String(ee.key)]:me.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),ee.header]},String(ee.key)))})]}),v.length>0&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("span",{className:"text-sm text-blue-800",children:[v.length," item(s) selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[h,o&&e.jsxs(xe,{variant:"danger",size:"sm",onClick:V,children:[e.jsx(lt,{className:"h-4 w-4 mr-1"}),"Delete Selected"]})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:i?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),"Loading..."]}):f.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:x||Object.values(y).some(ee=>ee)?"No items found matching your filters":"No items available"}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[o&&e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:v.length===_.length&&_.length>0,onChange:R,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),M.map(ee=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>L(String(ee.key)),style:{width:ee.width},children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:ee.header}),X(String(ee.key))]})},String(ee.key))),(l||u)&&e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(ee=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[o&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:v.includes(a(ee)),onChange:()=>q(a(ee)),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),M.map(me=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",style:{width:me.width},children:ve(ee,me)},String(me.key))),(l||u)&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[l&&e.jsx("button",{onClick:()=>l(ee),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Edit",children:e.jsx(Tt,{className:"h-4 w-4"})}),u&&e.jsx("button",{onClick:()=>u(a(ee)),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete",children:e.jsx(lt,{className:"h-4 w-4"})})]})})]},a(ee)))})]})}),f.length>0&&e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-6",children:[e.jsxs("div",{className:"text-sm text-sm -gray-600 mt-1",children:["Page ",k," of ",F,"  ",f.length," items"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("select",{value:String(B),onChange:ee=>{E(Number(ee.target.value)),G(1)},className:"px-3 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[10,20,50,100].map(ee=>e.jsxs("option",{value:ee,children:[ee,"/page"]},ee))}),e.jsxs(xe,{variant:"outline",size:"sm",onClick:()=>G(ee=>Math.max(1,ee-1)),disabled:k<=1,children:[e.jsx(Ns,{className:"h-4 w-4 mr-1"}),"Prev"]}),e.jsxs(xe,{variant:"outline",size:"sm",onClick:()=>G(ee=>Math.min(F,ee+1)),disabled:k>=F,children:["Next",e.jsx(ds,{className:"h-4 w-4 ml-1"})]})]})]})]})})}function gt({title:t,items:s,columns:a,rowId:r,searchKeys:n=[],filters:i=[],loading:l=!1,error:u=null,onAdd:o,onEdit:m,onDelete:h,onDeleteMany:d,onExport:g,onImport:p,showCreateForm:x=!1,createForm:A,onCloseCreateForm:y,formTitle:N,toolbarLeft:v,toolbarRight:j,exportHeaders:D,exportData:C,disableImport:f=!1,onSelectionChange:w,bulkActionsLeft:b}){const[z,P]=c.useState(null),{theme:S}=Pe(),k=(B,E)=>{if(g)return g(B,E);if(B==="json"){const M="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(E,null,2)),F=document.createElement("a");F.href=M,F.download=`${t.toLowerCase().replace(/\s+/g,"-")}-export.json`,F.click()}else if(B==="csv"){const M=D||a.map(V=>V.header),F=C?C(E):E.map(V=>a.map(Z=>{const be=V[Z.key];return be!=null?String(be):""})),_=[M,...F].map(V=>V.map(Z=>`"${Z}"`).join(",")).join(`
`),L=new Blob([_],{type:"text/csv"}),R=window.URL.createObjectURL(L),q=document.createElement("a");q.href=R,q.download=`${t.toLowerCase().replace(/\s+/g,"-")}-export.csv`,q.click(),window.URL.revokeObjectURL(R)}},G=async B=>{p&&await p(B)};return e.jsxs("div",{className:"w-full p-5 flex flex-col gap-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold",style:{fontFamily:S==null?void 0:S.typography.fontFamily.primary,fontSize:S==null?void 0:S.typography.fontSize["2xl"],fontWeight:S==null?void 0:S.typography.fontWeight.bold,color:S==null?void 0:S.theme.colors.primary[900]},children:t})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[v,o&&e.jsx(xe,{onClick:o,children:"Add New"}),j]})]}),u&&e.jsx(os,{variant:"error",children:u}),x&&A&&e.jsxs(vt,{children:[e.jsx(io,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:N||"Create New"}),y&&e.jsx("button",{onClick:y,className:"text-gray-400 hover:text-sm -gray-600 mt-1",children:""})]})}),e.jsx(_n,{children:A})]}),e.jsx(lo,{items:s,columns:a,rowId:r,searchKeys:n,filters:i,loading:l,onEdit:m,onDelete:h,onDeleteMany:d,onSelectionChange:w,bulkActionsLeft:b,onExport:k,onImport:f?void 0:G,defaultPageSize:20})]})}const Bn=c.createContext(void 0),at=()=>{const t=c.useContext(Bn);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},oo=({children:t})=>{const[s,a]=c.useState([]),r=c.useCallback(i=>{const l=Math.random().toString(36).substr(2,9),u={...i,id:l};a(o=>[...o,u]),i.duration!==0&&setTimeout(()=>{n(l)},i.duration||5e3)},[]),n=c.useCallback(i=>{a(l=>l.filter(u=>u.id!==i))},[]);return e.jsxs(Bn.Provider,{value:{toasts:s,showToast:r,hideToast:n},children:[t,e.jsx(co,{toasts:s,onHide:n})]})},co=({toasts:t,onHide:s})=>{const a=n=>{switch(n){case"success":return e.jsx(Ze,{className:"h-5 w-5 text-green-400"});case"error":return e.jsx(Ct,{className:"h-5 w-5 text-red-400"});case"warning":return e.jsx(it,{className:"h-5 w-5 text-yellow-400"});case"info":return e.jsx(zs,{className:"h-5 w-5 text-blue-400"})}},r=n=>{switch(n){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800"}};return e.jsx("div",{className:"fixed top-1 right-4 z-50 space-y-2",children:t.map(n=>e.jsx("div",{className:`
            max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto border
            ${r(n.variant)}
            transform transition-all duration-300 ease-in-out
          `,children:e.jsx("div",{className:"p-1",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:a(n.variant)}),e.jsx("div",{className:"ml-3 flex-1",children:e.jsx("p",{className:"text-sm font-medium",children:n.message})}),e.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:e.jsx("button",{onClick:()=>s(n.id),className:"inline-flex text-gray-400 hover:text-gray-600 focus:outline-none focus:text-sm -gray-600 mt-1",children:e.jsx(zt,{className:"h-4 w-4"})})})]})})},n.id))})},uo=()=>{const[t,s]=c.useState([]),[a,r]=c.useState(""),[n,i]=c.useState(""),[l,u]=c.useState(!0),[o,m]=c.useState(!0),[h,d]=c.useState(null),[g,p]=c.useState(!1),[x,A]=c.useState(null),{showToast:y}=at(),N=async()=>{m(!0);try{const k=(await mt.getModules()).map(G=>({...G,isActive:G.isActive!==!1,createdAt:G.createdAt||G.created_at||new Date().toISOString(),updatedAt:G.updatedAt||G.updated_at||new Date().toISOString()}));s(k)}catch(S){d(S.message||"Failed to load modules")}finally{m(!1)}};c.useEffect(()=>{N()},[]);const v=async()=>{d(null);try{const S={name:a,description:n,isActive:l,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},k=await api.post("/rbac/modules",S);if(k.error)throw new Error(k.message||"Failed to add module");f(),y({message:"Module created",variant:"success"}),await N()}catch(S){d(S.message),y({message:S.message||"Failed to add module",variant:"error"})}},j=async S=>{d(null);try{const k=await api.delete(`/rbac/modules/${encodeURIComponent(S)}`);if(k.error)throw new Error(k.message||"Failed to delete module");y({message:"Module deleted",variant:"success"}),await N()}catch(k){d(k.message),y({message:k.message||"Failed to delete module",variant:"error"})}},D=async()=>{if(x){d(null);try{const S={name:a,description:n,isActive:l,createdAt:x.createdAt,updatedAt:new Date().toISOString()},k=await api.put(`/rbac/modules/${x.id}`,S);if(k.error)throw new Error(k.message||"Failed to update module");f(),y({message:"Module updated",variant:"success"}),await N()}catch(S){d(S.message),y({message:S.message||"Failed to update module",variant:"error"})}}},C=S=>{A(S),r(S.name),i(S.description||""),u(S.isActive),p(!0)},f=()=>{r(""),i(""),u(!0),A(null),p(!1)},w=async S=>{d(null);try{const k=await S.text(),G=JSON.parse(k);if(!Array.isArray(G))throw new Error("Invalid file format. Expected an array of modules.");for(const B of G)await api.post("/rbac/modules",{...B,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});y({message:"Modules imported successfully",variant:"success"}),await N()}catch(k){d(k.message),y({message:k.message||"Failed to import modules",variant:"error"})}},b=[{key:"name",header:"Name",width:"200px"},{key:"description",header:"Description",width:"300px"},{key:"isActive",header:"Status",width:"100px",render:S=>S.isActive?"Active":"Inactive"},{key:"createdAt",header:"Created",width:"120px",render:S=>new Date(S.createdAt).toLocaleDateString()},{key:"updatedAt",header:"Updated",width:"120px",render:S=>new Date(S.updatedAt).toLocaleDateString()}],z=[{key:"isActive",label:"All status",options:[{value:"",label:"All status"},{value:"true",label:"Active"},{value:"false",label:"Inactive"}]}],P=e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 p-6",children:[e.jsx("div",{children:e.jsx(ie,{label:"Module Name",value:a,onChange:S=>r(S.target.value),placeholder:"e.g., User Management",required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"Description",value:n,onChange:S=>i(S.target.value),placeholder:"e.g., Manage system users and permissions"})}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:S=>u(S.target.checked)}),"Active"]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(xe,{onClick:x?D:v,children:x?"Update Module":"Add Module"}),e.jsx(xe,{variant:"outline",onClick:f,children:"Cancel"})]})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(gt,{title:"RBAC Modules",items:t,columns:b,rowId:S=>S.id,searchKeys:["name","description"],filters:z,loading:o,error:h,onAdd:()=>{f(),p(!0)},onEdit:C,onDelete:j,onDeleteMany:async S=>{for(const k of S)await j(k);await N()},onImport:w,showCreateForm:g,exportHeaders:["Name","Description","Status","Created Date","Updated Date"],exportData:S=>S.map(k=>[k.name,k.description||"",k.isActive?"Active":"Inactive",k.createdAt||"",k.updatedAt||""])}),e.jsx(Ue,{open:g,onClose:()=>p(!1),title:x?`Edit Module: ${x.name}`:"Create New Module",size:"md",children:P})]})},mo=()=>{var B,E;const[t,s]=c.useState([]),[a,r]=c.useState([]),[n,i]=c.useState([]),[l,u]=c.useState(null),[o,m]=c.useState([]),[h,d]=c.useState(""),[g,p]=c.useState(!0),[x,A]=c.useState(null),[y,N]=c.useState(!1),[v,j]=c.useState(!1),{showToast:D}=at(),{hasPermission:C}=Ye(),{theme:f}=Pe(),w=C("rbac_permissions_edit");C("rbac_permissions_create"),C("rbac_permissions_delete");const b=async()=>{p(!0);try{const[M,F,_]=await Promise.all([mt.getRoles(),mt.getModules(),mt.getPermissions()]);s(M),r(F),i(_),M.length>0&&!l&&u(M[0])}catch(M){A(M.message||"Failed to load data")}finally{p(!1)}};c.useEffect(()=>{b()},[]),c.useEffect(()=>{l&&a.length>0&&n.length>0&&z()},[l,a,n]);const z=()=>{if(!l)return;const M=new Map;n.forEach(q=>{const V=`${q.module_id}_${q.action}`;M.has(V)||M.set(V,q)});const F=new Set;Array.from(M.values()).forEach(q=>{F.add(q.action)});const _=Array.from(F).sort(),L=a.map(q=>{const V=Array.from(M.values()).filter(be=>be.module_id===q.id),Z={};return _.forEach(be=>{var ve;const X=V.find(ee=>ee.action===be);if(X){const ee=((ve=l.permissions)==null?void 0:ve.includes(X.id))||!1;Z[be]={id:X.id,name:X.name,description:X.description||"",isAssigned:ee}}}),{module_id:q.id,moduleName:q.name,actions:Z}}),R=Array.from(M.values()).filter(q=>q.module_id==="admin");if(R.length>0){const q={};_.forEach(V=>{var be;const Z=R.find(X=>X.action===V);if(Z){const X=((be=l.permissions)==null?void 0:be.includes(Z.id))||!1;q[V]={id:Z.id,name:Z.name,description:Z.description||"",isAssigned:X}}}),L.unshift({module_id:"admin",moduleName:"System Administration",actions:q})}m(L)},P=M=>{l&&(m(F=>F.map(_=>({..._,actions:Object.fromEntries(Object.entries(_.actions).map(([L,R])=>[L,R&&R.id===M?{...R,isAssigned:!R.isAssigned}:R]))}))),N(!0))},S=async()=>{if(l)try{const M=o.flatMap(F=>Object.values(F.actions).filter(_=>_&&_.isAssigned).map(_=>_.id));await mt.updateRole(l.id,{permissions:M}),N(!1),D({message:"Role permissions saved successfully",variant:"success"}),await b()}catch(M){A(M.message),D({message:M.message||"Failed to save permissions",variant:"error"})}},k=()=>{l&&(z(),N(!1))},G=o.filter(M=>M.moduleName.toLowerCase().includes(h.toLowerCase())||Object.values(M.actions).some(F=>F&&(F.name.toLowerCase().includes(h.toLowerCase())||F.description.toLowerCase().includes(h.toLowerCase()))));return g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-base",children:"Loading RBAC Permissions..."})}):x?e.jsx("div",{className:"p-1",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-1",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx(Ct,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-medium",children:["Error: ",x]})]})})}):e.jsxs("div",{className:"h-screen flex flex-col",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 bg-gray-50 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-bold",style:{color:f==null?void 0:f.theme.colors.primary[800]},children:"RBAC Permissions Management"}),e.jsx("p",{className:"text-sm text-sm -gray-600 mt-1",children:"Manage role-based access control permissions"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[y&&e.jsxs("div",{className:"flex items-center gap-2 text-orange-600",children:[e.jsx(Ct,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Unsaved changes"})]}),!w&&e.jsxs("div",{className:"flex items-center gap-2 text-sm -gray-600 mt-1",children:[e.jsx(Ct,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"View Only Mode"})]}),w&&e.jsxs(e.Fragment,{children:[e.jsxs(xe,{onClick:S,disabled:!y||!l,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Save Changes"]}),e.jsxs(xe,{variant:"outline",onClick:k,disabled:!y,children:[e.jsx(xl,{className:"w-4 h-4 mr-2"}),"Reset"]})]})]})]})}),v&&e.jsx("div",{className:"bg-yellow-50 border-b border-yellow-200 px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"Debug Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-1 text-xs",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Total Permissions:"})," ",n.length]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Total Modules:"})," ",a.length]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Selected Role:"})," ",(l==null?void 0:l.name)||"None"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Permission Grid Items:"})," ",o.length]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Total Grid Permissions:"})," ",o.reduce((M,F)=>M+Object.values(F.actions).filter(_=>_).length,0)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Has Changes:"})," ",y?"Yes":"No"]})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("strong",{children:"Permission Details:"}),e.jsx("div",{className:"mt-1 max-h-32 overflow-y-auto",children:n.map(M=>e.jsxs("div",{className:"text-xs",children:[M.module_id," - ",M.action,": ",M.name," (ID: ",M.id,")"]},M.id))})]})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-1 border-b border-gray-200",children:e.jsx("h2",{className:"text-base font-semibold text-gray-900 p-3",children:"Roles"})}),e.jsx("div",{className:"flex-1 overflow-y-auto sidebar-scroll",children:t.map(M=>{var F;return e.jsx("div",{className:`p-3 border-b border-gray-100 cursor-pointer transition-colors ${(l==null?void 0:l.id)===M.id?`bg-${f==null?void 0:f.theme.name}-50 border-${f==null?void 0:f.theme.name}-200`:"hover:bg-gray-50"}`,onClick:()=>{y&&confirm("You have unsaved changes. Do you want to save them?")&&S(),u(M),N(!1)},children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`font-semibold ${(l==null?void 0:l.id)===M.id?`text-${f==null?void 0:f.theme.name}-700`:"text-gray-700"}`,children:M.name}),e.jsx("div",{className:"text-sm text-sm-gray-600 mt-1",children:M.description}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[((F=M.permissions)==null?void 0:F.length)||0," permissions"]})]})})},M.id)})})]}),e.jsx("div",{className:"flex-1 flex flex-col bg-white",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-base font-semibold text-gray-900",children:["Permissions for: ",l.name]}),e.jsx("p",{className:"text-sm text-sm -gray-600 mt-1",children:l.description})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(xt,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(ie,{placeholder:"Search modules or permissions...",value:h,onChange:M=>d(M.target.value),className:"pl-10 w-64"})]})})]})}),e.jsxs("div",{className:"flex-1 overflow-auto p-3",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"grid gap-1 px-4 py-3",style:{gridTemplateColumns:`200px repeat(${Object.keys(((B=o[0])==null?void 0:B.actions)||{}).length}, 1fr)`},children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Module"}),Object.keys(((E=o[0])==null?void 0:E.actions)||{}).map(M=>e.jsx("div",{className:"font-medium text-gray-900 text-center capitalize",children:M},M))]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:G.map(M=>{var F,_;return e.jsx("div",{className:"hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"grid gap-1 px-4 py-3 items-center",style:{gridTemplateColumns:`200px repeat(${Object.keys(((F=o[0])==null?void 0:F.actions)||{}).length}, 1fr)`},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[M.module_id==="admin"?e.jsx(ms,{className:"w-4 h-4 text-red-600"}):e.jsx(kt,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:M.moduleName})]}),Object.keys(((_=o[0])==null?void 0:_.actions)||{}).map(L=>{const R=M.actions[L];return e.jsx("div",{className:"flex justify-center",children:R?e.jsx("button",{onClick:()=>w&&P(R.id),disabled:!w,className:`flex items-center justify-center w-6 h-6 rounded border transition-colors ${w?"border-gray-300 hover:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2":"border-gray-200 cursor-not-allowed"}`,title:`${R.name}: ${R.description}${w?"":" (View Only)"}`,children:R.isAssigned?e.jsx(Ls,{className:`w-4 h-4 ${w?"text-blue-600":"text-gray-400"}`}):e.jsx(Gt,{className:`w-4 h-4 ${w?"text-gray-400":"text-gray-300"}`})}):e.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-300",children:"-"})})},L)})]})},M.module_id)})})]}),w&&e.jsxs("div",{className:"mt-4 flex items-center gap-1",children:[e.jsx("div",{className:"text-sm text-sm -gray-600 mt-1",children:"Bulk Actions:"}),e.jsx(xe,{size:"sm",variant:"outline",onClick:()=>{o.forEach(M=>{Object.values(M.actions).forEach(F=>{F&&!F.isAssigned&&P(F.id)})})},children:"Select All"}),e.jsx(xe,{size:"sm",variant:"outline",onClick:()=>{o.forEach(M=>{Object.values(M.actions).forEach(F=>{F&&F.isAssigned&&P(F.id)})})},children:"Clear All"})]})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ot,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-2",children:"No Role Selected"}),e.jsx("p",{className:"text-sm -gray-600 mt-1",children:"Select a role from the left panel to manage its permissions"})]})})})]})]})},xo=()=>{const{user:t}=Ye(),[s,a]=c.useState([]),[r,n]=c.useState([]),[i,l]=c.useState(""),[u,o]=c.useState(""),[m,h]=c.useState([]),[d,g]=c.useState(!0),[p,x]=c.useState(!0),[A,y]=c.useState(null),[N,v]=c.useState(!1),[j,D]=c.useState(null),{showToast:C}=at(),{hasPermission:f}=Ye(),w=f("rbac_roles_create"),b=f("rbac_roles_edit"),z=f("rbac_roles_delete"),P=async()=>{x(!0);try{const[V,Z]=await Promise.all([mt.getRoles(),mt.getPermissions()]),be=V.map(X=>({...X,isActive:X.isActive!==!1,permissions:X.permissions||[],createdAt:X.createdAt||new Date().toISOString(),updatedAt:X.updatedAt||new Date().toISOString()}));a(be),n(Z)}catch(V){y(V.message||"Failed to load data")}finally{x(!1)}};c.useEffect(()=>{P()},[]);const S=async()=>{if(!w){y("You don't have permission to create roles.");return}y(null);try{const V={tenant_id:t==null?void 0:t.tenant_id,name:i,description:u,permissions:m,is_active:d},Z=await mt.createRole(V);E(),C({message:"Role created",variant:"success"}),await P()}catch(V){y(V.message),C({message:V.message||"Failed to add role",variant:"error"})}},k=async V=>{if(!z){y("You don't have permission to delete roles.");return}y(null);try{await mt.deleteRole(V),C({message:"Role deleted",variant:"success"}),await P()}catch(Z){y(Z.message),C({message:Z.message||"Failed to delete role",variant:"error"})}},G=async()=>{if(j){if(!b){y("You don't have permission to edit roles.");return}y(null);try{const V={name:i,description:u,permissions:m,is_active:d},Z=await mt.updateRole(j.id,V);E(),C({message:"Role updated",variant:"success"}),await P()}catch(V){y(V.message),C({message:V.message||"Failed to update role",variant:"error"})}}},B=V=>{if(!b){y("You don't have permission to edit roles.");return}D(V),l(V.name),o(V.description||""),h(V.permissions||[]),g(V.isActive),v(!0)},E=()=>{l(""),o(""),h([]),g(!0),D(null),v(!1)},M=async V=>{y(null);try{const Z=await V.text(),be=JSON.parse(Z);if(!Array.isArray(be))throw new Error("Invalid file format. Expected an array of roles.");for(const X of be)await api.post("/rbac/roles",{...X,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});C({message:"Roles imported successfully",variant:"success"}),await P()}catch(Z){y(Z.message),C({message:Z.message||"Failed to import roles",variant:"error"})}},F=V=>{h(Z=>Z.includes(V)?Z.filter(be=>be!==V):[...Z,V])},_=V=>V.permissions?V.permissions.length:0,L=[{key:"name",header:"Name",width:"200px"},{key:"description",header:"Description",width:"300px"},{key:"permissions",header:"Permissions",width:"120px",render:V=>`${_(V)} permissions`},{key:"isActive",header:"Status",width:"100px",render:V=>V.isActive?"Active":"Inactive"},{key:"createdAt",header:"Created",width:"120px",render:V=>new Date(V.createdAt).toLocaleDateString()},{key:"updatedAt",header:"Updated",width:"120px",render:V=>new Date(V.updatedAt).toLocaleDateString()}],R=[{key:"isActive",label:"All status",options:[{value:"",label:"All status"},{value:"true",label:"Active"},{value:"false",label:"Inactive"}]}],q=e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 p-6",children:[e.jsx("div",{children:e.jsx(ie,{label:"Role Name",value:i,onChange:V=>l(V.target.value),placeholder:"e.g., Administrator",required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"Description",value:u,onChange:V=>o(V.target.value),placeholder:"e.g., Full system access role"})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Permissions (",m.length," selected)"]}),e.jsx("div",{className:"border border-gray-300 rounded-md p-1 max-h-60 overflow-y-auto bg-gray-50",children:r.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:r.map(V=>e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center space-x-2 text-sm cursor-pointer hover:bg-gray-100 p-2 rounded w-full",children:[e.jsx("input",{type:"checkbox",checked:m.includes(V.id),onChange:()=>F(V.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:V.name}),e.jsxs("span",{className:"text-gray-500",children:["(",V.action,")"]})]})},V.id))}):e.jsx("div",{className:"text-gray-500 text-sm",children:"No permissions available"})})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("label",{className:"text-sm flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:V=>g(V.target.checked)}),"Active"]})}),e.jsxs("div",{className:"flex gap-2",children:[(j?b:w)&&e.jsx(xe,{onClick:j?G:S,children:j?"Update Role":"Add Role"}),e.jsx(xe,{variant:"outline",onClick:E,children:"Cancel"})]})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(gt,{title:"RBAC Roles",items:s,columns:L,rowId:V=>V.id,searchKeys:["name","description"],filters:R,loading:p,error:A,onAdd:w?()=>{E(),v(!0)}:void 0,onEdit:b?B:void 0,onDelete:z?k:void 0,onDeleteMany:z?async V=>{for(const Z of V)await k(Z);await P()}:void 0,onImport:M,showCreateForm:N,exportHeaders:["Name","Description","Permissions Count","Status","Created Date","Updated Date"],exportData:V=>V.map(Z=>[Z.name,Z.description||"",_(Z).toString(),Z.isActive?"Active":"Inactive",Z.createdAt||"",Z.updatedAt||""])}),e.jsx(Ue,{open:N,onClose:()=>v(!1),title:j?`Edit Role: ${j.name}`:"Create New Role",size:"lg",children:q})]})},Ae=({label:t,error:s,options:a,className:r="",...n})=>{const{theme:i}=Pe();return e.jsxs("div",{className:"w-full",children:[e.jsx(he,{label:t,children:e.jsx("select",{className:`
          w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent
          ${s?"border-danger-300":"border-gray-300"}
          ${r}
        `,style:{"--tw-ring-color":i?i.theme.colors.primary[500]:"#3b82f6",borderRadius:i==null?void 0:i.components.input.borderRadius,fontFamily:i==null?void 0:i.typography.fontFamily.primary,fontSize:i==null?void 0:i.typography.fontSize.sm},...n,children:a.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})}),s&&e.jsx("p",{className:"mt-1 text-sm text-danger-600",children:s})]})},ho=()=>{const{user:t}=Ye(),[s,a]=c.useState([]),[r,n]=c.useState([]),[i,l]=c.useState(""),[u,o]=c.useState(""),[m,h]=c.useState(""),[d,g]=c.useState(""),[p,x]=c.useState(""),[A,y]=c.useState(""),[N,v]=c.useState(!0),[j,D]=c.useState(!1),[C,f]=c.useState(!1),[w,b]=c.useState(!0),[z,P]=c.useState(null),[S,k]=c.useState(!1),[G,B]=c.useState(null),{showToast:E}=at(),{hasPermission:M}=Ye(),F=M("users_create"),_=M("users_edit"),L=M("users_delete"),R=async()=>{b(!0);try{const[U,ce]=await Promise.all([mt.getUsers(),mt.getRoles()]),T=U.map(H=>({...H,isActive:H.isActive!==!1,firstName:H.firstName||H.first_name||"",lastName:H.lastName||H.last_name||"",roleId:H.roleId||H.role_id||"",createdAt:H.createdAt||H.created_at||new Date().toISOString(),lastLogin:H.lastLogin||H.last_login||null,userPasscode:H.userPasscode||H.user_passcode||""}));a(T),n(ce)}catch(U){P(U.message||"Failed to load data")}finally{b(!1)}};c.useEffect(()=>{R()},[]);const q=async()=>{if(!F){P("You don't have permission to create users.");return}P(null);try{if(!i.trim()){E({message:"Email is required",variant:"error"});return}if(!p.trim()){E({message:"Password is required for new users",variant:"error"});return}const U={tenant_id:t==null?void 0:t.tenant_id,email:i.trim(),first_name:u.trim(),last_name:m.trim(),role_id:d||null,password:p.trim(),user_passcode:A.trim()||null,is_active:N},ce=await mt.createUser(U);X(),E({message:"User created successfully",variant:"success"}),await R()}catch(U){P(U.message),E({message:U.message||"Failed to add user",variant:"error"})}},V=async U=>{if(!L){P("You don't have permission to delete users.");return}P(null);try{await mt.deleteUser(U),E({message:"User deleted successfully",variant:"success"}),await R()}catch(ce){P(ce.message),E({message:ce.message||"Failed to delete user",variant:"error"})}},Z=async()=>{if(G){if(!_){P("You don't have permission to edit users.");return}P(null);try{if(!i.trim()){E({message:"Email is required",variant:"error"});return}const U={email:i.trim(),first_name:u.trim(),last_name:m.trim(),role_id:d||null,is_active:N};p.trim()&&(U.password=p.trim()),A.trim()&&(U.user_passcode=A.trim());const ce=await mt.updateUser(G.id,U);X(),E({message:"User updated successfully",variant:"success"}),await R()}catch(U){P(U.message),E({message:U.message||"Failed to update user",variant:"error"})}}},be=U=>{if(!_){P("You don't have permission to edit users.");return}B(U),l(U.email),o(U.firstName||""),h(U.lastName||""),g(U.roleId||""),x(""),y(U.userPasscode||""),v(U.isActive),D(!1),f(!1),k(!0)},X=()=>{l(""),o(""),h(""),g(""),x(""),y(""),v(!0),D(!1),f(!1),B(null),k(!1)},ve=async U=>{P(null);try{const ce=await U.text(),T=JSON.parse(ce);if(!Array.isArray(T))throw new Error("Invalid file format. Expected an array of users.");for(const H of T)await mt.createUser({tenant_id:(t==null?void 0:t.tenant_id)||"",email:H.email,first_name:H.firstName||H.first_name||"",last_name:H.lastName||H.last_name||"",role_id:H.roleId||H.role_id||null,password:H.password||"defaultPassword123",user_passcode:H.userPasscode||H.user_passcode||null,is_active:H.isActive!==!1});E({message:"Users imported successfully",variant:"success"}),await R()}catch(ce){P(ce.message),E({message:ce.message||"Failed to import users",variant:"error"})}},ee=U=>{if(!U)return"No Role";const ce=r.find(T=>T.id===U);return ce?ce.name:"Unknown Role"},me=U=>U.firstName&&U.lastName?`${U.firstName} ${U.lastName}`:U.email,se=U=>U.firstName&&U.lastName?`${U.firstName.charAt(0)}${U.lastName.charAt(0)}`.toUpperCase():U.email.charAt(0).toUpperCase(),Q=[{value:"",label:"Select Role"},...r.map(U=>({value:U.id,label:U.name}))],W=[{key:"user",header:"User",width:"250px",render:U=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-blue-600",children:se(U)})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:me(U)}),e.jsx("div",{className:"text-sm text-gray-500",children:U.email})]})]})},{key:"roleId",header:"Role",width:"150px",render:U=>e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:ee(U.roleId)})},{key:"isActive",header:"Status",width:"100px",render:U=>e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${U.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:U.isActive?"Active":"Inactive"})},{key:"lastLogin",header:"Last Login",width:"120px",render:U=>e.jsx("span",{className:"text-sm text-gray-500",children:U.lastLogin?new Date(U.lastLogin).toLocaleDateString():"Never"})},{key:"createdAt",header:"Created",width:"120px",render:U=>new Date(U.createdAt).toLocaleDateString()}],K=[{key:"isActive",label:"All status",options:[{value:"",label:"All status"},{value:"true",label:"Active"},{value:"false",label:"Inactive"}]},{key:"roleId",label:"All roles",options:[{value:"",label:"All roles"},...r.map(U=>({value:U.id,label:U.name}))]}],I=e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 p-6",children:[e.jsx("div",{children:e.jsx(ie,{label:"Email",type:"email",value:i,onChange:U=>l(U.target.value),placeholder:"Enter email",required:!0})}),e.jsx("div",{children:e.jsx(Ae,{label:"Role",value:d,onChange:U=>g(U.target.value),options:Q})}),e.jsx("div",{children:e.jsx(ie,{label:"First Name",value:u,onChange:U=>o(U.target.value),placeholder:"First name"})}),e.jsx("div",{children:e.jsx(ie,{label:"Last Name",value:m,onChange:U=>h(U.target.value),placeholder:"Last name"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(ie,{label:"Password",type:j?"text":"password",value:p,onChange:U=>x(U.target.value),placeholder:G?"Leave blank to keep current":"Enter password",required:!G}),e.jsx("button",{type:"button",onClick:()=>D(!j),className:"absolute right-3 top-8 text-gray-400 hover:text-sm -gray-600 mt-1",children:j?e.jsx(Vt,{className:"w-4 h-4"}):e.jsx(jt,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(ie,{label:"User Passcode (PIN)",type:C?"text":"password",value:A,onChange:U=>y(U.target.value),placeholder:G?"Leave blank to keep current":"Enter 4-6 digit PIN (optional)",maxLength:6}),e.jsx("button",{type:"button",onClick:()=>f(!C),className:"absolute right-3 top-8 text-gray-400 hover:text-sm -gray-600 mt-1",children:C?e.jsx(Vt,{className:"w-4 h-4"}):e.jsx(jt,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:N,onChange:U=>v(U.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Active"]})})}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"flex gap-2",children:[(G?_:F)&&e.jsx(xe,{onClick:G?Z:q,children:G?"Update User":"Add User"}),e.jsx(xe,{variant:"outline",onClick:X,children:"Cancel"})]})})]});return e.jsxs(e.Fragment,{children:[e.jsx(gt,{title:"User Management",items:s,columns:W,rowId:U=>U.id,searchKeys:["email","firstName","lastName"],filters:K,loading:w,error:z,onAdd:F?()=>{X(),k(!0)}:void 0,onEdit:_?be:void 0,onDelete:L?V:void 0,onDeleteMany:L?async U=>{for(const ce of U)await V(ce);await R()}:void 0,onImport:ve,showCreateForm:S,exportHeaders:["Email","First Name","Last Name","Role","User Passcode","Status","Last Login","Created Date"],exportData:U=>U.map(ce=>[ce.email,ce.firstName||"",ce.lastName||"",ee(ce.roleId),ce.userPasscode||"",ce.isActive?"Active":"Inactive",ce.lastLogin?new Date(ce.lastLogin).toLocaleDateString():"Never",new Date(ce.createdAt).toLocaleDateString()])}),e.jsx(Ue,{open:S,onClose:()=>k(!1),title:G?`Edit User: ${me(G)}`:"Create New User",size:"lg",children:I})]})},Vr=[{id:"users",label:"Users",icon:ot,permissions:["users_view"],component:ho},{id:"modules",label:"Modules",icon:kt,permissions:["rbac_modules_view"],component:uo},{id:"roles",label:"Roles",icon:nl,permissions:["rbac_roles_view"],component:xo},{id:"permissions",label:"Permissions",icon:ms,permissions:["rbac_permissions_view"],component:mo}],po=()=>{const[t,s]=c.useState("users"),{hasPermission:a}=Ye(),{theme:r}=Pe();c.useEffect(()=>{document.title="Auth Management - Space Rivers"},[]);const n=Vr.find(i=>i.id===t);return e.jsx(ct,{maxWidth:"full",padding:"md",children:e.jsx("div",{className:"h-full flex flex-col bg-white p-6 rounded-xl",children:e.jsxs(Be,{title:"Auth Management",variant:"default",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-6",children:e.jsx("nav",{className:"flex space-x-8","aria-label":"Tabs",children:Vr.map(i=>{const l=i.icon,u=t===i.id;return i.permissions.some(m=>a(m))?e.jsxs("button",{onClick:()=>s(i.id),className:"whitespace-nowrap px-3 py-2 border-b-2 font-semibold text-sm flex items-center gap-2 transition-colors",style:{borderColor:u?(r==null?void 0:r.theme.colors.primary[500])||"#3b82f6":"transparent",color:u?(r==null?void 0:r.theme.colors.primary[600])||"#2563eb":"#6b7280"},children:[e.jsx(l,{className:"w-4 h-4"}),i.label]},i.id):null})})})}),e.jsx("div",{className:"flex-1 overflow-y-auto sidebar-scroll p-1",children:(n==null?void 0:n.component)&&e.jsx(n.component,{})})]})})})},go=()=>{var je;const[t,s]=c.useState([]),[a,r]=c.useState([]),[n,i]=c.useState({}),[l,u]=c.useState(!0),[o,m]=c.useState(null),[h,d]=c.useState(!1),[g,p]=c.useState(null),[x,A]=c.useState("units"),[y,N]=c.useState(!1),[v,j]=c.useState(null),[D,C]=c.useState(""),[f,w]=c.useState(""),[b,z]=c.useState(""),[P,S]=c.useState("units"),[k,G]=c.useState(!1),[B,E]=c.useState(""),[M,F]=c.useState(""),[_,L]=c.useState(0),[R,q]=c.useState("General"),[V,Z]=c.useState(""),[be,X]=c.useState(!0),[ve,ee]=c.useState(""),[me,se]=c.useState("units"),{showToast:Q}=at(),{hasPermission:W}=Ye(),{theme:K}=Pe(),I=[{value:"units",label:"Units",description:"Unit of measure fields"},{value:"divisions",label:"Divisions",description:"Divisions master data fields"},{value:"categories",label:"Categories",description:"Category classification fields"},{value:"cost_codes",label:"Cost Codes",description:"Cost Codes information fields"},{value:"vendors",label:"Vendors",description:"Vendors information fields"},{value:"projects",label:"Projects",description:"Construction project fields"},{value:"tasks",label:"Tasks",description:"Project task fields"}];c.useEffect(()=>{U()},[x]);const U=async()=>{var ae;u(!0);try{const[re,Ie]=await Promise.all([le.get(`/custom-fields?entity=${x}`),le.get("/custom-fields/meta/types")]);if(re.error){m(re.message||"Failed to load custom fields");return}if(Ie.error){m(Ie.message||"Failed to load field types");return}s(re.data||[]),r(((ae=Ie.data)==null?void 0:ae.fieldTypes)||[]);const We=(re.data||[]).map(Se=>le.get(`/custom-fields/${Se.id}/usage`)),Ke=await Promise.all(We),st={};Ke.forEach((Se,ft)=>{!Se.error&&Se.data&&(st[re.data[ft].id]=Se.data)}),i(st)}catch(re){m(re.message||"Failed to load data")}finally{u(!1)}},ce=()=>{C(""),w(""),z(""),S(x),G(!1),E(""),F(""),L(0),q("General"),Z(""),X(!0),p(null),d(!1)},T=async()=>{m(null);try{const ae={fieldName:D.trim(),fieldLabel:f.trim(),fieldType:b,entity:P.trim(),isRequired:k,displayOrder:parseInt(_.toString())||0,groupName:R.trim(),description:V.trim(),isActive:be};B.trim()&&(ae.defaultValue=B.trim()),b==="dropdown"&&(ae.optionsSource=ve,ve==="static"&&M.trim()&&(ae.options=M.split(`
`).map(Ie=>Ie.trim()).filter(Ie=>Ie)),ve==="entity"&&me&&(ae.optionsEntity=me));const re=await le.post("/custom-fields",ae);if(re.error)throw new Error(re.message||"Failed to create custom field");Q({message:"Custom field created successfully",variant:"success"}),ce(),await U()}catch(ae){m(ae.message),Q({message:ae.message||"Failed to create custom field",variant:"error"})}},H=async()=>{if(!g){m("You don't have permission to edit custom fields.");return}m(null);try{const ae={fieldLabel:f.trim(),fieldType:b,isRequired:k,displayOrder:parseInt(_.toString())||0,groupName:R.trim(),description:V.trim(),isActive:be};B.trim()&&(ae.defaultValue=B.trim()),b==="dropdown"&&(ae.optionsSource=ve,ve==="static"&&M.trim()&&(ae.options=M.split(`
`).map(Ie=>Ie.trim()).filter(Ie=>Ie)),ve==="entity"&&me&&(ae.optionsEntity=me));const re=await le.put(`/custom-fields/${g.id}`,ae);if(re.error)throw new Error(re.message||"Failed to update custom field");Q({message:"Custom field updated successfully",variant:"success"}),ce(),await U()}catch(ae){m(ae.message),Q({message:ae.message||"Failed to update custom field",variant:"error"})}},ne=async(ae,re)=>{if(confirm("Are you sure you want to delete this custom field?")){m(null);try{const Ie=await le.delete(`/custom-fields/${ae}`);if(Ie.error)throw new Error(Ie.message||"Failed to delete custom field");Q({message:"Custom field deleted successfully",variant:"success"}),await U()}catch(Ie){m(Ie.message),Q({message:Ie.message||"Failed to delete custom field",variant:"error"})}}},ue=ae=>{var re;C(ae.fieldName),w(ae.fieldLabel),z(ae.fieldType),S(ae.entity),G(ae.isRequired),E(ae.defaultValue||""),F(((re=ae.options)==null?void 0:re.join(`
`))||""),L(ae.displayOrder),q(ae.groupName),Z(ae.description||""),X(ae.isActive),p(ae),d(!0)},Ce=async ae=>{j(ae),N(!0)},ke=()=>{N(!1),j(null)};c.useEffect(()=>{const ae=re=>{re.key==="Escape"&&y&&ke()};if(y)return document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae)},[y]);const $e=[{key:"fieldName",header:"Field Name",width:"150px"},{key:"fieldLabel",header:"Field Label",width:"150px"},{key:"entity",header:"Entity",width:"120px"},{key:"fieldType",header:"Type",width:"100px"},{key:"groupName",header:"Group",width:"120px"},{key:"isRequired",header:"Required",width:"80px",render:ae=>ae.isRequired?"Yes":"No"},{key:"displayOrder",header:"Order",width:"80px",render:ae=>ae.displayOrder},{key:"isActive",header:"Status",width:"100px",render:ae=>e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ae.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ae.isActive?"Active":"Inactive"})},{key:"usage",header:"Usage",width:"100px",render:ae=>{const re=n[ae.id];return re?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm",children:[re.usagePercentage,"%"]}),e.jsx("button",{onClick:()=>Ce(ae),className:"text-blue-600 hover:text-blue-900",title:"View usage details",children:e.jsx(_t,{className:"h-4 w-4"})})]}):"-"}}],$=[{key:"entity",label:"All Entities",options:[{value:"",label:"All Entities"},...I.map(ae=>({value:ae.value,label:ae.label}))]},{key:"fieldType",label:"All Types",options:[{value:"",label:"All Types"},...a.map(ae=>({value:ae.value,label:ae.label}))]},{key:"isActive",label:"All Status",options:[{value:"",label:"All Status"},{value:"true",label:"Active"},{value:"false",label:"Inactive"}]}],J=e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:[e.jsxs("h4",{className:"text-base font-medium mb-4 flex items-center",style:{color:K==null?void 0:K.theme.colors.primary[800]},children:[e.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full mr-3"}),"Basic Configuration"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsxs(he,{label:"Field Name",isRequired:!0,children:[e.jsx("input",{type:"text",value:D,onChange:ae=>C(ae.target.value),placeholder:"e.g., unit_category",disabled:!!g,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 pt-1",children:"Internal field identifier"})]}),e.jsxs(he,{label:"Field Label",isRequired:!0,children:[e.jsx("input",{type:"text",value:f,onChange:ae=>w(ae.target.value),placeholder:"e.g., Unit Category",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 pt-1",children:"Display name for users"})]}),e.jsxs(he,{label:"Entity",isRequired:!0,children:[e.jsx("select",{value:P,onChange:ae=>S(ae.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:I.map(ae=>e.jsx("option",{value:ae.value,children:ae.label},ae.value))}),e.jsx("p",{className:"text-xs text-gray-500 pt-1",children:"Which entity this field belongs to"})]}),e.jsxs(he,{label:"Field Type",isRequired:!0,children:[e.jsxs("select",{value:b,onChange:ae=>z(ae.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select field type"}),a.map(ae=>e.jsx("option",{value:ae.value,children:ae.label},ae.value))]}),e.jsx("p",{className:"text-xs text-gray-500 pt-1",children:"Type of input field"})]}),e.jsxs(he,{label:"Display Order",children:[e.jsx("input",{type:"number",value:_,onChange:ae=>L(parseInt(ae.target.value)||0),placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 pt-1",children:"Order in the form"})]}),e.jsxs(he,{label:"Group Name",children:[e.jsx("input",{type:"text",value:R,onChange:ae=>q(ae.target.value),placeholder:"General",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 pt-1",children:"Group for organizing fields"})]})]})]}),b==="dropdown"&&e.jsxs("div",{className:"bg-white rounded-lg p-1 shadow-sm border border-gray-200",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Dropdown Options"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Options Source"}),e.jsxs("select",{value:ve,onChange:ae=>ee(ae.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"static",children:"Static Options"}),e.jsx("option",{value:"entity",children:"From Entity/Table"})]})]}),ve==="static"&&e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Options (one per line)"}),e.jsx("textarea",{value:M,onChange:ae=>F(ae.target.value),placeholder:`Option 1
Option 2
Option 3`,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),ve==="entity"&&e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Entity"}),e.jsx("select",{value:me,onChange:ae=>se(ae.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:I.map(ae=>e.jsx("option",{value:ae.value,children:ae.label},ae.value))}),e.jsx("p",{className:"text-xs text-gray-500",children:"Dropdown options will be fetched from the selected entity records."})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:[e.jsxs("h4",{className:"text-base font-medium text-gray-900 mb-4 flex items-center",style:{color:K==null?void 0:K.theme.colors.primary[800]},children:[e.jsx("span",{className:"w-2 h-2 bg-purple-600 rounded-full mr-3"}),"Additional Settings"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[e.jsxs(he,{label:"Default Value",children:[e.jsx("input",{type:"text",value:B,onChange:ae=>E(ae.target.value),placeholder:"Default value (optional)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 pt-1",children:"Pre-filled value for new records"})]}),e.jsxs(he,{label:"Description",children:[e.jsx("input",{type:"text",value:V,onChange:ae=>Z(ae.target.value),placeholder:"Field description (optional)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 pt-1",children:"Help text for users"})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:k,onChange:ae=>G(ae.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Required Field"}),e.jsx("span",{className:"text-xs text-gray-500",children:"(Users must fill this field)"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:be,onChange:ae=>X(ae.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"}),e.jsx("span",{className:"text-xs text-gray-500",children:"(Field is visible and usable)"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx(xe,{variant:"outline",onClick:ce,className:"px-6 py-2",children:"Cancel"}),e.jsx(xe,{onClick:g?H:T,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white",children:g?e.jsxs(e.Fragment,{children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Update Field"]}):e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Create Field"]})})]})]}),O=v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:ke,children:e.jsxs("div",{className:"bg-white rounded-lg p-1 max-w-2xl w-full mx-4",onClick:ae=>ae.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-base font-medium text-gray-900",children:["Usage Statistics: ",v.fieldLabel]}),e.jsx("button",{onClick:ke,className:"text-gray-400 hover:text-sm -gray-600 mt-1",children:""})]}),n[v.id]&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("div",{className:"bg-blue-50 p-1 rounded-lg",children:[e.jsx("div",{className:"text-sm font-bold text-blue-600",children:n[v.id].totalRecords}),e.jsx("div",{className:"text-sm text-blue-800",children:"Total Records"})]}),e.jsxs("div",{className:"bg-green-50 p-1 rounded-lg",children:[e.jsx("div",{className:"text-sm font-bold text-green-600",children:n[v.id].recordsWithValue}),e.jsx("div",{className:"text-sm text-green-800",children:"Records with Value"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-1 rounded-lg",children:[e.jsxs("div",{className:"text-sm font-bold text-gray-800",children:[n[v.id].usagePercentage,"%"]}),e.jsx("div",{className:"text-sm text-sm -gray-600 mt-1",children:"Usage Rate"})]}),e.jsxs("div",{className:"text-sm text-sm -gray-600 mt-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Field Name:"})," ",v.fieldName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Entity:"})," ",v.entity]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Empty Records:"})," ",n[v.id].emptyRecords]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(xe,{variant:"outline",onClick:ke,children:"Close"})})]})});return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-base font-semibold",style:{color:K==null?void 0:K.theme.colors.primary[800]},children:"Dynamic Fields Management"}),e.jsx("p",{className:"text-sm text-sm -gray-600",children:"Manage custom fields across all entities"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(he,{label:"Select Entity:",children:e.jsx(Ae,{value:x,onChange:ae=>A(ae.target.value),options:I.map(ae=>({value:ae.value,label:ae.label}))})})})]})}),o&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-red-600",children:o})}),e.jsx(gt,{title:`Custom Fields for ${((je=I.find(ae=>ae.value===x))==null?void 0:je.label)||x}`,items:t,columns:$e,rowId:ae=>ae.id,searchKeys:["fieldName","fieldLabel","entity","groupName"],filters:$,loading:l,error:o,onAdd:()=>{ce(),d(!0)},onEdit:ue,onDelete:async ae=>{const re=t.find(Ie=>Ie.id===ae);re&&await ne(ae,re.entity)},exportHeaders:["Field Name","Field Label","Entity","Field Type","Group Name","Required","Display Order","Status","Description","Created Date","Updated Date"],exportData:ae=>ae.map(re=>[re.fieldName,re.fieldLabel,re.entity,re.fieldType,re.groupName,re.isRequired?"Yes":"No",re.displayOrder.toString(),re.isActive?"Active":"Inactive",re.description||"",new Date(re.createdAt).toLocaleDateString(),new Date(re.updatedAt).toLocaleDateString()])}),e.jsx(Ue,{open:h,onClose:ce,title:g?`Edit Field: ${g.fieldLabel}`:"Create New Custom Field",size:"xl",children:J}),O]})},fo=()=>{const[t,s]=c.useState([]),[a,r]=c.useState(!1),[n,i]=c.useState(null),[l,u]=c.useState(!1),[o,m]=c.useState(null),[h,d]=c.useState(""),[g,p]=c.useState(!0),[x,A]=c.useState("09:00"),[y,N]=c.useState("17:00"),[v,j]=c.useState(15),[D,C]=c.useState([]),{showToast:f}=at(),{hasPermission:w}=Ye(),{theme:b}=Pe(),z=w("labour_rates_create"),P=w("labour_rates_edit"),S=w("labour_rates_delete"),k=[{id:"",code:"REG",description:"Regular Time",rate:"25.00"},{id:"",code:"OVT",description:"Over Time",rate:"37.50"},{id:"",code:"DBT",description:"Double Time",rate:"50.00"},{id:"",code:"SPM",description:"Shift Premium",rate:"5.00"},{id:"",code:"NPM",description:"Night Premium",rate:"3.00"},{id:"",code:"SCK",description:"Sick",rate:"25.00"},{id:"",code:"VAC",description:"Vacation",rate:"25.00"},{id:"",code:"HOL",description:"Holidays",rate:"50.00"}],G=async()=>{r(!0),i(null);try{const X=await Qe.getLabourRates();X.success&&X.data?s(X.data):i(X.error||"Failed to load labour rates")}catch{i("Failed to load labour rates")}finally{r(!1)}};c.useEffect(()=>{G()},[]);const B=()=>{d(""),p(!0),A("09:00"),N("17:00"),j(15),C([...k]),m(null)},E=()=>{B(),u(!0)},M=X=>{d(X.name),p(!!X.inUse),A(X.startTime),N(X.endTime),j(X.gracePeriod),C(X.rateCodes||[...k]),m(X),u(!0)},F=async()=>{if(!h.trim()){f("Name is required","error");return}try{const X={name:h.trim(),inUse:g,startTime:x,endTime:y,gracePeriod:v,rateCodes:D.filter(ee=>ee.code.trim()&&ee.description.trim())};let ve;o?ve=await Qe.updateLabourRate(o.id,X):ve=await Qe.createLabourRate(X),ve.success?(f(o?"Labour rate updated successfully":"Labour rate created successfully","success"),u(!1),B(),G()):f(ve.error||"Failed to save labour rate","error")}catch{f("Failed to save labour rate","error")}},_=async X=>{if(window.confirm("Are you sure you want to delete this labour rate?"))try{const ve=await Qe.deleteLabourRate(X);ve.success?(f("Labour rate deleted successfully","success"),G()):f(ve.error||"Failed to delete labour rate","error")}catch{f("Failed to delete labour rate","error")}},L=()=>{u(!1),B()},R=()=>{const X={id:"",code:"",description:"",rate:"0.00"};C([...D,X])},q=(X,ve,ee)=>{const me=[...D];me[X]={...me[X],[ve]:ee},C(me)},V=X=>{const ve=D.filter((ee,me)=>me!==X);C(ve)},Z=[{key:"name",header:"Name",width:"200px"},{key:"inUse",header:"Active",width:"100px",render:X=>X.inUse?"Active":"Inactive"},{key:"startTime",header:"Start Time",width:"120px"},{key:"endTime",header:"End Time",width:"120px"},{key:"gracePeriod",header:"Grace Period",width:"120px",render:X=>`${X.gracePeriod} min`},{key:"rateCodes",header:"Rate Codes",width:"200px",render:X=>{var ve;return e.jsxs("div",{className:"text-sm",children:[((ve=X.rateCodes)==null?void 0:ve.length)||0," codes configured"]})}}],be=e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 border-b border-gray-200 pb-6",children:e.jsx(he,{label:"Name",isRequired:!0,children:e.jsx(ie,{type:"text",value:h,onChange:X=>d(X.target.value),placeholder:"Enter labour rate name",required:!0})})}),e.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[e.jsx("h5",{className:"text-md font-semibold mb-4",style:{color:b==null?void 0:b.theme.colors.primary[800]},children:"Shift Timings & Grace Period"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5",children:[e.jsx(he,{label:"Start Time",children:e.jsx(ie,{type:"time",value:x,onChange:X=>A(X.target.value)})}),e.jsx(he,{label:"End Time",children:e.jsx(ie,{type:"time",value:y,onChange:X=>N(X.target.value)})}),e.jsx(he,{label:"Grace Period",postText:"(minutes)",children:e.jsx(ie,{type:"number",min:0,max:60,value:v,onChange:X=>j(Number(X.target.value))})})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-md font-semibold mb-4",style:{color:b==null?void 0:b.theme.colors.primary[800]},children:"Rate Codes & Descriptions"}),e.jsxs("div",{className:"space-y-4",children:[D.map((X,ve)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-center p-3 border border-gray-200 rounded-lg",children:[e.jsx(he,{label:"Code",children:e.jsx(ie,{type:"text",value:X.code,onChange:ee=>q(ve,"code",ee.target.value),placeholder:"e.g., REG"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(he,{label:"Description",children:e.jsx(ie,{type:"text",value:X.description,onChange:ee=>q(ve,"description",ee.target.value),placeholder:"e.g., Regular Time"})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{label:"",children:e.jsx(ie,{type:"number",step:"0.01",min:"0",value:X.rate,onChange:ee=>q(ve,"rate",ee.target.value),placeholder:"0.00"})}),e.jsx("button",{onClick:()=>V(ve),className:"p-2 pt-7 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:e.jsx(lt,{className:"w-4 h-4"})})]})]},ve)),e.jsxs(xe,{variant:"secondary",onClick:R,className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),"Add Rate Code"]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:X=>p(X.target.checked)}),"Active"]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(xe,{variant:"secondary",onClick:L,children:"Cancel"}),e.jsx(xe,{onClick:F,children:o?"Update":"Save"})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(gt,{title:"Labour Rates",items:t,columns:Z,rowId:X=>X.id,searchKeys:["name"],loading:a,error:n,onAdd:z?E:void 0,onEdit:P?M:void 0,onDelete:S?_:void 0,showCreateForm:l}),e.jsx(Ue,{open:l,onClose:L,title:o?"Edit Labour Rate":"New Labour Rate",size:"lg",children:be})]})},ut=({label:t,error:s,className:a="",indeterminate:r=!1,...n})=>{const{theme:i}=Pe();return e.jsxs("div",{className:`w-full ${a}`,children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",style:{accentColor:i?i.theme.colors.primary[600]:"#2563eb"},ref:l=>{l&&(l.indeterminate=r)},...n}),t&&e.jsx("span",{className:"ml-2 text-sm text-gray-700",style:{fontFamily:i==null?void 0:i.typography.fontFamily.primary,fontSize:i==null?void 0:i.typography.fontSize.sm},children:t})]}),s&&e.jsx("p",{className:"mt-1 text-sm text-danger-600",children:s})]})},yo=()=>{const[t,s]=c.useState([]),[a,r]=c.useState(!1),[n,i]=c.useState(null),[l,u]=c.useState(!1),[o,m]=c.useState(null),[h,d]=c.useState(""),[g,p]=c.useState(!0),[x,A]=c.useState(1.5),[y,N]=c.useState(!0),[v,j]=c.useState(8),[D,C]=c.useState(!1),[f,w]=c.useState(40),[b,z]=c.useState(!1),[P,S]=c.useState(6),[k,G]=c.useState(8),[B,E]=c.useState(!0),[M,F]=c.useState(!1),[_,L]=c.useState(!1),[R,q]=c.useState(2),[V,Z]=c.useState(!0),[be,X]=c.useState(12),[ve,ee]=c.useState(!1),[me,se]=c.useState(40),[Q,W]=c.useState(!1),[K,I]=c.useState(7),[U,ce]=c.useState(8),[T,H]=c.useState(!1),[ne,ue]=c.useState(!0),[Ce,ke]=c.useState(!0),{showToast:$e}=at(),{hasPermission:$}=Ye(),{theme:J}=Pe(),O=$("overtime_rules_create"),je=$("overtime_rules_edit"),ae=$("overtime_rules_delete"),re=async()=>{r(!0),i(null);try{const pe=await Qe.getOvertimeRules();pe.success&&pe.data?s(pe.data):i(pe.error||"Failed to load overtime rules")}catch{i("Failed to load overtime rules")}finally{r(!1)}};c.useEffect(()=>{re()},[]);const Ie=()=>{d(""),p(!0),A(1.5),N(!0),j(8),C(!1),w(40),z(!1),S(6),G(8),E(!0),F(!1),L(!1),q(2),Z(!0),X(12),ee(!1),se(40),W(!1),I(7),ce(8),H(!1),ue(!0),ke(!0),m(null)},We=()=>{Ie(),u(!0)},Ke=pe=>{d(pe.name),p(!!pe.inUse);const ye=pe.overtimeRules;A(ye.multiplier||1.5),N(ye.dailyCheck||!1),j(ye.daily||8),C(ye.weeklyCheck||!1),w(ye.weekly||40),z(ye.consecutiveCheck||!1),S(ye.consecutiveDay||6),G(ye.consecutiveHours||8),E(ye.saturday||!1),F(ye.sunday||!1),L(ye.holiday||!1);const Me=pe.doubleTimeRules;q(Me.multiplier||2),Z(Me.dailyCheck||!1),X(Me.daily||12),ee(Me.weeklyCheck||!1),se(Me.weekly||40),W(Me.consecutiveCheck||!1),I(Me.consecutiveDay||7),ce(Me.consecutiveHours||8),H(Me.saturday||!1),ue(Me.sunday||!1),ke(Me.holiday||!1),m(pe),u(!0)},st=async()=>{if(!h.trim()){$e("Name is required","error");return}try{const pe={name:h.trim(),inUse:g,overtimeRules:{multiplier:x,dailyCheck:y,daily:v,weeklyCheck:D,weekly:f,consecutiveCheck:b,consecutiveDay:P,consecutiveHours:k,saturday:B,sunday:M,holiday:_},doubleTimeRules:{multiplier:R,dailyCheck:V,daily:be,weeklyCheck:ve,weekly:me,consecutiveCheck:Q,consecutiveDay:K,consecutiveHours:U,saturday:T,sunday:ne,holiday:Ce}};let ye;o?ye=await Qe.updateOvertimeRule(o.id,pe):ye=await Qe.createOvertimeRule(pe),ye.success?($e(o?"Overtime rule updated successfully":"Overtime rule created successfully","success"),u(!1),Ie(),re()):$e(ye.error||"Failed to save overtime rule","error")}catch{$e("Failed to save overtime rule","error")}},Se=async pe=>{if(window.confirm("Are you sure you want to delete this overtime rule?"))try{const ye=await Qe.deleteOvertimeRule(pe);ye.success?($e("Overtime rule deleted successfully","success"),re()):$e(ye.error||"Failed to delete overtime rule","error")}catch{$e("Failed to delete overtime rule","error")}},ft=()=>{u(!1),Ie()},oe=[{key:"name",header:"Name",width:"200px"},{key:"inUse",header:"Active",width:"100px",render:pe=>pe.inUse?"Active":"Inactive"},{key:"overtimeRules",header:"Time & Half",width:"300px",render:pe=>{const ye=pe.overtimeRules,Me=[];return ye.dailyCheck&&Me.push(`Daily after ${ye.daily}h`),ye.weeklyCheck&&Me.push(`Weekly after ${ye.weekly}h`),ye.consecutiveCheck&&Me.push(`${ye.consecutiveDay}th consecutive day`),ye.saturday&&Me.push("Saturday"),ye.sunday&&Me.push("Sunday"),ye.holiday&&Me.push("Holiday"),e.jsx("div",{className:"text-sm",children:Me.length>0?`${ye.multiplier}x: ${Me.join(", ")}`:"None"})}},{key:"doubleTimeRules",header:"Double Time",width:"300px",render:pe=>{const ye=pe.doubleTimeRules,Me=[];return ye.dailyCheck&&Me.push(`Daily after ${ye.daily}h`),ye.weeklyCheck&&Me.push(`Weekly after ${ye.weekly}h`),ye.consecutiveCheck&&Me.push(`${ye.consecutiveDay}th consecutive day`),ye.saturday&&Me.push("Saturday"),ye.sunday&&Me.push("Sunday"),ye.holiday&&Me.push("Holiday"),e.jsx("div",{className:"text-sm",children:Me.length>0?`${ye.multiplier}x: ${Me.join(", ")}`:"None"})}}],we=e.jsxs("div",{className:"space-y-6 [&_div.w-full]:w-auto p-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:e.jsx("div",{className:"md:col-span-2",children:e.jsx(he,{label:"Rule Name",isRequired:!0,children:e.jsx(ie,{type:"text",value:h,onChange:pe=>d(pe.target.value),placeholder:"Enter overtime rule name",required:!0})})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5 ",children:[e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-gray-200 space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",style:{color:J==null?void 0:J.theme.colors.primary[800]},children:"Overtime - Time & Half"}),e.jsx(ie,{label:"Multiplier",type:"number",step:"0.1",min:"0",value:x,onChange:pe=>A(parseFloat(pe.target.value)||1.5),className:"w-32"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{checked:y,onChange:pe=>N(pe.target.checked)}),e.jsx("span",{className:"text-sm",children:"Daily After"}),e.jsx(ie,{type:"number",min:"0",value:v,onChange:pe=>j(parseFloat(pe.target.value)||0),className:"w-24"}),e.jsx("span",{className:"text-sm",children:"hours"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{checked:D,onChange:pe=>C(pe.target.checked)}),e.jsx("span",{className:"text-sm",children:"Weekly After"}),e.jsx(ie,{type:"number",min:"0",value:f,onChange:pe=>w(parseFloat(pe.target.value)||0),className:"w-24"}),e.jsx("span",{className:"text-sm",children:"hours"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{checked:b,onChange:pe=>z(pe.target.checked)}),e.jsx("span",{className:"text-sm",children:"Consecutive Day"}),e.jsx(Ae,{value:P.toString(),onChange:pe=>S(parseInt(pe.target.value)),className:"w-20",options:[{value:"6",label:"6th"},{value:"7",label:"7th"}]}),e.jsx("span",{className:"text-sm",children:"After"}),e.jsx(ie,{type:"number",min:"0",value:k,onChange:pe=>G(parseFloat(pe.target.value)||0),className:"w-24"}),e.jsx("span",{className:"text-sm",children:"hours"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"All hours on:"}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2 space-x-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(ut,{checked:B,onChange:pe=>E(pe.target.checked)}),e.jsx("span",{className:"text-sm",children:"Saturday"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(ut,{checked:M,onChange:pe=>F(pe.target.checked)}),e.jsx("span",{className:"text-sm",children:"Sunday"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(ut,{checked:_,onChange:pe=>L(pe.target.checked)}),e.jsx("span",{className:"text-sm",children:"Holiday"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-gray-200 space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",style:{color:J==null?void 0:J.theme.colors.primary[800]},children:"Overtime - Double Time"}),e.jsx(ie,{label:"Multiplier",type:"number",step:"0.1",min:"0",value:R,onChange:pe=>q(parseFloat(pe.target.value)||2),className:"w-32"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{checked:V,onChange:pe=>Z(pe.target.checked)}),e.jsx("span",{className:"text-sm",children:"Daily After"}),e.jsx(ie,{type:"number",min:"0",value:be,onChange:pe=>X(parseFloat(pe.target.value)||0),className:"w-24"}),e.jsx("span",{className:"text-sm",children:"hours"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{checked:ve,onChange:pe=>ee(pe.target.checked)}),e.jsx("span",{className:"text-sm",children:"Weekly After"}),e.jsx(ie,{type:"number",min:"0",value:me,onChange:pe=>se(parseFloat(pe.target.value)||0),className:"w-24"}),e.jsx("span",{className:"text-sm",children:"hours"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{checked:Q,onChange:pe=>W(pe.target.checked)}),e.jsx("span",{className:"text-sm",children:"Consecutive Day"}),e.jsx(Ae,{value:K.toString(),onChange:pe=>I(parseInt(pe.target.value)),className:"w-20",options:[{value:"6",label:"6th"},{value:"7",label:"7th"}]}),e.jsx("span",{className:"text-sm",children:"After"}),e.jsx(ie,{type:"number",min:"0",value:U,onChange:pe=>ce(parseFloat(pe.target.value)||0),className:"w-24"}),e.jsx("span",{className:"text-sm",children:"hours"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"All hours on:"}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2 space-x-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(ut,{checked:T,onChange:pe=>H(pe.target.checked)}),e.jsx("span",{className:"text-sm",children:"Saturday"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(ut,{checked:ne,onChange:pe=>ue(pe.target.checked)}),e.jsx("span",{className:"text-sm",children:"Sunday"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(ut,{checked:Ce,onChange:pe=>ke(pe.target.checked)}),e.jsx("span",{className:"text-sm",children:"Holiday"})]})]})]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:pe=>p(pe.target.checked)}),"Active"]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(xe,{variant:"secondary",onClick:ft,children:"Cancel"}),e.jsx(xe,{onClick:st,children:o?"Update":"Save"})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(gt,{title:"Overtime Rules",items:t,columns:oe,rowId:pe=>pe.id,searchKeys:["name"],loading:a,error:n,onAdd:O?We:void 0,onEdit:je?Ke:void 0,onDelete:ae?Se:void 0,showCreateForm:l}),e.jsx(Ue,{open:l,onClose:ft,title:o?"Edit Overtime Rule":"New Overtime Rule",size:"xl",children:we})]})},bo=()=>{const[t,s]=c.useState([]),[a,r]=c.useState(!1),[n,i]=c.useState(null),[l,u]=c.useState(!1),[o,m]=c.useState(null),[h,d]=c.useState([]),[g,p]=c.useState([]),[x,A]=c.useState([]),[y,N]=c.useState([]),[v,j]=c.useState(""),[D,C]=c.useState(!0),[f,w]=c.useState(""),[b,z]=c.useState(""),[P,S]=c.useState(""),[k,G]=c.useState(""),{showToast:B}=at(),{hasPermission:E}=Ye(),M=E("pay_groups_create"),F=E("pay_groups_edit"),_=E("pay_groups_delete"),L=async()=>{r(!0),i(null);try{const se=await Qe.getPayGroups();se.success&&se.data?s(se.data):i(se.error||"Failed to load pay groups")}catch{i("Failed to load pay groups")}finally{r(!1)}},R=async()=>{try{const[se,Q,W,K]=await Promise.all([Qe.getPayPeriods(),Qe.getOvertimeRules(),Qe.getShiftRules(),Qe.getLabourRates()]);se.success&&se.data&&d(se.data.filter(I=>I.inUse)),Q.success&&Q.data&&p(Q.data.filter(I=>I.inUse)),W.success&&W.data&&A(W.data.filter(I=>I.inUse)),K.success&&K.data?N(K.data):(console.error("Failed to load labour rates:",K.error||"Unknown error"),B({message:K.error||"Failed to load labour rates",variant:"error"}))}catch(se){console.error("Error loading related data:",se),B({message:"Failed to load related data",variant:"error"})}};c.useEffect(()=>{L(),R()},[]);const q=()=>{j(""),C(!0),w(""),z(""),S(""),G(""),m(null)},V=()=>{q(),u(!0)},Z=se=>{j(se.name),C(!!se.inUse),w(se.payPeriodId||""),z(se.overtimeRuleId||""),S(se.shiftRuleId||""),G(se.labourRateId||""),m(se),u(!0)},be=async()=>{if(!v.trim()){B({message:"Name is required",variant:"error"});return}try{const se={name:v.trim(),inUse:D,payPeriodId:f||void 0,overtimeRuleId:b||void 0,shiftRuleId:P||void 0,labourRateId:k||void 0};let Q;o?Q=await Qe.updatePayGroup(o.id,se):Q=await Qe.createPayGroup(se),Q.success?(B({message:o?"Pay group updated successfully":"Pay group created successfully",variant:"success"}),u(!1),q(),L()):B({message:Q.error||"Failed to save pay group",variant:"error"})}catch{B({message:"Failed to save pay group",variant:"error"})}},X=async se=>{if(window.confirm("Are you sure you want to delete this pay group?"))try{const Q=await Qe.deletePayGroup(se);Q.success?(B({message:"Pay group deleted successfully",variant:"success"}),L()):B({message:Q.error||"Failed to delete pay group",variant:"error"})}catch{B({message:"Failed to delete pay group",variant:"error"})}},ve=()=>{u(!1),q()},ee=[{key:"name",header:"Name",width:"200px"},{key:"inUse",header:"Active",width:"100px",render:se=>se.inUse?"Active":"Inactive"},{key:"payPeriodName",header:"Pay Period",width:"150px",render:se=>se.payPeriodName||"Not Set"},{key:"overtimeRuleName",header:"Overtime Rule",width:"150px",render:se=>se.overtimeRuleName||"Not Set"},{key:"shiftRuleName",header:"Shift Rule",width:"150px",render:se=>se.shiftRuleName||"Not Set"},{key:"labourRateName",header:"Labour Rate",width:"150px",render:se=>se.labourRateName||"Not Set"}],me=e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2",children:e.jsx(he,{label:"Name",isRequired:!0,children:e.jsx(ie,{type:"text",value:v,onChange:se=>j(se.target.value),placeholder:"Enter pay group name",required:!0})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsx(he,{label:"Pay Period",children:e.jsx(Ae,{value:f,onChange:se=>w(se.target.value),options:[{value:"",label:"Select Pay Period"},...h.map(se=>({value:se.id,label:se.name}))]})}),e.jsx(he,{label:"Overtime Rule",children:e.jsx(Ae,{value:b,onChange:se=>z(se.target.value),options:[{value:"",label:"Select Overtime Rule"},...g.map(se=>({value:se.id,label:se.name}))]})}),e.jsx(he,{label:"Shift Rule",children:e.jsx(Ae,{value:P,onChange:se=>S(se.target.value),options:[{value:"",label:"Select Shift Rule"},...x.map(se=>({value:se.id,label:se.name}))]})}),e.jsx(he,{label:"Labour Rate",children:e.jsx(Ae,{value:k,onChange:se=>G(se.target.value),options:[{value:"",label:"Select Labour Rate"},...y.map(se=>({value:se.id,label:se.name}))]})})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:D,onChange:se=>C(se.target.checked)}),"Active"]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(xe,{variant:"secondary",onClick:ve,children:"Cancel"}),e.jsx(xe,{onClick:be,children:o?"Update":"Save"})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(gt,{title:"Pay Groups",items:t,columns:ee,rowId:se=>se.id,searchKeys:["name"],loading:a,error:n,onAdd:M?V:void 0,onEdit:F?Z:void 0,onDelete:_?X:void 0,showCreateForm:l}),e.jsx(Ue,{open:l,onClose:ve,title:o?"Edit Pay Group":"New Pay Group",size:"lg",children:me})]})},vo=()=>{const[t,s]=c.useState([]),[a,r]=c.useState(!1),[n,i]=c.useState(null),[l,u]=c.useState(!1),[o,m]=c.useState(null),{theme:h}=Pe(),[d,g]=c.useState(""),[p,x]=c.useState(!0),[A,y]=c.useState("monthly"),[N,v]=c.useState("monday"),[j,D]=c.useState({in:{needRound:"no",method:"nearest",minutes:5},out:{needRound:"no",method:"nearest",minutes:5}}),{showToast:C}=at(),{hasPermission:f}=Ye(),w=f("pay_periods_create"),b=f("pay_periods_edit"),z=f("pay_periods_delete"),P=async()=>{r(!0),i(null);try{const R=await Qe.getPayPeriods();R.success&&R.data?s(R.data):i(R.error||"Failed to load pay periods")}catch{i("Failed to load pay periods")}finally{r(!1)}};c.useEffect(()=>{P()},[]);const S=()=>{g(""),x(!0),y("monthly"),v("monday"),D({in:{needRound:"no",method:"nearest",minutes:5},out:{needRound:"no",method:"nearest",minutes:5}}),m(null)},k=()=>{S(),u(!0)},G=R=>{g(R.name),x(!!R.inUse),y(R.periodType),v(R.startsOn),D(R.punchRounding),m(R),u(!0)},B=async()=>{if(!d.trim()){C("Name is required","error");return}try{const R={name:d.trim(),inUse:p,periodType:A,startsOn:N,punchRounding:j};let q;o?q=await Qe.updatePayPeriod(o.id,R):q=await Qe.createPayPeriod(R),q.success?(C(o?"Pay period updated successfully":"Pay period created successfully","success"),u(!1),S(),P()):C(q.error||"Failed to save pay period","error")}catch{C("Failed to save pay period","error")}},E=async R=>{const q=t.find(V=>V.id===R);if(q)if(q.inUse){if(window.confirm(`This pay period is currently active. Active pay periods cannot be deleted.

Would you like to deactivate it first and then delete it?`))try{const Z=await Qe.updatePayPeriod(R,{...q,inUse:!1});Z.success?(C("Pay period deactivated successfully","success"),P(),window.confirm("Pay period has been deactivated. Do you want to delete it now?")&&await M(R)):C(Z.error||"Failed to deactivate pay period","error")}catch{C("Failed to deactivate pay period","error")}}else window.confirm("Are you sure you want to delete this pay period?")&&await M(R)},M=async R=>{try{const q=await Qe.deletePayPeriod(R);if(q.success)C("Pay period deleted successfully","success"),P();else{const V=q.error||q.message||"Failed to delete pay period";C(V,"error")}}catch(q){const V=q instanceof Error?q.message:"Failed to delete pay period";C(V,"error")}},F=()=>{u(!1),S()},_=[{key:"name",header:"Name",width:"200px"},{key:"inUse",header:"Active",width:"100px",render:R=>R.inUse?"Active":"Inactive"},{key:"periodType",header:"Period Type",width:"150px",render:R=>R.periodType.charAt(0).toUpperCase()+R.periodType.slice(1).replace("-"," ")},{key:"startsOn",header:"Starts On",width:"120px",render:R=>R.startsOn.charAt(0).toUpperCase()+R.startsOn.slice(1)},{key:"punchRounding",header:"Punch Rounding",width:"200px",render:R=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:["In:"," ",R.punchRounding.in.needRound==="yes"?`${R.punchRounding.in.method} (${R.punchRounding.in.minutes}min)`:"No"]}),e.jsxs("div",{children:["Out:"," ",R.punchRounding.out.needRound==="yes"?`${R.punchRounding.out.method} (${R.punchRounding.out.minutes}min)`:"No"]})]})}],L=e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 border-b border-gray-200 pb-6",children:[e.jsx(he,{label:"Name",isRequired:!0,children:e.jsx(ie,{type:"text",value:d,onChange:R=>g(R.target.value),placeholder:"Enter pay period name",required:!0})}),e.jsx(he,{label:"Period Type",children:e.jsx(Ae,{value:A,onChange:R=>y(R.target.value),options:[{value:"weekly",label:"Weekly"},{value:"bi-weekly",label:"Bi-Weekly"},{value:"semi-monthly",label:"Semi-Monthly"},{value:"monthly",label:"Monthly"}]})}),e.jsx(he,{label:"Starts On",children:e.jsx(Ae,{value:N,onChange:R=>v(R.target.value),options:[{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"}]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-md font-semibold",style:{color:h==null?void 0:h.theme.colors.primary[700]},children:"Punch Rounding Rules"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h6",{className:"text-sm font-semibold text-gray-700",children:"IN Rounding"}),e.jsx(he,{label:"Need to Round",children:e.jsx(Ae,{value:j.in.needRound,onChange:R=>D({...j,in:{...j.in,needRound:R.target.value}}),options:[{value:"yes",label:"Yes"},{value:"no",label:"No"}]})}),e.jsx(he,{label:"Rounding Method",children:e.jsx(Ae,{value:j.in.method,onChange:R=>D({...j,in:{...j.in,method:R.target.value}}),options:[{value:"up",label:"Up"},{value:"down",label:"Down"},{value:"nearest",label:"Nearest"}]})}),e.jsx(he,{label:"Minutes to Round",children:e.jsx(Ae,{value:j.in.minutes.toString(),onChange:R=>D({...j,in:{...j.in,minutes:Number(R.target.value)}}),options:Array.from([3,5,10,15,30]).map(R=>({value:R.toString(),label:`${R} minutes`}))})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h6",{className:"text-sm font-semibold text-gray-700",children:"OUT Rounding"}),e.jsx(he,{label:"Need to Round",children:e.jsx(Ae,{value:j.out.needRound,onChange:R=>D({...j,out:{...j.out,needRound:R.target.value}}),options:[{value:"yes",label:"Yes"},{value:"no",label:"No"}]})}),e.jsx(he,{label:"Rounding Method",children:e.jsx(Ae,{value:j.out.method,onChange:R=>D({...j,out:{...j.out,method:R.target.value}}),options:[{value:"up",label:"Up"},{value:"down",label:"Down"},{value:"nearest",label:"Nearest"}]})}),e.jsx(he,{label:"Minutes to Round",children:e.jsx(Ae,{value:j.out.minutes.toString(),onChange:R=>D({...j,out:{...j.out,minutes:Number(R.target.value)}}),options:Array.from({length:29},(R,q)=>q+2).map(R=>({value:R.toString(),label:`${R} minutes`}))})})]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:R=>x(R.target.checked)}),"Active"]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(xe,{variant:"secondary",onClick:F,children:"Cancel"}),e.jsx(xe,{onClick:B,children:o?"Update":"Save"})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(gt,{title:"Pay Periods",items:t,columns:_,rowId:R=>R.id,searchKeys:["name","periodType"],loading:a,error:n,onAdd:w?k:void 0,onEdit:b?G:void 0,onDelete:z?E:void 0}),e.jsx(Ue,{title:o?"Edit Pay Period":"New Pay Period",open:l,onClose:F,size:"lg",children:L})]})},jo=({phaseTemplates:t,onPhaseTemplatesChange:s,currentUserId:a})=>{const[r,n]=c.useState(!1),[i,l]=c.useState(void 0),[u,o]=c.useState(""),[m,h]=c.useState("all"),[d,g]=c.useState([]),{theme:p}=Pe();c.useEffect(()=>{(async()=>{try{const b=await le.get("/cost-codes");!b.error&&b.data&&g(b.data)}catch{}})()},[]);const x=["#3B82F6","#8B5CF6","#14B8A6","#F59E0B","#EF4444","#10B981","#F97316","#8B5A2B","#6B7280","#EC4899"],A=t.filter(w=>{const b=w.name.toLowerCase().includes(u.toLowerCase())||w.description.toLowerCase().includes(u.toLowerCase()),z=m==="all"||m==="active"&&w.isActive||m==="inactive"&&!w.isActive;return b&&z}),y=()=>{l(void 0),n(!0)},N=w=>{l(w),n(!0)},v=w=>{if(i){const b=t.map(z=>z.id===i.id?{...z,...w,updatedAt:new Date().toISOString()}:z);s(b)}else{const b={id:`template-${Date.now()}`,name:w.name||"",description:w.description||"",color:w.color||x[0],icon:w.icon,isActive:!0,isDefault:!1,category:w.category||"custom",estimatedDuration:w.estimatedDuration||0,costCodeIds:w.costCodeIds||[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:a||"system"};s([...t,b])}n(!1),l(void 0)},j=w=>{const b=t.find(z=>z.id===w);if(b!=null&&b.isDefault){alert("Cannot delete system-defined templates");return}if(confirm("Are you sure you want to delete this template? This action cannot be undone.")){const z=t.filter(P=>P.id!==w);s(z)}},D=w=>{const b=t.map(z=>z.id===w?{...z,isActive:!z.isActive,updatedAt:new Date().toISOString()}:z);s(b)},C=w=>{const b={...w,id:`template-${Date.now()}`,name:`${w.name} (Copy)`,isDefault:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:a||"system"};s([...t,b])},f=w=>{if(!w)return"bg-gray-100 text-gray-800";switch(w){case"pre-construction":return"bg-blue-100 text-blue-800";case"construction":return"bg-green-100 text-green-800";case"post-construction":return"bg-purple-100 text-purple-800";case"custom":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-base font-bold",style:{color:p==null?void 0:p.theme.colors.primary[800]},children:"Phase Template Management"}),e.jsx("p",{className:"text-sm -gray-600",children:"Create and manage reusable phase templates for projects"})]}),e.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(_e,{size:20}),"Create Template"]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx(he,{label:"Search",children:e.jsx("input",{type:"text",value:u,onChange:w=>o(w.target.value),placeholder:"Search templates...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx(he,{label:"Status",children:e.jsxs("select",{value:m,onChange:w=>h(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-1",children:A.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(kt,{size:48,className:"mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first phase template to get started"}),e.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors mx-auto",children:[e.jsx(_e,{size:20}),"Create First Template"]})]}):A.map(w=>{var b;return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow h-full flex flex-col",children:[e.jsxs("div",{className:"p-1 border-b border-gray-200 flex-1",children:[e.jsxs("div",{className:"flex flex-col gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full mt-1 flex-shrink-0",style:{backgroundColor:w.color}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:w.name}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:w.description})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[w.category&&e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f(w.category)}`,children:w.category.replace("-"," ")}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.isActive?"Active":"Inactive"}),w.isDefault&&e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"System"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-1 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(xr,{size:16}),w.estimatedDuration," days"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ra,{size:16}),((b=w.costCodeIds)==null?void 0:b.length)||0," cost codes"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>C(w),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Duplicate",children:e.jsx(Ts,{size:16})}),e.jsx("button",{onClick:()=>N(w),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit",children:e.jsx(Tt,{size:16})}),e.jsx("button",{onClick:()=>D(w.id),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:w.isActive?"Deactivate":"Activate",children:w.isActive?e.jsx(Vt,{size:16}):e.jsx(jt,{size:16})}),!w.isDefault&&e.jsx("button",{onClick:()=>j(w.id),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(lt,{size:16})})]})]})]}),e.jsx("div",{className:"p-1 bg-gray-50 mt-auto",children:e.jsxs("div",{children:[e.jsx("h6",{className:"font-sm text-gray-900 mb-2",children:"Cost Codes"}),!w.costCodeIds||w.costCodeIds.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No cost codes assigned"}):e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:[w.costCodeIds.slice(0,3).map((z,P)=>{const S=d.find(k=>k.id===z);return e.jsx("li",{className:"truncate",children:S?`${S.code} - ${S.name}`:z},P)}),w.costCodeIds.length>3&&e.jsxs("li",{className:"text-gray-500",children:["... and ",w.costCodeIds.length-3," more"]})]})]})})]},w.id)})}),e.jsx(Ue,{open:r,onClose:()=>{n(!1),l(void 0)},title:i?"Edit Phase Template":"Create New Phase Template",size:"lg",children:e.jsx(No,{template:i,onSave:v,onClose:()=>{n(!1),l(void 0)},existingTemplates:t,phaseColors:x,costCodes:d})})]})},No=({template:t,onSave:s,onClose:a,existingTemplates:r,phaseColors:n,costCodes:i})=>{const[l,u]=c.useState({name:"",description:"",color:n[0],estimatedDuration:0,costCodeIds:[]}),[o,m]=c.useState([]);c.useEffect(()=>{if(t){const p=t.costCodeIds||[];u({name:t.name,description:t.description,color:t.color,estimatedDuration:t.estimatedDuration,costCodeIds:p}),m(p)}else u({name:"",description:"",color:n[0],estimatedDuration:0,costCodeIds:[]}),m([])},[t,n]);const h=p=>{if(p.preventDefault(),!l.name.trim()){alert("Please enter a template name");return}if(r.some(A=>A.name.toLowerCase()===l.name.toLowerCase()&&(!t||A.id!==t.id))){alert("A template with this name already exists");return}s(l)},d=p=>{const x=o.includes(p)?o.filter(A=>A!==p):[...o,p];m(x),u(A=>({...A,costCodeIds:x}))},g=p=>{const x=o.filter(A=>A!==p);m(x),u(A=>({...A,costCodeIds:x}))};return e.jsxs("form",{onSubmit:h,className:"space-y-6 p-6",children:[e.jsx(he,{label:"Template Name",isRequired:!0,children:e.jsx("input",{type:"text",value:l.name,onChange:p=>u(x=>({...x,name:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter template name",required:!0})}),e.jsx(he,{label:"Description",children:e.jsx("textarea",{value:l.description,onChange:p=>u(x=>({...x,description:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Enter template description"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx(he,{label:"Estimated Duration",postText:"(days)",children:e.jsx("input",{type:"number",value:l.estimatedDuration,onChange:p=>u(x=>({...x,estimatedDuration:parseInt(p.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0"})}),e.jsx(he,{label:"Color",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-gray-300",style:{backgroundColor:l.color}}),e.jsx("div",{className:"flex gap-1",children:n.map(p=>e.jsx("button",{type:"button",onClick:()=>u(x=>({...x,color:p})),className:`w-6 h-6 rounded border-2 ${l.color===p?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:p}},p))})]})})]}),e.jsx(he,{label:"Cost Codes",children:e.jsxs("div",{className:"space-y-3",children:[o.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Selected Cost Codes:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(p=>{const x=i.find(A=>A.id===p);return e.jsxs("div",{className:"flex items-center gap-1 px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm",children:[e.jsx("span",{children:x?`${x.code} - ${x.name}`:p}),e.jsx("button",{type:"button",onClick:()=>g(p),className:"p-0.5 hover:bg-blue-100 rounded transition-colors",children:e.jsx(zt,{size:14})})]},p)})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Available Cost Codes:"}),e.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-lg",children:i.filter(p=>p.isActive!==!1).length===0?e.jsx("p",{className:"text-sm text-gray-500 p-3",children:"No cost codes available"}):e.jsx("div",{className:"divide-y divide-gray-200",children:i.filter(p=>p.isActive!==!1).map(p=>e.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:o.includes(p.id),onChange:()=>d(p.id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.code}),e.jsx("div",{className:"text-xs text-gray-500",children:p.name})]})]},p.id))})})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors w-full sm:w-auto",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors w-full sm:w-auto",children:[e.jsx(Ss,{size:16}),t?"Update Template":"Create Template"]})]})]})},wo=["All Days","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],So=()=>{const[t,s]=c.useState([]),[a,r]=c.useState(!1),[n,i]=c.useState(null),[l,u]=c.useState(!1),[o,m]=c.useState(null),[h,d]=c.useState(""),[g,p]=c.useState(!0),[x,A]=c.useState([]),[y,N]=c.useState(!1),[v,j]=c.useState(!1),[D,C]=c.useState(8),[f,w]=c.useState(30),[b,z]=c.useState("time-specified"),[P,S]=c.useState(!1),[k,G]=c.useState(15),[B,E]=c.useState(4),{showToast:M}=at(),{hasPermission:F}=Ye(),{theme:_}=Pe(),L=F("shift_rules_create"),R=F("shift_rules_edit"),q=F("shift_rules_delete"),V=async()=>{r(!0),i(null);try{const T=await Qe.getShiftRules();T.success&&T.data?s(T.data):i(T.error||"Failed to load shift rules")}catch{i("Failed to load shift rules")}finally{r(!1)}};c.useEffect(()=>{V()},[]);const Z=()=>({id:`shift-${Date.now()}-${Math.random()}`,name:`Shift ${x.length+1}`,applyToDays:["All Days"],startTime:"09:00",endTime:"18:00",enforceStart:!1,enforceEnd:!1,floatBefore:5,floatAfter:5}),be=()=>{d(""),p(!0),A([Z()]),N(!1),j(!1),C(8),w(30),z("time-specified"),S(!1),G(15),E(4),m(null)},X=()=>{be(),u(!0)},ve=T=>{d(T.name),p(!!T.inUse),A(T.shifts&&T.shifts.length>0?T.shifts:[Z()]);const H=T.mealBreak||{};N(H.enabled||!1),j(H.autoDeduct||!1),C(H.minHoursWorked||8),w(H.timeToDeduct||30),z(H.deductionPlacement||"time-specified");const ne=T.restBreak||{};S(ne.enabled||!1),G(ne.duration||15),E(ne.frequency||4),m(T),u(!0)},ee=async()=>{if(!h.trim()){M("Name is required","error");return}if(x.length===0){M("At least one shift is required","error");return}for(const T of x){if(!T.startTime){M("All shifts must have a start time","error");return}if(!T.endTime){M("All shifts must have an end time","error");return}}try{const T={name:h.trim(),inUse:g,shifts:x,mealBreak:{enabled:y,autoDeduct:v,minHoursWorked:D,timeToDeduct:f,deductionPlacement:b},restBreak:{enabled:P,duration:k,frequency:B}};let H;o?H=await Qe.updateShiftRule(o.id,T):H=await Qe.createShiftRule(T),H.success?(M(o?"Shift rule updated successfully":"Shift rule created successfully","success"),u(!1),be(),V()):M(H.error||"Failed to save shift rule","error")}catch{M("Failed to save shift rule","error")}},me=async T=>{if(window.confirm("Are you sure you want to delete this shift rule?"))try{const H=await Qe.deleteShiftRule(T);H.success?(M("Shift rule deleted successfully","success"),V()):M(H.error||"Failed to delete shift rule","error")}catch{M("Failed to delete shift rule","error")}},se=()=>{u(!1),be()},Q=()=>{if(x.some(H=>H.applyToDays.includes("All Days"))){M("Cannot add a new shift when 'All Days' is selected in any existing shift.","error");return}A([...x,Z()])},W=T=>{A(x.filter(H=>H.id!==T))},K=(T,H,ne)=>{A(x.map(ue=>ue.id===T?{...ue,[H]:ne}:ue))},I=(T,H,ne)=>{A(x.map(ue=>{if(ue.id!==T)return ue;let Ce=[...ue.applyToDays];return H==="All Days"&&ne?Ce=["All Days"]:H!=="All Days"&&ne?(Ce=Ce.filter(ke=>ke!=="All Days"),Ce.includes(H)||Ce.push(H)):Ce=Ce.filter(ke=>ke!==H),Ce.length===0&&(Ce=["All Days"]),{...ue,applyToDays:Ce}}))},U=[{key:"name",header:"Name",width:"200px"},{key:"inUse",header:"Active",width:"100px",render:T=>T.inUse?"Active":"Inactive"},{key:"shifts",header:"Shifts",width:"150px",render:T=>{var H;return`${((H=T.shifts)==null?void 0:H.length)||0} shift(s)`}},{key:"mealBreak",header:"Meal Break",width:"120px",render:T=>{var H;return(H=T.mealBreak)!=null&&H.enabled?"Enabled":"Disabled"}},{key:"restBreak",header:"Rest Break",width:"120px",render:T=>{var H;return(H=T.restBreak)!=null&&H.enabled?"Enabled":"Disabled"}}],ce=e.jsxs("div",{className:"space-y-6 [&_div.w-full]:w-auto p-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:e.jsx("div",{className:"md:col-span-2",children:e.jsx(he,{label:"Rule Set Name",isRequired:!0,children:e.jsx(ie,{type:"text",value:h,onChange:T=>d(T.target.value),placeholder:"Enter shift rule name",required:!0})})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-lg",style:{color:_==null?void 0:_.theme.colors.primary[800]},children:"Shift Rules"}),e.jsx(xe,{onClick:Q,size:"sm",children:"+ Add Shift"})]}),e.jsx("div",{className:"space-y-4",children:x.map((T,H)=>e.jsxs("div",{className:`border rounded-lg p-3 bg-${_==null?void 0:_.theme.name}-50 space-y-5`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ie,{type:"text",value:T.name,onChange:ne=>K(T.id,"name",ne.target.value),className:"font-medium border-b border-gray-300 w-48"}),x.length>1&&e.jsx("button",{onClick:()=>W(T.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete Shift "})]}),e.jsxs("div",{className:"flex flex-wrap gap-5",children:[e.jsx("span",{className:"font-medium text-sm",children:"Apply To:"}),wo.map(ne=>e.jsxs("label",{className:"flex items-center space-x-1",children:[e.jsx(ut,{checked:T.applyToDays.includes(ne),onChange:ue=>I(T.id,ne,ue.target.checked)}),e.jsx("span",{className:"text-sm",children:ne==="All Days"?ne:ne.substring(0,3)})]},ne))]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsx(he,{label:"State Time",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{type:"time",value:T.startTime,onChange:ne=>K(T.id,"startTime",ne.target.value)}),e.jsxs("label",{className:"flex items-center space-x-1 whitespace-nowrap",children:[e.jsx(ut,{checked:T.enforceStart,onChange:ne=>K(T.id,"enforceStart",ne.target.checked)}),e.jsx("span",{className:"text-sm",children:"Enforce"})]})]})}),e.jsx(he,{label:"End Time",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{type:"time",value:T.endTime,onChange:ne=>K(T.id,"endTime",ne.target.value)}),e.jsxs("label",{className:"flex items-center space-x-1 whitespace-nowrap",children:[e.jsx(ut,{checked:T.enforceEnd,onChange:ne=>K(T.id,"enforceEnd",ne.target.checked)}),e.jsx("span",{className:"text-sm",children:"Enforce"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsx(he,{label:"Float Before",postText:"(min.)",children:e.jsx(ie,{type:"number",min:"0",value:T.floatBefore,onChange:ne=>K(T.id,"floatBefore",parseInt(ne.target.value)||0)})}),e.jsx(he,{label:"Float After",postText:"(min.)",children:e.jsx(ie,{type:"number",min:"0",value:T.floatAfter,onChange:ne=>K(T.id,"floatAfter",parseInt(ne.target.value)||0)})})]})]},T.id))})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ut,{checked:y,onChange:T=>N(T.target.checked)}),e.jsx("span",{className:"font-medium",children:"Enable Meal Break Deduction Logic"})]}),y&&e.jsxs("div",{className:"bg-gray-50 p-1 rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{checked:v,onChange:T=>j(T.target.checked)}),e.jsx("span",{className:"font-medium text-sm",children:"Auto-Deduct Meal Breaks"})]}),v&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min. Hours Worked to Qualify"}),e.jsx(ie,{type:"number",min:"0",value:D,onChange:T=>C(parseFloat(T.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time to Deduct (Minutes)"}),e.jsx(ie,{type:"number",min:"0",value:f,onChange:T=>w(parseInt(T.target.value)||0)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deduction Placement"}),e.jsx(Ae,{value:b,onChange:T=>z(T.target.value),options:[{value:"time-specified",label:"Time Specified Lunch"},{value:"end-day",label:"End Day Deduction"},{value:"dynamic-middle",label:"Dynamic Lunch (Deducted from middle)"}]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ut,{checked:P,onChange:T=>S(T.target.checked)}),e.jsx("span",{className:"font-medium",children:"Enable Paid Rest Break Rules"})]}),P&&e.jsx("div",{className:"bg-gray-50 p-1 rounded-lg space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rest Break Duration (Minutes)"}),e.jsx(ie,{type:"number",min:"0",value:k,onChange:T=>G(parseInt(T.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequency (For every X hours worked)"}),e.jsx(ie,{type:"number",min:"0",value:B,onChange:T=>E(parseFloat(T.target.value)||0)})]})]})})]}),e.jsx("div",{className:"flex items-center gap-3 border-t pt-4",children:e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:T=>p(T.target.checked)}),"Active"]})}),e.jsxs("div",{className:"flex justify-end gap-3 border-t pt-4",children:[e.jsx(xe,{variant:"secondary",onClick:se,children:"Cancel"}),e.jsx(xe,{onClick:ee,children:o?"Update":"Save"})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(gt,{title:"Shift Rules",items:t,columns:U,rowId:T=>T.id,searchKeys:["name"],loading:a,error:n,onAdd:L?X:void 0,onEdit:R?ve:void 0,onDelete:q?me:void 0,showCreateForm:l}),e.jsx(Ue,{open:l,onClose:se,title:o?"Edit Shift Rule":"New Shift Rule",size:"xl",children:ce})]})},Gr=["FileText","Send","CheckCircle","Globe","Clock","AlertCircle","Users","Settings","Shield","Star","Flag","Target","Zap","Lock","Unlock","Play","Pause","Square"],Yr=["#3B82F6","#8B5CF6","#14B8A6","#F59E0B","#EF4444","#10B981","#F97316","#EC4899","#6366F1","#84CC16"];function Co({workflows:t=[],users:s,roles:a=[],currentUserId:r,onSaveWorkflow:n,onDeleteWorkflow:i,onSetDefaultWorkflow:l}){const[u,o]=c.useState(!1),[m,h]=c.useState(),[d,g]=c.useState({name:"",description:"",steps:[]}),{theme:p}=Pe(),x=f=>{f?(h(f),g({name:f.name,description:f.description||"",steps:[...f.steps]})):(h(void 0),g({name:"",description:"",steps:[]})),o(!0)},A=()=>{o(!1),h(void 0),g({name:"",description:"",steps:[]})},y=()=>{const f={id:`step-${Date.now()}`,name:"",description:"",color:Yr[0],icon:Gr[0],isInitial:d.steps.length===0,isFinal:!1,order:d.steps.length,permissions:{canEdit:!0,canDelete:!0,requiredRoles:[]},actors:{primaryActor:{role:"",description:""},secondaryActors:[],approvalRequired:!1,notificationRoles:[]}};g(w=>({...w,steps:[...w.steps,f]}))},N=(f,w)=>{g(b=>({...b,steps:b.steps.map(z=>z.id===f?{...z,...w}:z)}))},v=f=>{g(w=>({...w,steps:w.steps.filter(b=>b.id!==f).map((b,z)=>({...b,order:z}))}))},j=(f,w)=>{const b=d.steps.findIndex(S=>S.id===f);if(b===-1)return;const z=w==="up"?b-1:b+1;if(z<0||z>=d.steps.length)return;const P=[...d.steps];[P[b],P[z]]=[P[z],P[b]],P.forEach((S,k)=>{S.order=k}),g(S=>({...S,steps:P}))},D=f=>{if(f.preventDefault(),d.steps.length===0){alert("Please add at least one workflow step");return}const w=new Date().toISOString(),b={name:d.name,description:d.description,steps:d.steps,isActive:!0,updatedAt:w};m?b.id=m.id:(b.id=`workflow-${Date.now()}`,b.createdAt=w,b.createdBy=r,b.isDefault=!1),n(b),A()},C=f=>({FileText:et,Send:Cs,CheckCircle:Ze,Globe:Qs,Clock:Oe,AlertCircle:Ct,Users:ot,Settings:kt,Shield:ms,Star:Mn,Flag:Cn,Target:xr,Zap:Oa,Lock:In,Unlock:Fn,Play:$s,Pause:La,Square:Gt,Eye:jt})[f]||Ze;return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-base font-bold",style:{color:p==null?void 0:p.theme.colors.primary[800]},children:"Workflow Management"}),e.jsx("p",{className:"text-sm -gray-600",children:"Create and manage project workflows"})]}),e.jsxs("button",{onClick:()=>x(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(_e,{size:20}),"Create Workflow"]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-1",children:t.map(f=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-1 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(kt,{size:20,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:f.name}),f.isDefault&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Default"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>x(f),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",children:e.jsx(Tt,{size:16})}),e.jsx("button",{onClick:()=>i(f.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",disabled:f.isDefault,children:e.jsx(lt,{size:16})})]})]}),f.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:f.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Steps (",f.steps.length,")"]}),e.jsx("div",{className:"flex items-center gap-2 overflow-x-auto",children:f.steps.sort((w,b)=>w.order-b.order).map((w,b)=>{const z=C(w.icon);return e.jsxs(rt.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg px-3 py-2 min-w-0 flex-shrink-0",children:[e.jsx(z,{size:14,className:"text-gray-600"}),e.jsx("span",{className:"text-xs font-medium text-gray-700 truncate",children:w.name})]}),b<f.steps.length-1&&e.jsx(ss,{size:14,className:"text-gray-400 flex-shrink-0"})]},w.id)})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>l(f.id),className:"text-xs text-blue-600 hover:text-blue-800 font-medium",disabled:f.isDefault,children:f.isDefault?"Default":"Set as Default"})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${f.isActive?"bg-green-500":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs text-gray-500",children:f.isActive?"Active":"Inactive"})]})]})]},f.id))}),e.jsx(Ue,{open:u,onClose:A,title:m?"Edit Workflow":"Create New Workflow",size:"xl",children:e.jsx(ko,{formData:d,setFormData:g,editingWorkflow:m,onAddStep:y,onUpdateStep:N,onRemoveStep:v,onMoveStep:j,onSubmit:D,onClose:A,availableIcons:Gr,availableColors:Yr,roles:a})})]})}function ko({formData:t,setFormData:s,editingWorkflow:a,onAddStep:r,onUpdateStep:n,onRemoveStep:i,onMoveStep:l,onSubmit:u,onClose:o,availableIcons:m,availableColors:h,roles:d}){const{theme:g}=Pe(),p=x=>({FileText:et,Send:Cs,CheckCircle:Ze,Globe:Qs,Clock:Oe,AlertCircle:Ct,Users:ot,Settings:kt,Shield:ms,Star:Mn,Flag:Cn,Target:xr,Zap:Oa,Lock:In,Unlock:Fn,Play:$s,Pause:La,Square:Gt,Eye:jt})[x]||Ze;return e.jsxs("form",{onSubmit:u,className:"space-y-6 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx(he,{label:"Workflow Name",isRequired:!0,children:e.jsx("input",{type:"text",value:t.name,onChange:x=>s(A=>({...A,name:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter workflow name...",required:!0})}),e.jsx(he,{label:"Description",children:e.jsx("input",{type:"text",value:t.description,onChange:x=>s(A=>({...A,description:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter workflow description..."})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base font-semibold",style:{color:g==null?void 0:g.theme.colors.primary[700]},children:"Workflow Steps"}),e.jsxs("button",{type:"button",onClick:r,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(_e,{size:16}),"Add Step"]})]}),e.jsx("div",{className:"space-y-4",children:t.steps.sort((x,A)=>x.order-A.order).map((x,A)=>{var N,v,j,D,C,f,w;const y=p(x.icon);return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center border",children:e.jsx(y,{size:16,className:"text-gray-600"})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Step ",A+1]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>l(x.id,"up"),disabled:A===0,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),e.jsx("button",{type:"button",onClick:()=>l(x.id,"down"),disabled:A===t.steps.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),e.jsx("button",{type:"button",onClick:()=>i(x.id),className:"p-1 text-gray-400 hover:text-red-600",children:e.jsx(lt,{size:16})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx(he,{label:"Step Name",isRequired:!0,children:e.jsx("input",{type:"text",value:x.name,onChange:b=>n(x.id,{name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter step name...",required:!0})}),e.jsx(he,{label:"Description",children:e.jsx("input",{type:"text",value:x.description||"",onChange:b=>n(x.id,{description:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter step description..."})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5",children:[e.jsx(he,{label:"Icon",children:e.jsx("select",{value:x.icon,onChange:b=>n(x.id,{icon:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:m.map(b=>e.jsx("option",{value:b,children:b},b))})}),e.jsx(he,{label:"Color",children:e.jsx("div",{className:"flex gap-2",children:h.map(b=>e.jsx("button",{type:"button",onClick:()=>n(x.id,{color:b}),className:`w-8 h-8 rounded-lg border-2 ${x.color===b?"border-gray-400":"border-gray-200"}`,style:{backgroundColor:b}},b))})}),e.jsx(he,{label:"Type",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:x.isInitial,onChange:b=>n(x.id,{isInitial:b.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Initial Step"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:x.isFinal,onChange:b=>n(x.id,{isFinal:b.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Final Step"})]})]})})]}),e.jsxs("div",{className:"mt-6 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"text-sm font-semibold mb-4",style:{color:g==null?void 0:g.theme.colors.primary[800]},children:"Step Actors & Roles"}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs(he,{label:"Primary Actor Role",isRequired:!0,children:[e.jsxs("select",{value:((v=(N=x.actors)==null?void 0:N.primaryActor)==null?void 0:v.role)||"",onChange:b=>{const z=d.find(P=>P.name===b.target.value);n(x.id,{actors:{...x.actors,primaryActor:{role:b.target.value,description:(z==null?void 0:z.description)||""}}})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select a role..."}),d.map(b=>e.jsx("option",{value:b.name,children:b.name},b.id))]}),((D=(j=x.actors)==null?void 0:j.primaryActor)==null?void 0:D.role)&&e.jsx("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm text-gray-600",children:x.actors.primaryActor.description||"No description available"})]}),e.jsx(he,{label:"Secondary Actors",children:e.jsxs("div",{className:"space-y-2",children:[(((C=x.actors)==null?void 0:C.secondaryActors)||[]).map((b,z)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsxs("select",{value:b.role,onChange:P=>{var G;const S=d.find(B=>B.name===P.target.value),k=[...((G=x.actors)==null?void 0:G.secondaryActors)||[]];k[z]={...b,role:P.target.value,description:(S==null?void 0:S.description)||""},n(x.id,{actors:{...x.actors,secondaryActors:k}})},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select a role..."}),d.map(P=>e.jsx("option",{value:P.name,children:P.name},P.id))]}),e.jsxs("label",{className:"flex items-center gap-1 text-xs text-gray-600 whitespace-nowrap",children:[e.jsx("input",{type:"checkbox",checked:b.isOptional||!1,onChange:P=>{var k;const S=[...((k=x.actors)==null?void 0:k.secondaryActors)||[]];S[z]={...b,isOptional:P.target.checked},n(x.id,{actors:{...x.actors,secondaryActors:S}})},className:"mr-1"}),"Optional"]}),e.jsx("button",{type:"button",onClick:()=>{var S;const P=(((S=x.actors)==null?void 0:S.secondaryActors)||[]).filter((k,G)=>G!==z);n(x.id,{actors:{...x.actors,secondaryActors:P}})},className:"p-1 text-red-500 hover:text-red-700",children:e.jsx(lt,{size:14})})]}),b.role&&e.jsx("div",{className:"ml-0 p-2 bg-gray-50 rounded text-sm text-gray-600",children:b.description||"No description available"})]},z)),e.jsx("button",{type:"button",onClick:()=>{var z;const b=[...((z=x.actors)==null?void 0:z.secondaryActors)||[],{role:"",description:"",isOptional:!1}];n(x.id,{actors:{...x.actors,secondaryActors:b}})},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"+ Add Secondary Actor"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:((f=x.actors)==null?void 0:f.approvalRequired)||!1,onChange:b=>n(x.id,{actors:{...x.actors,approvalRequired:b.target.checked}}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Approval Required"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notification Roles"}),e.jsxs("div",{className:"space-y-2",children:[(((w=x.actors)==null?void 0:w.notificationRoles)||[]).map((b,z)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("select",{value:b,onChange:P=>{var k;const S=[...((k=x.actors)==null?void 0:k.notificationRoles)||[]];S[z]=P.target.value,n(x.id,{actors:{...x.actors,notificationRoles:S}})},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select a role..."}),d.map(P=>e.jsx("option",{value:P.name,children:P.name},P.id))]}),e.jsx("button",{type:"button",onClick:()=>{var S;const P=(((S=x.actors)==null?void 0:S.notificationRoles)||[]).filter((k,G)=>G!==z);n(x.id,{actors:{...x.actors,notificationRoles:P}})},className:"p-1 text-red-500 hover:text-red-700",children:e.jsx(lt,{size:14})})]},z)),e.jsx("button",{type:"button",onClick:()=>{var z;const b=[...((z=x.actors)==null?void 0:z.notificationRoles)||[],""];n(x.id,{actors:{...x.actors,notificationRoles:b}})},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"+ Add Notification Role"})]})]})]})]})]})]},x.id)})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:a?"Update Workflow":"Create Workflow"})]})]})}const Kr=[{id:"dynamicfields",label:"Dynamic Fields",icon:En,permissions:["users_view"],component:go},{id:"workflow",label:"Workflow",icon:ml,permissions:["users_view"],component:Co},{id:"phasetemplate",label:"Phase Template",icon:Ji,permissions:["users_view"],component:jo},{id:"payperiods",label:"Pay Periods",icon:cr,permissions:["pay_periods_view"],component:vo},{id:"overtimerules",label:"Overtime Rules",icon:yl,permissions:["overtime_rules_view"],component:yo},{id:"shiftrules",label:"Shift Rules",icon:ll,permissions:["shift_rules_view"],component:So},{id:"labourrates",label:"Labour Rates",icon:Ma,permissions:["labour_rates_view"],component:fo},{id:"paygroups",label:"Pay Groups",icon:ot,permissions:["pay_groups_view"],component:bo}],To=()=>{const[t,s]=c.useState("dynamicfields"),{hasPermission:a}=Ye(),{theme:r}=Pe();c.useEffect(()=>{document.title="Process Management - Space Rivers"},[]);const n=Kr.find(l=>l.id===t),i=n==null?void 0:n.component;return e.jsx(ct,{maxWidth:"full",padding:"md",children:e.jsx("div",{className:"h-full flex flex-col bg-white p-6 rounded-xl",children:e.jsxs(Be,{title:"Process Management",variant:"default",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-6",children:e.jsx("nav",{className:"flex space-x-8","aria-label":"Tabs",children:Kr.map(l=>{const u=l.icon,o=t===l.id;return l.permissions.some(h=>a(h))?e.jsxs("button",{onClick:()=>s(l.id),className:"whitespace-nowrap px-3 py-2 border-b-2 font-semibold text-sm flex items-center gap-2 transition-colors",style:{borderColor:o?(r==null?void 0:r.theme.colors.primary[500])||"#3b82f6":"transparent",color:o?(r==null?void 0:r.theme.colors.primary[600])||"#2563eb":"#6b7280"},children:[e.jsx(u,{className:"w-4 h-4"}),l.label]},l.id):null})})})}),e.jsx("div",{className:"flex-1 overflow-y-auto sidebar-scroll p-1",children:i&&e.jsx(i,{phaseTemplates:[],onPhaseTemplatesChange:()=>{}})})]})})})};function Do(){const[t,s]=c.useState([]),[a,r]=c.useState(!0),[n,i]=c.useState(null),{hasPermission:l}=Ye(),u=l("system_view")||l("admin"),o=async()=>{if(!u){i("You do not have permission to view access logs"),r(!1);return}r(!0);try{const x=await le.get("/access-logs/");x.success&&x.data?s(x.data.logs||[]):i(x.error||"Failed to load access logs")}catch(x){i(x.message||"Failed to load access logs")}finally{r(!1)}};c.useEffect(()=>{o()},[]);const m=x=>{switch(x.toLowerCase()){case"login":return"#10b981";case"logout":return"#f59e0b";case"api_access":return"#3b82f6";case"page_view":return"#7c3aed";default:return"#6b7280"}},h=x=>{switch(x==null?void 0:x.toUpperCase()){case"GET":return"#10b981";case"POST":return"#3b82f6";case"PUT":return"#f59e0b";case"DELETE":return"#ef4444";default:return"#6b7280"}},d=x=>x?x>=200&&x<300?"#10b981":x>=300&&x<400?"#3b82f6":x>=400&&x<500?"#f59e0b":x>=500?"#ef4444":"#6b7280":"#6b7280",g=[{key:"createdAt",header:"Timestamp",render:x=>new Date(x.createdAt).toLocaleString()},{key:"action",header:"Action",render:x=>e.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",backgroundColor:m(x.action),color:"white",fontSize:"12px",fontWeight:"500",textTransform:"uppercase"},children:x.action})},{key:"resource",header:"Resource",render:x=>x.resource||""},{key:"method",header:"Method",render:x=>x.method?e.jsx("span",{style:{padding:"2px 6px",borderRadius:"3px",backgroundColor:h(x.method),color:"white",fontSize:"11px",fontWeight:"600",fontFamily:"monospace",textTransform:"uppercase"},children:x.method}):""},{key:"statusCode",header:"Status",render:x=>x.statusCode?e.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",backgroundColor:d(x.statusCode),color:"white",fontSize:"12px",fontWeight:"600",fontFamily:"monospace"},children:x.statusCode}):""},{key:"ipAddress",header:"IP Address",render:x=>x.ipAddress||""},{key:"duration",header:"Duration",render:x=>x.duration?`${x.duration}ms`:""}],p=[{key:"action",label:"Action",options:[{value:"",label:"All Actions"},{value:"login",label:"Login"},{value:"logout",label:"Logout"},{value:"api_access",label:"API Access"},{value:"page_view",label:"Page View"}]},{key:"method",label:"Method",options:[{value:"",label:"All Methods"},{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}]},{key:"statusCode",label:"Status Code",options:[{value:"",label:"All Status"},{value:"200",label:"200 - OK"},{value:"400",label:"400 - Bad Request"},{value:"401",label:"401 - Unauthorized"},{value:"403",label:"403 - Forbidden"},{value:"404",label:"404 - Not Found"},{value:"500",label:"500 - Server Error"}]},{key:"startDate",label:"From Date & Time",options:[{value:"",label:"All Dates"}]},{key:"endDate",label:"To Date & Time",options:[{value:"",label:"All Dates"}]}];return u?e.jsx(gt,{title:"Access Logs",items:t||[],columns:g,rowId:x=>x.id,filters:p,loading:a,error:n,searchKeys:["action","resource","method","userId","ipAddress"],disableImport:!0}):e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h2",{children:"Access Denied"}),e.jsx("p",{children:"You do not have permission to view access logs."})]})}function Io(){const[t,s]=c.useState([]),[a,r]=c.useState(!0),[n,i]=c.useState(null),{hasPermission:l}=Ye(),u=l("system_view")||l("admin"),o=async()=>{if(!u){i("You do not have permission to view audit logs"),r(!1);return}r(!0);try{const g=await le.get("/system-logs/audit-logs");if(g.success&&g.data){const p=g.data.data||g.data;s(p.logs||[]),i(null)}else i(g.error||"Failed to load audit logs"),s([])}catch(g){i(g.message||"Failed to load audit logs"),s([])}finally{r(!1)}};c.useEffect(()=>{o()},[]);const m=g=>{switch(g.toLowerCase()){case"create":return"#10b981";case"update":return"#3b82f6";case"delete":return"#ef4444";default:return"#6b7280"}},h=[{key:"createdAt",header:"Timestamp",render:g=>new Date(g.createdAt).toLocaleString()},{key:"action",header:"Action",render:g=>e.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",backgroundColor:m(g.action),color:"white",fontSize:"12px",fontWeight:"500",textTransform:"uppercase"},children:g.action})},{key:"resourceType",header:"Resource Type",render:g=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:g.resourceType}),e.jsxs("div",{style:{fontSize:"12px",color:"#6b7280"},children:["ID: ",g.resourceId]})]})},{key:"userId",header:"User ID"},{key:"description",header:"Description",render:g=>g.description||""}],d=[{key:"action",label:"Action",options:[{value:"",label:"All Actions"},{value:"create",label:"Create"},{value:"update",label:"Update"},{value:"delete",label:"Delete"}]},{key:"resourceType",label:"Resource Type",options:[{value:"",label:"All Resources"},{value:"user",label:"User"},{value:"project",label:"Project"},{value:"cost-code",label:"Cost Code"},{value:"unit",label:"Unit"},{value:"vendor",label:"Vendor"}]},{key:"startDate",label:"From Date & Time",options:[{value:"",label:"All Dates"}]},{key:"endDate",label:"To Date & Time",options:[{value:"",label:"All Dates"}]}];return u?e.jsx(gt,{title:"Audit Logs",items:t||[],columns:h,rowId:g=>g.id,filters:d,searchKeys:["action","resourceType","userId","description"],loading:a,error:n,disableImport:!0}):e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h2",{children:"Access Denied"}),e.jsx("p",{children:"You do not have permission to view audit logs."})]})}const Ao=()=>{const[t,s]=c.useState("audit"),{theme:a}=Pe();return c.useEffect(()=>{document.title="System Management - Space Rivers"},[]),e.jsx(ct,{maxWidth:"full",padding:"md",children:e.jsx("div",{className:"bg-white p-6 rounded-xl",children:e.jsxs(Be,{title:"System Management",variant:"default",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[e.jsxs("button",{onClick:()=>s("audit"),className:"flex items-center gap-2 px-3 py-2 border-b-2 font-semibold text-sm transition-colors",style:{borderColor:t==="audit"?(a==null?void 0:a.theme.colors.primary[500])||"#3b82f6":"transparent",color:t==="audit"?(a==null?void 0:a.theme.colors.primary[600])||"#2563eb":"#6b7280"},children:[e.jsx(et,{size:18}),"Audit Logs"]}),e.jsxs("button",{onClick:()=>s("access"),className:"flex items-center gap-2 px-3 py-2 border-b-2 font-semibold text-sm transition-colors",style:{borderColor:t==="access"?(a==null?void 0:a.theme.colors.primary[500])||"#3b82f6":"transparent",color:t==="access"?(a==null?void 0:a.theme.colors.primary[600])||"#2563eb":"#6b7280"},children:[e.jsx(ms,{size:18}),"Access Logs"]})]})}),e.jsxs("div",{className:"p-1",children:[t==="audit"&&e.jsx(Io,{}),t==="access"&&e.jsx(Do,{})]})]})})})},Po=()=>{const[t,s]=c.useState("7d"),[a,r]=c.useState({deliveryTrends:[],locationDistribution:[],statusTransitions:[],performanceMetrics:{averageDeliveryTime:0,deliverySuccessRate:0,totalShipments:0,activeShipments:0}}),[n,i]=c.useState(!0);c.useEffect(()=>{(async()=>{i(!0);try{const o=await fetch(`/api/analytics?timeRange=${t}`);if(o.ok){const m=await o.json();r(m)}}catch{}finally{i(!1)}})()},[t]);const l=[{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"},{value:"1y",label:"Last year"}];return n?e.jsx(ct,{maxWidth:"full",padding:"lg",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):e.jsx(ct,{maxWidth:"full",padding:"md",children:e.jsx("div",{className:"bg-white p-5 rounded-xl",children:e.jsxs(ta,{spacing:"lg",children:[e.jsx(Be,{title:"Analytics",subtitle:"Detailed insights into your task tracking performance",icon:qt,headerActions:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ba,{to:"/reports",className:"inline-flex items-center px-3 py-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[e.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Back to Reports"]}),e.jsx("select",{value:t,onChange:u=>s(u.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:l.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))})]}),children:e.jsxs(Js,{cols:4,gap:"md",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-3 border border-blue-200 shadow-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 mt-1",children:"Avg Delivery Time"}),e.jsxs("p",{className:"text-sm font-bold text-gray-900 mt-1",children:[a.performanceMetrics.averageDeliveryTime,"d"]})]}),e.jsx("div",{className:"p-3 bg-blue-50 rounded-full",children:e.jsx(Oe,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-3 border border-green-200 shadow-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-green-600 mt-1",children:"Success Rate"}),e.jsxs("p",{className:"text-sm font-bold text-gray-900 mt-1",children:[a.performanceMetrics.deliverySuccessRate,"%"]})]}),e.jsx("div",{className:"p-3 bg-green-50 rounded-full",children:e.jsx(qt,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-3 border border-yellow-200 shadow-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-600 mt-1",children:"Total Project"}),e.jsx("p",{className:"text-sm font-bold text-gray-900 mt-1",children:a.performanceMetrics.totalShipments})]}),e.jsx("div",{className:"p-3 bg-yellow-50 rounded-full",children:e.jsx(_t,{className:"h-6 w-6 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-3 border border-purple-200 shadow-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-purple-600 mt-1",children:"Active Project"}),e.jsx("p",{className:"text-sm font-bold text-gray-900 mt-1",children:a.performanceMetrics.activeShipments})]}),e.jsx("div",{className:"p-3 bg-purple-50 rounded-full",children:e.jsx(Nt,{className:"h-6 w-6 text-purple-600"})})]})})]})}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-5",children:[e.jsx(Be,{title:"Delivery Trends",variant:"elevated",children:e.jsx("div",{className:"p-3",style:{width:"100%",height:"300px"},children:e.jsx(ua,{children:e.jsxs(Pi,{data:a.deliveryTrends,children:[e.jsx(ma,{strokeDasharray:"3 3"}),e.jsx(xa,{dataKey:"date"}),e.jsx(ha,{}),e.jsx(Gs,{}),e.jsx(pa,{}),e.jsx($r,{type:"monotone",dataKey:"delivered",stroke:"#10B981",strokeWidth:2,name:"Delivered"}),e.jsx($r,{type:"monotone",dataKey:"inTransit",stroke:"#F59E0B",strokeWidth:2,name:"In Progress"})]})})})}),e.jsx(Be,{title:"Task Status",variant:"elevated",children:e.jsx("div",{className:"p-3",style:{width:"100%",height:"300px"},children:e.jsx(ua,{children:e.jsxs(hn,{data:a.locationDistribution,children:[e.jsx(ma,{strokeDasharray:"3 3"}),e.jsx(xa,{dataKey:"location"}),e.jsx(ha,{}),e.jsx(Gs,{}),e.jsx(pa,{})]})})})})]}),e.jsx(Be,{title:"Status Transitions Over Time",variant:"elevated",children:e.jsx("div",{className:"p-3",style:{width:"100%",height:"400px"},children:e.jsx(ua,{children:e.jsxs(Ei,{data:a.statusTransitions,children:[e.jsx(ma,{strokeDasharray:"3 3"}),e.jsx(xa,{dataKey:"date"}),e.jsx(ha,{}),e.jsx(Gs,{}),e.jsx(pa,{}),e.jsx(Ua,{type:"monotone",dataKey:"manufactured",stackId:"1",stroke:"#3B82F6",fill:"#3B82F6",name:"Yet to Start"}),e.jsx(Ua,{type:"monotone",dataKey:"inTransit",stackId:"1",stroke:"#F59E0B",fill:"#F59E0B",name:"In Progress"}),e.jsx(Ua,{type:"monotone",dataKey:"delivered",stackId:"1",stroke:"#10B981",fill:"#10B981",name:"Delivered"})]})})})})]})})})};function Jr(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function gr(t={},s={}){const a=["__proto__","constructor","prototype"];Object.keys(s).filter(r=>a.indexOf(r)<0).forEach(r=>{typeof t[r]>"u"?t[r]=s[r]:Jr(s[r])&&Jr(t[r])&&Object.keys(s[r]).length>0&&gr(t[r],s[r])})}const Un={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Yt(){const t=typeof document<"u"?document:{};return gr(t,Un),t}const Eo={document:Un,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function Dt(){const t=typeof window<"u"?window:{};return gr(t,Eo),t}function Mo(t=""){return t.trim().split(" ").filter(s=>!!s.trim())}function Fo(t){const s=t;Object.keys(s).forEach(a=>{try{s[a]=null}catch{}try{delete s[a]}catch{}})}function qn(t,s=0){return setTimeout(t,s)}function Na(){return Date.now()}function Ro(t){const s=Dt();let a;return s.getComputedStyle&&(a=s.getComputedStyle(t,null)),!a&&t.currentStyle&&(a=t.currentStyle),a||(a=t.style),a}function Lo(t,s="x"){const a=Dt();let r,n,i;const l=Ro(t);return a.WebKitCSSMatrix?(n=l.transform||l.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map(u=>u.replace(",",".")).join(", ")),i=new a.WebKitCSSMatrix(n==="none"?"":n)):(i=l.MozTransform||l.OTransform||l.MsTransform||l.msTransform||l.transform||l.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=i.toString().split(",")),s==="x"&&(a.WebKitCSSMatrix?n=i.m41:r.length===16?n=parseFloat(r[12]):n=parseFloat(r[4])),s==="y"&&(a.WebKitCSSMatrix?n=i.m42:r.length===16?n=parseFloat(r[13]):n=parseFloat(r[5])),n||0}function oa(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function Oo(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function Mt(...t){const s=Object(t[0]),a=["__proto__","constructor","prototype"];for(let r=1;r<t.length;r+=1){const n=t[r];if(n!=null&&!Oo(n)){const i=Object.keys(Object(n)).filter(l=>a.indexOf(l)<0);for(let l=0,u=i.length;l<u;l+=1){const o=i[l],m=Object.getOwnPropertyDescriptor(n,o);m!==void 0&&m.enumerable&&(oa(s[o])&&oa(n[o])?n[o].__swiper__?s[o]=n[o]:Mt(s[o],n[o]):!oa(s[o])&&oa(n[o])?(s[o]={},n[o].__swiper__?s[o]=n[o]:Mt(s[o],n[o])):s[o]=n[o])}}}return s}function ca(t,s,a){t.style.setProperty(s,a)}function Hn({swiper:t,targetPosition:s,side:a}){const r=Dt(),n=-t.translate;let i=null,l;const u=t.params.speed;t.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(t.cssModeFrameID);const o=s>n?"next":"prev",m=(d,g)=>o==="next"&&d>=g||o==="prev"&&d<=g,h=()=>{l=new Date().getTime(),i===null&&(i=l);const d=Math.max(Math.min((l-i)/u,1),0),g=.5-Math.cos(d*Math.PI)/2;let p=n+g*(s-n);if(m(p,s)&&(p=s),t.wrapperEl.scrollTo({[a]:p}),m(p,s)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[a]:p})}),r.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=r.requestAnimationFrame(h)};h()}function Wt(t,s=""){const a=Dt(),r=[...t.children];return a.HTMLSlotElement&&t instanceof HTMLSlotElement&&r.push(...t.assignedElements()),s?r.filter(n=>n.matches(s)):r}function zo(t,s){const a=[s];for(;a.length>0;){const r=a.shift();if(t===r)return!0;a.push(...r.children,...r.shadowRoot?r.shadowRoot.children:[],...r.assignedElements?r.assignedElements():[])}}function $o(t,s){const a=Dt();let r=s.contains(t);return!r&&a.HTMLSlotElement&&s instanceof HTMLSlotElement&&(r=[...s.assignedElements()].includes(t),r||(r=zo(t,s))),r}function wa(t){try{console.warn(t);return}catch{}}function Sa(t,s=[]){const a=document.createElement(t);return a.classList.add(...Array.isArray(s)?s:Mo(s)),a}function _o(t,s){const a=[];for(;t.previousElementSibling;){const r=t.previousElementSibling;s?r.matches(s)&&a.push(r):a.push(r),t=r}return a}function Bo(t,s){const a=[];for(;t.nextElementSibling;){const r=t.nextElementSibling;s?r.matches(s)&&a.push(r):a.push(r),t=r}return a}function cs(t,s){return Dt().getComputedStyle(t,null).getPropertyValue(s)}function Ca(t){let s=t,a;if(s){for(a=0;(s=s.previousSibling)!==null;)s.nodeType===1&&(a+=1);return a}}function Wn(t,s){const a=[];let r=t.parentElement;for(;r;)s?r.matches(s)&&a.push(r):a.push(r),r=r.parentElement;return a}function nr(t,s,a){const r=Dt();return t[s==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(t,null).getPropertyValue(s==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(t,null).getPropertyValue(s==="width"?"margin-left":"margin-bottom"))}function Xt(t){return(Array.isArray(t)?t:[t]).filter(s=>!!s)}function ka(t,s=""){typeof trustedTypes<"u"?t.innerHTML=trustedTypes.createPolicy("html",{createHTML:a=>a}).createHTML(s):t.innerHTML=s}let Ha;function Uo(){const t=Dt(),s=Yt();return{smoothScroll:s.documentElement&&s.documentElement.style&&"scrollBehavior"in s.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&s instanceof t.DocumentTouch)}}function Vn(){return Ha||(Ha=Uo()),Ha}let Wa;function qo({userAgent:t}={}){const s=Vn(),a=Dt(),r=a.navigator.platform,n=t||a.navigator.userAgent,i={ios:!1,android:!1},l=a.screen.width,u=a.screen.height,o=n.match(/(Android);?[\s\/]+([\d.]+)?/);let m=n.match(/(iPad)(?!\1).*OS\s([\d_]+)/);const h=n.match(/(iPod)(.*OS\s([\d_]+))?/),d=!m&&n.match(/(iPhone\sOS|iOS)\s([\d_]+)/),g=r==="Win32";let p=r==="MacIntel";const x=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!m&&p&&s.touch&&x.indexOf(`${l}x${u}`)>=0&&(m=n.match(/(Version)\/([\d.]+)/),m||(m=[0,1,"13_0_0"]),p=!1),o&&!g&&(i.os="android",i.android=!0),(m||d||h)&&(i.os="ios",i.ios=!0),i}function Gn(t={}){return Wa||(Wa=qo(t)),Wa}let Va;function Ho(){const t=Dt(),s=Gn();let a=!1;function r(){const u=t.navigator.userAgent.toLowerCase();return u.indexOf("safari")>=0&&u.indexOf("chrome")<0&&u.indexOf("android")<0}if(r()){const u=String(t.navigator.userAgent);if(u.includes("Version/")){const[o,m]=u.split("Version/")[1].split(" ")[0].split(".").map(h=>Number(h));a=o<16||o===16&&m<2}}const n=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),i=r(),l=i||n&&s.ios;return{isSafari:a||i,needPerspectiveFix:a,need3dFix:l,isWebView:n}}function Yn(){return Va||(Va=Ho()),Va}function Wo({swiper:t,on:s,emit:a}){const r=Dt();let n=null,i=null;const l=()=>{!t||t.destroyed||!t.initialized||(a("beforeResize"),a("resize"))},u=()=>{!t||t.destroyed||!t.initialized||(n=new ResizeObserver(h=>{i=r.requestAnimationFrame(()=>{const{width:d,height:g}=t;let p=d,x=g;h.forEach(({contentBoxSize:A,contentRect:y,target:N})=>{N&&N!==t.el||(p=y?y.width:(A[0]||A).inlineSize,x=y?y.height:(A[0]||A).blockSize)}),(p!==d||x!==g)&&l()})}),n.observe(t.el))},o=()=>{i&&r.cancelAnimationFrame(i),n&&n.unobserve&&t.el&&(n.unobserve(t.el),n=null)},m=()=>{!t||t.destroyed||!t.initialized||a("orientationchange")};s("init",()=>{if(t.params.resizeObserver&&typeof r.ResizeObserver<"u"){u();return}r.addEventListener("resize",l),r.addEventListener("orientationchange",m)}),s("destroy",()=>{o(),r.removeEventListener("resize",l),r.removeEventListener("orientationchange",m)})}function Vo({swiper:t,extendParams:s,on:a,emit:r}){const n=[],i=Dt(),l=(m,h={})=>{const d=i.MutationObserver||i.WebkitMutationObserver,g=new d(p=>{if(t.__preventObserver__)return;if(p.length===1){r("observerUpdate",p[0]);return}const x=function(){r("observerUpdate",p[0])};i.requestAnimationFrame?i.requestAnimationFrame(x):i.setTimeout(x,0)});g.observe(m,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:t.isElement||(typeof h.childList>"u"?!0:h).childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),n.push(g)},u=()=>{if(t.params.observer){if(t.params.observeParents){const m=Wn(t.hostEl);for(let h=0;h<m.length;h+=1)l(m[h])}l(t.hostEl,{childList:t.params.observeSlideChildren}),l(t.wrapperEl,{attributes:!1})}},o=()=>{n.forEach(m=>{m.disconnect()}),n.splice(0,n.length)};s({observer:!1,observeParents:!1,observeSlideChildren:!1}),a("init",u),a("destroy",o)}var Go={on(t,s,a){const r=this;if(!r.eventsListeners||r.destroyed||typeof s!="function")return r;const n=a?"unshift":"push";return t.split(" ").forEach(i=>{r.eventsListeners[i]||(r.eventsListeners[i]=[]),r.eventsListeners[i][n](s)}),r},once(t,s,a){const r=this;if(!r.eventsListeners||r.destroyed||typeof s!="function")return r;function n(...i){r.off(t,n),n.__emitterProxy&&delete n.__emitterProxy,s.apply(r,i)}return n.__emitterProxy=s,r.on(t,n,a)},onAny(t,s){const a=this;if(!a.eventsListeners||a.destroyed||typeof t!="function")return a;const r=s?"unshift":"push";return a.eventsAnyListeners.indexOf(t)<0&&a.eventsAnyListeners[r](t),a},offAny(t){const s=this;if(!s.eventsListeners||s.destroyed||!s.eventsAnyListeners)return s;const a=s.eventsAnyListeners.indexOf(t);return a>=0&&s.eventsAnyListeners.splice(a,1),s},off(t,s){const a=this;return!a.eventsListeners||a.destroyed||!a.eventsListeners||t.split(" ").forEach(r=>{typeof s>"u"?a.eventsListeners[r]=[]:a.eventsListeners[r]&&a.eventsListeners[r].forEach((n,i)=>{(n===s||n.__emitterProxy&&n.__emitterProxy===s)&&a.eventsListeners[r].splice(i,1)})}),a},emit(...t){const s=this;if(!s.eventsListeners||s.destroyed||!s.eventsListeners)return s;let a,r,n;return typeof t[0]=="string"||Array.isArray(t[0])?(a=t[0],r=t.slice(1,t.length),n=s):(a=t[0].events,r=t[0].data,n=t[0].context||s),r.unshift(n),(Array.isArray(a)?a:a.split(" ")).forEach(l=>{s.eventsAnyListeners&&s.eventsAnyListeners.length&&s.eventsAnyListeners.forEach(u=>{u.apply(n,[l,...r])}),s.eventsListeners&&s.eventsListeners[l]&&s.eventsListeners[l].forEach(u=>{u.apply(n,r)})}),s}};function Yo(){const t=this;let s,a;const r=t.el;typeof t.params.width<"u"&&t.params.width!==null?s=t.params.width:s=r.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?a=t.params.height:a=r.clientHeight,!(s===0&&t.isHorizontal()||a===0&&t.isVertical())&&(s=s-parseInt(cs(r,"padding-left")||0,10)-parseInt(cs(r,"padding-right")||0,10),a=a-parseInt(cs(r,"padding-top")||0,10)-parseInt(cs(r,"padding-bottom")||0,10),Number.isNaN(s)&&(s=0),Number.isNaN(a)&&(a=0),Object.assign(t,{width:s,height:a,size:t.isHorizontal()?s:a}))}function Ko(){const t=this;function s(P,S){return parseFloat(P.getPropertyValue(t.getDirectionLabel(S))||0)}const a=t.params,{wrapperEl:r,slidesEl:n,rtlTranslate:i,wrongRTL:l}=t,u=t.virtual&&a.virtual.enabled,o=u?t.virtual.slides.length:t.slides.length,m=Wt(n,`.${t.params.slideClass}, swiper-slide`),h=u?t.virtual.slides.length:m.length;let d=[];const g=[],p=[];let x=a.slidesOffsetBefore;typeof x=="function"&&(x=a.slidesOffsetBefore.call(t));let A=a.slidesOffsetAfter;typeof A=="function"&&(A=a.slidesOffsetAfter.call(t));const y=t.snapGrid.length,N=t.slidesGrid.length,v=t.size-x-A;let j=a.spaceBetween,D=-x,C=0,f=0;if(typeof v>"u")return;typeof j=="string"&&j.indexOf("%")>=0?j=parseFloat(j.replace("%",""))/100*v:typeof j=="string"&&(j=parseFloat(j)),t.virtualSize=-j-x-A,m.forEach(P=>{i?P.style.marginLeft="":P.style.marginRight="",P.style.marginBottom="",P.style.marginTop=""}),a.centeredSlides&&a.cssMode&&(ca(r,"--swiper-centered-offset-before",""),ca(r,"--swiper-centered-offset-after",""));const w=a.grid&&a.grid.rows>1&&t.grid;w?t.grid.initSlides(m):t.grid&&t.grid.unsetSlides();let b;const z=a.slidesPerView==="auto"&&a.breakpoints&&Object.keys(a.breakpoints).filter(P=>typeof a.breakpoints[P].slidesPerView<"u").length>0;for(let P=0;P<h;P+=1){b=0;const S=m[P];if(!(S&&(w&&t.grid.updateSlide(P,S,m),cs(S,"display")==="none"))){if(u&&a.slidesPerView==="auto")a.virtual.slidesPerViewAutoSlideSize&&(b=a.virtual.slidesPerViewAutoSlideSize),b&&S&&(a.roundLengths&&(b=Math.floor(b)),S.style[t.getDirectionLabel("width")]=`${b}px`);else if(a.slidesPerView==="auto"){z&&(S.style[t.getDirectionLabel("width")]="");const k=getComputedStyle(S),G=S.style.transform,B=S.style.webkitTransform;if(G&&(S.style.transform="none"),B&&(S.style.webkitTransform="none"),a.roundLengths)b=t.isHorizontal()?nr(S,"width"):nr(S,"height");else{const E=s(k,"width"),M=s(k,"padding-left"),F=s(k,"padding-right"),_=s(k,"margin-left"),L=s(k,"margin-right"),R=k.getPropertyValue("box-sizing");if(R&&R==="border-box")b=E+_+L;else{const{clientWidth:q,offsetWidth:V}=S;b=E+M+F+_+L+(V-q)}}G&&(S.style.transform=G),B&&(S.style.webkitTransform=B),a.roundLengths&&(b=Math.floor(b))}else b=(v-(a.slidesPerView-1)*j)/a.slidesPerView,a.roundLengths&&(b=Math.floor(b)),S&&(S.style[t.getDirectionLabel("width")]=`${b}px`);S&&(S.swiperSlideSize=b),p.push(b),a.centeredSlides?(D=D+b/2+C/2+j,C===0&&P!==0&&(D=D-v/2-j),P===0&&(D=D-v/2-j),Math.abs(D)<1/1e3&&(D=0),a.roundLengths&&(D=Math.floor(D)),f%a.slidesPerGroup===0&&d.push(D),g.push(D)):(a.roundLengths&&(D=Math.floor(D)),(f-Math.min(t.params.slidesPerGroupSkip,f))%t.params.slidesPerGroup===0&&d.push(D),g.push(D),D=D+b+j),t.virtualSize+=b+j,C=b,f+=1}}if(t.virtualSize=Math.max(t.virtualSize,v)+A,i&&l&&(a.effect==="slide"||a.effect==="coverflow")&&(r.style.width=`${t.virtualSize+j}px`),a.setWrapperSize&&(r.style[t.getDirectionLabel("width")]=`${t.virtualSize+j}px`),w&&t.grid.updateWrapperSize(b,d),!a.centeredSlides){const P=[];for(let S=0;S<d.length;S+=1){let k=d[S];a.roundLengths&&(k=Math.floor(k)),d[S]<=t.virtualSize-v&&P.push(k)}d=P,Math.floor(t.virtualSize-v)-Math.floor(d[d.length-1])>1&&d.push(t.virtualSize-v)}if(u&&a.loop){const P=p[0]+j;if(a.slidesPerGroup>1){const S=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/a.slidesPerGroup),k=P*a.slidesPerGroup;for(let G=0;G<S;G+=1)d.push(d[d.length-1]+k)}for(let S=0;S<t.virtual.slidesBefore+t.virtual.slidesAfter;S+=1)a.slidesPerGroup===1&&d.push(d[d.length-1]+P),g.push(g[g.length-1]+P),t.virtualSize+=P}if(d.length===0&&(d=[0]),j!==0){const P=t.isHorizontal()&&i?"marginLeft":t.getDirectionLabel("marginRight");m.filter((S,k)=>!a.cssMode||a.loop?!0:k!==m.length-1).forEach(S=>{S.style[P]=`${j}px`})}if(a.centeredSlides&&a.centeredSlidesBounds){let P=0;p.forEach(k=>{P+=k+(j||0)}),P-=j;const S=P>v?P-v:0;d=d.map(k=>k<=0?-x:k>S?S+A:k)}if(a.centerInsufficientSlides){let P=0;p.forEach(k=>{P+=k+(j||0)}),P-=j;const S=(x||0)+(A||0);if(P+S<v){const k=(v-P-S)/2;d.forEach((G,B)=>{d[B]=G-k}),g.forEach((G,B)=>{g[B]=G+k})}}if(Object.assign(t,{slides:m,snapGrid:d,slidesGrid:g,slidesSizesGrid:p}),a.centeredSlides&&a.cssMode&&!a.centeredSlidesBounds){ca(r,"--swiper-centered-offset-before",`${-d[0]}px`),ca(r,"--swiper-centered-offset-after",`${t.size/2-p[p.length-1]/2}px`);const P=-t.snapGrid[0],S=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(k=>k+P),t.slidesGrid=t.slidesGrid.map(k=>k+S)}if(h!==o&&t.emit("slidesLengthChange"),d.length!==y&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),g.length!==N&&t.emit("slidesGridLengthChange"),a.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!u&&!a.cssMode&&(a.effect==="slide"||a.effect==="fade")){const P=`${a.containerModifierClass}backface-hidden`,S=t.el.classList.contains(P);h<=a.maxBackfaceHiddenSlides?S||t.el.classList.add(P):S&&t.el.classList.remove(P)}}function Jo(t){const s=this,a=[],r=s.virtual&&s.params.virtual.enabled;let n=0,i;typeof t=="number"?s.setTransition(t):t===!0&&s.setTransition(s.params.speed);const l=u=>r?s.slides[s.getSlideIndexByData(u)]:s.slides[u];if(s.params.slidesPerView!=="auto"&&s.params.slidesPerView>1)if(s.params.centeredSlides)(s.visibleSlides||[]).forEach(u=>{a.push(u)});else for(i=0;i<Math.ceil(s.params.slidesPerView);i+=1){const u=s.activeIndex+i;if(u>s.slides.length&&!r)break;a.push(l(u))}else a.push(l(s.activeIndex));for(i=0;i<a.length;i+=1)if(typeof a[i]<"u"){const u=a[i].offsetHeight;n=u>n?u:n}(n||n===0)&&(s.wrapperEl.style.height=`${n}px`)}function Xo(){const t=this,s=t.slides,a=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let r=0;r<s.length;r+=1)s[r].swiperSlideOffset=(t.isHorizontal()?s[r].offsetLeft:s[r].offsetTop)-a-t.cssOverflowAdjustment()}const Xr=(t,s,a)=>{s&&!t.classList.contains(a)?t.classList.add(a):!s&&t.classList.contains(a)&&t.classList.remove(a)};function Zo(t=this&&this.translate||0){const s=this,a=s.params,{slides:r,rtlTranslate:n,snapGrid:i}=s;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&s.updateSlidesOffset();let l=-t;n&&(l=t),s.visibleSlidesIndexes=[],s.visibleSlides=[];let u=a.spaceBetween;typeof u=="string"&&u.indexOf("%")>=0?u=parseFloat(u.replace("%",""))/100*s.size:typeof u=="string"&&(u=parseFloat(u));for(let o=0;o<r.length;o+=1){const m=r[o];let h=m.swiperSlideOffset;a.cssMode&&a.centeredSlides&&(h-=r[0].swiperSlideOffset);const d=(l+(a.centeredSlides?s.minTranslate():0)-h)/(m.swiperSlideSize+u),g=(l-i[0]+(a.centeredSlides?s.minTranslate():0)-h)/(m.swiperSlideSize+u),p=-(l-h),x=p+s.slidesSizesGrid[o],A=p>=0&&p<=s.size-s.slidesSizesGrid[o],y=p>=0&&p<s.size-1||x>1&&x<=s.size||p<=0&&x>=s.size;y&&(s.visibleSlides.push(m),s.visibleSlidesIndexes.push(o)),Xr(m,y,a.slideVisibleClass),Xr(m,A,a.slideFullyVisibleClass),m.progress=n?-d:d,m.originalProgress=n?-g:g}}function Qo(t){const s=this;if(typeof t>"u"){const h=s.rtlTranslate?-1:1;t=s&&s.translate&&s.translate*h||0}const a=s.params,r=s.maxTranslate()-s.minTranslate();let{progress:n,isBeginning:i,isEnd:l,progressLoop:u}=s;const o=i,m=l;if(r===0)n=0,i=!0,l=!0;else{n=(t-s.minTranslate())/r;const h=Math.abs(t-s.minTranslate())<1,d=Math.abs(t-s.maxTranslate())<1;i=h||n<=0,l=d||n>=1,h&&(n=0),d&&(n=1)}if(a.loop){const h=s.getSlideIndexByData(0),d=s.getSlideIndexByData(s.slides.length-1),g=s.slidesGrid[h],p=s.slidesGrid[d],x=s.slidesGrid[s.slidesGrid.length-1],A=Math.abs(t);A>=g?u=(A-g)/x:u=(A+x-p)/x,u>1&&(u-=1)}Object.assign(s,{progress:n,progressLoop:u,isBeginning:i,isEnd:l}),(a.watchSlidesProgress||a.centeredSlides&&a.autoHeight)&&s.updateSlidesProgress(t),i&&!o&&s.emit("reachBeginning toEdge"),l&&!m&&s.emit("reachEnd toEdge"),(o&&!i||m&&!l)&&s.emit("fromEdge"),s.emit("progress",n)}const Ga=(t,s,a)=>{s&&!t.classList.contains(a)?t.classList.add(a):!s&&t.classList.contains(a)&&t.classList.remove(a)};function ec(){const t=this,{slides:s,params:a,slidesEl:r,activeIndex:n}=t,i=t.virtual&&a.virtual.enabled,l=t.grid&&a.grid&&a.grid.rows>1,u=d=>Wt(r,`.${a.slideClass}${d}, swiper-slide${d}`)[0];let o,m,h;if(i)if(a.loop){let d=n-t.virtual.slidesBefore;d<0&&(d=t.virtual.slides.length+d),d>=t.virtual.slides.length&&(d-=t.virtual.slides.length),o=u(`[data-swiper-slide-index="${d}"]`)}else o=u(`[data-swiper-slide-index="${n}"]`);else l?(o=s.find(d=>d.column===n),h=s.find(d=>d.column===n+1),m=s.find(d=>d.column===n-1)):o=s[n];o&&(l||(h=Bo(o,`.${a.slideClass}, swiper-slide`)[0],a.loop&&!h&&(h=s[0]),m=_o(o,`.${a.slideClass}, swiper-slide`)[0],a.loop&&!m===0&&(m=s[s.length-1]))),s.forEach(d=>{Ga(d,d===o,a.slideActiveClass),Ga(d,d===h,a.slideNextClass),Ga(d,d===m,a.slidePrevClass)}),t.emitSlidesClasses()}const fa=(t,s)=>{if(!t||t.destroyed||!t.params)return;const a=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,r=s.closest(a());if(r){let n=r.querySelector(`.${t.params.lazyPreloaderClass}`);!n&&t.isElement&&(r.shadowRoot?n=r.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{r.shadowRoot&&(n=r.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`),n&&n.remove())})),n&&n.remove()}},Ya=(t,s)=>{if(!t.slides[s])return;const a=t.slides[s].querySelector('[loading="lazy"]');a&&a.removeAttribute("loading")},ir=t=>{if(!t||t.destroyed||!t.params)return;let s=t.params.lazyPreloadPrevNext;const a=t.slides.length;if(!a||!s||s<0)return;s=Math.min(s,a);const r=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),n=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const l=n,u=[l-s];u.push(...Array.from({length:s}).map((o,m)=>l+r+m)),t.slides.forEach((o,m)=>{u.includes(o.column)&&Ya(t,m)});return}const i=n+r-1;if(t.params.rewind||t.params.loop)for(let l=n-s;l<=i+s;l+=1){const u=(l%a+a)%a;(u<n||u>i)&&Ya(t,u)}else for(let l=Math.max(n-s,0);l<=Math.min(i+s,a-1);l+=1)l!==n&&(l>i||l<n)&&Ya(t,l)};function tc(t){const{slidesGrid:s,params:a}=t,r=t.rtlTranslate?t.translate:-t.translate;let n;for(let i=0;i<s.length;i+=1)typeof s[i+1]<"u"?r>=s[i]&&r<s[i+1]-(s[i+1]-s[i])/2?n=i:r>=s[i]&&r<s[i+1]&&(n=i+1):r>=s[i]&&(n=i);return a.normalizeSlideIndex&&(n<0||typeof n>"u")&&(n=0),n}function sc(t){const s=this,a=s.rtlTranslate?s.translate:-s.translate,{snapGrid:r,params:n,activeIndex:i,realIndex:l,snapIndex:u}=s;let o=t,m;const h=p=>{let x=p-s.virtual.slidesBefore;return x<0&&(x=s.virtual.slides.length+x),x>=s.virtual.slides.length&&(x-=s.virtual.slides.length),x};if(typeof o>"u"&&(o=tc(s)),r.indexOf(a)>=0)m=r.indexOf(a);else{const p=Math.min(n.slidesPerGroupSkip,o);m=p+Math.floor((o-p)/n.slidesPerGroup)}if(m>=r.length&&(m=r.length-1),o===i&&!s.params.loop){m!==u&&(s.snapIndex=m,s.emit("snapIndexChange"));return}if(o===i&&s.params.loop&&s.virtual&&s.params.virtual.enabled){s.realIndex=h(o);return}const d=s.grid&&n.grid&&n.grid.rows>1;let g;if(s.virtual&&n.virtual.enabled&&n.loop)g=h(o);else if(d){const p=s.slides.find(A=>A.column===o);let x=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(x)&&(x=Math.max(s.slides.indexOf(p),0)),g=Math.floor(x/n.grid.rows)}else if(s.slides[o]){const p=s.slides[o].getAttribute("data-swiper-slide-index");p?g=parseInt(p,10):g=o}else g=o;Object.assign(s,{previousSnapIndex:u,snapIndex:m,previousRealIndex:l,realIndex:g,previousIndex:i,activeIndex:o}),s.initialized&&ir(s),s.emit("activeIndexChange"),s.emit("snapIndexChange"),(s.initialized||s.params.runCallbacksOnInit)&&(l!==g&&s.emit("realIndexChange"),s.emit("slideChange"))}function ac(t,s){const a=this,r=a.params;let n=t.closest(`.${r.slideClass}, swiper-slide`);!n&&a.isElement&&s&&s.length>1&&s.includes(t)&&[...s.slice(s.indexOf(t)+1,s.length)].forEach(u=>{!n&&u.matches&&u.matches(`.${r.slideClass}, swiper-slide`)&&(n=u)});let i=!1,l;if(n){for(let u=0;u<a.slides.length;u+=1)if(a.slides[u]===n){i=!0,l=u;break}}if(n&&i)a.clickedSlide=n,a.virtual&&a.params.virtual.enabled?a.clickedIndex=parseInt(n.getAttribute("data-swiper-slide-index"),10):a.clickedIndex=l;else{a.clickedSlide=void 0,a.clickedIndex=void 0;return}r.slideToClickedSlide&&a.clickedIndex!==void 0&&a.clickedIndex!==a.activeIndex&&a.slideToClickedSlide()}var rc={updateSize:Yo,updateSlides:Ko,updateAutoHeight:Jo,updateSlidesOffset:Xo,updateSlidesProgress:Zo,updateProgress:Qo,updateSlidesClasses:ec,updateActiveIndex:sc,updateClickedSlide:ac};function nc(t=this.isHorizontal()?"x":"y"){const s=this,{params:a,rtlTranslate:r,translate:n,wrapperEl:i}=s;if(a.virtualTranslate)return r?-n:n;if(a.cssMode)return n;let l=Lo(i,t);return l+=s.cssOverflowAdjustment(),r&&(l=-l),l||0}function ic(t,s){const a=this,{rtlTranslate:r,params:n,wrapperEl:i,progress:l}=a;let u=0,o=0;const m=0;a.isHorizontal()?u=r?-t:t:o=t,n.roundLengths&&(u=Math.floor(u),o=Math.floor(o)),a.previousTranslate=a.translate,a.translate=a.isHorizontal()?u:o,n.cssMode?i[a.isHorizontal()?"scrollLeft":"scrollTop"]=a.isHorizontal()?-u:-o:n.virtualTranslate||(a.isHorizontal()?u-=a.cssOverflowAdjustment():o-=a.cssOverflowAdjustment(),i.style.transform=`translate3d(${u}px, ${o}px, ${m}px)`);let h;const d=a.maxTranslate()-a.minTranslate();d===0?h=0:h=(t-a.minTranslate())/d,h!==l&&a.updateProgress(t),a.emit("setTranslate",a.translate,s)}function lc(){return-this.snapGrid[0]}function oc(){return-this.snapGrid[this.snapGrid.length-1]}function cc(t=0,s=this.params.speed,a=!0,r=!0,n){const i=this,{params:l,wrapperEl:u}=i;if(i.animating&&l.preventInteractionOnTransition)return!1;const o=i.minTranslate(),m=i.maxTranslate();let h;if(r&&t>o?h=o:r&&t<m?h=m:h=t,i.updateProgress(h),l.cssMode){const d=i.isHorizontal();if(s===0)u[d?"scrollLeft":"scrollTop"]=-h;else{if(!i.support.smoothScroll)return Hn({swiper:i,targetPosition:-h,side:d?"left":"top"}),!0;u.scrollTo({[d?"left":"top"]:-h,behavior:"smooth"})}return!0}return s===0?(i.setTransition(0),i.setTranslate(h),a&&(i.emit("beforeTransitionStart",s,n),i.emit("transitionEnd"))):(i.setTransition(s),i.setTranslate(h),a&&(i.emit("beforeTransitionStart",s,n),i.emit("transitionStart")),i.animating||(i.animating=!0,i.onTranslateToWrapperTransitionEnd||(i.onTranslateToWrapperTransitionEnd=function(g){!i||i.destroyed||g.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.onTranslateToWrapperTransitionEnd=null,delete i.onTranslateToWrapperTransitionEnd,i.animating=!1,a&&i.emit("transitionEnd"))}),i.wrapperEl.addEventListener("transitionend",i.onTranslateToWrapperTransitionEnd))),!0}var dc={getTranslate:nc,setTranslate:ic,minTranslate:lc,maxTranslate:oc,translateTo:cc};function uc(t,s){const a=this;a.params.cssMode||(a.wrapperEl.style.transitionDuration=`${t}ms`,a.wrapperEl.style.transitionDelay=t===0?"0ms":""),a.emit("setTransition",t,s)}function Kn({swiper:t,runCallbacks:s,direction:a,step:r}){const{activeIndex:n,previousIndex:i}=t;let l=a;l||(n>i?l="next":n<i?l="prev":l="reset"),t.emit(`transition${r}`),s&&l==="reset"?t.emit(`slideResetTransition${r}`):s&&n!==i&&(t.emit(`slideChangeTransition${r}`),l==="next"?t.emit(`slideNextTransition${r}`):t.emit(`slidePrevTransition${r}`))}function mc(t=!0,s){const a=this,{params:r}=a;r.cssMode||(r.autoHeight&&a.updateAutoHeight(),Kn({swiper:a,runCallbacks:t,direction:s,step:"Start"}))}function xc(t=!0,s){const a=this,{params:r}=a;a.animating=!1,!r.cssMode&&(a.setTransition(0),Kn({swiper:a,runCallbacks:t,direction:s,step:"End"}))}var hc={setTransition:uc,transitionStart:mc,transitionEnd:xc};function pc(t=0,s,a=!0,r,n){typeof t=="string"&&(t=parseInt(t,10));const i=this;let l=t;l<0&&(l=0);const{params:u,snapGrid:o,slidesGrid:m,previousIndex:h,activeIndex:d,rtlTranslate:g,wrapperEl:p,enabled:x}=i;if(!x&&!r&&!n||i.destroyed||i.animating&&u.preventInteractionOnTransition)return!1;typeof s>"u"&&(s=i.params.speed);const A=Math.min(i.params.slidesPerGroupSkip,l);let y=A+Math.floor((l-A)/i.params.slidesPerGroup);y>=o.length&&(y=o.length-1);const N=-o[y];if(u.normalizeSlideIndex)for(let w=0;w<m.length;w+=1){const b=-Math.floor(N*100),z=Math.floor(m[w]*100),P=Math.floor(m[w+1]*100);typeof m[w+1]<"u"?b>=z&&b<P-(P-z)/2?l=w:b>=z&&b<P&&(l=w+1):b>=z&&(l=w)}if(i.initialized&&l!==d&&(!i.allowSlideNext&&(g?N>i.translate&&N>i.minTranslate():N<i.translate&&N<i.minTranslate())||!i.allowSlidePrev&&N>i.translate&&N>i.maxTranslate()&&(d||0)!==l))return!1;l!==(h||0)&&a&&i.emit("beforeSlideChangeStart"),i.updateProgress(N);let v;l>d?v="next":l<d?v="prev":v="reset";const j=i.virtual&&i.params.virtual.enabled;if(!(j&&n)&&(g&&-N===i.translate||!g&&N===i.translate))return i.updateActiveIndex(l),u.autoHeight&&i.updateAutoHeight(),i.updateSlidesClasses(),u.effect!=="slide"&&i.setTranslate(N),v!=="reset"&&(i.transitionStart(a,v),i.transitionEnd(a,v)),!1;if(u.cssMode){const w=i.isHorizontal(),b=g?N:-N;if(s===0)j&&(i.wrapperEl.style.scrollSnapType="none",i._immediateVirtual=!0),j&&!i._cssModeVirtualInitialSet&&i.params.initialSlide>0?(i._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[w?"scrollLeft":"scrollTop"]=b})):p[w?"scrollLeft":"scrollTop"]=b,j&&requestAnimationFrame(()=>{i.wrapperEl.style.scrollSnapType="",i._immediateVirtual=!1});else{if(!i.support.smoothScroll)return Hn({swiper:i,targetPosition:b,side:w?"left":"top"}),!0;p.scrollTo({[w?"left":"top"]:b,behavior:"smooth"})}return!0}const f=Yn().isSafari;return j&&!n&&f&&i.isElement&&i.virtual.update(!1,!1,l),i.setTransition(s),i.setTranslate(N),i.updateActiveIndex(l),i.updateSlidesClasses(),i.emit("beforeTransitionStart",s,r),i.transitionStart(a,v),s===0?i.transitionEnd(a,v):i.animating||(i.animating=!0,i.onSlideToWrapperTransitionEnd||(i.onSlideToWrapperTransitionEnd=function(b){!i||i.destroyed||b.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.onSlideToWrapperTransitionEnd=null,delete i.onSlideToWrapperTransitionEnd,i.transitionEnd(a,v))}),i.wrapperEl.addEventListener("transitionend",i.onSlideToWrapperTransitionEnd)),!0}function gc(t=0,s,a=!0,r){typeof t=="string"&&(t=parseInt(t,10));const n=this;if(n.destroyed)return;typeof s>"u"&&(s=n.params.speed);const i=n.grid&&n.params.grid&&n.params.grid.rows>1;let l=t;if(n.params.loop)if(n.virtual&&n.params.virtual.enabled)l=l+n.virtual.slidesBefore;else{let u;if(i){const A=l*n.params.grid.rows;u=n.slides.find(y=>y.getAttribute("data-swiper-slide-index")*1===A).column}else u=n.getSlideIndexByData(l);const o=i?Math.ceil(n.slides.length/n.params.grid.rows):n.slides.length,{centeredSlides:m,slidesOffsetBefore:h,slidesOffsetAfter:d}=n.params,g=m||!!h||!!d;let p=n.params.slidesPerView;p==="auto"?p=n.slidesPerViewDynamic():(p=Math.ceil(parseFloat(n.params.slidesPerView,10)),g&&p%2===0&&(p=p+1));let x=o-u<p;if(g&&(x=x||u<Math.ceil(p/2)),r&&g&&n.params.slidesPerView!=="auto"&&!i&&(x=!1),x){const A=g?u<n.activeIndex?"prev":"next":u-n.activeIndex-1<n.params.slidesPerView?"next":"prev";n.loopFix({direction:A,slideTo:!0,activeSlideIndex:A==="next"?u+1:u-o+1,slideRealIndex:A==="next"?n.realIndex:void 0})}if(i){const A=l*n.params.grid.rows;l=n.slides.find(y=>y.getAttribute("data-swiper-slide-index")*1===A).column}else l=n.getSlideIndexByData(l)}return requestAnimationFrame(()=>{n.slideTo(l,s,a,r)}),n}function fc(t,s=!0,a){const r=this,{enabled:n,params:i,animating:l}=r;if(!n||r.destroyed)return r;typeof t>"u"&&(t=r.params.speed);let u=i.slidesPerGroup;i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(u=Math.max(r.slidesPerViewDynamic("current",!0),1));const o=r.activeIndex<i.slidesPerGroupSkip?1:u,m=r.virtual&&i.virtual.enabled;if(i.loop){if(l&&!m&&i.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&i.cssMode)return requestAnimationFrame(()=>{r.slideTo(r.activeIndex+o,t,s,a)}),!0}return i.rewind&&r.isEnd?r.slideTo(0,t,s,a):r.slideTo(r.activeIndex+o,t,s,a)}function yc(t,s=!0,a){const r=this,{params:n,snapGrid:i,slidesGrid:l,rtlTranslate:u,enabled:o,animating:m}=r;if(!o||r.destroyed)return r;typeof t>"u"&&(t=r.params.speed);const h=r.virtual&&n.virtual.enabled;if(n.loop){if(m&&!h&&n.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const d=u?r.translate:-r.translate;function g(v){return v<0?-Math.floor(Math.abs(v)):Math.floor(v)}const p=g(d),x=i.map(v=>g(v)),A=n.freeMode&&n.freeMode.enabled;let y=i[x.indexOf(p)-1];if(typeof y>"u"&&(n.cssMode||A)){let v;i.forEach((j,D)=>{p>=j&&(v=D)}),typeof v<"u"&&(y=A?i[v]:i[v>0?v-1:v])}let N=0;if(typeof y<"u"&&(N=l.indexOf(y),N<0&&(N=r.activeIndex-1),n.slidesPerView==="auto"&&n.slidesPerGroup===1&&n.slidesPerGroupAuto&&(N=N-r.slidesPerViewDynamic("previous",!0)+1,N=Math.max(N,0))),n.rewind&&r.isBeginning){const v=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(v,t,s,a)}else if(n.loop&&r.activeIndex===0&&n.cssMode)return requestAnimationFrame(()=>{r.slideTo(N,t,s,a)}),!0;return r.slideTo(N,t,s,a)}function bc(t,s=!0,a){const r=this;if(!r.destroyed)return typeof t>"u"&&(t=r.params.speed),r.slideTo(r.activeIndex,t,s,a)}function vc(t,s=!0,a,r=.5){const n=this;if(n.destroyed)return;typeof t>"u"&&(t=n.params.speed);let i=n.activeIndex;const l=Math.min(n.params.slidesPerGroupSkip,i),u=l+Math.floor((i-l)/n.params.slidesPerGroup),o=n.rtlTranslate?n.translate:-n.translate;if(o>=n.snapGrid[u]){const m=n.snapGrid[u],h=n.snapGrid[u+1];o-m>(h-m)*r&&(i+=n.params.slidesPerGroup)}else{const m=n.snapGrid[u-1],h=n.snapGrid[u];o-m<=(h-m)*r&&(i-=n.params.slidesPerGroup)}return i=Math.max(i,0),i=Math.min(i,n.slidesGrid.length-1),n.slideTo(i,t,s,a)}function jc(){const t=this;if(t.destroyed)return;const{params:s,slidesEl:a}=t,r=s.slidesPerView==="auto"?t.slidesPerViewDynamic():s.slidesPerView;let n=t.getSlideIndexWhenGrid(t.clickedIndex),i;const l=t.isElement?"swiper-slide":`.${s.slideClass}`,u=t.grid&&t.params.grid&&t.params.grid.rows>1;if(s.loop){if(t.animating)return;i=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),s.centeredSlides?t.slideToLoop(i):n>(u?(t.slides.length-r)/2-(t.params.grid.rows-1):t.slides.length-r)?(t.loopFix(),n=t.getSlideIndex(Wt(a,`${l}[data-swiper-slide-index="${i}"]`)[0]),qn(()=>{t.slideTo(n)})):t.slideTo(n)}else t.slideTo(n)}var Nc={slideTo:pc,slideToLoop:gc,slideNext:fc,slidePrev:yc,slideReset:bc,slideToClosest:vc,slideToClickedSlide:jc};function wc(t,s){const a=this,{params:r,slidesEl:n}=a;if(!r.loop||a.virtual&&a.params.virtual.enabled)return;const i=()=>{Wt(n,`.${r.slideClass}, swiper-slide`).forEach((x,A)=>{x.setAttribute("data-swiper-slide-index",A)})},l=()=>{const p=Wt(n,`.${r.slideBlankClass}`);p.forEach(x=>{x.remove()}),p.length>0&&(a.recalcSlides(),a.updateSlides())},u=a.grid&&r.grid&&r.grid.rows>1;r.loopAddBlankSlides&&(r.slidesPerGroup>1||u)&&l();const o=r.slidesPerGroup*(u?r.grid.rows:1),m=a.slides.length%o!==0,h=u&&a.slides.length%r.grid.rows!==0,d=p=>{for(let x=0;x<p;x+=1){const A=a.isElement?Sa("swiper-slide",[r.slideBlankClass]):Sa("div",[r.slideClass,r.slideBlankClass]);a.slidesEl.append(A)}};if(m){if(r.loopAddBlankSlides){const p=o-a.slides.length%o;d(p),a.recalcSlides(),a.updateSlides()}else wa("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(h){if(r.loopAddBlankSlides){const p=r.grid.rows-a.slides.length%r.grid.rows;d(p),a.recalcSlides(),a.updateSlides()}else wa("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();const g=r.centeredSlides||!!r.slidesOffsetBefore||!!r.slidesOffsetAfter;a.loopFix({slideRealIndex:t,direction:g?void 0:"next",initial:s})}function Sc({slideRealIndex:t,slideTo:s=!0,direction:a,setTranslate:r,activeSlideIndex:n,initial:i,byController:l,byMousewheel:u}={}){const o=this;if(!o.params.loop)return;o.emit("beforeLoopFix");const{slides:m,allowSlidePrev:h,allowSlideNext:d,slidesEl:g,params:p}=o,{centeredSlides:x,slidesOffsetBefore:A,slidesOffsetAfter:y,initialSlide:N}=p,v=x||!!A||!!y;if(o.allowSlidePrev=!0,o.allowSlideNext=!0,o.virtual&&p.virtual.enabled){s&&(!v&&o.snapIndex===0?o.slideTo(o.virtual.slides.length,0,!1,!0):v&&o.snapIndex<p.slidesPerView?o.slideTo(o.virtual.slides.length+o.snapIndex,0,!1,!0):o.snapIndex===o.snapGrid.length-1&&o.slideTo(o.virtual.slidesBefore,0,!1,!0)),o.allowSlidePrev=h,o.allowSlideNext=d,o.emit("loopFix");return}let j=p.slidesPerView;j==="auto"?j=o.slidesPerViewDynamic():(j=Math.ceil(parseFloat(p.slidesPerView,10)),v&&j%2===0&&(j=j+1));const D=p.slidesPerGroupAuto?j:p.slidesPerGroup;let C=v?Math.max(D,Math.ceil(j/2)):D;C%D!==0&&(C+=D-C%D),C+=p.loopAdditionalSlides,o.loopedSlides=C;const f=o.grid&&p.grid&&p.grid.rows>1;m.length<j+C||o.params.effect==="cards"&&m.length<j+C*2?wa("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):f&&p.grid.fill==="row"&&wa("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const w=[],b=[],z=f?Math.ceil(m.length/p.grid.rows):m.length,P=i&&z-N<j&&!v;let S=P?N:o.activeIndex;typeof n>"u"?n=o.getSlideIndex(m.find(_=>_.classList.contains(p.slideActiveClass))):S=n;const k=a==="next"||!a,G=a==="prev"||!a;let B=0,E=0;const F=(f?m[n].column:n)+(v&&typeof r>"u"?-j/2+.5:0);if(F<C){B=Math.max(C-F,D);for(let _=0;_<C-F;_+=1){const L=_-Math.floor(_/z)*z;if(f){const R=z-L-1;for(let q=m.length-1;q>=0;q-=1)m[q].column===R&&w.push(q)}else w.push(z-L-1)}}else if(F+j>z-C){E=Math.max(F-(z-C*2),D),P&&(E=Math.max(E,j-z+N+1));for(let _=0;_<E;_+=1){const L=_-Math.floor(_/z)*z;f?m.forEach((R,q)=>{R.column===L&&b.push(q)}):b.push(L)}}if(o.__preventObserver__=!0,requestAnimationFrame(()=>{o.__preventObserver__=!1}),o.params.effect==="cards"&&m.length<j+C*2&&(b.includes(n)&&b.splice(b.indexOf(n),1),w.includes(n)&&w.splice(w.indexOf(n),1)),G&&w.forEach(_=>{m[_].swiperLoopMoveDOM=!0,g.prepend(m[_]),m[_].swiperLoopMoveDOM=!1}),k&&b.forEach(_=>{m[_].swiperLoopMoveDOM=!0,g.append(m[_]),m[_].swiperLoopMoveDOM=!1}),o.recalcSlides(),p.slidesPerView==="auto"?o.updateSlides():f&&(w.length>0&&G||b.length>0&&k)&&o.slides.forEach((_,L)=>{o.grid.updateSlide(L,_,o.slides)}),p.watchSlidesProgress&&o.updateSlidesOffset(),s){if(w.length>0&&G){if(typeof t>"u"){const _=o.slidesGrid[S],R=o.slidesGrid[S+B]-_;u?o.setTranslate(o.translate-R):(o.slideTo(S+Math.ceil(B),0,!1,!0),r&&(o.touchEventsData.startTranslate=o.touchEventsData.startTranslate-R,o.touchEventsData.currentTranslate=o.touchEventsData.currentTranslate-R))}else if(r){const _=f?w.length/p.grid.rows:w.length;o.slideTo(o.activeIndex+_,0,!1,!0),o.touchEventsData.currentTranslate=o.translate}}else if(b.length>0&&k)if(typeof t>"u"){const _=o.slidesGrid[S],R=o.slidesGrid[S-E]-_;u?o.setTranslate(o.translate-R):(o.slideTo(S-E,0,!1,!0),r&&(o.touchEventsData.startTranslate=o.touchEventsData.startTranslate-R,o.touchEventsData.currentTranslate=o.touchEventsData.currentTranslate-R))}else{const _=f?b.length/p.grid.rows:b.length;o.slideTo(o.activeIndex-_,0,!1,!0)}}if(o.allowSlidePrev=h,o.allowSlideNext=d,o.controller&&o.controller.control&&!l){const _={slideRealIndex:t,direction:a,setTranslate:r,activeSlideIndex:n,byController:!0};Array.isArray(o.controller.control)?o.controller.control.forEach(L=>{!L.destroyed&&L.params.loop&&L.loopFix({..._,slideTo:L.params.slidesPerView===p.slidesPerView?s:!1})}):o.controller.control instanceof o.constructor&&o.controller.control.params.loop&&o.controller.control.loopFix({..._,slideTo:o.controller.control.params.slidesPerView===p.slidesPerView?s:!1})}o.emit("loopFix")}function Cc(){const t=this,{params:s,slidesEl:a}=t;if(!s.loop||!a||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const r=[];t.slides.forEach(n=>{const i=typeof n.swiperSlideIndex>"u"?n.getAttribute("data-swiper-slide-index")*1:n.swiperSlideIndex;r[i]=n}),t.slides.forEach(n=>{n.removeAttribute("data-swiper-slide-index")}),r.forEach(n=>{a.append(n)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}var kc={loopCreate:wc,loopFix:Sc,loopDestroy:Cc};function Tc(t){const s=this;if(!s.params.simulateTouch||s.params.watchOverflow&&s.isLocked||s.params.cssMode)return;const a=s.params.touchEventsTarget==="container"?s.el:s.wrapperEl;s.isElement&&(s.__preventObserver__=!0),a.style.cursor="move",a.style.cursor=t?"grabbing":"grab",s.isElement&&requestAnimationFrame(()=>{s.__preventObserver__=!1})}function Dc(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}var Ic={setGrabCursor:Tc,unsetGrabCursor:Dc};function Ac(t,s=this){function a(r){if(!r||r===Yt()||r===Dt())return null;r.assignedSlot&&(r=r.assignedSlot);const n=r.closest(t);return!n&&!r.getRootNode?null:n||a(r.getRootNode().host)}return a(s)}function Zr(t,s,a){const r=Dt(),{params:n}=t,i=n.edgeSwipeDetection,l=n.edgeSwipeThreshold;return i&&(a<=l||a>=r.innerWidth-l)?i==="prevent"?(s.preventDefault(),!0):!1:!0}function Pc(t){const s=this,a=Yt();let r=t;r.originalEvent&&(r=r.originalEvent);const n=s.touchEventsData;if(r.type==="pointerdown"){if(n.pointerId!==null&&n.pointerId!==r.pointerId)return;n.pointerId=r.pointerId}else r.type==="touchstart"&&r.targetTouches.length===1&&(n.touchId=r.targetTouches[0].identifier);if(r.type==="touchstart"){Zr(s,r,r.targetTouches[0].pageX);return}const{params:i,touches:l,enabled:u}=s;if(!u||!i.simulateTouch&&r.pointerType==="mouse"||s.animating&&i.preventInteractionOnTransition)return;!s.animating&&i.cssMode&&i.loop&&s.loopFix();let o=r.target;if(i.touchEventsTarget==="wrapper"&&!$o(o,s.wrapperEl)||"which"in r&&r.which===3||"button"in r&&r.button>0||n.isTouched&&n.isMoved)return;const m=!!i.noSwipingClass&&i.noSwipingClass!=="",h=r.composedPath?r.composedPath():r.path;m&&r.target&&r.target.shadowRoot&&h&&(o=h[0]);const d=i.noSwipingSelector?i.noSwipingSelector:`.${i.noSwipingClass}`,g=!!(r.target&&r.target.shadowRoot);if(i.noSwiping&&(g?Ac(d,o):o.closest(d))){s.allowClick=!0;return}if(i.swipeHandler&&!o.closest(i.swipeHandler))return;l.currentX=r.pageX,l.currentY=r.pageY;const p=l.currentX,x=l.currentY;if(!Zr(s,r,p))return;Object.assign(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=p,l.startY=x,n.touchStartTime=Na(),s.allowClick=!0,s.updateSize(),s.swipeDirection=void 0,i.threshold>0&&(n.allowThresholdMove=!1);let A=!0;o.matches(n.focusableElements)&&(A=!1,o.nodeName==="SELECT"&&(n.isTouched=!1)),a.activeElement&&a.activeElement.matches(n.focusableElements)&&a.activeElement!==o&&(r.pointerType==="mouse"||r.pointerType!=="mouse"&&!o.matches(n.focusableElements))&&a.activeElement.blur();const y=A&&s.allowTouchMove&&i.touchStartPreventDefault;(i.touchStartForcePreventDefault||y)&&!o.isContentEditable&&r.preventDefault(),i.freeMode&&i.freeMode.enabled&&s.freeMode&&s.animating&&!i.cssMode&&s.freeMode.onTouchStart(),s.emit("touchStart",r)}function Ec(t){const s=Yt(),a=this,r=a.touchEventsData,{params:n,touches:i,rtlTranslate:l,enabled:u}=a;if(!u||!n.simulateTouch&&t.pointerType==="mouse")return;let o=t;if(o.originalEvent&&(o=o.originalEvent),o.type==="pointermove"&&(r.touchId!==null||o.pointerId!==r.pointerId))return;let m;if(o.type==="touchmove"){if(m=[...o.changedTouches].find(C=>C.identifier===r.touchId),!m||m.identifier!==r.touchId)return}else m=o;if(!r.isTouched){r.startMoving&&r.isScrolling&&a.emit("touchMoveOpposite",o);return}const h=m.pageX,d=m.pageY;if(o.preventedByNestedSwiper){i.startX=h,i.startY=d;return}if(!a.allowTouchMove){o.target.matches(r.focusableElements)||(a.allowClick=!1),r.isTouched&&(Object.assign(i,{startX:h,startY:d,currentX:h,currentY:d}),r.touchStartTime=Na());return}if(n.touchReleaseOnEdges&&!n.loop)if(a.isVertical()){if(d<i.startY&&a.translate<=a.maxTranslate()||d>i.startY&&a.translate>=a.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else{if(l&&(h>i.startX&&-a.translate<=a.maxTranslate()||h<i.startX&&-a.translate>=a.minTranslate()))return;if(!l&&(h<i.startX&&a.translate<=a.maxTranslate()||h>i.startX&&a.translate>=a.minTranslate()))return}if(s.activeElement&&s.activeElement.matches(r.focusableElements)&&s.activeElement!==o.target&&o.pointerType!=="mouse"&&s.activeElement.blur(),s.activeElement&&o.target===s.activeElement&&o.target.matches(r.focusableElements)){r.isMoved=!0,a.allowClick=!1;return}r.allowTouchCallbacks&&a.emit("touchMove",o),i.previousX=i.currentX,i.previousY=i.currentY,i.currentX=h,i.currentY=d;const g=i.currentX-i.startX,p=i.currentY-i.startY;if(a.params.threshold&&Math.sqrt(g**2+p**2)<a.params.threshold)return;if(typeof r.isScrolling>"u"){let C;a.isHorizontal()&&i.currentY===i.startY||a.isVertical()&&i.currentX===i.startX?r.isScrolling=!1:g*g+p*p>=25&&(C=Math.atan2(Math.abs(p),Math.abs(g))*180/Math.PI,r.isScrolling=a.isHorizontal()?C>n.touchAngle:90-C>n.touchAngle)}if(r.isScrolling&&a.emit("touchMoveOpposite",o),typeof r.startMoving>"u"&&(i.currentX!==i.startX||i.currentY!==i.startY)&&(r.startMoving=!0),r.isScrolling||o.type==="touchmove"&&r.preventTouchMoveFromPointerMove){r.isTouched=!1;return}if(!r.startMoving)return;a.allowClick=!1,!n.cssMode&&o.cancelable&&o.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&o.stopPropagation();let x=a.isHorizontal()?g:p,A=a.isHorizontal()?i.currentX-i.previousX:i.currentY-i.previousY;n.oneWayMovement&&(x=Math.abs(x)*(l?1:-1),A=Math.abs(A)*(l?1:-1)),i.diff=x,x*=n.touchRatio,l&&(x=-x,A=-A);const y=a.touchesDirection;a.swipeDirection=x>0?"prev":"next",a.touchesDirection=A>0?"prev":"next";const N=a.params.loop&&!n.cssMode,v=a.touchesDirection==="next"&&a.allowSlideNext||a.touchesDirection==="prev"&&a.allowSlidePrev;if(!r.isMoved){if(N&&v&&a.loopFix({direction:a.swipeDirection}),r.startTranslate=a.getTranslate(),a.setTransition(0),a.animating){const C=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});a.wrapperEl.dispatchEvent(C)}r.allowMomentumBounce=!1,n.grabCursor&&(a.allowSlideNext===!0||a.allowSlidePrev===!0)&&a.setGrabCursor(!0),a.emit("sliderFirstMove",o)}if(new Date().getTime(),n._loopSwapReset!==!1&&r.isMoved&&r.allowThresholdMove&&y!==a.touchesDirection&&N&&v&&Math.abs(x)>=1){Object.assign(i,{startX:h,startY:d,currentX:h,currentY:d,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,r.startTranslate=r.currentTranslate;return}a.emit("sliderMove",o),r.isMoved=!0,r.currentTranslate=x+r.startTranslate;let j=!0,D=n.resistanceRatio;if(n.touchReleaseOnEdges&&(D=0),x>0?(N&&v&&r.allowThresholdMove&&r.currentTranslate>(n.centeredSlides?a.minTranslate()-a.slidesSizesGrid[a.activeIndex+1]-(n.slidesPerView!=="auto"&&a.slides.length-n.slidesPerView>=2?a.slidesSizesGrid[a.activeIndex+1]+a.params.spaceBetween:0)-a.params.spaceBetween:a.minTranslate())&&a.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>a.minTranslate()&&(j=!1,n.resistance&&(r.currentTranslate=a.minTranslate()-1+(-a.minTranslate()+r.startTranslate+x)**D))):x<0&&(N&&v&&r.allowThresholdMove&&r.currentTranslate<(n.centeredSlides?a.maxTranslate()+a.slidesSizesGrid[a.slidesSizesGrid.length-1]+a.params.spaceBetween+(n.slidesPerView!=="auto"&&a.slides.length-n.slidesPerView>=2?a.slidesSizesGrid[a.slidesSizesGrid.length-1]+a.params.spaceBetween:0):a.maxTranslate())&&a.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:a.slides.length-(n.slidesPerView==="auto"?a.slidesPerViewDynamic():Math.ceil(parseFloat(n.slidesPerView,10)))}),r.currentTranslate<a.maxTranslate()&&(j=!1,n.resistance&&(r.currentTranslate=a.maxTranslate()+1-(a.maxTranslate()-r.startTranslate-x)**D))),j&&(o.preventedByNestedSwiper=!0),!a.allowSlideNext&&a.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!a.allowSlidePrev&&a.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!a.allowSlidePrev&&!a.allowSlideNext&&(r.currentTranslate=r.startTranslate),n.threshold>0)if(Math.abs(x)>n.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,r.currentTranslate=r.startTranslate,i.diff=a.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY;return}}else{r.currentTranslate=r.startTranslate;return}!n.followFinger||n.cssMode||((n.freeMode&&n.freeMode.enabled&&a.freeMode||n.watchSlidesProgress)&&(a.updateActiveIndex(),a.updateSlidesClasses()),n.freeMode&&n.freeMode.enabled&&a.freeMode&&a.freeMode.onTouchMove(),a.updateProgress(r.currentTranslate),a.setTranslate(r.currentTranslate))}function Mc(t){const s=this,a=s.touchEventsData;let r=t;r.originalEvent&&(r=r.originalEvent);let n;if(r.type==="touchend"||r.type==="touchcancel"){if(n=[...r.changedTouches].find(C=>C.identifier===a.touchId),!n||n.identifier!==a.touchId)return}else{if(a.touchId!==null||r.pointerId!==a.pointerId)return;n=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)&&!(["pointercancel","contextmenu"].includes(r.type)&&(s.browser.isSafari||s.browser.isWebView)))return;a.pointerId=null,a.touchId=null;const{params:l,touches:u,rtlTranslate:o,slidesGrid:m,enabled:h}=s;if(!h||!l.simulateTouch&&r.pointerType==="mouse")return;if(a.allowTouchCallbacks&&s.emit("touchEnd",r),a.allowTouchCallbacks=!1,!a.isTouched){a.isMoved&&l.grabCursor&&s.setGrabCursor(!1),a.isMoved=!1,a.startMoving=!1;return}l.grabCursor&&a.isMoved&&a.isTouched&&(s.allowSlideNext===!0||s.allowSlidePrev===!0)&&s.setGrabCursor(!1);const d=Na(),g=d-a.touchStartTime;if(s.allowClick){const C=r.path||r.composedPath&&r.composedPath();s.updateClickedSlide(C&&C[0]||r.target,C),s.emit("tap click",r),g<300&&d-a.lastClickTime<300&&s.emit("doubleTap doubleClick",r)}if(a.lastClickTime=Na(),qn(()=>{s.destroyed||(s.allowClick=!0)}),!a.isTouched||!a.isMoved||!s.swipeDirection||u.diff===0&&!a.loopSwapReset||a.currentTranslate===a.startTranslate&&!a.loopSwapReset){a.isTouched=!1,a.isMoved=!1,a.startMoving=!1;return}a.isTouched=!1,a.isMoved=!1,a.startMoving=!1;let p;if(l.followFinger?p=o?s.translate:-s.translate:p=-a.currentTranslate,l.cssMode)return;if(l.freeMode&&l.freeMode.enabled){s.freeMode.onTouchEnd({currentPos:p});return}const x=p>=-s.maxTranslate()&&!s.params.loop;let A=0,y=s.slidesSizesGrid[0];for(let C=0;C<m.length;C+=C<l.slidesPerGroupSkip?1:l.slidesPerGroup){const f=C<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;typeof m[C+f]<"u"?(x||p>=m[C]&&p<m[C+f])&&(A=C,y=m[C+f]-m[C]):(x||p>=m[C])&&(A=C,y=m[m.length-1]-m[m.length-2])}let N=null,v=null;l.rewind&&(s.isBeginning?v=l.virtual&&l.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1:s.isEnd&&(N=0));const j=(p-m[A])/y,D=A<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;if(g>l.longSwipesMs){if(!l.longSwipes){s.slideTo(s.activeIndex);return}s.swipeDirection==="next"&&(j>=l.longSwipesRatio?s.slideTo(l.rewind&&s.isEnd?N:A+D):s.slideTo(A)),s.swipeDirection==="prev"&&(j>1-l.longSwipesRatio?s.slideTo(A+D):v!==null&&j<0&&Math.abs(j)>l.longSwipesRatio?s.slideTo(v):s.slideTo(A))}else{if(!l.shortSwipes){s.slideTo(s.activeIndex);return}s.navigation&&(r.target===s.navigation.nextEl||r.target===s.navigation.prevEl)?r.target===s.navigation.nextEl?s.slideTo(A+D):s.slideTo(A):(s.swipeDirection==="next"&&s.slideTo(N!==null?N:A+D),s.swipeDirection==="prev"&&s.slideTo(v!==null?v:A))}}function Qr(){const t=this,{params:s,el:a}=t;if(a&&a.offsetWidth===0)return;s.breakpoints&&t.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:n,snapGrid:i}=t,l=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const u=l&&s.loop;(s.slidesPerView==="auto"||s.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!u?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!l?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=n,t.allowSlideNext=r,t.params.watchOverflow&&i!==t.snapGrid&&t.checkOverflow()}function Fc(t){const s=this;s.enabled&&(s.allowClick||(s.params.preventClicks&&t.preventDefault(),s.params.preventClicksPropagation&&s.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function Rc(){const t=this,{wrapperEl:s,rtlTranslate:a,enabled:r}=t;if(!r)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-s.scrollLeft:t.translate=-s.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let n;const i=t.maxTranslate()-t.minTranslate();i===0?n=0:n=(t.translate-t.minTranslate())/i,n!==t.progress&&t.updateProgress(a?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function Lc(t){const s=this;fa(s,t.target),!(s.params.cssMode||s.params.slidesPerView!=="auto"&&!s.params.autoHeight)&&s.update()}function Oc(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const Jn=(t,s)=>{const a=Yt(),{params:r,el:n,wrapperEl:i,device:l}=t,u=!!r.nested,o=s==="on"?"addEventListener":"removeEventListener",m=s;!n||typeof n=="string"||(a[o]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:u}),n[o]("touchstart",t.onTouchStart,{passive:!1}),n[o]("pointerdown",t.onTouchStart,{passive:!1}),a[o]("touchmove",t.onTouchMove,{passive:!1,capture:u}),a[o]("pointermove",t.onTouchMove,{passive:!1,capture:u}),a[o]("touchend",t.onTouchEnd,{passive:!0}),a[o]("pointerup",t.onTouchEnd,{passive:!0}),a[o]("pointercancel",t.onTouchEnd,{passive:!0}),a[o]("touchcancel",t.onTouchEnd,{passive:!0}),a[o]("pointerout",t.onTouchEnd,{passive:!0}),a[o]("pointerleave",t.onTouchEnd,{passive:!0}),a[o]("contextmenu",t.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&n[o]("click",t.onClick,!0),r.cssMode&&i[o]("scroll",t.onScroll),r.updateOnWindowResize?t[m](l.ios||l.android?"resize orientationchange observerUpdate":"resize observerUpdate",Qr,!0):t[m]("observerUpdate",Qr,!0),n[o]("load",t.onLoad,{capture:!0}))};function zc(){const t=this,{params:s}=t;t.onTouchStart=Pc.bind(t),t.onTouchMove=Ec.bind(t),t.onTouchEnd=Mc.bind(t),t.onDocumentTouchStart=Oc.bind(t),s.cssMode&&(t.onScroll=Rc.bind(t)),t.onClick=Fc.bind(t),t.onLoad=Lc.bind(t),Jn(t,"on")}function $c(){Jn(this,"off")}var _c={attachEvents:zc,detachEvents:$c};const en=(t,s)=>t.grid&&s.grid&&s.grid.rows>1;function Bc(){const t=this,{realIndex:s,initialized:a,params:r,el:n}=t,i=r.breakpoints;if(!i||i&&Object.keys(i).length===0)return;const l=Yt(),u=r.breakpointsBase==="window"||!r.breakpointsBase?r.breakpointsBase:"container",o=["window","container"].includes(r.breakpointsBase)||!r.breakpointsBase?t.el:l.querySelector(r.breakpointsBase),m=t.getBreakpoint(i,u,o);if(!m||t.currentBreakpoint===m)return;const d=(m in i?i[m]:void 0)||t.originalParams,g=en(t,r),p=en(t,d),x=t.params.grabCursor,A=d.grabCursor,y=r.enabled;g&&!p?(n.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),t.emitContainerClasses()):!g&&p&&(n.classList.add(`${r.containerModifierClass}grid`),(d.grid.fill&&d.grid.fill==="column"||!d.grid.fill&&r.grid.fill==="column")&&n.classList.add(`${r.containerModifierClass}grid-column`),t.emitContainerClasses()),x&&!A?t.unsetGrabCursor():!x&&A&&t.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(f=>{if(typeof d[f]>"u")return;const w=r[f]&&r[f].enabled,b=d[f]&&d[f].enabled;w&&!b&&t[f].disable(),!w&&b&&t[f].enable()});const N=d.direction&&d.direction!==r.direction,v=r.loop&&(d.slidesPerView!==r.slidesPerView||N),j=r.loop;N&&a&&t.changeDirection(),Mt(t.params,d);const D=t.params.enabled,C=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),y&&!D?t.disable():!y&&D&&t.enable(),t.currentBreakpoint=m,t.emit("_beforeBreakpoint",d),a&&(v?(t.loopDestroy(),t.loopCreate(s),t.updateSlides()):!j&&C?(t.loopCreate(s),t.updateSlides()):j&&!C&&t.loopDestroy()),t.emit("breakpoint",d)}function Uc(t,s="window",a){if(!t||s==="container"&&!a)return;let r=!1;const n=Dt(),i=s==="window"?n.innerHeight:a.clientHeight,l=Object.keys(t).map(u=>{if(typeof u=="string"&&u.indexOf("@")===0){const o=parseFloat(u.substr(1));return{value:i*o,point:u}}return{value:u,point:u}});l.sort((u,o)=>parseInt(u.value,10)-parseInt(o.value,10));for(let u=0;u<l.length;u+=1){const{point:o,value:m}=l[u];s==="window"?n.matchMedia(`(min-width: ${m}px)`).matches&&(r=o):m<=a.clientWidth&&(r=o)}return r||"max"}var qc={setBreakpoint:Bc,getBreakpoint:Uc};function Hc(t,s){const a=[];return t.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(n=>{r[n]&&a.push(s+n)}):typeof r=="string"&&a.push(s+r)}),a}function Wc(){const t=this,{classNames:s,params:a,rtl:r,el:n,device:i}=t,l=Hc(["initialized",a.direction,{"free-mode":t.params.freeMode&&a.freeMode.enabled},{autoheight:a.autoHeight},{rtl:r},{grid:a.grid&&a.grid.rows>1},{"grid-column":a.grid&&a.grid.rows>1&&a.grid.fill==="column"},{android:i.android},{ios:i.ios},{"css-mode":a.cssMode},{centered:a.cssMode&&a.centeredSlides},{"watch-progress":a.watchSlidesProgress}],a.containerModifierClass);s.push(...l),n.classList.add(...s),t.emitContainerClasses()}function Vc(){const t=this,{el:s,classNames:a}=t;!s||typeof s=="string"||(s.classList.remove(...a),t.emitContainerClasses())}var Gc={addClasses:Wc,removeClasses:Vc};function Yc(){const t=this,{isLocked:s,params:a}=t,{slidesOffsetBefore:r}=a;if(r){const n=t.slides.length-1,i=t.slidesGrid[n]+t.slidesSizesGrid[n]+r*2;t.isLocked=t.size>i}else t.isLocked=t.snapGrid.length===1;a.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),a.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),s&&s!==t.isLocked&&(t.isEnd=!1),s!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var Kc={checkOverflow:Yc},lr={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Jc(t,s){return function(r={}){const n=Object.keys(r)[0],i=r[n];if(typeof i!="object"||i===null){Mt(s,r);return}if(t[n]===!0&&(t[n]={enabled:!0}),n==="navigation"&&t[n]&&t[n].enabled&&!t[n].prevEl&&!t[n].nextEl&&(t[n].auto=!0),["pagination","scrollbar"].indexOf(n)>=0&&t[n]&&t[n].enabled&&!t[n].el&&(t[n].auto=!0),!(n in t&&"enabled"in i)){Mt(s,r);return}typeof t[n]=="object"&&!("enabled"in t[n])&&(t[n].enabled=!0),t[n]||(t[n]={enabled:!1}),Mt(s,r)}}const Ka={eventsEmitter:Go,update:rc,translate:dc,transition:hc,slide:Nc,loop:kc,grabCursor:Ic,events:_c,breakpoints:qc,checkOverflow:Kc,classes:Gc},Ja={};let fr=class ts{constructor(...s){let a,r;s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?r=s[0]:[a,r]=s,r||(r={}),r=Mt({},r),a&&!r.el&&(r.el=a);const n=Yt();if(r.el&&typeof r.el=="string"&&n.querySelectorAll(r.el).length>1){const o=[];return n.querySelectorAll(r.el).forEach(m=>{const h=Mt({},r,{el:m});o.push(new ts(h))}),o}const i=this;i.__swiper__=!0,i.support=Vn(),i.device=Gn({userAgent:r.userAgent}),i.browser=Yn(),i.eventsListeners={},i.eventsAnyListeners=[],i.modules=[...i.__modules__],r.modules&&Array.isArray(r.modules)&&i.modules.push(...r.modules);const l={};i.modules.forEach(o=>{o({params:r,swiper:i,extendParams:Jc(r,l),on:i.on.bind(i),once:i.once.bind(i),off:i.off.bind(i),emit:i.emit.bind(i)})});const u=Mt({},lr,l);return i.params=Mt({},u,Ja,r),i.originalParams=Mt({},i.params),i.passedParams=Mt({},r),i.params&&i.params.on&&Object.keys(i.params.on).forEach(o=>{i.on(o,i.params.on[o])}),i.params&&i.params.onAny&&i.onAny(i.params.onAny),Object.assign(i,{enabled:i.params.enabled,el:a,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return i.params.direction==="horizontal"},isVertical(){return i.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:i.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:i.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),i.emit("_swiper"),i.params.init&&i.init(),i}getDirectionLabel(s){return this.isHorizontal()?s:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[s]}getSlideIndex(s){const{slidesEl:a,params:r}=this,n=Wt(a,`.${r.slideClass}, swiper-slide`),i=Ca(n[0]);return Ca(s)-i}getSlideIndexByData(s){return this.getSlideIndex(this.slides.find(a=>a.getAttribute("data-swiper-slide-index")*1===s))}getSlideIndexWhenGrid(s){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?s=Math.floor(s/this.params.grid.rows):this.params.grid.fill==="row"&&(s=s%Math.ceil(this.slides.length/this.params.grid.rows))),s}recalcSlides(){const s=this,{slidesEl:a,params:r}=s;s.slides=Wt(a,`.${r.slideClass}, swiper-slide`)}enable(){const s=this;s.enabled||(s.enabled=!0,s.params.grabCursor&&s.setGrabCursor(),s.emit("enable"))}disable(){const s=this;s.enabled&&(s.enabled=!1,s.params.grabCursor&&s.unsetGrabCursor(),s.emit("disable"))}setProgress(s,a){const r=this;s=Math.min(Math.max(s,0),1);const n=r.minTranslate(),l=(r.maxTranslate()-n)*s+n;r.translateTo(l,typeof a>"u"?0:a),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const s=this;if(!s.params._emitClasses||!s.el)return;const a=s.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(s.params.containerModifierClass)===0);s.emit("_containerClasses",a.join(" "))}getSlideClasses(s){const a=this;return a.destroyed?"":s.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(a.params.slideClass)===0).join(" ")}emitSlidesClasses(){const s=this;if(!s.params._emitClasses||!s.el)return;const a=[];s.slides.forEach(r=>{const n=s.getSlideClasses(r);a.push({slideEl:r,classNames:n}),s.emit("_slideClass",r,n)}),s.emit("_slideClasses",a)}slidesPerViewDynamic(s="current",a=!1){const r=this,{params:n,slides:i,slidesGrid:l,slidesSizesGrid:u,size:o,activeIndex:m}=r;let h=1;if(typeof n.slidesPerView=="number")return n.slidesPerView;if(n.centeredSlides){let d=i[m]?Math.ceil(i[m].swiperSlideSize):0,g;for(let p=m+1;p<i.length;p+=1)i[p]&&!g&&(d+=Math.ceil(i[p].swiperSlideSize),h+=1,d>o&&(g=!0));for(let p=m-1;p>=0;p-=1)i[p]&&!g&&(d+=i[p].swiperSlideSize,h+=1,d>o&&(g=!0))}else if(s==="current")for(let d=m+1;d<i.length;d+=1)(a?l[d]+u[d]-l[m]<o:l[d]-l[m]<o)&&(h+=1);else for(let d=m-1;d>=0;d-=1)l[m]-l[d]<o&&(h+=1);return h}update(){const s=this;if(!s||s.destroyed)return;const{snapGrid:a,params:r}=s;r.breakpoints&&s.setBreakpoint(),[...s.el.querySelectorAll('[loading="lazy"]')].forEach(l=>{l.complete&&fa(s,l)}),s.updateSize(),s.updateSlides(),s.updateProgress(),s.updateSlidesClasses();function n(){const l=s.rtlTranslate?s.translate*-1:s.translate,u=Math.min(Math.max(l,s.maxTranslate()),s.minTranslate());s.setTranslate(u),s.updateActiveIndex(),s.updateSlidesClasses()}let i;if(r.freeMode&&r.freeMode.enabled&&!r.cssMode)n(),r.autoHeight&&s.updateAutoHeight();else{if((r.slidesPerView==="auto"||r.slidesPerView>1)&&s.isEnd&&!r.centeredSlides){const l=s.virtual&&r.virtual.enabled?s.virtual.slides:s.slides;i=s.slideTo(l.length-1,0,!1,!0)}else i=s.slideTo(s.activeIndex,0,!1,!0);i||n()}r.watchOverflow&&a!==s.snapGrid&&s.checkOverflow(),s.emit("update")}changeDirection(s,a=!0){const r=this,n=r.params.direction;return s||(s=n==="horizontal"?"vertical":"horizontal"),s===n||s!=="horizontal"&&s!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${n}`),r.el.classList.add(`${r.params.containerModifierClass}${s}`),r.emitContainerClasses(),r.params.direction=s,r.slides.forEach(i=>{s==="vertical"?i.style.width="":i.style.height=""}),r.emit("changeDirection"),a&&r.update()),r}changeLanguageDirection(s){const a=this;a.rtl&&s==="rtl"||!a.rtl&&s==="ltr"||(a.rtl=s==="rtl",a.rtlTranslate=a.params.direction==="horizontal"&&a.rtl,a.rtl?(a.el.classList.add(`${a.params.containerModifierClass}rtl`),a.el.dir="rtl"):(a.el.classList.remove(`${a.params.containerModifierClass}rtl`),a.el.dir="ltr"),a.update())}mount(s){const a=this;if(a.mounted)return!0;let r=s||a.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=a,r.parentNode&&r.parentNode.host&&r.parentNode.host.nodeName===a.params.swiperElementNodeName.toUpperCase()&&(a.isElement=!0);const n=()=>`.${(a.params.wrapperClass||"").trim().split(" ").join(".")}`;let l=r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(n()):Wt(r,n())[0];return!l&&a.params.createElements&&(l=Sa("div",a.params.wrapperClass),r.append(l),Wt(r,`.${a.params.slideClass}`).forEach(u=>{l.append(u)})),Object.assign(a,{el:r,wrapperEl:l,slidesEl:a.isElement&&!r.parentNode.host.slideSlots?r.parentNode.host:l,hostEl:a.isElement?r.parentNode.host:r,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||cs(r,"direction")==="rtl",rtlTranslate:a.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||cs(r,"direction")==="rtl"),wrongRTL:cs(l,"display")==="-webkit-box"}),!0}init(s){const a=this;if(a.initialized||a.mount(s)===!1)return a;a.emit("beforeInit"),a.params.breakpoints&&a.setBreakpoint(),a.addClasses(),a.updateSize(),a.updateSlides(),a.params.watchOverflow&&a.checkOverflow(),a.params.grabCursor&&a.enabled&&a.setGrabCursor(),a.params.loop&&a.virtual&&a.params.virtual.enabled?a.slideTo(a.params.initialSlide+a.virtual.slidesBefore,0,a.params.runCallbacksOnInit,!1,!0):a.slideTo(a.params.initialSlide,0,a.params.runCallbacksOnInit,!1,!0),a.params.loop&&a.loopCreate(void 0,!0),a.attachEvents();const n=[...a.el.querySelectorAll('[loading="lazy"]')];return a.isElement&&n.push(...a.hostEl.querySelectorAll('[loading="lazy"]')),n.forEach(i=>{i.complete?fa(a,i):i.addEventListener("load",l=>{fa(a,l.target)})}),ir(a),a.initialized=!0,ir(a),a.emit("init"),a.emit("afterInit"),a}destroy(s=!0,a=!0){const r=this,{params:n,el:i,wrapperEl:l,slides:u}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),n.loop&&r.loopDestroy(),a&&(r.removeClasses(),i&&typeof i!="string"&&i.removeAttribute("style"),l&&l.removeAttribute("style"),u&&u.length&&u.forEach(o=>{o.classList.remove(n.slideVisibleClass,n.slideFullyVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass),o.removeAttribute("style"),o.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(o=>{r.off(o)}),s!==!1&&(r.el&&typeof r.el!="string"&&(r.el.swiper=null),Fo(r)),r.destroyed=!0),null}static extendDefaults(s){Mt(Ja,s)}static get extendedDefaults(){return Ja}static get defaults(){return lr}static installModule(s){ts.prototype.__modules__||(ts.prototype.__modules__=[]);const a=ts.prototype.__modules__;typeof s=="function"&&a.indexOf(s)<0&&a.push(s)}static use(s){return Array.isArray(s)?(s.forEach(a=>ts.installModule(a)),ts):(ts.installModule(s),ts)}};Object.keys(Ka).forEach(t=>{Object.keys(Ka[t]).forEach(s=>{fr.prototype[s]=Ka[t][s]})});fr.use([Wo,Vo]);const Xn=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function ks(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"&&!t.__swiper__}function Os(t,s){const a=["__proto__","constructor","prototype"];Object.keys(s).filter(r=>a.indexOf(r)<0).forEach(r=>{typeof t[r]>"u"?t[r]=s[r]:ks(s[r])&&ks(t[r])&&Object.keys(s[r]).length>0?s[r].__swiper__?t[r]=s[r]:Os(t[r],s[r]):t[r]=s[r]})}function Zn(t={}){return t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function Qn(t={}){return t.pagination&&typeof t.pagination.el>"u"}function ei(t={}){return t.scrollbar&&typeof t.scrollbar.el>"u"}function ti(t=""){const s=t.split(" ").map(r=>r.trim()).filter(r=>!!r),a=[];return s.forEach(r=>{a.indexOf(r)<0&&a.push(r)}),a.join(" ")}function Xc(t=""){return t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}function Zc({swiper:t,slides:s,passedParams:a,changedParams:r,nextEl:n,prevEl:i,scrollbarEl:l,paginationEl:u}){const o=r.filter(b=>b!=="children"&&b!=="direction"&&b!=="wrapperClass"),{params:m,pagination:h,navigation:d,scrollbar:g,virtual:p,thumbs:x}=t;let A,y,N,v,j,D,C,f;r.includes("thumbs")&&a.thumbs&&a.thumbs.swiper&&!a.thumbs.swiper.destroyed&&m.thumbs&&(!m.thumbs.swiper||m.thumbs.swiper.destroyed)&&(A=!0),r.includes("controller")&&a.controller&&a.controller.control&&m.controller&&!m.controller.control&&(y=!0),r.includes("pagination")&&a.pagination&&(a.pagination.el||u)&&(m.pagination||m.pagination===!1)&&h&&!h.el&&(N=!0),r.includes("scrollbar")&&a.scrollbar&&(a.scrollbar.el||l)&&(m.scrollbar||m.scrollbar===!1)&&g&&!g.el&&(v=!0),r.includes("navigation")&&a.navigation&&(a.navigation.prevEl||i)&&(a.navigation.nextEl||n)&&(m.navigation||m.navigation===!1)&&d&&!d.prevEl&&!d.nextEl&&(j=!0);const w=b=>{t[b]&&(t[b].destroy(),b==="navigation"?(t.isElement&&(t[b].prevEl.remove(),t[b].nextEl.remove()),m[b].prevEl=void 0,m[b].nextEl=void 0,t[b].prevEl=void 0,t[b].nextEl=void 0):(t.isElement&&t[b].el.remove(),m[b].el=void 0,t[b].el=void 0))};r.includes("loop")&&t.isElement&&(m.loop&&!a.loop?D=!0:!m.loop&&a.loop?C=!0:f=!0),o.forEach(b=>{if(ks(m[b])&&ks(a[b]))Object.assign(m[b],a[b]),(b==="navigation"||b==="pagination"||b==="scrollbar")&&"enabled"in a[b]&&!a[b].enabled&&w(b);else{const z=a[b];(z===!0||z===!1)&&(b==="navigation"||b==="pagination"||b==="scrollbar")?z===!1&&w(b):m[b]=a[b]}}),o.includes("controller")&&!y&&t.controller&&t.controller.control&&m.controller&&m.controller.control&&(t.controller.control=m.controller.control),r.includes("children")&&s&&p&&m.virtual.enabled?(p.slides=s,p.update(!0)):r.includes("virtual")&&p&&m.virtual.enabled&&(s&&(p.slides=s),p.update(!0)),r.includes("children")&&s&&m.loop&&(f=!0),A&&x.init()&&x.update(!0),y&&(t.controller.control=m.controller.control),N&&(t.isElement&&(!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-pagination"),u.part.add("pagination"),t.el.appendChild(u)),u&&(m.pagination.el=u),h.init(),h.render(),h.update()),v&&(t.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-scrollbar"),l.part.add("scrollbar"),t.el.appendChild(l)),l&&(m.scrollbar.el=l),g.init(),g.updateSize(),g.setTranslate()),j&&(t.isElement&&((!n||typeof n=="string")&&(n=document.createElement("div"),n.classList.add("swiper-button-next"),ka(n,t.navigation.arrowSvg),n.part.add("button-next"),t.el.appendChild(n)),(!i||typeof i=="string")&&(i=document.createElement("div"),i.classList.add("swiper-button-prev"),ka(i,t.navigation.arrowSvg),i.part.add("button-prev"),t.el.appendChild(i))),n&&(m.navigation.nextEl=n),i&&(m.navigation.prevEl=i),d.init(),d.update()),r.includes("allowSlideNext")&&(t.allowSlideNext=a.allowSlideNext),r.includes("allowSlidePrev")&&(t.allowSlidePrev=a.allowSlidePrev),r.includes("direction")&&t.changeDirection(a.direction,!1),(D||f)&&t.loopDestroy(),(C||f)&&t.loopCreate(),t.update()}function Qc(t={},s=!0){const a={on:{}},r={},n={};Os(a,lr),a._emitClasses=!0,a.init=!1;const i={},l=Xn.map(o=>o.replace(/_/,"")),u=Object.assign({},t);return Object.keys(u).forEach(o=>{typeof t[o]>"u"||(l.indexOf(o)>=0?ks(t[o])?(a[o]={},n[o]={},Os(a[o],t[o]),Os(n[o],t[o])):(a[o]=t[o],n[o]=t[o]):o.search(/on[A-Z]/)===0&&typeof t[o]=="function"?s?r[`${o[2].toLowerCase()}${o.substr(3)}`]=t[o]:a.on[`${o[2].toLowerCase()}${o.substr(3)}`]=t[o]:i[o]=t[o])}),["navigation","pagination","scrollbar"].forEach(o=>{a[o]===!0&&(a[o]={}),a[o]===!1&&delete a[o]}),{params:a,passedParams:n,rest:i,events:r}}function ed({el:t,nextEl:s,prevEl:a,paginationEl:r,scrollbarEl:n,swiper:i},l){Zn(l)&&s&&a&&(i.params.navigation.nextEl=s,i.originalParams.navigation.nextEl=s,i.params.navigation.prevEl=a,i.originalParams.navigation.prevEl=a),Qn(l)&&r&&(i.params.pagination.el=r,i.originalParams.pagination.el=r),ei(l)&&n&&(i.params.scrollbar.el=n,i.originalParams.scrollbar.el=n),i.init(t)}function td(t,s,a,r,n){const i=[];if(!s)return i;const l=o=>{i.indexOf(o)<0&&i.push(o)};if(a&&r){const o=r.map(n),m=a.map(n);o.join("")!==m.join("")&&l("children"),r.length!==a.length&&l("children")}return Xn.filter(o=>o[0]==="_").map(o=>o.replace(/_/,"")).forEach(o=>{if(o in t&&o in s)if(ks(t[o])&&ks(s[o])){const m=Object.keys(t[o]),h=Object.keys(s[o]);m.length!==h.length?l(o):(m.forEach(d=>{t[o][d]!==s[o][d]&&l(o)}),h.forEach(d=>{t[o][d]!==s[o][d]&&l(o)}))}else t[o]!==s[o]&&l(o)}),i}const sd=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.emit("_virtualUpdated"),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function Ta(){return Ta=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ta.apply(this,arguments)}function si(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function ai(t){const s=[];return rt.Children.toArray(t).forEach(a=>{si(a)?s.push(a):a.props&&a.props.children&&ai(a.props.children).forEach(r=>s.push(r))}),s}function ad(t){const s=[],a={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return rt.Children.toArray(t).forEach(r=>{if(si(r))s.push(r);else if(r.props&&r.props.slot&&a[r.props.slot])a[r.props.slot].push(r);else if(r.props&&r.props.children){const n=ai(r.props.children);n.length>0?n.forEach(i=>s.push(i)):a["container-end"].push(r)}else a["container-end"].push(r)}),{slides:s,slots:a}}function rd(t,s,a){if(!a)return null;const r=h=>{let d=h;return h<0?d=s.length+h:d>=s.length&&(d=d-s.length),d},n=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${a.offset}px`}:{top:`${a.offset}px`},{from:i,to:l}=a,u=t.params.loop?-s.length:0,o=t.params.loop?s.length*2:s.length,m=[];for(let h=u;h<o;h+=1)h>=i&&h<=l&&m.push(s[r(h)]);return m.map((h,d)=>rt.cloneElement(h,{swiper:t,style:n,key:h.props.virtualIndex||h.key||`slide-${d}`}))}function Ks(t,s){return typeof window>"u"?c.useEffect(t,s):c.useLayoutEffect(t,s)}const tn=c.createContext(null),nd=c.createContext(null),ri=c.forwardRef(({className:t,tag:s="div",wrapperTag:a="div",children:r,onSwiper:n,...i}={},l)=>{let u=!1;const[o,m]=c.useState("swiper"),[h,d]=c.useState(null),[g,p]=c.useState(!1),x=c.useRef(!1),A=c.useRef(null),y=c.useRef(null),N=c.useRef(null),v=c.useRef(null),j=c.useRef(null),D=c.useRef(null),C=c.useRef(null),f=c.useRef(null),{params:w,passedParams:b,rest:z,events:P}=Qc(i),{slides:S,slots:k}=ad(r),G=()=>{p(!g)};Object.assign(w.on,{_containerClasses(_,L){m(L)}});const B=()=>{Object.assign(w.on,P),u=!0;const _={...w};if(delete _.wrapperClass,y.current=new fr(_),y.current.virtual&&y.current.params.virtual.enabled){y.current.virtual.slides=S;const L={cache:!1,slides:S,renderExternal:d,renderExternalUpdate:!1};Os(y.current.params.virtual,L),Os(y.current.originalParams.virtual,L)}};A.current||B(),y.current&&y.current.on("_beforeBreakpoint",G);const E=()=>{u||!P||!y.current||Object.keys(P).forEach(_=>{y.current.on(_,P[_])})},M=()=>{!P||!y.current||Object.keys(P).forEach(_=>{y.current.off(_,P[_])})};c.useEffect(()=>()=>{y.current&&y.current.off("_beforeBreakpoint",G)}),c.useEffect(()=>{!x.current&&y.current&&(y.current.emitSlidesClasses(),x.current=!0)}),Ks(()=>{if(l&&(l.current=A.current),!!A.current)return y.current.destroyed&&B(),ed({el:A.current,nextEl:j.current,prevEl:D.current,paginationEl:C.current,scrollbarEl:f.current,swiper:y.current},w),n&&!y.current.destroyed&&n(y.current),()=>{y.current&&!y.current.destroyed&&y.current.destroy(!0,!1)}},[]),Ks(()=>{E();const _=td(b,N.current,S,v.current,L=>L.key);return N.current=b,v.current=S,_.length&&y.current&&!y.current.destroyed&&Zc({swiper:y.current,slides:S,passedParams:b,changedParams:_,nextEl:j.current,prevEl:D.current,scrollbarEl:f.current,paginationEl:C.current}),()=>{M()}}),Ks(()=>{sd(y.current)},[h]);function F(){return w.virtual?rd(y.current,S,h):S.map((_,L)=>rt.cloneElement(_,{swiper:y.current,swiperSlideIndex:L}))}return rt.createElement(s,Ta({ref:A,className:ti(`${o}${t?` ${t}`:""}`)},z),rt.createElement(nd.Provider,{value:y.current},k["container-start"],rt.createElement(a,{className:Xc(w.wrapperClass)},k["wrapper-start"],F(),k["wrapper-end"]),Zn(w)&&rt.createElement(rt.Fragment,null,rt.createElement("div",{ref:D,className:"swiper-button-prev"}),rt.createElement("div",{ref:j,className:"swiper-button-next"})),ei(w)&&rt.createElement("div",{ref:f,className:"swiper-scrollbar"}),Qn(w)&&rt.createElement("div",{ref:C,className:"swiper-pagination"}),k["container-end"]))});ri.displayName="Swiper";const ni=c.forwardRef(({tag:t="div",children:s,className:a="",swiper:r,zoom:n,lazy:i,virtualIndex:l,swiperSlideIndex:u,...o}={},m)=>{const h=c.useRef(null),[d,g]=c.useState("swiper-slide"),[p,x]=c.useState(!1);function A(j,D,C){D===h.current&&g(C)}Ks(()=>{if(typeof u<"u"&&(h.current.swiperSlideIndex=u),m&&(m.current=h.current),!(!h.current||!r)){if(r.destroyed){d!=="swiper-slide"&&g("swiper-slide");return}return r.on("_slideClass",A),()=>{r&&r.off("_slideClass",A)}}}),Ks(()=>{r&&h.current&&!r.destroyed&&g(r.getSlideClasses(h.current))},[r]);const y={isActive:d.indexOf("swiper-slide-active")>=0,isVisible:d.indexOf("swiper-slide-visible")>=0,isPrev:d.indexOf("swiper-slide-prev")>=0,isNext:d.indexOf("swiper-slide-next")>=0},N=()=>typeof s=="function"?s(y):s,v=()=>{x(!0)};return rt.createElement(t,Ta({ref:h,className:ti(`${d}${a?` ${a}`:""}`),"data-swiper-slide-index":l,onLoad:v},o),n&&rt.createElement(tn.Provider,{value:y},rt.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof n=="number"?n:void 0},N(),i&&!p&&rt.createElement("div",{className:"swiper-lazy-preloader"}))),!n&&rt.createElement(tn.Provider,{value:y},N(),i&&!p&&rt.createElement("div",{className:"swiper-lazy-preloader"})))});ni.displayName="SwiperSlide";function id(t,s,a,r){return t.params.createElements&&Object.keys(r).forEach(n=>{if(!a[n]&&a.auto===!0){let i=Wt(t.el,`.${r[n]}`)[0];i||(i=Sa("div",r[n]),i.className=r[n],t.el.append(i)),a[n]=i,s[n]=i}}),a}function qs(t=""){return`.${t.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,".")}`}function ld({swiper:t,extendParams:s,on:a,emit:r}){const n="swiper-pagination";s({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:N=>N,formatFractionTotal:N=>N,bulletClass:`${n}-bullet`,bulletActiveClass:`${n}-bullet-active`,modifierClass:`${n}-`,currentClass:`${n}-current`,totalClass:`${n}-total`,hiddenClass:`${n}-hidden`,progressbarFillClass:`${n}-progressbar-fill`,progressbarOppositeClass:`${n}-progressbar-opposite`,clickableClass:`${n}-clickable`,lockClass:`${n}-lock`,horizontalClass:`${n}-horizontal`,verticalClass:`${n}-vertical`,paginationDisabledClass:`${n}-disabled`}}),t.pagination={el:null,bullets:[]};let i,l=0;function u(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&t.pagination.el.length===0}function o(N,v){const{bulletActiveClass:j}=t.params.pagination;N&&(N=N[`${v==="prev"?"previous":"next"}ElementSibling`],N&&(N.classList.add(`${j}-${v}`),N=N[`${v==="prev"?"previous":"next"}ElementSibling`],N&&N.classList.add(`${j}-${v}-${v}`)))}function m(N,v,j){if(N=N%j,v=v%j,v===N+1)return"next";if(v===N-1)return"previous"}function h(N){const v=N.target.closest(qs(t.params.pagination.bulletClass));if(!v)return;N.preventDefault();const j=Ca(v)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===j)return;const D=m(t.realIndex,j,t.slides.length);D==="next"?t.slideNext():D==="previous"?t.slidePrev():t.slideToLoop(j)}else t.slideTo(j)}function d(){const N=t.rtl,v=t.params.pagination;if(u())return;let j=t.pagination.el;j=Xt(j);let D,C;const f=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,w=t.params.loop?Math.ceil(f/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(C=t.previousRealIndex||0,D=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):typeof t.snapIndex<"u"?(D=t.snapIndex,C=t.previousSnapIndex):(C=t.previousIndex||0,D=t.activeIndex||0),v.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const b=t.pagination.bullets;let z,P,S;if(v.dynamicBullets&&(i=nr(b[0],t.isHorizontal()?"width":"height"),j.forEach(k=>{k.style[t.isHorizontal()?"width":"height"]=`${i*(v.dynamicMainBullets+4)}px`}),v.dynamicMainBullets>1&&C!==void 0&&(l+=D-(C||0),l>v.dynamicMainBullets-1?l=v.dynamicMainBullets-1:l<0&&(l=0)),z=Math.max(D-l,0),P=z+(Math.min(b.length,v.dynamicMainBullets)-1),S=(P+z)/2),b.forEach(k=>{const G=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(B=>`${v.bulletActiveClass}${B}`)].map(B=>typeof B=="string"&&B.includes(" ")?B.split(" "):B).flat();k.classList.remove(...G)}),j.length>1)b.forEach(k=>{const G=Ca(k);G===D?k.classList.add(...v.bulletActiveClass.split(" ")):t.isElement&&k.setAttribute("part","bullet"),v.dynamicBullets&&(G>=z&&G<=P&&k.classList.add(...`${v.bulletActiveClass}-main`.split(" ")),G===z&&o(k,"prev"),G===P&&o(k,"next"))});else{const k=b[D];if(k&&k.classList.add(...v.bulletActiveClass.split(" ")),t.isElement&&b.forEach((G,B)=>{G.setAttribute("part",B===D?"bullet-active":"bullet")}),v.dynamicBullets){const G=b[z],B=b[P];for(let E=z;E<=P;E+=1)b[E]&&b[E].classList.add(...`${v.bulletActiveClass}-main`.split(" "));o(G,"prev"),o(B,"next")}}if(v.dynamicBullets){const k=Math.min(b.length,v.dynamicMainBullets+4),G=(i*k-i)/2-S*i,B=N?"right":"left";b.forEach(E=>{E.style[t.isHorizontal()?B:"top"]=`${G}px`})}}j.forEach((b,z)=>{if(v.type==="fraction"&&(b.querySelectorAll(qs(v.currentClass)).forEach(P=>{P.textContent=v.formatFractionCurrent(D+1)}),b.querySelectorAll(qs(v.totalClass)).forEach(P=>{P.textContent=v.formatFractionTotal(w)})),v.type==="progressbar"){let P;v.progressbarOpposite?P=t.isHorizontal()?"vertical":"horizontal":P=t.isHorizontal()?"horizontal":"vertical";const S=(D+1)/w;let k=1,G=1;P==="horizontal"?k=S:G=S,b.querySelectorAll(qs(v.progressbarFillClass)).forEach(B=>{B.style.transform=`translate3d(0,0,0) scaleX(${k}) scaleY(${G})`,B.style.transitionDuration=`${t.params.speed}ms`})}v.type==="custom"&&v.renderCustom?(ka(b,v.renderCustom(t,D+1,w)),z===0&&r("paginationRender",b)):(z===0&&r("paginationRender",b),r("paginationUpdate",b)),t.params.watchOverflow&&t.enabled&&b.classList[t.isLocked?"add":"remove"](v.lockClass)})}function g(){const N=t.params.pagination;if(u())return;const v=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length;let j=t.pagination.el;j=Xt(j);let D="";if(N.type==="bullets"){let C=t.params.loop?Math.ceil(v/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&C>v&&(C=v);for(let f=0;f<C;f+=1)N.renderBullet?D+=N.renderBullet.call(t,f,N.bulletClass):D+=`<${N.bulletElement} ${t.isElement?'part="bullet"':""} class="${N.bulletClass}"></${N.bulletElement}>`}N.type==="fraction"&&(N.renderFraction?D=N.renderFraction.call(t,N.currentClass,N.totalClass):D=`<span class="${N.currentClass}"></span> / <span class="${N.totalClass}"></span>`),N.type==="progressbar"&&(N.renderProgressbar?D=N.renderProgressbar.call(t,N.progressbarFillClass):D=`<span class="${N.progressbarFillClass}"></span>`),t.pagination.bullets=[],j.forEach(C=>{N.type!=="custom"&&ka(C,D||""),N.type==="bullets"&&t.pagination.bullets.push(...C.querySelectorAll(qs(N.bulletClass)))}),N.type!=="custom"&&r("paginationRender",j[0])}function p(){t.params.pagination=id(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const N=t.params.pagination;if(!N.el)return;let v;typeof N.el=="string"&&t.isElement&&(v=t.el.querySelector(N.el)),!v&&typeof N.el=="string"&&(v=[...document.querySelectorAll(N.el)]),v||(v=N.el),!(!v||v.length===0)&&(t.params.uniqueNavElements&&typeof N.el=="string"&&Array.isArray(v)&&v.length>1&&(v=[...t.el.querySelectorAll(N.el)],v.length>1&&(v=v.find(j=>Wn(j,".swiper")[0]===t.el))),Array.isArray(v)&&v.length===1&&(v=v[0]),Object.assign(t.pagination,{el:v}),v=Xt(v),v.forEach(j=>{N.type==="bullets"&&N.clickable&&j.classList.add(...(N.clickableClass||"").split(" ")),j.classList.add(N.modifierClass+N.type),j.classList.add(t.isHorizontal()?N.horizontalClass:N.verticalClass),N.type==="bullets"&&N.dynamicBullets&&(j.classList.add(`${N.modifierClass}${N.type}-dynamic`),l=0,N.dynamicMainBullets<1&&(N.dynamicMainBullets=1)),N.type==="progressbar"&&N.progressbarOpposite&&j.classList.add(N.progressbarOppositeClass),N.clickable&&j.addEventListener("click",h),t.enabled||j.classList.add(N.lockClass)}))}function x(){const N=t.params.pagination;if(u())return;let v=t.pagination.el;v&&(v=Xt(v),v.forEach(j=>{j.classList.remove(N.hiddenClass),j.classList.remove(N.modifierClass+N.type),j.classList.remove(t.isHorizontal()?N.horizontalClass:N.verticalClass),N.clickable&&(j.classList.remove(...(N.clickableClass||"").split(" ")),j.removeEventListener("click",h))})),t.pagination.bullets&&t.pagination.bullets.forEach(j=>j.classList.remove(...N.bulletActiveClass.split(" ")))}a("changeDirection",()=>{if(!t.pagination||!t.pagination.el)return;const N=t.params.pagination;let{el:v}=t.pagination;v=Xt(v),v.forEach(j=>{j.classList.remove(N.horizontalClass,N.verticalClass),j.classList.add(t.isHorizontal()?N.horizontalClass:N.verticalClass)})}),a("init",()=>{t.params.pagination.enabled===!1?y():(p(),g(),d())}),a("activeIndexChange",()=>{typeof t.snapIndex>"u"&&d()}),a("snapIndexChange",()=>{d()}),a("snapGridLengthChange",()=>{g(),d()}),a("destroy",()=>{x()}),a("enable disable",()=>{let{el:N}=t.pagination;N&&(N=Xt(N),N.forEach(v=>v.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),a("lock unlock",()=>{d()}),a("click",(N,v)=>{const j=v.target,D=Xt(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&D&&D.length>0&&!j.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&j===t.navigation.nextEl||t.navigation.prevEl&&j===t.navigation.prevEl))return;const C=D[0].classList.contains(t.params.pagination.hiddenClass);r(C===!0?"paginationShow":"paginationHide"),D.forEach(f=>f.classList.toggle(t.params.pagination.hiddenClass))}});const A=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:N}=t.pagination;N&&(N=Xt(N),N.forEach(v=>v.classList.remove(t.params.pagination.paginationDisabledClass))),p(),g(),d()},y=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:N}=t.pagination;N&&(N=Xt(N),N.forEach(v=>v.classList.add(t.params.pagination.paginationDisabledClass))),x()};Object.assign(t.pagination,{enable:A,disable:y,render:g,update:d,init:p,destroy:x})}function od({swiper:t,extendParams:s,on:a,emit:r,params:n}){t.autoplay={running:!1,paused:!1,timeLeft:0},s({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let i,l,u=n&&n.autoplay?n.autoplay.delay:3e3,o=n&&n.autoplay?n.autoplay.delay:3e3,m,h=new Date().getTime(),d,g,p,x,A,y,N;function v(F){!t||t.destroyed||!t.wrapperEl||F.target===t.wrapperEl&&(t.wrapperEl.removeEventListener("transitionend",v),!(N||F.detail&&F.detail.bySwiperTouchMove)&&z())}const j=()=>{if(t.destroyed||!t.autoplay.running)return;t.autoplay.paused?d=!0:d&&(o=m,d=!1);const F=t.autoplay.paused?m:h+o-new Date().getTime();t.autoplay.timeLeft=F,r("autoplayTimeLeft",F,F/u),l=requestAnimationFrame(()=>{j()})},D=()=>{let F;return t.virtual&&t.params.virtual.enabled?F=t.slides.find(L=>L.classList.contains("swiper-slide-active")):F=t.slides[t.activeIndex],F?parseInt(F.getAttribute("data-swiper-autoplay"),10):void 0},C=F=>{if(t.destroyed||!t.autoplay.running)return;cancelAnimationFrame(l),j();let _=typeof F>"u"?t.params.autoplay.delay:F;u=t.params.autoplay.delay,o=t.params.autoplay.delay;const L=D();!Number.isNaN(L)&&L>0&&typeof F>"u"&&(_=L,u=L,o=L),m=_;const R=t.params.speed,q=()=>{!t||t.destroyed||(t.params.autoplay.reverseDirection?!t.isBeginning||t.params.loop||t.params.rewind?(t.slidePrev(R,!0,!0),r("autoplay")):t.params.autoplay.stopOnLastSlide||(t.slideTo(t.slides.length-1,R,!0,!0),r("autoplay")):!t.isEnd||t.params.loop||t.params.rewind?(t.slideNext(R,!0,!0),r("autoplay")):t.params.autoplay.stopOnLastSlide||(t.slideTo(0,R,!0,!0),r("autoplay")),t.params.cssMode&&(h=new Date().getTime(),requestAnimationFrame(()=>{C()})))};return _>0?(clearTimeout(i),i=setTimeout(()=>{q()},_)):requestAnimationFrame(()=>{q()}),_},f=()=>{h=new Date().getTime(),t.autoplay.running=!0,C(),r("autoplayStart")},w=()=>{t.autoplay.running=!1,clearTimeout(i),cancelAnimationFrame(l),r("autoplayStop")},b=(F,_)=>{if(t.destroyed||!t.autoplay.running)return;clearTimeout(i),F||(y=!0);const L=()=>{r("autoplayPause"),t.params.autoplay.waitForTransition?t.wrapperEl.addEventListener("transitionend",v):z()};if(t.autoplay.paused=!0,_){A&&(m=t.params.autoplay.delay),A=!1,L();return}m=(m||t.params.autoplay.delay)-(new Date().getTime()-h),!(t.isEnd&&m<0&&!t.params.loop)&&(m<0&&(m=0),L())},z=()=>{t.isEnd&&m<0&&!t.params.loop||t.destroyed||!t.autoplay.running||(h=new Date().getTime(),y?(y=!1,C(m)):C(),t.autoplay.paused=!1,r("autoplayResume"))},P=()=>{if(t.destroyed||!t.autoplay.running)return;const F=Yt();F.visibilityState==="hidden"&&(y=!0,b(!0)),F.visibilityState==="visible"&&z()},S=F=>{F.pointerType==="mouse"&&(y=!0,N=!0,!(t.animating||t.autoplay.paused)&&b(!0))},k=F=>{F.pointerType==="mouse"&&(N=!1,t.autoplay.paused&&z())},G=()=>{t.params.autoplay.pauseOnMouseEnter&&(t.el.addEventListener("pointerenter",S),t.el.addEventListener("pointerleave",k))},B=()=>{t.el&&typeof t.el!="string"&&(t.el.removeEventListener("pointerenter",S),t.el.removeEventListener("pointerleave",k))},E=()=>{Yt().addEventListener("visibilitychange",P)},M=()=>{Yt().removeEventListener("visibilitychange",P)};a("init",()=>{t.params.autoplay.enabled&&(G(),E(),f())}),a("destroy",()=>{B(),M(),t.autoplay.running&&w()}),a("_freeModeStaticRelease",()=>{(p||y)&&z()}),a("_freeModeNoMomentumRelease",()=>{t.params.autoplay.disableOnInteraction?w():b(!0,!0)}),a("beforeTransitionStart",(F,_,L)=>{t.destroyed||!t.autoplay.running||(L||!t.params.autoplay.disableOnInteraction?b(!0,!0):w())}),a("sliderFirstMove",()=>{if(!(t.destroyed||!t.autoplay.running)){if(t.params.autoplay.disableOnInteraction){w();return}g=!0,p=!1,y=!1,x=setTimeout(()=>{y=!0,p=!0,b(!0)},200)}}),a("touchEnd",()=>{if(!(t.destroyed||!t.autoplay.running||!g)){if(clearTimeout(x),clearTimeout(i),t.params.autoplay.disableOnInteraction){p=!1,g=!1;return}p&&t.params.cssMode&&z(),p=!1,g=!1}}),a("slideChange",()=>{t.destroyed||!t.autoplay.running||(A=!0)}),Object.assign(t.autoplay,{start:f,stop:w,pause:b,resume:z})}const cd=()=>{const t=[{icon:e.jsx(Ot,{className:"w-12 h-12 text-cyan-400"}),title:"Smart Construction Management",description:"Streamline your project workflows, scheduling, and resource allocation effortlessly.",link:"/features/construction",linkLabel:"Learn More"},{icon:e.jsx(pl,{className:"w-12 h-12 text-emerald-400"}),title:"Data Security First",description:"We follow enterprise-grade security protocols to keep your data safe and compliant.",link:"/features/security",linkLabel:"Read Security Policy"},{icon:e.jsx(Dn,{className:"w-12 h-12 text-yellow-400"}),title:"Work Breakdown Structure (WBS)",description:"Break complex projects into manageable Phases, Cost Code, and Sub Cost Code. Assign responsibilities, track progress visually, and ensure timely delivery with structured hierarchy and real-time insights.",link:"/features/wbs",linkLabel:"Explore WBS"},{icon:e.jsx(ot,{className:"w-12 h-12 text-indigo-400"}),title:"Team Collaboration",description:"Empower your workforce with shared dashboards, role-based access, and live tracking.",link:"/features/collaboration",linkLabel:"View Collaboration Tools"}];return e.jsx("div",{className:"w-full max-w-3xl mx-auto mt-12","data-swiper":"company-features",children:e.jsx(ri,{modules:[ld,od],spaceBetween:40,slidesPerView:1,loop:!0,autoplay:{delay:4e3},pagination:{clickable:!0},className:`rounded-3xl bg-[#1558BC] p-12 text-white h-[440px] md:h-[440px] \r
         border border-[#2a4d6b] shadow-[0_10px_25px_rgba(19,47,69,0.5)] \r
         hover:shadow-[0_15px_40px_rgba(19,47,69,0.6)] \r
         transition-all duration-300`,children:t.map((s,a)=>e.jsx(ni,{children:e.jsxs("div",{className:"flex flex-col justify-center items-center text-center space-y-6 h-full",children:[e.jsx("div",{className:"p-6 rounded-full bg-white/10 shadow-inner",children:s.icon}),e.jsx("h3",{className:"text-2xl md:text-3xl font-semibold text-white tracking-wide",children:s.title}),e.jsx("p",{className:"text-base md:text-lg text-gray-300 max-w-lg",children:s.description}),e.jsxs("a",{href:s.link,className:"inline-flex items-center gap-2 mt-4 text-cyan-400 font-medium hover:text-cyan-300 transition-colors",children:[s.linkLabel,e.jsx(ss,{className:"w-5 h-5"})]})]})},a))})})},dd=()=>{const[t,s]=c.useState(""),[a,r]=c.useState(""),[n,i]=c.useState(!1),[l,u]=c.useState(!1),[o,m]=c.useState([]),[h,d]=c.useState(!1),[g,p]=c.useState(""),{login:x,error:A,clearError:y}=Ye(),{showToast:N}=at(),{theme:v}=Pe();c.useEffect(()=>{(t||a)&&y()},[t,a,y]);const j=async f=>{if(f.preventDefault(),!t||!a){N({message:"Please enter both email and password",variant:"error"});return}u(!0);try{const w=await x({email:t,password:a});if(w.requires_tenant_selection&&w.available_tenants){m(w.available_tenants),d(!0),u(!1);return}N({message:"Login successful!",variant:"success"})}catch{}finally{u(!1)}},D=async f=>{if(f.preventDefault(),!g){N({message:"Please select a tenant",variant:"error"});return}u(!0);try{await x({email:t,password:a,tenant_id:g}),N({message:"Login successful!",variant:"success"})}finally{u(!1)}},C=()=>{d(!1),m([]),p(""),y()};return e.jsxs("div",{className:"h-screen flex flex-col md:flex-row ",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-md w-full bg-white rounded-xl shadow-2xl p-8",children:h?e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsx("div",{className:"flex items-center mb-4",children:e.jsxs("button",{type:"button",onClick:C,className:"flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(Ea,{className:"w-4 h-4 mr-2"}),"Back to Login"]})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Select Organization"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Choose your workspace to continue"})]}),e.jsx("div",{className:"space-y-3",children:o.map(f=>e.jsxs("label",{className:`flex items-center p-4 border rounded-lg cursor-pointer ${g===f.tenant_id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"tenant",value:f.tenant_id,checked:g===f.tenant_id,onChange:w=>p(w.target.value),className:"sr-only"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:f.tenant_name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.tenant_id})]})]},f.tenant_id))}),e.jsx(xe,{type:"submit",disabled:l||!g,variant:"primary",className:"w-full py-2",children:l?"Continuing":"Continue"})]}):e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Sign in to access your account"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx(ie,{id:"email",type:"email",value:t,onChange:f=>s(f.target.value),placeholder:"you@example.com",required:!0,className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{id:"password",type:n?"text":"password",value:a,onChange:f=>r(f.target.value),placeholder:"",required:!0,className:"w-full pr-10"}),e.jsx("button",{type:"button",onClick:()=>i(!n),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:n?e.jsx(Vt,{className:"w-5 h-5"}):e.jsx(jt,{className:"w-5 h-5"})})]})]}),A&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 text-sm text-red-700",children:"Email or password incorrect. Please try again."}),e.jsx(xe,{type:"submit",disabled:l,variant:"primary",className:"w-full py-2",children:l?"Signing in":"Sign In"})]})})}),e.jsxs("div",{className:"hidden md:flex md:w-1/2 flex-col justify-center items-center text-white p-10 space-y-6",style:{background:"#1558BC"},children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-20 w-20 rounded-full bg-white/10 flex items-center justify-center mb-3 shadow-lg overflow-hidden",children:e.jsx("img",{src:zn,alt:"Space Rivers Logo",className:"w-full h-full object-cover scale-110"})}),e.jsx("h1",{className:"text-3xl font-bold tracking-wide mb-3 text-white",children:"Space Rivers"}),e.jsx("p",{children:"Simplify your construction & workforce management. Login to continue ..."})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center w-full max-w-3xl",children:e.jsx(cd,{})})]})]})},Xe=({children:t,requiredPermissions:s=[],requireAllPermissions:a=!1,fallbackPath:r="/login"})=>{const{isAuthenticated:n,loading:i,hasPermission:l,hasAnyPermission:u,hasAllPermissions:o}=Ye(),m=Aa();if(i)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-sm -gray-600 mt-1",children:"Loading..."})]})});if(!n)return e.jsx(xn,{to:r,state:{from:m},replace:!0});if(s.length>0){let h=!1;if(a?h=o(s):h=u(s),!h)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"text-center max-w-md mx-auto p-1",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-1",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("svg",{className:"h-12 w-12 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-red-600 mb-4",children:"You don't have the required permissions to access this page."}),s.length>0&&e.jsxs("div",{className:"text-sm text-red-500 mb-4",children:[e.jsx("p",{className:"font-medium",children:"Required permissions:"}),e.jsx("ul",{className:"list-disc list-inside mt-1",children:s.map((d,g)=>e.jsx("li",{children:d},g))})]}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md transition duration-200",children:"Go Back"})]})})})}return e.jsx(e.Fragment,{children:t})},ud=()=>{const[t,s]=c.useState(null),[a,r]=c.useState([]),[n,i]=c.useState(!0);c.useEffect(()=>{l()},[]);const l=async()=>{try{i(!0);const[m,h]=await Promise.all([le.get("/construction/analytics/dashboard"),le.get("/construction/projects?limit=5")]);s(m.data),r(h.data)}catch{}finally{i(!1)}},u=m=>{switch(m){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"planning":return"bg-yellow-100 text-yellow-800";case"on_hold":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},o=m=>{switch(m){case"completed":return e.jsx(Ze,{className:"w-4 h-4"});case"in_progress":return e.jsx(Oe,{className:"w-4 h-4"});case"planning":return e.jsx(Je,{className:"w-4 h-4"});case"on_hold":return e.jsx(it,{className:"w-4 h-4"});default:return e.jsx(Oe,{className:"w-4 h-4"})}};return n?e.jsx(ct,{maxWidth:"full",padding:"lg",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):e.jsx(ct,{maxWidth:"full",padding:"lg",children:e.jsxs(ta,{spacing:"lg",children:[e.jsx(Be,{title:"Construction Dashboard",subtitle:"Overview of construction projects, tasks, and workforce",icon:Ot,headerActions:e.jsx(xe,{variant:"primary",icon:e.jsx(_e,{className:"w-4 h-4"}),children:"New Project"}),children:t&&e.jsxs(Js,{cols:4,gap:"md",children:[e.jsxs("div",{className:"bg-white p-1 rounded-lg shadow-sm border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-sm -gray-600 mt-1",children:"Total Projects"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:t.overview.projects.total})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(Ot,{className:"w-6 h-6 text-blue-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center text-sm text-sm -gray-600 mt-1",children:[e.jsxs("span",{className:"text-green-600 font-medium",children:[t.overview.projects.active," Active"]}),e.jsx("span",{className:"mx-2",children:""}),e.jsxs("span",{className:"text-blue-600 font-medium",children:[t.overview.projects.completed," Completed"]})]})})]}),e.jsxs("div",{className:"bg-white p-1 rounded-lg shadow-sm border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-sm -gray-600 mt-1",children:"Total Tasks"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:t.overview.tasks.total})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(Ze,{className:"w-6 h-6 text-green-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center text-sm text-sm -gray-600 mt-1",children:[e.jsxs("span",{className:"text-green-600 font-medium",children:[t.overview.tasks.completed," Completed"]}),e.jsx("span",{className:"mx-2",children:""}),e.jsxs("span",{className:"text-blue-600 font-medium",children:[t.overview.tasks.inProgress," In Progress"]})]})})]}),e.jsxs("div",{className:"bg-white p-1 rounded-lg shadow-sm border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-sm -gray-600 mt-1",children:"Workforce"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:t.overview.workforce.total})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:e.jsx(ot,{className:"w-6 h-6 text-purple-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"flex items-center text-sm text-sm -gray-600 mt-1",children:e.jsxs("span",{className:"text-green-600 font-medium",children:[t.overview.workforce.active," Active"]})})})]}),e.jsxs("div",{className:"bg-white p-1 rounded-lg shadow-sm border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-sm -gray-600 mt-1",children:"Total Budget"}),e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["$",(t.metrics.totalBudget/1e6).toFixed(1),"M"]})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:e.jsx(Ma,{className:"w-6 h-6 text-yellow-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"flex items-center text-sm text-sm -gray-600 mt-1",children:e.jsxs("span",{className:"text-green-600 font-medium",children:[t.metrics.projectCompletionRate,"% Completion Rate"]})})})]})]})}),t&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-1",children:[e.jsx(Be,{title:"Project Progress",variant:"elevated",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"Overall Progress"}),e.jsxs("span",{children:[t.metrics.projectCompletionRate,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${t.metrics.projectCompletionRate}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"Task Completion"}),e.jsxs("span",{children:[t.metrics.taskCompletionRate,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${t.metrics.taskCompletionRate}%`}})})]})]})}),e.jsx(Be,{title:"Key Metrics",variant:"elevated",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm -gray-600 mt-1",children:"Average Project Duration"}),e.jsxs("span",{className:"font-semibold",children:[t.metrics.averageProjectDuration," days"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm -gray-600 mt-1",children:"Active Projects"}),e.jsx("span",{className:"font-semibold text-blue-600",children:t.overview.projects.active})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm -gray-600 mt-1",children:"Total Clients"}),e.jsx("span",{className:"font-semibold text-purple-600",children:t.overview.clients})]})]})})]}),e.jsx(Be,{title:"Recent Projects",variant:"elevated",children:a.length===0?e.jsx("div",{className:"text-center py-2 text-gray-500",children:"No projects found"}):e.jsx("div",{className:"space-y-4",children:a.map(m=>e.jsxs("div",{className:"flex items-center justify-between p-1 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ot,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-sm text-gray-900",children:m.name}),e.jsx("p",{className:"text-sm text-sm -gray-600 mt-1",children:m.projectCode}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Nt,{className:"w-3 h-3 mr-1"}),m.location]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Je,{className:"w-3 h-3 mr-1"}),format(new Date(m.startDate),"MMM dd, yyyy")]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",(m.budget/1e3).toFixed(0),"K"]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u(m.status)}`,children:[o(m.status),e.jsx("span",{className:"ml-1 capitalize",children:m.status.replace("_"," ")})]})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-sm -gray-600 mt-1",children:"Progress"}),e.jsxs("p",{className:"text-base font-semibold text-blue-600",children:[m.progress||0,"%"]})]})]})]},m._id))})})]})})},ii=6048e5,md=864e5,da=43200,sn=1440,an=Symbol.for("constructDateFrom");function us(t,s){return typeof t=="function"?t(s):t&&typeof t=="object"&&an in t?t[an](s):t instanceof Date?new t.constructor(s):new Date(s)}function ht(t,s){return us(s||t,t)}let xd={};function sa(){return xd}function Xs(t,s){var u,o,m,h;const a=sa(),r=(s==null?void 0:s.weekStartsOn)??((o=(u=s==null?void 0:s.locale)==null?void 0:u.options)==null?void 0:o.weekStartsOn)??a.weekStartsOn??((h=(m=a.locale)==null?void 0:m.options)==null?void 0:h.weekStartsOn)??0,n=ht(t,s==null?void 0:s.in),i=n.getDay(),l=(i<r?7:0)+i-r;return n.setDate(n.getDate()-l),n.setHours(0,0,0,0),n}function Da(t,s){return Xs(t,{...s,weekStartsOn:1})}function li(t,s){const a=ht(t,s==null?void 0:s.in),r=a.getFullYear(),n=us(a,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=Da(n),l=us(a,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const u=Da(l);return a.getTime()>=i.getTime()?r+1:a.getTime()>=u.getTime()?r:r-1}function Ia(t){const s=ht(t),a=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return a.setUTCFullYear(s.getFullYear()),+t-+a}function za(t,...s){const a=us.bind(null,t||s.find(r=>typeof r=="object"));return s.map(a)}function rn(t,s){const a=ht(t,s==null?void 0:s.in);return a.setHours(0,0,0,0),a}function hd(t,s,a){const[r,n]=za(a==null?void 0:a.in,t,s),i=rn(r),l=rn(n),u=+i-Ia(i),o=+l-Ia(l);return Math.round((u-o)/md)}function pd(t,s){const a=li(t,s),r=us(t,0);return r.setFullYear(a,0,4),r.setHours(0,0,0,0),Da(r)}function ya(t,s){const a=+ht(t)-+ht(s);return a<0?-1:a>0?1:a}function gd(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function fd(t){return!(!gd(t)&&typeof t!="number"||isNaN(+ht(t)))}function yd(t,s,a){const[r,n]=za(a==null?void 0:a.in,t,s),i=r.getFullYear()-n.getFullYear(),l=r.getMonth()-n.getMonth();return i*12+l}function bd(t){return s=>{const r=(t?Math[t]:Math.trunc)(s);return r===0?0:r}}function vd(t,s){return+ht(t)-+ht(s)}function jd(t,s){const a=ht(t,s==null?void 0:s.in);return a.setHours(23,59,59,999),a}function Nd(t,s){const a=ht(t,s==null?void 0:s.in),r=a.getMonth();return a.setFullYear(a.getFullYear(),r+1,0),a.setHours(23,59,59,999),a}function wd(t,s){const a=ht(t,s==null?void 0:s.in);return+jd(a,s)==+Nd(a,s)}function Sd(t,s,a){const[r,n,i]=za(a==null?void 0:a.in,t,t,s),l=ya(n,i),u=Math.abs(yd(n,i));if(u<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-l*u);let o=ya(n,i)===-l;wd(r)&&u===1&&ya(r,i)===1&&(o=!1);const m=l*(u-+o);return m===0?0:m}function Cd(t,s,a){const r=vd(t,s)/1e3;return bd(a==null?void 0:a.roundingMethod)(r)}function kd(t,s){const a=ht(t,s==null?void 0:s.in);return a.setFullYear(a.getFullYear(),0,1),a.setHours(0,0,0,0),a}const Td={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Dd=(t,s,a)=>{let r;const n=Td[t];return typeof n=="string"?r=n:s===1?r=n.one:r=n.other.replace("{{count}}",s.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+r:r+" ago":r};function Xa(t){return(s={})=>{const a=s.width?String(s.width):t.defaultWidth;return t.formats[a]||t.formats[t.defaultWidth]}}const Id={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ad={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Pd={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ed={date:Xa({formats:Id,defaultWidth:"full"}),time:Xa({formats:Ad,defaultWidth:"full"}),dateTime:Xa({formats:Pd,defaultWidth:"full"})},Md={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Fd=(t,s,a,r)=>Md[t];function Hs(t){return(s,a)=>{const r=a!=null&&a.context?String(a.context):"standalone";let n;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,u=a!=null&&a.width?String(a.width):l;n=t.formattingValues[u]||t.formattingValues[l]}else{const l=t.defaultWidth,u=a!=null&&a.width?String(a.width):t.defaultWidth;n=t.values[u]||t.values[l]}const i=t.argumentCallback?t.argumentCallback(s):s;return n[i]}}const Rd={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ld={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Od={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zd={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$d={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_d={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Bd=(t,s)=>{const a=Number(t),r=a%100;if(r>20||r<10)switch(r%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Ud={ordinalNumber:Bd,era:Hs({values:Rd,defaultWidth:"wide"}),quarter:Hs({values:Ld,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Hs({values:Od,defaultWidth:"wide"}),day:Hs({values:zd,defaultWidth:"wide"}),dayPeriod:Hs({values:$d,defaultWidth:"wide",formattingValues:_d,defaultFormattingWidth:"wide"})};function Ws(t){return(s,a={})=>{const r=a.width,n=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=s.match(n);if(!i)return null;const l=i[0],u=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],o=Array.isArray(u)?Hd(u,d=>d.test(l)):qd(u,d=>d.test(l));let m;m=t.valueCallback?t.valueCallback(o):o,m=a.valueCallback?a.valueCallback(m):m;const h=s.slice(l.length);return{value:m,rest:h}}}function qd(t,s){for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&s(t[a]))return a}function Hd(t,s){for(let a=0;a<t.length;a++)if(s(t[a]))return a}function Wd(t){return(s,a={})=>{const r=s.match(t.matchPattern);if(!r)return null;const n=r[0],i=s.match(t.parsePattern);if(!i)return null;let l=t.valueCallback?t.valueCallback(i[0]):i[0];l=a.valueCallback?a.valueCallback(l):l;const u=s.slice(n.length);return{value:l,rest:u}}}const Vd=/^(\d+)(th|st|nd|rd)?/i,Gd=/\d+/i,Yd={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Kd={any:[/^b/i,/^(a|c)/i]},Jd={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Xd={any:[/1/i,/2/i,/3/i,/4/i]},Zd={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Qd={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},eu={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},tu={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},su={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},au={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ru={ordinalNumber:Wd({matchPattern:Vd,parsePattern:Gd,valueCallback:t=>parseInt(t,10)}),era:Ws({matchPatterns:Yd,defaultMatchWidth:"wide",parsePatterns:Kd,defaultParseWidth:"any"}),quarter:Ws({matchPatterns:Jd,defaultMatchWidth:"wide",parsePatterns:Xd,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ws({matchPatterns:Zd,defaultMatchWidth:"wide",parsePatterns:Qd,defaultParseWidth:"any"}),day:Ws({matchPatterns:eu,defaultMatchWidth:"wide",parsePatterns:tu,defaultParseWidth:"any"}),dayPeriod:Ws({matchPatterns:su,defaultMatchWidth:"any",parsePatterns:au,defaultParseWidth:"any"})},oi={code:"en-US",formatDistance:Dd,formatLong:Ed,formatRelative:Fd,localize:Ud,match:ru,options:{weekStartsOn:0,firstWeekContainsDate:1}};function nu(t,s){const a=ht(t,s==null?void 0:s.in);return hd(a,kd(a))+1}function iu(t,s){const a=ht(t,s==null?void 0:s.in),r=+Da(a)-+pd(a);return Math.round(r/ii)+1}function ci(t,s){var h,d,g,p;const a=ht(t,s==null?void 0:s.in),r=a.getFullYear(),n=sa(),i=(s==null?void 0:s.firstWeekContainsDate)??((d=(h=s==null?void 0:s.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(g=n.locale)==null?void 0:g.options)==null?void 0:p.firstWeekContainsDate)??1,l=us((s==null?void 0:s.in)||t,0);l.setFullYear(r+1,0,i),l.setHours(0,0,0,0);const u=Xs(l,s),o=us((s==null?void 0:s.in)||t,0);o.setFullYear(r,0,i),o.setHours(0,0,0,0);const m=Xs(o,s);return+a>=+u?r+1:+a>=+m?r:r-1}function lu(t,s){var u,o,m,h;const a=sa(),r=(s==null?void 0:s.firstWeekContainsDate)??((o=(u=s==null?void 0:s.locale)==null?void 0:u.options)==null?void 0:o.firstWeekContainsDate)??a.firstWeekContainsDate??((h=(m=a.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??1,n=ci(t,s),i=us((s==null?void 0:s.in)||t,0);return i.setFullYear(n,0,r),i.setHours(0,0,0,0),Xs(i,s)}function ou(t,s){const a=ht(t,s==null?void 0:s.in),r=+Xs(a,s)-+lu(a,s);return Math.round(r/ii)+1}function Ge(t,s){const a=t<0?"-":"",r=Math.abs(t).toString().padStart(s,"0");return a+r}const is={y(t,s){const a=t.getFullYear(),r=a>0?a:1-a;return Ge(s==="yy"?r%100:r,s.length)},M(t,s){const a=t.getMonth();return s==="M"?String(a+1):Ge(a+1,2)},d(t,s){return Ge(t.getDate(),s.length)},a(t,s){const a=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(t,s){return Ge(t.getHours()%12||12,s.length)},H(t,s){return Ge(t.getHours(),s.length)},m(t,s){return Ge(t.getMinutes(),s.length)},s(t,s){return Ge(t.getSeconds(),s.length)},S(t,s){const a=s.length,r=t.getMilliseconds(),n=Math.trunc(r*Math.pow(10,a-3));return Ge(n,s.length)}},Fs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},nn={G:function(t,s,a){const r=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})}},y:function(t,s,a){if(s==="yo"){const r=t.getFullYear(),n=r>0?r:1-r;return a.ordinalNumber(n,{unit:"year"})}return is.y(t,s)},Y:function(t,s,a,r){const n=ci(t,r),i=n>0?n:1-n;if(s==="YY"){const l=i%100;return Ge(l,2)}return s==="Yo"?a.ordinalNumber(i,{unit:"year"}):Ge(i,s.length)},R:function(t,s){const a=li(t);return Ge(a,s.length)},u:function(t,s){const a=t.getFullYear();return Ge(a,s.length)},Q:function(t,s,a){const r=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(r);case"QQ":return Ge(r,2);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,s,a){const r=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(r);case"qq":return Ge(r,2);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,s,a){const r=t.getMonth();switch(s){case"M":case"MM":return is.M(t,s);case"Mo":return a.ordinalNumber(r+1,{unit:"month"});case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})}},L:function(t,s,a){const r=t.getMonth();switch(s){case"L":return String(r+1);case"LL":return Ge(r+1,2);case"Lo":return a.ordinalNumber(r+1,{unit:"month"});case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})}},w:function(t,s,a,r){const n=ou(t,r);return s==="wo"?a.ordinalNumber(n,{unit:"week"}):Ge(n,s.length)},I:function(t,s,a){const r=iu(t);return s==="Io"?a.ordinalNumber(r,{unit:"week"}):Ge(r,s.length)},d:function(t,s,a){return s==="do"?a.ordinalNumber(t.getDate(),{unit:"date"}):is.d(t,s)},D:function(t,s,a){const r=nu(t);return s==="Do"?a.ordinalNumber(r,{unit:"dayOfYear"}):Ge(r,s.length)},E:function(t,s,a){const r=t.getDay();switch(s){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})}},e:function(t,s,a,r){const n=t.getDay(),i=(n-r.weekStartsOn+8)%7||7;switch(s){case"e":return String(i);case"ee":return Ge(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(n,{width:"short",context:"formatting"});case"eeee":default:return a.day(n,{width:"wide",context:"formatting"})}},c:function(t,s,a,r){const n=t.getDay(),i=(n-r.weekStartsOn+8)%7||7;switch(s){case"c":return String(i);case"cc":return Ge(i,s.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(n,{width:"narrow",context:"standalone"});case"cccccc":return a.day(n,{width:"short",context:"standalone"});case"cccc":default:return a.day(n,{width:"wide",context:"standalone"})}},i:function(t,s,a){const r=t.getDay(),n=r===0?7:r;switch(s){case"i":return String(n);case"ii":return Ge(n,s.length);case"io":return a.ordinalNumber(n,{unit:"day"});case"iii":return a.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(r,{width:"short",context:"formatting"});case"iiii":default:return a.day(r,{width:"wide",context:"formatting"})}},a:function(t,s,a){const n=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,s,a){const r=t.getHours();let n;switch(r===12?n=Fs.noon:r===0?n=Fs.midnight:n=r/12>=1?"pm":"am",s){case"b":case"bb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,s,a){const r=t.getHours();let n;switch(r>=17?n=Fs.evening:r>=12?n=Fs.afternoon:r>=4?n=Fs.morning:n=Fs.night,s){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,s,a){if(s==="ho"){let r=t.getHours()%12;return r===0&&(r=12),a.ordinalNumber(r,{unit:"hour"})}return is.h(t,s)},H:function(t,s,a){return s==="Ho"?a.ordinalNumber(t.getHours(),{unit:"hour"}):is.H(t,s)},K:function(t,s,a){const r=t.getHours()%12;return s==="Ko"?a.ordinalNumber(r,{unit:"hour"}):Ge(r,s.length)},k:function(t,s,a){let r=t.getHours();return r===0&&(r=24),s==="ko"?a.ordinalNumber(r,{unit:"hour"}):Ge(r,s.length)},m:function(t,s,a){return s==="mo"?a.ordinalNumber(t.getMinutes(),{unit:"minute"}):is.m(t,s)},s:function(t,s,a){return s==="so"?a.ordinalNumber(t.getSeconds(),{unit:"second"}):is.s(t,s)},S:function(t,s){return is.S(t,s)},X:function(t,s,a){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(s){case"X":return on(r);case"XXXX":case"XX":return vs(r);case"XXXXX":case"XXX":default:return vs(r,":")}},x:function(t,s,a){const r=t.getTimezoneOffset();switch(s){case"x":return on(r);case"xxxx":case"xx":return vs(r);case"xxxxx":case"xxx":default:return vs(r,":")}},O:function(t,s,a){const r=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+ln(r,":");case"OOOO":default:return"GMT"+vs(r,":")}},z:function(t,s,a){const r=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+ln(r,":");case"zzzz":default:return"GMT"+vs(r,":")}},t:function(t,s,a){const r=Math.trunc(+t/1e3);return Ge(r,s.length)},T:function(t,s,a){return Ge(+t,s.length)}};function ln(t,s=""){const a=t>0?"-":"+",r=Math.abs(t),n=Math.trunc(r/60),i=r%60;return i===0?a+String(n):a+String(n)+s+Ge(i,2)}function on(t,s){return t%60===0?(t>0?"-":"+")+Ge(Math.abs(t)/60,2):vs(t,s)}function vs(t,s=""){const a=t>0?"-":"+",r=Math.abs(t),n=Ge(Math.trunc(r/60),2),i=Ge(r%60,2);return a+n+s+i}const cn=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},di=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},cu=(t,s)=>{const a=t.match(/(P+)(p+)?/)||[],r=a[1],n=a[2];if(!n)return cn(t,s);let i;switch(r){case"P":i=s.dateTime({width:"short"});break;case"PP":i=s.dateTime({width:"medium"});break;case"PPP":i=s.dateTime({width:"long"});break;case"PPPP":default:i=s.dateTime({width:"full"});break}return i.replace("{{date}}",cn(r,s)).replace("{{time}}",di(n,s))},du={p:di,P:cu},uu=/^D+$/,mu=/^Y+$/,xu=["D","DD","YY","YYYY"];function hu(t){return uu.test(t)}function pu(t){return mu.test(t)}function gu(t,s,a){const r=fu(t,s,a);if(console.warn(r),xu.includes(t))throw new RangeError(r)}function fu(t,s,a){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${r} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const yu=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,bu=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vu=/^'([^]*?)'?$/,ju=/''/g,Nu=/[a-zA-Z]/;function dn(t,s,a){var h,d,g,p;const r=sa(),n=r.locale??oi,i=r.firstWeekContainsDate??((d=(h=r.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??1,l=r.weekStartsOn??((p=(g=r.locale)==null?void 0:g.options)==null?void 0:p.weekStartsOn)??0,u=ht(t,a==null?void 0:a.in);if(!fd(u))throw new RangeError("Invalid time value");let o=s.match(bu).map(x=>{const A=x[0];if(A==="p"||A==="P"){const y=du[A];return y(x,n.formatLong)}return x}).join("").match(yu).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const A=x[0];if(A==="'")return{isToken:!1,value:wu(x)};if(nn[A])return{isToken:!0,value:x};if(A.match(Nu))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return{isToken:!1,value:x}});n.localize.preprocessor&&(o=n.localize.preprocessor(u,o));const m={firstWeekContainsDate:i,weekStartsOn:l,locale:n};return o.map(x=>{if(!x.isToken)return x.value;const A=x.value;(pu(A)||hu(A))&&gu(A,s,String(t));const y=nn[A[0]];return y(u,A,n.localize,m)}).join("")}function wu(t){const s=t.match(vu);return s?s[1].replace(ju,"'"):t}function Su(t,s,a){const r=sa(),n=(a==null?void 0:a.locale)??r.locale??oi,i=2520,l=ya(t,s);if(isNaN(l))throw new RangeError("Invalid time value");const u=Object.assign({},a,{addSuffix:a==null?void 0:a.addSuffix,comparison:l}),[o,m]=za(a==null?void 0:a.in,...l>0?[s,t]:[t,s]),h=Cd(m,o),d=(Ia(m)-Ia(o))/1e3,g=Math.round((h-d)/60);let p;if(g<2)return a!=null&&a.includeSeconds?h<5?n.formatDistance("lessThanXSeconds",5,u):h<10?n.formatDistance("lessThanXSeconds",10,u):h<20?n.formatDistance("lessThanXSeconds",20,u):h<40?n.formatDistance("halfAMinute",0,u):h<60?n.formatDistance("lessThanXMinutes",1,u):n.formatDistance("xMinutes",1,u):g===0?n.formatDistance("lessThanXMinutes",1,u):n.formatDistance("xMinutes",g,u);if(g<45)return n.formatDistance("xMinutes",g,u);if(g<90)return n.formatDistance("aboutXHours",1,u);if(g<sn){const x=Math.round(g/60);return n.formatDistance("aboutXHours",x,u)}else{if(g<i)return n.formatDistance("xDays",1,u);if(g<da){const x=Math.round(g/sn);return n.formatDistance("xDays",x,u)}else if(g<da*2)return p=Math.round(g/da),n.formatDistance("aboutXMonths",p,u)}if(p=Sd(m,o),p<12){const x=Math.round(g/da);return n.formatDistance("xMonths",x,u)}else{const x=p%12,A=Math.trunc(p/12);return x<3?n.formatDistance("aboutXYears",A,u):x<9?n.formatDistance("overXYears",A,u):n.formatDistance("almostXYears",A+1,u)}}const Cu=()=>{const[t,s]=c.useState([]),[a,r]=c.useState([]),[n,i]=c.useState([]),[l,u]=c.useState(!0),[o,m]=c.useState(""),[h,d]=c.useState(""),[g,p]=c.useState(!1),[x,A]=c.useState(null),[y,N]=c.useState({projectCode:"",name:"",description:"",client:"",manager:"",location:"",startDate:"",endDate:"",budget:"",status:"planning"}),{theme:v}=Pe();c.useEffect(()=>{j()},[]);const j=async()=>{try{u(!0);const[k,G,B]=await Promise.all([le.get("/construction/projects"),le.get("/construction/clients"),le.get("/construction/employees")]);s(k.data),r(G.data),i(B.data)}catch{}finally{u(!1)}},D=async()=>{try{const k=await le.post("/construction/projects",{...y,budget:parseFloat(y.budget)||0});s([...t,k.data]),p(!1),w(),j()}catch{}},C=async()=>{if(x)try{const k=await le.put(`/construction/projects/${x.projectCode}`,{...y,budget:parseFloat(y.budget)||0});s(t.map(G=>G._id===x._id?k.data:G)),A(null),w()}catch{}},f=async k=>{if(window.confirm("Are you sure you want to delete this project?"))try{await le.delete(`/construction/projects/${k}`),s(t.filter(G=>G.projectCode!==k))}catch{}},w=()=>{N({projectCode:"",name:"",description:"",client:"",manager:"",location:"",startDate:"",endDate:"",budget:"",status:"planning"})},b=k=>{A(k),N({projectCode:k.projectCode,name:k.name,description:k.description,client:k.client,manager:k.manager,location:k.location,startDate:k.startDate.split("T")[0],endDate:k.endDate?k.endDate.split("T")[0]:"",budget:k.budget.toString(),status:k.status})},z=k=>{switch(k){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"planning":return"bg-yellow-100 text-yellow-800";case"on_hold":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},P=k=>{switch(k){case"completed":return e.jsx(Ze,{className:"w-4 h-4"});case"in_progress":return e.jsx(Oe,{className:"w-4 h-4"});case"planning":return e.jsx(Je,{className:"w-4 h-4"});case"on_hold":return e.jsx(it,{className:"w-4 h-4"});default:return e.jsx(Oe,{className:"w-4 h-4"})}},S=t.filter(k=>{const G=k.projectCode.toLowerCase().includes(o.toLowerCase())||k.name.toLowerCase().includes(o.toLowerCase())||k.location.toLowerCase().includes(o.toLowerCase()),B=h?k.status===h:!0;return G&&B});return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-gray-900",children:"Project Management"}),e.jsx("p",{className:"text-sm -gray-600 mt-1",children:"Manage construction projects, timelines, and resources"})]}),e.jsxs("button",{onClick:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),"New Project"]})]}),e.jsx("div",{className:"bg-white p-1 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-1",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(xt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search projects...",value:o,onChange:k=>m(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{value:h,onChange:k=>d(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"planning",children:"Planning"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"on_hold",children:"On Hold"}),e.jsx("option",{value:"completed",children:"Completed"})]})})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-1",children:S.map(k=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ot,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>b(k),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(k.projectCode),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(lt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:k.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:k.projectCode}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:k.description})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-sm -gray-600 mt-1",children:[e.jsx(Nt,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:k.location})]}),e.jsxs("div",{className:"flex items-center text-sm text-sm -gray-600 mt-1",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:[dn(new Date(k.startDate),"MMM dd, yyyy"),k.endDate&&` - ${dn(new Date(k.endDate),"MMM dd, yyyy")}`]})]}),e.jsxs("div",{className:"flex items-center text-sm text-sm -gray-600 mt-1",children:[e.jsx(Ma,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:["$",(k.budget/1e3).toFixed(0),"K"]})]}),e.jsxs("div",{className:"flex items-center text-sm text-sm -gray-600 mt-1",children:[e.jsx(ot,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:k.managerName||"Unassigned"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${z(k.status)} flex items-center gap-1`,children:[P(k.status),k.status.replace("_"," ")]}),e.jsx("span",{className:"text-sm text-gray-500",children:k.isActive?"Active":"Inactive"})]})]})},k._id))}),S.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ot,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-2",children:"No projects found"}),e.jsx("p",{className:"text-gray-500",children:o||h?"Try adjusting your search or filters":"Get started by creating your first project"})]}),(g||x)&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-1 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-sm font-bold mb-1",style:{color:v==null?void 0:v.theme.colors.primary[900]},children:x?"Edit Project":"Create New Project"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Code"}),e.jsx("input",{type:"text",value:y.projectCode,onChange:k=>N({...y,projectCode:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"PRJ-001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),e.jsx("input",{type:"text",value:y.name,onChange:k=>N({...y,name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Project Name"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:y.description,onChange:k=>N({...y,description:k.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Project description..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client"}),e.jsxs("select",{value:y.client,onChange:k=>N({...y,client:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Client"}),a.map(k=>e.jsx("option",{value:k._id,children:k.name},k._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Manager"}),e.jsxs("select",{value:y.manager,onChange:k=>N({...y,manager:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Manager"}),n.filter(k=>k.role==="project_manager").map(k=>e.jsxs("option",{value:k._id,children:[k.firstName," ",k.lastName]},k._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsx("input",{type:"text",value:y.location,onChange:k=>N({...y,location:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Project location"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:y.startDate,onChange:k=>N({...y,startDate:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:y.endDate,onChange:k=>N({...y,endDate:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget"}),e.jsx("input",{type:"number",value:y.budget,onChange:k=>N({...y,budget:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:y.status,onChange:k=>N({...y,status:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"planning",children:"Planning"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"on_hold",children:"On Hold"}),e.jsx("option",{value:"completed",children:"Completed"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{p(!1),A(null),w()},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:x?C:D,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:x?"Update Project":"Create Project"})]})]})})]})};function ku(){var i;const{theme:t}=Pe(),[s,a]=c.useState("overview"),r=[{id:"overview",label:"Overview",icon:ul,component:null},{id:"budgets",label:"Budgets",icon:vl,component:null},{id:"transactions",label:"Transactions",icon:et,component:null},{id:"estimates",label:"Estimates",icon:_t,component:null},{id:"analysis",label:"Analysis",icon:Nn,component:null},{id:"commitments",label:"Commitments",icon:et,component:null}],n=(i=r.find(l=>l.id===s))==null?void 0:i.component;return e.jsx(ct,{maxWidth:"full",padding:"none",children:e.jsxs("div",{children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:r.map(l=>{const u=l.icon,o=s===l.id;return e.jsxs("button",{onClick:()=>a(l.id),className:"flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors",style:{borderColor:o?(t==null?void 0:t.theme.colors.primary[500])||"#3b82f6":"transparent",color:o?(t==null?void 0:t.theme.colors.primary[600])||"#2563eb":"#6b7280"},children:[e.jsx(u,{size:18}),l.label]},l.id)})})}),e.jsx("div",{className:"p-1",children:n?e.jsx(n,{}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.charAt(0).toUpperCase()+s.slice(1)," content coming soon..."]})})]})})}const Tu=({activities:t})=>{const{theme:s}=Pe();return e.jsx("div",{className:"space-y-4",children:t.length===0?e.jsx("p",{className:"text-center py-2",style:{color:(s==null?void 0:s.theme.colors.secondary[500])||"#9e9e9e",fontSize:s==null?void 0:s.typography.fontSize.sm},children:"No recent activity"}):t.map(a=>{var r;return e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg border",style:{backgroundColor:(s==null?void 0:s.theme.colors.secondary[50])||"#fafafa",borderRadius:(s==null?void 0:s.components.card.borderRadius)||"0.5rem"},children:[e.jsx("div",{className:"p-2 rounded-full",style:{backgroundColor:(s==null?void 0:s.theme.colors.primary[100])||"#dbeafe"},children:e.jsx(St,{className:"h-4 w-4",style:{color:(s==null?void 0:s.theme.colors.primary[600])||"#2563eb"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:(s==null?void 0:s.theme.colors.secondary[900])||"#212121",fontFamily:s==null?void 0:s.typography.fontFamily.primary,fontSize:s==null?void 0:s.typography.fontSize.sm},children:a.productName}),e.jsxs("p",{className:"text-sm mt-1",style:{color:(s==null?void 0:s.theme.colors.secondary[600])||"#757575",fontSize:s==null?void 0:s.typography.fontSize.sm},children:["Status updated to: ",a.status]}),e.jsxs("div",{className:"flex items-center mt-1 text-xs",style:{color:(s==null?void 0:s.theme.colors.secondary[500])||"#9e9e9e",fontSize:s==null?void 0:s.typography.fontSize.xs},children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"mr-3",children:((r=a.location)==null?void 0:r.name)||"Unknown location"}),e.jsx(Oe,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:a.timestamp?Su(new Date(a.timestamp),new Date,{addSuffix:!0}):"Unknown time"})]})]})]},a._id)})})},Du=({title:t,value:s,icon:a,color:r,change:n})=>{const{theme:i}=Pe(),u={blue:"primary",green:"success",yellow:"warning",red:"danger"}[r],o=n.startsWith("+");return e.jsx("div",{className:"bg-white p-3 hover:shadow-lg transition-all duration-200 border",style:{borderRadius:(i==null?void 0:i.components.card.borderRadius)||"0.75rem",boxShadow:(i==null?void 0:i.components.card.shadow)==="md"?"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)":"0 1px 3px 0 rgb(0 0 0 / 0.1)",borderColor:i==null?void 0:i.theme.colors.primary[200]},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:(i==null?void 0:i.theme.colors.secondary[600])||"#757575",fontFamily:i==null?void 0:i.typography.fontFamily.primary,fontSize:i==null?void 0:i.typography.fontSize.sm},children:t}),e.jsx("p",{className:"text-sm font-bold mt-1",style:{color:(i==null?void 0:i.theme.colors.secondary[900])||"#212121",fontFamily:i==null?void 0:i.typography.fontFamily.primary,fontSize:i==null?void 0:i.typography.fontSize["2xl"],fontWeight:i==null?void 0:i.typography.fontWeight.bold},children:s.toLocaleString()}),e.jsxs("p",{className:"text-sm mt-1",style:{color:o?(i==null?void 0:i.theme.colors.success[600])||"#059669":(i==null?void 0:i.theme.colors.danger[600])||"#dc2626",fontSize:i==null?void 0:i.typography.fontSize.sm},children:[n," from last month"]})]}),e.jsx("div",{className:"p-3 rounded-full",style:{backgroundColor:(i==null?void 0:i.theme.colors[u][100])||"#e3f2fd"},children:e.jsx(a,{className:"h-6 w-6",style:{color:(i==null?void 0:i.theme.colors[u][600])||"#1e88e5"}})})]})})},Iu=()=>{const[t,s]=c.useState([]),[a,r]=c.useState(!0),[n,i]=c.useState("pie"),{theme:l}=Pe();c.useEffect(()=>{(async()=>{try{const m=await fetch("/api/dashboard/status-distribution");if(m.ok){const h=await m.json();s(h)}}catch{}finally{r(!1)}})()},[]);const u=[(l==null?void 0:l.theme.colors.primary[500])||"#3B82F6",(l==null?void 0:l.theme.colors.success[500])||"#10B981",(l==null?void 0:l.theme.colors.warning[500])||"#F59E0B",(l==null?void 0:l.theme.colors.danger[500])||"#EF4444",(l==null?void 0:l.theme.colors.secondary[500])||"#6b7280",(l==null?void 0:l.theme.colors.primary[400])||"#60a5fa"];return a?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]}):e.jsxs("div",{className:"space-y-4 p-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-base font-semibold",style:{fontFamily:l==null?void 0:l.typography.fontFamily.primary,color:(l==null?void 0:l.theme.colors.secondary[900])||"#212121"},children:"Project Status"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>i("pie"),className:"px-3 py-1 rounded text-sm font-medium transition-colors",style:{backgroundColor:n==="pie"?(l==null?void 0:l.theme.colors.primary[100])||"#dbeafe":"transparent",color:n==="pie"?(l==null?void 0:l.theme.colors.primary[700])||"#1d4ed8":(l==null?void 0:l.theme.colors.secondary[500])||"#9e9e9e",borderRadius:(l==null?void 0:l.components.button.borderRadius)||"0.5rem"},children:"Pie"}),e.jsx("button",{onClick:()=>i("bar"),className:"px-3 py-1 rounded text-sm font-medium transition-colors",style:{backgroundColor:n==="bar"?(l==null?void 0:l.theme.colors.primary[100])||"#dbeafe":"transparent",color:n==="bar"?(l==null?void 0:l.theme.colors.primary[700])||"#1d4ed8":(l==null?void 0:l.theme.colors.secondary[500])||"#9e9e9e",borderRadius:(l==null?void 0:l.components.button.borderRadius)||"0.5rem"},children:"Bar"})]})]}),e.jsx("div",{style:{width:"100%",height:"300px"},children:e.jsx(ua,{children:n==="pie"?e.jsxs(Mi,{children:[e.jsx(Fi,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:o,percent:m})=>`${o} ${(m*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"count",children:t.map((o,m)=>e.jsx(Ri,{fill:u[m%u.length]},`cell-${m}`))}),e.jsx(Gs,{})]}):e.jsxs(hn,{data:t,children:[e.jsx(ma,{strokeDasharray:"3 3"}),e.jsx(xa,{dataKey:"status"}),e.jsx(ha,{}),e.jsx(Gs,{}),e.jsx(pa,{}),e.jsx(Li,{dataKey:"count",fill:(l==null?void 0:l.theme.colors.primary[500])||"#3B82F6"})]})})})]})},Au=()=>{const[t,s]=c.useState({totalLabels:0,inTransit:0,delivered:0,pending:0}),[a,r]=c.useState([]),[n,i]=c.useState(!0),[l,u]=c.useState(!1),{theme:o}=Pe(),m=async()=>{try{u(!0);const[d,g]=await Promise.all([fetch("/api/dashboard/stats"),fetch("/api/dashboard/recent-activity")]);if(d.ok&&g.ok){const p=await d.json(),x=await g.json();s(p),r(x)}}catch{}finally{i(!1),u(!1)}};c.useEffect(()=>{document.title="Dashboard - Space Rivers",m()},[]);const h=c.useMemo(()=>[{title:"Total Projects",value:t.totalLabels,icon:St,color:"blue",change:"+12%"},{title:"In Progress",value:t.inTransit,icon:Nt,color:"yellow",change:"+3%"},{title:"Completed",value:t.delivered,icon:Oe,color:"green",change:"+8%"},{title:"Pending",value:t.pending,icon:qt,color:"red",change:"-2%"}],[t]);return n?e.jsx(ct,{maxWidth:"full",padding:"lg",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading dashboard..."})]})})}):e.jsx(e.Fragment,{children:e.jsx(ct,{maxWidth:"full",padding:"md",children:e.jsxs(ta,{spacing:"md",children:[e.jsx(Be,{title:"Overview",subtitle:"Key metrics at a glance",variant:"default",children:e.jsx(Js,{cols:4,gap:"md",children:h.map((d,g)=>e.jsx(Du,{...d},g))})}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-5",children:[e.jsx(Be,{title:"Status Overview",variant:"elevated",children:e.jsx(Iu,{})}),e.jsx(Be,{title:"Recent Activity",variant:"elevated",children:e.jsx(Tu,{activities:a})})]})]})})})},Ds=({fields:t,values:s,errors:a,onChange:r,disabled:n=!1,className:i=""})=>{const l=o=>{const m=s[o.fieldName]??o.defaultValue??"",h=a[o.fieldName],d={label:o.fieldLabel,error:h,disabled:n,required:o.isRequired,className:"w-full"};switch(o.fieldType){case"text":case"email":case"url":case"phone":return e.jsx(ie,{...d,type:o.fieldType==="email"?"email":o.fieldType==="url"?"url":o.fieldType==="phone"?"tel":"text",value:m,onChange:g=>r(o.fieldName,g.target.value),placeholder:`Enter ${o.fieldLabel.toLowerCase()}`},o.fieldName);case"number":case"currency":return e.jsx(ie,{...d,type:"number",value:m,onChange:g=>r(o.fieldName,parseFloat(g.target.value)||0),placeholder:`Enter ${o.fieldLabel.toLowerCase()}`,step:o.fieldType==="currency"?"0.01":"1"},o.fieldName);case"date":return e.jsx(ie,{...d,type:"date",value:m,onChange:g=>r(o.fieldName,g.target.value)},o.fieldName);case"checkbox":return e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:!!m,onChange:g=>r(o.fieldName,g.target.checked),disabled:n,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[o.fieldLabel,o.isRequired&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})]}),h&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h})]},o.fieldName);case"dropdown":return e.jsx(Ae,{...d,value:m,onChange:g=>r(o.fieldName,g.target.value),options:[{value:"",label:`Select ${o.fieldLabel}`},...(o.options||[]).map(g=>({value:g,label:g}))]},o.fieldName);case"textarea":return e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o.fieldLabel,o.isRequired&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("textarea",{value:m,onChange:g=>r(o.fieldName,g.target.value),disabled:n,placeholder:`Enter ${o.fieldLabel.toLowerCase()}`,rows:3,className:`
                w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent
                ${h?"border-red-300":"border-gray-300"}
                ${n?"bg-gray-100 cursor-not-allowed":"bg-white"}
              `}),h&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h})]},o.fieldName);default:return e.jsx("div",{className:"w-full",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Unsupported field type: ",o.fieldType]})},o.fieldName)}},u=t.reduce((o,m)=>{const h=m.groupName||"General";return o[h]||(o[h]=[]),o[h].push(m),o},{});return Object.keys(u).forEach(o=>{u[o].sort((m,h)=>m.displayOrder-h.displayOrder)}),e.jsx("div",{className:`space-y-6 ${i}`,children:Object.entries(u).map(([o,m])=>e.jsxs("div",{className:"space-y-4",children:[o!=="General"&&e.jsx("h3",{className:"text-base font-medium text-gray-900 border-b border-gray-200 pb-2",children:o}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:m.map(l)})]},o))})};function Pu(){const[t,s]=c.useState([]),[a,r]=c.useState([]),[n,i]=c.useState(""),[l,u]=c.useState(""),[o,m]=c.useState(""),[h,d]=c.useState("#3B82F6"),[g,p]=c.useState("Tag"),[x,A]=c.useState(1),[y,N]=c.useState(!0),[v,j]=c.useState({}),[D,C]=c.useState({}),[f,w]=c.useState(!0),[b,z]=c.useState(null),[P,S]=c.useState(!1),[k,G]=c.useState(null),{showToast:B}=at(),{hasPermission:E}=Ye(),M=E("categories_create"),F=E("categories_edit"),_=E("categories_delete"),L=["#3B82F6","#10B981","#F59E0B","#8B5CF6","#EF4444","#06B6D4","#84CC16","#F97316","#EC4899","#6B7280","#1F2937","#059669"],R=["Users","Package","Wrench","UserCheck","Building","Shield","CheckCircle","DollarSign","Truck","Tool","Zap","Home"],q=async()=>{w(!0);try{const[I,U]=await Promise.all([le.get("/categories"),le.get("/custom-fields?entity=categories")]);if(I.error){z(I.message||"Failed to load categories");return}if(U.error){z(U.message||"Failed to load custom fields");return}const ce=(I.data||[]).map(T=>({...T,isActive:T.isActive!==!1,custom_fields:T.custom_fields||{},createdAt:T.createdAt||new Date().toISOString(),updatedAt:T.updatedAt||new Date().toISOString()}));s(ce),r(U.data||[])}catch(I){z(I.message||"Failed to load categories")}finally{w(!1)}};c.useEffect(()=>{q()},[]);const V=async()=>{if(!M){z("You don't have permission to create categories.");return}z(null);try{const I={code:n,name:l,description:o,color:h,icon:g,sortOrder:x,isActive:y,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};Object.keys(v).length>0&&(I.custom_fields=v);const U=await le.post("/categories",I);if(U.error)throw new Error(U.message||"Failed to add category");X(),B({message:"Category created",variant:"success"}),await q()}catch(I){z(I.message),B({message:I.message||"Failed to add category",variant:"error"})}},Z=async I=>{if(!_){z("You don't have permission to delete categories.");return}z(null);try{const U=await le.delete(`/categories/${encodeURIComponent(I)}`);if(U.error)throw new Error(U.message||"Failed to delete category");B({message:"Category deleted",variant:"success"}),await q()}catch(U){z(U.message),B({message:U.message||"Failed to delete category",variant:"error"})}},be=async()=>{if(k){if(!F){z("You don't have permission to edit categories.");return}z(null);try{const I={code:k.code,name:l,description:o,color:h,icon:g,sortOrder:x,isActive:y,updatedAt:new Date().toISOString()};Object.keys(v).length>0&&(I.custom_fields=v);const U=await le.put(`/categories/${encodeURIComponent(k.id)}`,I);if(U.error)throw new Error(U.message||"Failed to update category");X(),B({message:"Category updated",variant:"success"}),await q()}catch(I){z(I.message),B({message:I.message||"Failed to update category",variant:"error"})}}},X=()=>{i(""),u(""),m(""),d("#3B82F6"),p("Tag"),A(1),N(!0),j({}),C({}),S(!1),G(null)},ve=I=>{if(!F){z("You don't have permission to edit categories.");return}i(I.code),u(I.name),m(I.description||""),d(I.color||"#3B82F6"),p(I.icon||"Tag"),A(I.sortOrder||1),N(I.isActive!==!1),j(I.custom_fields||{}),G(I),S(!0)},ee=(I,U)=>{j(ce=>({...ce,[I]:U})),D[I]&&C(ce=>{const T={...ce};return delete T[I],T})},me=async I=>{try{const U=await I.text();let ce=[];if(I.name.endsWith(".json"))ce=JSON.parse(U);else if(I.name.endsWith(".csv")){const T=U.split(`
`),H=T[0].split(",").map(ne=>ne.replace(/"/g,"").trim());ce=T.slice(1).filter(ne=>ne.trim()).map(ne=>{const ue=ne.split(",").map(ke=>ke.replace(/"/g,"").trim()),Ce={};return H.forEach((ke,$e)=>{Ce[ke.toLowerCase().replace(/\s+/g,"")]=ue[$e]}),Ce})}for(const T of ce){const H={code:T.code||T.id,name:T.name,description:T.description,color:T.color||"#3B82F6",icon:T.icon||"Tag",sortOrder:T.sortorder||T.sort_order||1,isActive:T.isactive||T.is_active!=="Inactive",createdDate:new Date().toISOString(),updatedDate:new Date().toISOString()},ne=await le.post("/categories",H);if(ne.error)throw new Error(`Failed to import category ${H.code}: ${ne.message}`)}B({message:`${ce.length} categories imported successfully`,variant:"success"}),await q()}catch(U){throw B({message:`Import failed: ${U.message}`,variant:"error"}),U}},se=[{key:"code",header:"Code / ID",width:"120px"},{key:"name",header:"Name",width:"150px"},{key:"description",header:"Description",width:"200px"},{key:"color",header:"Color",width:"100px",render:I=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-gray-200",style:{backgroundColor:I.color||"#3B82F6"}}),e.jsx("span",{className:"text-xs text-gray-600",children:I.color||"#3B82F6"})]})},{key:"icon",header:"Icon",width:"100px"},{key:"sortOrder",header:"Sort Order",width:"100px"},{key:"isActive",header:"Status",width:"100px",render:I=>I.isActive?"Active":"Inactive"},...a.filter(I=>I.isActive).map(I=>({key:`custom_fields.${I.fieldName}`,header:I.fieldLabel,width:"120px",render:U=>{var T;const ce=(T=U.custom_fields)==null?void 0:T[I.fieldName];return ce==null||ce===""?"-":I.fieldType==="checkbox"?ce?"Yes":"No":String(ce)}}))],Q=[{key:"isActive",label:"All status",options:[{value:"",label:"All status"},{value:"true",label:"Active"},{value:"false",label:"Inactive"}]}],W=a.filter(I=>I.isActive).map(I=>({fieldName:I.fieldName,fieldLabel:I.fieldLabel,fieldType:I.fieldType,isRequired:I.isRequired,defaultValue:I.defaultValue,options:I.options,validationRules:I.validationRules,displayOrder:I.displayOrder,groupName:I.groupName,description:I.description,value:v[I.fieldName],error:D[I.fieldName]})),K=e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsx(ie,{label:"Category Code",value:n,onChange:I=>i(I.target.value),placeholder:"e.g., CAT001",disabled:!!k,required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"Category Name",value:l,onChange:I=>u(I.target.value),placeholder:"e.g., Labor",required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"Sort Order",value:x.toString(),onChange:I=>A(parseInt(I.target.value)||1),placeholder:"1",type:"number",min:"1"})}),e.jsx("div",{className:"col-span-full",children:e.jsx(ie,{label:"Description",value:o,onChange:I=>m(I.target.value),placeholder:"Category description"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Appearance"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:h,onChange:I=>d(I.target.value),className:"w-12 h-10 border border-gray-200 rounded-lg cursor-pointer"}),e.jsx("input",{type:"text",value:h,onChange:I=>d(I.target.value),className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"#3B82F6"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Quick Colors:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:L.map(I=>e.jsx("button",{type:"button",onClick:()=>d(I),className:`w-8 h-8 rounded-lg border-2 ${h===I?"border-gray-400":"border-gray-200"}`,style:{backgroundColor:I},title:I},I))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon"}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:R.map(I=>e.jsx("button",{type:"button",onClick:()=>p(I),className:`p-2 border rounded-lg text-center hover:bg-gray-50 transition-colors ${g===I?"border-blue-500 bg-blue-50":"border-gray-200"}`,title:I,children:e.jsx("span",{className:"text-sm font-medium",children:I})},I))})]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:y,onChange:I=>N(I.target.checked)}),"Active"]})}),W.length>0&&e.jsx("div",{children:e.jsx(Ds,{fields:W,values:v,errors:D,onChange:ee})}),e.jsxs("div",{className:"flex gap-2",children:[(k?F:M)&&e.jsx(xe,{onClick:k?be:V,children:k?"Update Category":"Add Category"}),e.jsx(xe,{variant:"outline",onClick:X,children:"Cancel"})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(gt,{title:"Categories Master",items:t,columns:se,rowId:I=>I.id,searchKeys:["code","name","description"],filters:Q,loading:f,error:b,onAdd:M?()=>{X(),G(null),S(!0)}:void 0,onEdit:F?ve:void 0,onDelete:_?Z:void 0,onDeleteMany:_?async I=>{for(const U of I)await Z(U);await q()}:void 0,onImport:me,exportHeaders:["Code","Name","Description","Color","Icon","Sort Order","Status","Created Date","Updated Date",...a.filter(I=>I.isActive).map(I=>I.fieldLabel)],exportData:I=>I.map(U=>[U.code,U.name,U.description||"",U.color||"#3B82F6",U.icon||"Tag",U.sortOrder||1,U.isActive?"Active":"Inactive",U.createdAt||"",U.updatedAt||"",...a.filter(ce=>ce.isActive).map(ce=>{var H;const T=(H=U.custom_fields)==null?void 0:H[ce.fieldName];return T==null||T===""?"":ce.fieldType==="checkbox"?T?"Yes":"No":String(T)})])}),e.jsx(Ue,{open:P,onClose:()=>{S(!1),G(null)},title:k?`Edit Category: ${k.code}`:"Create New Category",size:"lg",children:K})]})}function Eu(){const[t,s]=c.useState([]),[a,r]=c.useState([]),[n,i]=c.useState([]),[l,u]=c.useState([]),[o,m]=c.useState(""),[h,d]=c.useState(""),[g,p]=c.useState(""),[x,A]=c.useState(""),[y,N]=c.useState(""),[v,j]=c.useState(!0),[D,C]=c.useState({}),[f,w]=c.useState({}),[b,z]=c.useState(!0),[P,S]=c.useState(null),[k,G]=c.useState(!1),[B,E]=c.useState(null),{showToast:M}=at(),{hasPermission:F}=Ye(),_=F("cost_codes_create"),L=F("cost_codes_edit"),R=F("cost_codes_delete"),q=async()=>{z(!0);try{const[T,H,ne,ue]=await Promise.all([le.get("/cost-codes"),le.get("/divisions"),le.get("/categories"),le.get("/custom-fields?entity=cost_codes")]);if(T.error){S(T.message||"Failed to load cost codes");return}if(H.error){S(H.message||"Failed to load divisions");return}if(ne.error){S(ne.message||"Failed to load categories");return}if(ue.error){S(ue.message||"Failed to load custom fields");return}const Ce=(T.data||[]).map(ke=>({...ke,isActive:ke.isActive!==!1,custom_fields:ke.custom_fields||{},createdAt:ke.createdAt||new Date().toISOString(),updatedAt:ke.updatedAt||new Date().toISOString()}));s(Ce),r(H.data||[]),i(ne.data||[]),u(ue.data||[])}catch(T){S(T.message||"Failed to load cost codes")}finally{z(!1)}};c.useEffect(()=>{q()},[]);const V=async()=>{if(!_){S("You don't have permission to create cost codes.");return}S(null);try{const T={code:o,name:h,description:g,categoryId:x,divisionId:y||null,isActive:v,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};Object.keys(D).length>0&&(T.custom_fields=D);const H=await le.post("/cost-codes",T);if(H.error)throw new Error(H.message||"Failed to add cost code");X(),M({message:"Cost code created",variant:"success"}),await q()}catch(T){S(T.message),M({message:T.message||"Failed to add cost code",variant:"error"})}},Z=async T=>{if(!R){S("You don't have permission to delete cost codes.");return}S(null);try{const H=await le.delete(`/cost-codes/${encodeURIComponent(T)}`);if(H.error)throw new Error(H.message||"Failed to delete cost code");M({message:"Cost code deleted",variant:"success"}),await q()}catch(H){S(H.message),M({message:H.message||"Failed to delete cost code",variant:"error"})}},be=async()=>{if(B){if(!L){S("You don't have permission to edit cost codes.");return}S(null);try{const T={code:B.code,name:h,description:g,categoryId:x,divisionId:y||null,isActive:v,updatedAt:new Date().toISOString()};Object.keys(D).length>0&&(T.custom_fields=D);const H=await le.put(`/cost-codes/${encodeURIComponent(B.id)}`,T);if(H.error)throw new Error(H.message||"Failed to update cost code");X(),M({message:"Cost code updated",variant:"success"}),await q()}catch(T){S(T.message),M({message:T.message||"Failed to update cost code",variant:"error"})}}},X=()=>{m(""),d(""),p(""),A(""),N(""),j(!0),C({}),w({}),G(!1),E(null)},ve=T=>{if(!L){S("You don't have permission to edit cost codes.");return}m(T.code),d(T.name),p(T.description||""),A(T.categoryId),N(T.divisionId||""),j(T.isActive!==!1),C(T.custom_fields||{}),E(T),G(!0)},ee=(T,H)=>{C(ne=>({...ne,[T]:H})),f[T]&&w(ne=>{const ue={...ne};return delete ue[T],ue})},me=async T=>{try{const H=await T.text();let ne=[];if(T.name.endsWith(".json"))ne=JSON.parse(H);else if(T.name.endsWith(".csv")){const ue=H.split(`
`),Ce=ue[0].split(",").map(ke=>ke.replace(/"/g,"").trim());ne=ue.slice(1).filter(ke=>ke.trim()).map(ke=>{const $e=ke.split(",").map(J=>J.replace(/"/g,"").trim()),$={};return Ce.forEach((J,O)=>{$[J.toLowerCase().replace(/\s+/g,"")]=$e[O]}),$})}for(const ue of ne){const Ce={code:ue.code||ue.id,name:ue.name,description:ue.description,categoryId:ue.categoryid||ue.category_id,divisionId:ue.divisionid||ue.division_id,isActive:ue.isactive||ue.is_active!=="Inactive",createdDate:new Date().toISOString(),updatedDate:new Date().toISOString()},ke=await le.post("/cost-codes",Ce);if(ke.error)throw new Error(`Failed to import cost code ${Ce.code}: ${ke.message}`)}M({message:`${ne.length} cost codes imported successfully`,variant:"success"}),await q()}catch(H){throw M({message:`Import failed: ${H.message}`,variant:"error"}),H}},se=T=>{const H=n.find(ne=>ne.id===T);return(H==null?void 0:H.name)||"Unknown Category"},Q=T=>{const H=n.find(ne=>ne.id===T);return(H==null?void 0:H.color)||"#6B7280"},W=T=>{if(!T)return"Unassigned";const H=a.find(ne=>ne.id===T);return(H==null?void 0:H.name)||"Unknown Division"},K=[{key:"code",header:"Code / ID",width:"120px"},{key:"name",header:"Name",width:"150px"},{key:"description",header:"Description",width:"200px"},{key:"categoryId",header:"Category",width:"120px",render:T=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-white",style:{backgroundColor:Q(T.categoryId)},children:se(T.categoryId)})},{key:"divisionId",header:"Division",width:"120px",render:T=>W(T.divisionId)},{key:"isActive",header:"Status",width:"100px",render:T=>T.isActive?"Active":"Inactive"},...l.filter(T=>T.isActive).map(T=>({key:`custom_fields.${T.fieldName}`,header:T.fieldLabel,width:"120px",render:H=>{var ue;const ne=(ue=H.custom_fields)==null?void 0:ue[T.fieldName];return ne==null||ne===""?"-":T.fieldType==="checkbox"?ne?"Yes":"No":String(ne)}}))],I=[{key:"categoryId",label:"All categories",options:[{value:"",label:"All categories"},...n.filter(T=>T.isActive).map(T=>({value:T.id,label:T.name}))]},{key:"divisionId",label:"All divisions",options:[{value:"",label:"All divisions"},...a.filter(T=>T.isActive).map(T=>({value:T.id,label:T.name}))]},{key:"isActive",label:"All status",options:[{value:"",label:"All status"},{value:"true",label:"Active"},{value:"false",label:"Inactive"}]}],U=l.filter(T=>T.isActive).map(T=>({fieldName:T.fieldName,fieldLabel:T.fieldLabel,fieldType:T.fieldType,isRequired:T.isRequired,defaultValue:T.defaultValue,options:T.options,validationRules:T.validationRules,displayOrder:T.displayOrder,groupName:T.groupName,description:T.description,value:D[T.fieldName],error:f[T.fieldName]})),ce=e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsx(ie,{label:"Cost Code",value:o,onChange:T=>m(T.target.value),placeholder:"e.g., CC001",disabled:!!B,required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"Cost Code Name",value:h,onChange:T=>d(T.target.value),placeholder:"e.g., General Labor",required:!0})}),e.jsx("div",{children:e.jsx(Ae,{label:"Category",value:x,onChange:T=>A(T.target.value),options:[{value:"",label:""},...n.filter(T=>T.isActive).map(T=>({value:T.id,label:T.name}))],required:!0})}),e.jsx("div",{children:e.jsx(Ae,{label:"Division",value:y,onChange:T=>N(T.target.value),options:[{value:"",label:""},...a.filter(T=>T.isActive).map(T=>({value:T.id,label:T.name}))]})}),e.jsx("div",{className:"col-span-full",children:e.jsx(ie,{label:"Description",value:g,onChange:T=>p(T.target.value),placeholder:"Cost code description"})})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:T=>j(T.target.checked)}),"Active"]})}),U.length>0&&e.jsx("div",{children:e.jsx(Ds,{fields:U,values:D,errors:f,onChange:ee})}),e.jsxs("div",{className:"flex gap-2",children:[(B?L:_)&&e.jsx(xe,{onClick:B?be:V,children:B?"Update Cost Code":"Add Cost Code"}),e.jsx(xe,{variant:"outline",onClick:X,children:"Cancel"})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(gt,{title:"Cost Codes Master",items:t,columns:K,rowId:T=>T.id,searchKeys:["code","name","description"],filters:I,loading:b,error:P,onAdd:_?()=>{X(),E(null),G(!0)}:void 0,onEdit:L?ve:void 0,onDelete:R?Z:void 0,onDeleteMany:R?async T=>{for(const H of T)await Z(H);await q()}:void 0,onImport:me,exportHeaders:["Code","Name","Description","Category","Division","Status","Created Date","Updated Date",...l.filter(T=>T.isActive).map(T=>T.fieldLabel)],exportData:T=>T.map(H=>[H.code,H.name,H.description||"",se(H.categoryId),W(H.divisionId),H.isActive?"Active":"Inactive",H.createdAt||"",H.updatedAt||"",...l.filter(ne=>ne.isActive).map(ne=>{var Ce;const ue=(Ce=H.custom_fields)==null?void 0:Ce[ne.fieldName];return ue==null||ue===""?"":ne.fieldType==="checkbox"?ue?"Yes":"No":String(ue)})])}),e.jsx(Ue,{open:k,onClose:()=>{G(!1),E(null)},title:B?`Edit Cost Code: ${B.code}`:"Create New Cost Code",size:"lg",children:ce})]})}function Mu(){const[t,s]=c.useState([]),[a,r]=c.useState([]),[n,i]=c.useState([]),[l,u]=c.useState(""),[o,m]=c.useState(""),[h,d]=c.useState(""),[g,p]=c.useState(""),[x,A]=c.useState(!0),[y,N]=c.useState({}),[v,j]=c.useState({}),[D,C]=c.useState(!0),[f,w]=c.useState(null),[b,z]=c.useState(!1),[P,S]=c.useState(null),{showToast:k}=at(),{hasPermission:G}=Ye(),B=G("divisions_create"),E=G("divisions_edit"),M=G("divisions_delete"),F=async()=>{var Q;C(!0);try{const[W,K,I]=await Promise.all([le.get("/divisions"),le.get("/users"),le.get("/custom-fields?entity=divisions")]);if(W.error){w(W.message||"Failed to load divisions");return}if(K.error){w(K.message||"Failed to load users");return}if(I.error){w(I.message||"Failed to load custom fields");return}const U=(W.data||[]).map(T=>({...T,isActive:T.isActive!==!1,custom_fields:T.custom_fields||{},createdAt:T.createdAt||new Date().toISOString(),updatedAt:T.updatedAt||new Date().toISOString()}));s(U);const ce=Array.isArray(K.data)?K.data:((Q=K.data)==null?void 0:Q.data)||[];r(ce),i(I.data||[])}catch(W){w(W.message||"Failed to load divisions")}finally{C(!1)}};c.useEffect(()=>{F()},[]);const _=async()=>{if(!B){w("You don't have permission to create divisions.");return}w(null);try{const Q={code:l,name:o,description:h,managerId:g||null,isActive:x,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};Object.keys(y).length>0&&(Q.custom_fields=y);const W=await le.post("/divisions",Q);if(W.error)throw new Error(W.message||"Failed to add division");q(),k({message:"Division created",variant:"success"}),await F()}catch(Q){w(Q.message),k({message:Q.message||"Failed to add division",variant:"error"})}},L=async Q=>{if(!M){w("You don't have permission to delete divisions.");return}w(null);try{const W=await le.delete(`/divisions/${encodeURIComponent(Q)}`);if(W.error)throw new Error(W.message||"Failed to delete division");k({message:"Division deleted",variant:"success"}),await F()}catch(W){w(W.message),k({message:W.message||"Failed to delete division",variant:"error"})}},R=async()=>{if(P){if(!E){w("You don't have permission to edit divisions.");return}w(null);try{const Q={code:P.code,name:o,description:h,managerId:g||null,isActive:x,updatedAt:new Date().toISOString()};Object.keys(y).length>0&&(Q.custom_fields=y);const W=await le.put(`/divisions/${encodeURIComponent(P.id)}`,Q);if(W.error)throw new Error(W.message||"Failed to update division");q(),k({message:"Division updated",variant:"success"}),await F()}catch(Q){w(Q.message),k({message:Q.message||"Failed to update division",variant:"error"})}}},q=()=>{u(""),m(""),d(""),p(""),A(!0),N({}),j({}),z(!1),S(null)},V=Q=>{if(!E){w("You don't have permission to edit divisions.");return}u(Q.code),m(Q.name),d(Q.description||""),p(Q.managerId||""),A(Q.isActive!==!1),N(Q.custom_fields||{}),S(Q),z(!0)},Z=(Q,W)=>{N(K=>({...K,[Q]:W})),v[Q]&&j(K=>{const I={...K};return delete I[Q],I})},be=async Q=>{try{const W=await Q.text();let K=[];if(Q.name.endsWith(".json"))K=JSON.parse(W);else if(Q.name.endsWith(".csv")){const I=W.split(`
`),U=I[0].split(",").map(ce=>ce.replace(/"/g,"").trim());K=I.slice(1).filter(ce=>ce.trim()).map(ce=>{const T=ce.split(",").map(ne=>ne.replace(/"/g,"").trim()),H={};return U.forEach((ne,ue)=>{H[ne.toLowerCase().replace(/\s+/g,"")]=T[ue]}),H})}for(const I of K){const U={code:I.code||I.id,name:I.name,description:I.description,managerId:I.managerid||I.manager_id,isActive:I.isactive||I.is_active!=="Inactive",createdDate:new Date().toISOString(),updatedDate:new Date().toISOString()},ce=await le.post("/divisions",U);if(ce.error)throw new Error(`Failed to import division ${U.code}: ${ce.message}`)}k({message:`${K.length} divisions imported successfully`,variant:"success"}),await F()}catch(W){throw k({message:`Import failed: ${W.message}`,variant:"error"}),W}},X=Q=>{if(!Q)return"No Manager";const W=a.find(K=>K.id===Q);return(W==null?void 0:W.name)||"Unknown Manager"},ve=[{key:"code",header:"Code / ID",width:"120px"},{key:"name",header:"Name",width:"150px"},{key:"description",header:"Description",width:"200px"},{key:"managerId",header:"Manager",width:"150px",render:Q=>X(Q.managerId)},{key:"isActive",header:"Status",width:"100px",render:Q=>Q.isActive?"Active":"Inactive"},...n.filter(Q=>Q.isActive).map(Q=>({key:`custom_fields.${Q.fieldName}`,header:Q.fieldLabel,width:"120px",render:W=>{var I;const K=(I=W.custom_fields)==null?void 0:I[Q.fieldName];return K==null||K===""?"-":Q.fieldType==="checkbox"?K?"Yes":"No":String(K)}}))],ee=[{key:"isActive",label:"All status",options:[{value:"",label:"All status"},{value:"true",label:"Active"},{value:"false",label:"Inactive"}]},{key:"managerId",label:"All managers",options:[{value:"",label:"All managers"},...a.filter(Q=>Q.isActive).map(Q=>({value:Q.id,label:Q.name||Q.email}))]}],me=n.filter(Q=>Q.isActive).map(Q=>({fieldName:Q.fieldName,fieldLabel:Q.fieldLabel,fieldType:Q.fieldType,isRequired:Q.isRequired,defaultValue:Q.defaultValue,options:Q.options,validationRules:Q.validationRules,displayOrder:Q.displayOrder,groupName:Q.groupName,description:Q.description,value:y[Q.fieldName],error:v[Q.fieldName]})),se=e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsx(ie,{label:"Division Code",value:l,onChange:Q=>u(Q.target.value),placeholder:"e.g., DIV001",disabled:!!P,required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"Division Name",value:o,onChange:Q=>m(Q.target.value),placeholder:"e.g., Engineering",required:!0})}),e.jsx("div",{children:e.jsx(Ae,{label:"Manager",value:g,onChange:Q=>p(Q.target.value),options:[{value:"",label:""},...a.filter(Q=>Q.isActive).map(Q=>({value:Q.id,label:Q.name||Q.email}))]})}),e.jsx("div",{className:"col-span-full",children:e.jsx(ie,{label:"Description",value:h,onChange:Q=>d(Q.target.value),placeholder:"Division description"})}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:Q=>A(Q.target.checked)}),"Active"]})})})]})]}),me.length>0&&e.jsx("div",{children:e.jsx(Ds,{fields:me,values:y,errors:v,onChange:Z})}),e.jsxs("div",{className:"flex gap-2",children:[(P?E:B)&&e.jsx(xe,{onClick:P?R:_,children:P?"Update Division":"Add Division"}),e.jsx(xe,{variant:"outline",onClick:q,children:"Cancel"})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(gt,{title:"Divisions Master",items:t,columns:ve,rowId:Q=>Q.id,searchKeys:["code","name","description"],filters:ee,loading:D,error:f,onAdd:B?()=>{q(),S(null),z(!0)}:void 0,onEdit:E?V:void 0,onDelete:M?L:void 0,onDeleteMany:M?async Q=>{for(const W of Q)await L(W);await F()}:void 0,onImport:be,exportHeaders:["Code","Name","Description","Manager","Status","Created Date","Updated Date",...n.filter(Q=>Q.isActive).map(Q=>Q.fieldLabel)],exportData:Q=>Q.map(W=>[W.code,W.name,W.description||"",X(W.managerId),W.isActive?"Active":"Inactive",W.createdAt||"",W.updatedAt||"",...n.filter(K=>K.isActive).map(K=>{var U;const I=(U=W.custom_fields)==null?void 0:U[K.fieldName];return I==null||I===""?"":K.fieldType==="checkbox"?I?"Yes":"No":String(I)})])}),e.jsx(Ue,{open:b,onClose:()=>{z(!1),S(null)},title:P?`Edit Division: ${P.code}`:"Create New Division",size:"lg",children:se})]})}const Fu=["United States","India","Canada","United Kingdom"],Ru={"United States":["California","Texas","New York","Florida","Illinois"],India:["Tamil Nadu","Karnataka","Maharashtra","Delhi","Gujarat"],Canada:["Ontario","Quebec","British Columbia","Alberta"],"United Kingdom":["England","Scotland","Wales","Northern Ireland"]},Lu=["America/New_York","America/Chicago","America/Denver","America/Los_Angeles","Asia/Kolkata","Europe/London","UTC"];function Ou(){const[t,s]=c.useState([]),[a,r]=c.useState([]),[n,i]=c.useState([]),[l,u]=c.useState(!0),[o,m]=c.useState(null),[h,d]=c.useState(!1),[g,p]=c.useState(null),[x,A]=c.useState("profile"),[y,N]=c.useState(""),[v,j]=c.useState(""),[D,C]=c.useState(""),[f,w]=c.useState(""),[b,z]=c.useState(""),[P,S]=c.useState(""),[k,G]=c.useState(""),[B,E]=c.useState(""),[M,F]=c.useState("United States"),[_,L]=c.useState(""),[R,q]=c.useState(""),[V,Z]=c.useState(""),[be,X]=c.useState(""),[ve,ee]=c.useState(""),[me,se]=c.useState(""),[Q,W]=c.useState(""),[K,I]=c.useState(""),[U,ce]=c.useState(""),[T,H]=c.useState("America/New_York"),[ne,ue]=c.useState(!0),[Ce,ke]=c.useState(""),[$e,$]=c.useState(""),[J,O]=c.useState(""),[je,ae]=c.useState(""),[re,Ie]=c.useState([]),[We,Ke]=c.useState(""),[st,Se]=c.useState(""),[ft,oe]=c.useState(""),[we,pe]=c.useState(""),[ye,Me]=c.useState(""),[tt,nt]=c.useState(""),[Rt,At]=c.useState(""),[ge,Te]=c.useState(""),[Ee,te]=c.useState(""),[Ne,Re]=c.useState(""),[dt,Lt]=c.useState(""),[Is,xs]=c.useState(""),[hs,Kt]=c.useState(""),[ps,Jt]=c.useState(""),[gs,_s]=c.useState(""),[fs,As]=c.useState(""),[Ps,de]=c.useState(""),[De,ze]=c.useState(""),[qe,yt]=c.useState(""),[It,Pt]=c.useState(""),[Et,Bt]=c.useState({}),[Bs,aa]=c.useState({}),{showToast:rs}=at(),{hasPermission:$a}=Ye(),_a=$a("employee_create"),ra=$a("employee_edit"),Ba=$a("employee_delete"),Es=async()=>{u(!0);try{const[Y,Fe,He]=await Promise.all([le.get("/employees"),le.get("/divisions"),le.get("/custom-fields?entity=employees")]);if(Y.error){m(Y.message||"Failed to load employees");return}const Le=(Y.data||[]).map(bt=>({...bt,isActive:bt.isActive!==!1,custom_fields:bt.custom_fields||{},createdAt:bt.createdAt||new Date().toISOString(),updatedAt:bt.updatedAt||new Date().toISOString()}));s(Le),r(Fe.data||[]),i(He.data||[])}catch(Y){m(Y.message||"Failed to load employees")}finally{u(!1)}};c.useEffect(()=>{Es()},[]);const gi=async()=>{if(!_a){m("You don't have permission to create employees.");return}m(null);try{const Y={code:y.trim(),firstName:v.trim(),middleName:D.trim()||void 0,lastName:f.trim(),email:b.trim(),phone:P.trim()||void 0,mobilePhone:k.trim()||void 0,homePhone:B.trim()||void 0,address:{addressLine1:R,addressLine2:V,city:be,state:_,country:M,zipCode:ve},photo:me||void 0,branch:Q||void 0,department:K||void 0,divisionId:U||void 0,timeZone:T||void 0,employmentType:We||void 0,position:st||void 0,payClassification:ft||void 0,payRates:we||ye?{type:we,rate:ye?parseFloat(ye):void 0}:void 0,emergencyContact:tt?{name:tt,relationship:Rt,phone:ge,email:Ee}:void 0,unionInfo:Ne||dt?{unionNumber:Ne,unionName:dt,unionPayGroup:Is,unionPhone:hs,notes:ps}:void 0,agencyInfo:gs||fs?{agencyNumber:gs,agencyName:fs,position:Ps,payRates:De,notes:qe}:void 0,authorization:Ce?{userEmail:Ce,userPassword:$e,userPasscode:J,appRestrictions:re}:void 0,employeeGroups:je?je.split(",").map(He=>He.trim()):void 0,isActive:ne,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};Object.keys(Et).length>0&&(Y.custom_fields=Et);const Fe=await le.post("/employees",Y);if(Fe.error)throw new Error(Fe.message||"Failed to add employee");na(),rs({message:"Employee created",variant:"success"}),await Es()}catch(Y){m(Y.message),rs({message:Y.message||"Failed to add employee",variant:"error"})}},yr=async Y=>{if(!Ba){m("You don't have permission to delete employees.");return}m(null);try{const Fe=await le.delete(`/employees/${encodeURIComponent(Y)}`);if(Fe.error)throw new Error(Fe.message||"Failed to delete employee");rs({message:"Employee deleted",variant:"success"}),await Es()}catch(Fe){m(Fe.message),rs({message:Fe.message||"Failed to delete employee",variant:"error"})}},fi=async()=>{if(g){if(!ra){m("You don't have permission to edit employees.");return}m(null);try{const Y={firstName:v.trim(),middleName:D.trim()||void 0,lastName:f.trim(),email:b.trim(),phone:P.trim()||void 0,mobilePhone:k.trim()||void 0,homePhone:B.trim()||void 0,address:{addressLine1:R,addressLine2:V,city:be,state:_,country:M,zipCode:ve},photo:me||void 0,branch:Q||void 0,department:K||void 0,divisionId:U||void 0,timeZone:T||void 0,employmentType:We||void 0,position:st||void 0,payClassification:ft||void 0,payRates:we||ye?{type:we,rate:ye?parseFloat(ye):void 0}:void 0,emergencyContact:tt?{name:tt,relationship:Rt,phone:ge,email:Ee}:void 0,unionInfo:Ne||dt?{unionNumber:Ne,unionName:dt,unionPayGroup:Is,unionPhone:hs,notes:ps}:void 0,agencyInfo:gs||fs?{agencyNumber:gs,agencyName:fs,position:Ps,payRates:De,notes:qe}:void 0,authorization:Ce?{userEmail:Ce,userPassword:$e,userPasscode:J,appRestrictions:re}:void 0,employeeGroups:je?je.split(",").map(He=>He.trim()):void 0,isActive:ne,updatedAt:new Date().toISOString()};Object.keys(Et).length>0&&(Y.custom_fields=Et);const Fe=await le.put(`/employees/${encodeURIComponent(g.id)}`,Y);if(Fe.error)throw new Error(Fe.message||"Failed to update employee");na(),rs({message:"Employee updated",variant:"success"}),await Es()}catch(Y){m(Y.message),rs({message:Y.message||"Failed to update employee",variant:"error"})}}},na=()=>{N(""),j(""),C(""),w(""),z(""),S(""),G(""),E(""),F("United States"),L(""),q(""),Z(""),X(""),ee(""),se(""),W(""),I(""),ce(""),H("America/New_York"),ke(""),$(""),O(""),ae(""),Ie([]),Ke(""),Se(""),oe(""),pe(""),Me(""),nt(""),At(""),Te(""),te(""),Re(""),Lt(""),xs(""),Kt(""),Jt(""),_s(""),As(""),de(""),ze(""),yt(""),Pt(""),ue(!0),Bt({}),aa({}),d(!1),p(null),A("profile")},yi=Y=>{var Fe,He,Le,bt,$t,ia,Us,Ms,la,jr,Nr,wr,Sr,Cr,kr,Tr,Dr,Ir,Ar,Pr,Er,Mr,Fr,Rr,Lr,Or,zr;if(!ra){m("You don't have permission to edit employees.");return}N(Y.code),j(Y.firstName),C(Y.middleName||""),w(Y.lastName),z(Y.email),S(Y.phone||""),G(Y.mobilePhone||""),E(Y.homePhone||""),F(((Fe=Y.address)==null?void 0:Fe.country)||"United States"),L(((He=Y.address)==null?void 0:He.state)||""),q(((Le=Y.address)==null?void 0:Le.addressLine1)||""),Z(((bt=Y.address)==null?void 0:bt.addressLine2)||""),X((($t=Y.address)==null?void 0:$t.city)||""),ee(((ia=Y.address)==null?void 0:ia.zipCode)||""),se(Y.photo||""),W(Y.branch||""),I(Y.department||""),ce(Y.divisionId||""),H(Y.timeZone||"America/New_York"),ke(((Us=Y.authorization)==null?void 0:Us.userEmail)||""),$(((Ms=Y.authorization)==null?void 0:Ms.userPassword)||""),O(((la=Y.authorization)==null?void 0:la.userPasscode)||""),ae(Y.employeeGroups?Y.employeeGroups.join(", "):""),Ie(((jr=Y.authorization)==null?void 0:jr.appRestrictions)||[]),Ke(Y.employmentType||""),Se(Y.position||""),oe(Y.payClassification||""),pe(((Nr=Y.payRates)==null?void 0:Nr.type)||""),Me(((Sr=(wr=Y.payRates)==null?void 0:wr.rate)==null?void 0:Sr.toString())||""),nt(((Cr=Y.emergencyContact)==null?void 0:Cr.name)||""),At(((kr=Y.emergencyContact)==null?void 0:kr.relationship)||""),Te(((Tr=Y.emergencyContact)==null?void 0:Tr.phone)||""),te(((Dr=Y.emergencyContact)==null?void 0:Dr.email)||""),Re(((Ir=Y.unionInfo)==null?void 0:Ir.unionNumber)||""),Lt(((Ar=Y.unionInfo)==null?void 0:Ar.unionName)||""),xs(((Pr=Y.unionInfo)==null?void 0:Pr.unionPayGroup)||""),Kt(((Er=Y.unionInfo)==null?void 0:Er.unionPhone)||""),Jt(((Mr=Y.unionInfo)==null?void 0:Mr.notes)||""),_s(((Fr=Y.agencyInfo)==null?void 0:Fr.agencyNumber)||""),As(((Rr=Y.agencyInfo)==null?void 0:Rr.agencyName)||""),de(((Lr=Y.agencyInfo)==null?void 0:Lr.position)||""),ze(((Or=Y.agencyInfo)==null?void 0:Or.payRates)||""),yt(((zr=Y.agencyInfo)==null?void 0:zr.notes)||""),ue(Y.isActive!==!1),Bt(Y.custom_fields||{}),p(Y),d(!0)},bi=(Y,Fe)=>{Bt(He=>({...He,[Y]:Fe})),Bs[Y]&&aa(He=>{const Le={...He};return delete Le[Y],Le})},vi=async Y=>{try{const Fe=await Y.text();let He=[];if(Y.name.endsWith(".json"))He=JSON.parse(Fe);else if(Y.name.endsWith(".csv")){const Le=Fe.split(`
`),bt=Le[0].split(",").map($t=>$t.replace(/"/g,"").trim());He=Le.slice(1).filter($t=>$t.trim()).map($t=>{const ia=$t.split(",").map(Ms=>Ms.replace(/"/g,"").trim()),Us={};return bt.forEach((Ms,la)=>{Us[Ms.toLowerCase().replace(/\s+/g,"")]=ia[la]}),Us})}for(const Le of He){const bt={code:Le.code||Le.id,firstName:Le.firstname||Le.first_name,middleName:Le.middlename||Le.middle_name,lastName:Le.lastname||Le.last_name,email:Le.email,phone:Le.phone,mobilePhone:Le.mobilephone||Le.mobile_phone,homePhone:Le.homephone||Le.home_phone,department:Le.department,divisionId:Le.divisionid||Le.division_id,isActive:Le.isactive||Le.is_active!=="Inactive",createdDate:new Date().toISOString(),updatedDate:new Date().toISOString()},$t=await le.post("/employees",bt);if($t.error)throw new Error(`Failed to import employee ${bt.code}: ${$t.message}`)}rs({message:`${He.length} employees imported successfully`,variant:"success"}),await Es()}catch(Fe){throw rs({message:`Import failed: ${Fe.message}`,variant:"error"}),Fe}},br=Y=>{if(!Y)return"-";const Fe=a.find(He=>He.id===Y);return(Fe==null?void 0:Fe.name)||Y},ji=[{key:"code",header:"Employee No.",width:"120px"},{key:"firstName",header:"First Name",width:"120px"},{key:"lastName",header:"Last Name",width:"120px"},{key:"email",header:"Email ID",width:"180px"},{key:"mobilePhone",header:"Mobile #",width:"140px",render:Y=>Y.mobilePhone||Y.phone||"-"},{key:"department",header:"Department",width:"120px",render:Y=>Y.department||"-"},{key:"divisionId",header:"Division",width:"120px",render:Y=>br(Y.divisionId)},...n.filter(Y=>Y.isActive).map(Y=>({key:`custom_fields.${Y.fieldName}`,header:Y.fieldLabel,width:"120px",render:Fe=>{var Le;const He=(Le=Fe.custom_fields)==null?void 0:Le[Y.fieldName];return He==null||He===""?"-":Y.fieldType==="checkbox"?He?"Yes":"No":String(He)}}))],Ni=[{key:"isActive",label:"All status",options:[{value:"",label:"All status"},{value:"true",label:"Active"},{value:"false",label:"Inactive"}]},{key:"department",label:"All departments",options:[{value:"",label:"All departments"},...Array.from(new Set(t.map(Y=>Y.department).filter(Boolean))).map(Y=>({value:Y,label:Y}))]},{key:"divisionId",label:"All divisions",options:[{value:"",label:"All divisions"},...a.filter(Y=>Y.isActive).map(Y=>({value:Y.id,label:Y.name}))]}],vr=n.filter(Y=>Y.isActive).map(Y=>({fieldName:Y.fieldName,fieldLabel:Y.fieldLabel,fieldType:Y.fieldType,isRequired:Y.isRequired,defaultValue:Y.defaultValue,options:Y.options,validationRules:Y.validationRules,displayOrder:Y.displayOrder,groupName:Y.groupName,description:Y.description,value:Et[Y.fieldName],error:Bs[Y.fieldName]})),wi=()=>{switch(x){case"profile":return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsx(ie,{label:"Employee No.",value:y,onChange:Y=>N(Y.target.value),placeholder:"AUTO-000123",disabled:!!g,required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"First Name",value:v,onChange:Y=>j(Y.target.value),required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"Middle Name",value:D,onChange:Y=>C(Y.target.value)})}),e.jsx("div",{children:e.jsx(ie,{label:"Last Name",value:f,onChange:Y=>w(Y.target.value),required:!0})}),e.jsx("div",{children:e.jsx(Ae,{label:"Country",value:M,onChange:Y=>{F(Y.target.value),L("")},options:[{value:"",label:" Select Country "},...Fu.map(Y=>({value:Y,label:Y}))]})}),e.jsx("div",{children:e.jsx(Ae,{label:"State / Province",value:_,onChange:Y=>L(Y.target.value),options:[{value:"",label:" Select State "},...(Ru[M]||[]).map(Y=>({value:Y,label:Y}))]})}),e.jsx("div",{className:"col-span-full",children:e.jsx(ie,{label:"Address Line 1",value:R,onChange:Y=>q(Y.target.value)})}),e.jsx("div",{className:"col-span-full",children:e.jsx(ie,{label:"Address Line 2",value:V,onChange:Y=>Z(Y.target.value)})}),e.jsx("div",{children:e.jsx(ie,{label:"City",value:be,onChange:Y=>X(Y.target.value)})}),e.jsx("div",{children:e.jsx(ie,{label:"Zip / Postal Code",value:ve,onChange:Y=>ee(Y.target.value),placeholder:"12345"})}),e.jsx("div",{children:e.jsx(ie,{label:"Home Tel. Ph. No.",value:B,onChange:Y=>E(Y.target.value),placeholder:"x-xxx-xxx-xxxx"})}),e.jsx("div",{children:e.jsx(ie,{label:"Mobile Tel. Ph. No.",value:k,onChange:Y=>G(Y.target.value),placeholder:"x-xxx-xxx-xxxx"})}),e.jsx("div",{children:e.jsx(ie,{label:"Email ID",value:b,onChange:Y=>z(Y.target.value),type:"email",required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"Photo URL",value:me,onChange:Y=>se(Y.target.value),placeholder:"https://..."})}),e.jsx("div",{children:e.jsx(ie,{label:"Branch",value:Q,onChange:Y=>W(Y.target.value)})}),e.jsx("div",{children:e.jsx(ie,{label:"Department",value:K,onChange:Y=>I(Y.target.value)})}),e.jsx("div",{children:e.jsx(Ae,{label:"Division",value:U,onChange:Y=>ce(Y.target.value),options:[{value:"",label:" Select Division "},...a.filter(Y=>Y.isActive).map(Y=>({value:Y.id,label:Y.name}))]})}),e.jsx("div",{children:e.jsx(Ae,{label:"Time Zone",value:T,onChange:Y=>H(Y.target.value),options:Lu.map(Y=>({value:Y,label:Y}))})}),e.jsx("div",{className:"flex items-center gap-2 pt-6",children:e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:ne,onChange:Y=>ue(Y.target.checked)}),"Active"]})})]});case"authorization":return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(ie,{label:"User Email ID",value:Ce,onChange:Y=>ke(Y.target.value),type:"email"})}),e.jsx("div",{children:e.jsx(ie,{label:"User Password",value:$e,onChange:Y=>$(Y.target.value),type:"password"})}),e.jsx("div",{children:e.jsx(ie,{label:"User Passcode (PIN)",value:J,onChange:Y=>O(Y.target.value),placeholder:"4-6 digits"})}),e.jsx("div",{children:e.jsx(ie,{label:"Employee Groups",value:je,onChange:Y=>ae(Y.target.value),placeholder:"Group1, Group2, etc."})})]});case"hr":return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(Ae,{label:"Employment Type",value:We,onChange:Y=>Ke(Y.target.value),options:[{value:"",label:" Select "},{value:"Regular",label:"Regular"},{value:"Temporary",label:"Temporary"},{value:"Full-time",label:"Full-time"},{value:"Part-time",label:"Part-time"},{value:"Contract",label:"Contract"}]})}),e.jsx("div",{children:e.jsx(ie,{label:"Position",value:st,onChange:Y=>Se(Y.target.value)})}),e.jsx("div",{children:e.jsx(ie,{label:"Pay Classification",value:ft,onChange:Y=>oe(Y.target.value)})}),e.jsx("div",{children:e.jsx(Ae,{label:"Pay Rate Type",value:we,onChange:Y=>pe(Y.target.value),options:[{value:"",label:" Select "},{value:"Salary",label:"Salary"},{value:"Hourly",label:"Hourly"},{value:"Commission",label:"Commission"}]})}),e.jsx("div",{children:e.jsx(ie,{label:"Pay Rate Amount",value:ye,onChange:Y=>Me(Y.target.value),type:"number",placeholder:"0.00"})}),e.jsx("div",{className:"col-span-full",children:e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Emergency Contact"})}),e.jsx("div",{className:"col-span-full",children:e.jsx(ie,{label:"Emergency Contact Name",value:tt,onChange:Y=>nt(Y.target.value)})}),e.jsx("div",{children:e.jsx(ie,{label:"Relationship",value:Rt,onChange:Y=>At(Y.target.value)})}),e.jsx("div",{children:e.jsx(ie,{label:"Phone No.",value:ge,onChange:Y=>Te(Y.target.value),placeholder:"x-xxx-xxx-xxxx"})}),e.jsx("div",{children:e.jsx(ie,{label:"Emergency Email",value:Ee,onChange:Y=>te(Y.target.value),type:"email"})})]});case"union":return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(ie,{label:"Union #",value:Ne,onChange:Y=>Re(Y.target.value)})}),e.jsx("div",{children:e.jsx(ie,{label:"Union Name",value:dt,onChange:Y=>Lt(Y.target.value)})}),e.jsx("div",{children:e.jsx(ie,{label:"Union Pay Group",value:Is,onChange:Y=>xs(Y.target.value)})}),e.jsx("div",{children:e.jsx(ie,{label:"Union Phone No.",value:hs,onChange:Y=>Kt(Y.target.value),placeholder:"x-xxx-xxx-xxxx"})}),e.jsxs("div",{className:"col-span-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Union Notes"}),e.jsx("textarea",{value:ps,onChange:Y=>Jt(Y.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]})]});case"agency":return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(ie,{label:"Agency #",value:gs,onChange:Y=>_s(Y.target.value)})}),e.jsx("div",{children:e.jsx(ie,{label:"Agency Name",value:fs,onChange:Y=>As(Y.target.value)})}),e.jsx("div",{children:e.jsx(ie,{label:"Position",value:Ps,onChange:Y=>de(Y.target.value)})}),e.jsx("div",{children:e.jsx(ie,{label:"Pay Rates",value:De,onChange:Y=>ze(Y.target.value)})}),e.jsxs("div",{className:"col-span-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Agency Notes"}),e.jsx("textarea",{value:qe,onChange:Y=>yt(Y.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]})]});case"logs":return e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(ie,{label:"Date Created",value:g!=null&&g.createdAt?new Date(g.createdAt).toLocaleDateString():"",disabled:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"Created By",value:"Admin User",disabled:!0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks (max 250 chars)"}),e.jsx("textarea",{value:It,onChange:Y=>Pt(Y.target.value),maxLength:250,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4,placeholder:"Enter remarks..."}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[It.length,"/250 characters"]})]})]});default:return null}},Si=e.jsxs("div",{className:"flex flex-col h-[600px] p-6",children:[e.jsx("div",{className:"border-b border-gray-200 flex-shrink-0",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"profile",label:"Profile"},{id:"authorization",label:"Authorization"},{id:"hr",label:"HR"},{id:"union",label:"Union"},{id:"agency",label:"Agency"},{id:"logs",label:"Logs / Notes"}].map(Y=>e.jsx("button",{onClick:()=>A(Y.id),className:`${x===Y.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap px-3 py-2 border-b-2 font-semibold text-sm`,children:Y.label},Y.id))})}),e.jsx("div",{className:"flex-1 overflow-y-auto py-6 min-h-0",children:e.jsxs("div",{className:"space-y-6",children:[wi(),vr.length>0&&x==="profile"&&e.jsx("div",{children:e.jsx(Ds,{fields:vr,values:Et,errors:Bs,onChange:bi})})]})}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t flex-shrink-0 bg-white",children:[(g?ra:_a)&&e.jsx(xe,{onClick:g?fi:gi,children:g?"Update Employee":"Add Employee"}),e.jsx(xe,{variant:"outline",onClick:na,children:"Cancel"})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(gt,{title:"Employees Master",items:t,columns:ji,rowId:Y=>Y.id,searchKeys:["code","firstName","lastName","email","department"],filters:Ni,loading:l,error:o,onAdd:_a?()=>{na(),p(null),d(!0)}:void 0,onEdit:ra?yi:void 0,onDelete:Ba?yr:void 0,onDeleteMany:Ba?async Y=>{for(const Fe of Y)await yr(Fe);await Es()}:void 0,onImport:vi,exportHeaders:["Code","First Name","Middle Name","Last Name","Email","Mobile Phone","Department","Division","Status","Created Date","Updated Date",...n.filter(Y=>Y.isActive).map(Y=>Y.fieldLabel)],exportData:Y=>Y.map(Fe=>[Fe.code,Fe.firstName,Fe.middleName||"",Fe.lastName,Fe.email,Fe.mobilePhone||Fe.phone||"",Fe.department||"",br(Fe.divisionId),Fe.isActive?"Active":"Inactive",Fe.createdAt||"",Fe.updatedAt||"",...n.filter(He=>He.isActive).map(He=>{var bt;const Le=(bt=Fe.custom_fields)==null?void 0:bt[He.fieldName];return Le==null||Le===""?"":He.fieldType==="checkbox"?Le?"Yes":"No":String(Le)})])}),e.jsx(Ue,{open:h,onClose:()=>{d(!1),p(null)},title:g?`Edit Employee: ${g.code}`:"Create New Employee",size:"xl",children:Si})]})}const zu=({onFieldCreated:t,onFieldUpdated:s,onFieldDeleted:a,onClose:r})=>{const[n,i]=c.useState([]),[l,u]=c.useState([]),[o,m]=c.useState(!0),[h,d]=c.useState(null),[g,p]=c.useState(!1),[x,A]=c.useState(null),[y,N]=c.useState(""),[v,j]=c.useState(""),[D,C]=c.useState(""),[f,w]=c.useState(!1),[b,z]=c.useState(""),[P,S]=c.useState(""),[k,G]=c.useState(0),[B,E]=c.useState("General"),[M,F]=c.useState(""),[_,L]=c.useState(!0),{showToast:R}=at(),{hasPermission:q}=Ye(),V=q("units_create"),Z=q("units_edit"),be=q("units_delete");c.useEffect(()=>{X()},[]);const X=async()=>{var K;m(!0);try{const[I,U]=await Promise.all([le.get("/custom-fields?entity=units"),le.get("/custom-fields/meta/types")]);if(I.error){d(I.message||"Failed to load custom fields");return}if(U.error){d(U.message||"Failed to load field types");return}i(I.data||[]),u(((K=U.data)==null?void 0:K.fieldTypes)||[])}catch(I){d(I.message||"Failed to load data")}finally{m(!1)}},ve=()=>{N(""),j(""),C(""),w(!1),z(""),S(""),G(0),E("General"),F(""),L(!0),A(null),p(!1)},ee=async()=>{if(!V){d("You don't have permission to create custom fields.");return}d(null);try{const K={fieldName:y.trim(),fieldLabel:v.trim(),fieldType:D,isRequired:f,displayOrder:parseInt(k.toString())||0,groupName:B.trim(),description:M.trim(),isActive:_};b.trim()&&(K.defaultValue=b.trim()),D==="dropdown"&&P.trim()&&(K.options=P.split(`
`).map(U=>U.trim()).filter(U=>U));const I=await le.post("/custom-fields",K);if(I.error)throw new Error(I.message||"Failed to create custom field");R({message:"Custom field created successfully",variant:"success"}),ve(),await X(),t==null||t(I.data)}catch(K){d(K.message),R({message:K.message||"Failed to create custom field",variant:"error"})}},me=async()=>{if(!x||!Z){d("You don't have permission to edit custom fields.");return}d(null);try{const K={fieldLabel:v.trim(),fieldType:D,isRequired:f,displayOrder:parseInt(k.toString())||0,groupName:B.trim(),description:M.trim(),isActive:_};b.trim()&&(K.defaultValue=b.trim()),D==="dropdown"&&P.trim()&&(K.options=P.split(`
`).map(U=>U.trim()).filter(U=>U));const I=await le.put(`/custom-fields/${x.id}`,K);if(I.error)throw new Error(I.message||"Failed to update custom field");R({message:"Custom field updated successfully",variant:"success"}),ve(),await X(),s==null||s(I.data)}catch(K){d(K.message),R({message:K.message||"Failed to update custom field",variant:"error"})}},se=async K=>{if(!be){d("You don't have permission to delete custom fields.");return}if(confirm("Are you sure you want to delete this custom field?")){d(null);try{const I=await le.delete(`/custom-fields/${K}`);if(I.error)throw new Error(I.message||"Failed to delete custom field");R({message:"Custom field deleted successfully",variant:"success"}),await X(),a==null||a(K)}catch(I){d(I.message),R({message:I.message||"Failed to delete custom field",variant:"error"})}}},Q=K=>{var I;if(!Z){d("You don't have permission to edit custom fields.");return}N(K.fieldName),j(K.fieldLabel),C(K.fieldType),w(K.isRequired),z(K.defaultValue||""),S(((I=K.options)==null?void 0:I.join(`
`))||""),G(K.displayOrder),E(K.groupName),F(K.description||""),L(K.isActive),A(K),p(!0)},W=e.jsxs("div",{className:"space-y-4 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:[e.jsx(ie,{label:"Field Name",value:y,onChange:K=>N(K.target.value),placeholder:"e.g., unit_category",disabled:!!x,required:!0}),e.jsx(ie,{label:"Field Label",value:v,onChange:K=>j(K.target.value),placeholder:"e.g., Unit Category",required:!0}),e.jsx(Ae,{label:"Field Type",value:D,onChange:K=>C(K.target.value),options:[{value:"",label:"Select field type"},...l.map(K=>({value:K.value,label:K.label}))],required:!0}),e.jsx(ie,{label:"Display Order",type:"number",value:k,onChange:K=>G(parseInt(K.target.value)||0),placeholder:"0"}),e.jsx(ie,{label:"Group Name",value:B,onChange:K=>E(K.target.value),placeholder:"e.g., General, Additional Info"}),e.jsx(ie,{label:"Default Value",value:b,onChange:K=>z(K.target.value),placeholder:"Default value (optional)"})]}),D==="dropdown"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Options (one per line)"}),e.jsx("textarea",{value:P,onChange:K=>S(K.target.value),placeholder:`Option 1
Option 2
Option 3`,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:M,onChange:K=>F(K.target.value),placeholder:"Field description (optional)",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:f,onChange:K=>w(K.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Required"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:_,onChange:K=>L(K.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(xe,{onClick:x?me:ee,children:x?"Update Field":"Create Field"}),e.jsx(xe,{variant:"outline",onClick:ve,children:"Cancel"})]})]});return o?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading custom fields..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Custom Fields for Units"}),e.jsxs("div",{className:"flex gap-2",children:[V&&e.jsx(xe,{onClick:()=>p(!0),children:"Add Custom Field"}),r&&e.jsx(xe,{variant:"outline",onClick:r,children:"Close"})]})]}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-1",children:e.jsx("p",{className:"text-red-600",children:h})}),g&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-1",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:x?`Edit Field: ${x.fieldLabel}`:"Create New Custom Field"}),W]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Existing Custom Fields"})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Field Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Label"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Group"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Required"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(K=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:K.fieldName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:K.fieldLabel}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K.fieldType}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K.groupName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K.isRequired?"Yes":"No"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${K.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:K.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[Z&&e.jsx("button",{onClick:()=>Q(K),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),be&&e.jsx("button",{onClick:()=>se(K.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},K.id))})]}),n.length===0&&e.jsx("div",{className:"px-6 py-2 text-center text-gray-500",children:"No custom fields defined yet. Create your first custom field to get started."})]})]})]})};function $u(){const[t,s]=c.useState([]),[a,r]=c.useState([]),[n,i]=c.useState(""),[l,u]=c.useState(""),[o,m]=c.useState(""),[h,d]=c.useState(""),[g,p]=c.useState(""),[x,A]=c.useState(!1),[y,N]=c.useState(!0),[v,j]=c.useState({}),[D,C]=c.useState({}),[f,w]=c.useState(!0),[b,z]=c.useState(null),[P,S]=c.useState(!1),[k,G]=c.useState(!1),[B,E]=c.useState(null),{showToast:M}=at(),{hasPermission:F}=Ye(),_=F("units_create"),L=F("units_edit"),R=F("units_delete"),q=async()=>{w(!0);try{const[T,H]=await Promise.all([le.get("/units"),le.get("/custom-fields?entity=units")]);if(T.error){z(T.message||"Failed to load units");return}if(H.error){z(H.message||"Failed to load custom fields");return}const ne=(T.data||[]).map(ue=>({...ue,isActive:ue.isActive!==!1,custom_fields:ue.custom_fields||{},createdAt:ue.createdAt||new Date().toISOString(),updatedAt:ue.updatedAt||new Date().toISOString()}));s(ne),r(H.data||[])}catch(T){z(T.message||"Failed to load units")}finally{w(!1)}};c.useEffect(()=>{q()},[]);const V=async()=>{if(!_){z("You don't have permission to create units.");return}z(null);try{const T={code:n,name:l,isActive:y,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};o&&(T.type=o),h&&(T.baseUnit=h),g!==""&&(T.conversionFactor=Number(g)),x&&(T.isBaseUnit=!0),Object.keys(v).length>0&&(T.custom_fields=v);const H=await le.post("/units",T);if(H.error)throw new Error(H.message||"Failed to add unit");X(),M({message:"Unit created",variant:"success"}),await q()}catch(T){z(T.message),M({message:T.message||"Failed to add unit",variant:"error"})}},Z=async T=>{if(!R){z("You don't have permission to delete units.");return}z(null);try{const H=await le.delete(`/units/${encodeURIComponent(T)}`);if(H.error)throw new Error(H.message||"Failed to delete unit");M({message:"Unit deleted",variant:"success"}),await q()}catch(H){z(H.message),M({message:H.message||"Failed to delete unit",variant:"error"})}},be=async()=>{if(B){if(!L){z("You don't have permission to edit units.");return}z(null);try{const T={code:B.code,name:l,type:o,baseUnit:h,isBaseUnit:x,isActive:y,updatedAt:new Date().toISOString()};g!==""&&(T.conversionFactor=Number(g)),Object.keys(v).length>0&&(T.custom_fields=v);const H=await le.put(`/units/${encodeURIComponent(B.id)}`,T);if(H.error)throw new Error(H.message||"Failed to update unit");X(),M({message:"Unit updated",variant:"success"}),await q()}catch(T){z(T.message),M({message:T.message||"Failed to update unit",variant:"error"})}}},X=()=>{i(""),u(""),m(""),d(""),p(""),A(!1),N(!0),j({}),C({}),S(!1),E(null)},ve=T=>{var H;if(!L){z("You don't have permission to edit units.");return}i(T.code),u(T.name),m(T.type||""),d(T.baseUnit||""),p(((H=T.conversionFactor)==null?void 0:H.toString())||""),A(!!T.isBaseUnit),N(T.isActive!==!1),j(T.custom_fields||{}),E(T),S(!0)},ee=(T,H)=>{j(ne=>({...ne,[T]:H})),D[T]&&C(ne=>{const ue={...ne};return delete ue[T],ue})},me=async()=>{await q()},se=async()=>{await q()},Q=async()=>{await q()},W=async T=>{try{const H=await T.text();let ne=[];if(T.name.endsWith(".json"))ne=JSON.parse(H);else if(T.name.endsWith(".csv")){const ue=H.split(`
`),Ce=ue[0].split(",").map(ke=>ke.replace(/"/g,"").trim());ne=ue.slice(1).filter(ke=>ke.trim()).map(ke=>{const $e=ke.split(",").map(J=>J.replace(/"/g,"").trim()),$={};return Ce.forEach((J,O)=>{$[J.toLowerCase().replace(/\s+/g,"")]=$e[O]}),$})}for(const ue of ne){const Ce={code:ue.code||ue.id,name:ue.name,type:ue.type,baseUnit:ue.baseunit||ue.base_unit,conversionFactor:ue.conversionfactor||ue.conversion_factor?Number(ue.conversionfactor||ue.conversion_factor):void 0,isBaseUnit:ue.isbaseunit||ue.is_base_unit==="Yes"||ue.isbaseunit==="Yes",isActive:ue.isactive||ue.is_active!=="Inactive",createdDate:new Date().toISOString(),updatedDate:new Date().toISOString()},ke=await le.post("/units",Ce);if(ke.error)throw new Error(`Failed to import unit ${Ce.code}: ${ke.message}`)}M({message:`${ne.length} units imported successfully`,variant:"success"}),await q()}catch(H){throw M({message:`Import failed: ${H.message}`,variant:"error"}),H}},K=[{key:"code",header:"Code / ID",width:"120px"},{key:"name",header:"Name",width:"150px"},{key:"type",header:"Type",width:"120px"},{key:"baseUnit",header:"Base Unit",width:"120px"},{key:"conversionFactor",header:"Conversion Factor",width:"140px",render:T=>T.conversionFactor||"-"},{key:"isBaseUnit",header:"Is Base Unit",width:"120px",render:T=>T.isBaseUnit?"Yes":"No"},...a.filter(T=>T.isActive).map(T=>({key:`custom_fields.${T.fieldName}`,header:T.fieldLabel,width:"120px",render:H=>{var ue;const ne=(ue=H.custom_fields)==null?void 0:ue[T.fieldName];return ne==null||ne===""?"-":T.fieldType==="checkbox"?ne?"Yes":"No":String(ne)}}))],I=[{key:"type",label:"All types",options:[{value:"",label:"All types"},{value:"Weight",label:"Weight"},{value:"Volume",label:"Volume"},{value:"Length",label:"Length"},{value:"Count",label:"Count"},{value:"Area",label:"Area"},{value:"Time",label:"Time"}]},{key:"isActive",label:"All status",options:[{value:"",label:"All status"},{value:"true",label:"Active"},{value:"false",label:"Inactive"}]},{key:"isBaseUnit",label:"Base Unit",options:[{value:"",label:"All"},{value:"true",label:"Base Units"},{value:"false",label:"Non-Base Units"}]}],U=a.filter(T=>T.isActive).map(T=>({fieldName:T.fieldName,fieldLabel:T.fieldLabel,fieldType:T.fieldType,isRequired:T.isRequired,defaultValue:T.defaultValue,options:T.options,validationRules:T.validationRules,displayOrder:T.displayOrder,groupName:T.groupName,description:T.description,value:v[T.fieldName],error:D[T.fieldName]})),ce=e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsx(ie,{label:"Unit Code",value:n,onChange:T=>i(T.target.value),placeholder:"e.g., kg",disabled:!!B,required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"Unit Name",value:l,onChange:T=>u(T.target.value),placeholder:"e.g., Kilogram",required:!0})}),e.jsx("div",{children:e.jsx(Ae,{label:"Type",value:o,onChange:T=>m(T.target.value),options:[{value:"",label:""},{value:"Weight",label:"Weight"},{value:"Volume",label:"Volume"},{value:"Length",label:"Length"},{value:"Count",label:"Count"},{value:"Area",label:"Area"},{value:"Time",label:"Time"}]})}),e.jsx("div",{children:e.jsx(ie,{label:"Base Unit",list:"unit-codes",value:h,onChange:T=>d(T.target.value),placeholder:"e.g., g"})}),e.jsx("div",{children:e.jsx(ie,{label:"Conversion Factor",value:g,onChange:T=>p(T.target.value),placeholder:"to base (e.g., 1000)",type:"number"})}),e.jsx("div",{className:"flex flex-col gap-3 justify-center",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:T=>A(T.target.checked)}),"Base Unit"]}),e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:y,onChange:T=>N(T.target.checked)}),"Active"]})]})})]})]}),U.length>0&&e.jsx("div",{children:e.jsx(Ds,{fields:U,values:v,errors:D,onChange:ee})}),e.jsxs("div",{className:"flex gap-2",children:[(B?L:_)&&e.jsx(xe,{onClick:B?be:V,children:B?"Update Unit":"Add Unit"}),e.jsx(xe,{variant:"outline",onClick:X,children:"Cancel"})]})]});return k?e.jsx("div",{className:"p-1",children:e.jsx(zu,{onFieldCreated:me,onFieldUpdated:se,onFieldDeleted:Q,onClose:()=>G(!1)})}):e.jsxs(e.Fragment,{children:[e.jsx(gt,{title:"Units Master",items:t,columns:K,rowId:T=>T.id,searchKeys:["code","name","type","baseUnit"],filters:I,loading:f,error:b,onAdd:_?()=>{X(),E(null),S(!0)}:void 0,onEdit:L?ve:void 0,onDelete:R?Z:void 0,onDeleteMany:R?async T=>{for(const H of T)await Z(H);await q()}:void 0,onImport:W,exportHeaders:["Code","Name","Type","Base Unit","Conversion Factor","Is Base Unit","Status","Created Date","Updated Date",...a.filter(T=>T.isActive).map(T=>T.fieldLabel)],exportData:T=>T.map(H=>{var ne;return[H.code,H.name,H.type||"",H.baseUnit||"",((ne=H.conversionFactor)==null?void 0:ne.toString())||"",H.isBaseUnit?"Yes":"No",H.isActive?"Active":"Inactive",H.createdAt||"",H.updatedAt||"",...a.filter(ue=>ue.isActive).map(ue=>{var ke;const Ce=(ke=H.custom_fields)==null?void 0:ke[ue.fieldName];return Ce==null||Ce===""?"":ue.fieldType==="checkbox"?Ce?"Yes":"No":String(Ce)})]}),additionalActions:[{label:"Manage Custom Fields",onClick:()=>G(!0),variant:"outline",icon:e.jsx(kt,{size:16})}]}),e.jsx(Ue,{open:P,onClose:()=>{S(!1),E(null)},title:B?`Edit Unit: ${B.code}`:"Create New Unit",size:"lg",children:ce})]})}function _u(){const[t,s]=c.useState([]),[a,r]=c.useState([]),[n,i]=c.useState([]),[l,u]=c.useState(""),[o,m]=c.useState(""),[h,d]=c.useState(""),[g,p]=c.useState("supplier"),[x,A]=c.useState(""),[y,N]=c.useState(""),[v,j]=c.useState(""),[D,C]=c.useState({street:"",city:"",state:"",zipCode:"",country:"USA"}),[f,w]=c.useState(""),[b,z]=c.useState("Net 30"),[P,S]=c.useState(0),[k,G]=c.useState("USD"),[B,E]=c.useState("active"),[M,F]=c.useState(5),[_,L]=c.useState(""),[R,q]=c.useState(""),[V,Z]=c.useState({}),[be,X]=c.useState({}),[ve,ee]=c.useState(!0),[me,se]=c.useState(null),[Q,W]=c.useState(!1),[K,I]=c.useState(null),{showToast:U}=at(),{hasPermission:ce}=Ye(),T=ce("vendors_create"),H=ce("vendors_edit"),ne=ce("vendors_delete"),ue=async()=>{var oe;ee(!0);try{const[we,pe,ye]=await Promise.all([le.get("/vendors"),le.get("/users"),le.get("/custom-fields?entity=vendors")]);if(we.error){se(we.message||"Failed to load vendors");return}if(pe.error){se(pe.message||"Failed to load users");return}if(ye.error){se(ye.message||"Failed to load custom fields");return}const Me=(we.data||[]).map(nt=>({...nt,isActive:nt.isActive!==!1,custom_fields:nt.custom_fields||{},createdAt:nt.createdAt||new Date().toISOString(),updatedAt:nt.updatedAt||new Date().toISOString()}));s(Me);const tt=Array.isArray(pe.data)?pe.data:((oe=pe.data)==null?void 0:oe.data)||[];r(tt),i(ye.data||[])}catch(we){se(we.message||"Failed to load vendors")}finally{ee(!1)}};c.useEffect(()=>{ue()},[]);const Ce=async()=>{if(!T){se("You don't have permission to create vendors.");return}se(null);try{const oe={code:l,name:o,description:h,vendorType:g,contactPerson:x,email:y,phone:v,address:D,taxId:f,paymentTerms:b,creditLimit:P,currency:k,status:B,rating:M,notes:_,createdBy:R||null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};Object.keys(V).length>0&&(oe.custom_fields=V);const we=await le.post("/vendors",oe);if(we.error)throw new Error(we.message||"Failed to add vendor");$(),U({message:"Vendor created",variant:"success"}),await ue()}catch(oe){se(oe.message),U({message:oe.message||"Failed to add vendor",variant:"error"})}},ke=async oe=>{if(!ne){se("You don't have permission to delete vendors.");return}se(null);try{const we=await le.delete(`/vendors/${encodeURIComponent(oe)}`);if(we.error)throw new Error(we.message||"Failed to delete vendor");U({message:"Vendor deleted",variant:"success"}),await ue()}catch(we){se(we.message),U({message:we.message||"Failed to delete vendor",variant:"error"})}},$e=async()=>{if(K){if(!H){se("You don't have permission to edit vendors.");return}se(null);try{const oe={code:K.code,name:o,description:h,vendorType:g,contactPerson:x,email:y,phone:v,address:D,taxId:f,paymentTerms:b,creditLimit:P,currency:k,status:B,rating:M,notes:_,updatedAt:new Date().toISOString()};Object.keys(V).length>0&&(oe.custom_fields=V);const we=await le.put(`/vendors/${encodeURIComponent(K.id)}`,oe);if(we.error)throw new Error(we.message||"Failed to update vendor");$(),U({message:"Vendor updated",variant:"success"}),await ue()}catch(oe){se(oe.message),U({message:oe.message||"Failed to update vendor",variant:"error"})}}},$=()=>{u(""),m(""),d(""),p("supplier"),A(""),N(""),j(""),C({street:"",city:"",state:"",zipCode:"",country:"USA"}),w(""),z("Net 30"),S(0),G("USD"),E("active"),F(5),L(""),q(""),Z({}),X({}),W(!1),I(null)},J=oe=>{if(!H){se("You don't have permission to edit vendors.");return}u(oe.code),m(oe.name),d(oe.description||""),p(oe.vendorType),A(oe.contactPerson),N(oe.email),j(oe.phone),C(oe.address),w(oe.taxId||""),z(oe.paymentTerms||"Net 30"),S(oe.creditLimit||0),G(oe.currency||"USD"),E(oe.status),F(oe.rating||5),L(oe.notes||""),q(oe.createdBy||""),Z(oe.custom_fields||{}),I(oe),W(!0)},O=(oe,we)=>{Z(pe=>({...pe,[oe]:we})),be[oe]&&X(pe=>{const ye={...pe};return delete ye[oe],ye})},je=async oe=>{try{const we=await oe.text();let pe=[];if(oe.name.endsWith(".json"))pe=JSON.parse(we);else if(oe.name.endsWith(".csv")){const ye=we.split(`
`),Me=ye[0].split(",").map(tt=>tt.replace(/"/g,"").trim());pe=ye.slice(1).filter(tt=>tt.trim()).map(tt=>{const nt=tt.split(",").map(At=>At.replace(/"/g,"").trim()),Rt={};return Me.forEach((At,ge)=>{Rt[At.toLowerCase().replace(/\s+/g,"")]=nt[ge]}),Rt})}for(const ye of pe){const Me={code:ye.code||ye.id,name:ye.name,description:ye.description,vendorType:ye.vendortype||ye.vendor_type||"supplier",contactPerson:ye.contactperson||ye.contact_person,email:ye.email,phone:ye.phone,address:{street:ye.street||ye.address_street,city:ye.city||ye.address_city,state:ye.state||ye.address_state,zipCode:ye.zipcode||ye.address_zipcode,country:ye.country||ye.address_country||"USA"},taxId:ye.taxid||ye.tax_id,paymentTerms:ye.paymentterms||ye.payment_terms||"Net 30",creditLimit:ye.creditlimit||ye.credit_limit||0,currency:ye.currency||"USD",status:ye.status||"active",rating:ye.rating||5,notes:ye.notes,createdDate:new Date().toISOString(),updatedDate:new Date().toISOString()},tt=await le.post("/vendors",Me);if(tt.error)throw new Error(`Failed to import vendor ${Me.code}: ${tt.message}`)}U({message:`${pe.length} vendors imported successfully`,variant:"success"}),await ue()}catch(we){throw U({message:`Import failed: ${we.message}`,variant:"error"}),we}},ae=oe=>new Intl.NumberFormat("en-US",{style:"currency",currency:"CAD",minimumFractionDigits:0,maximumFractionDigits:0}).format(oe),re=oe=>{switch(oe){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"suspended":return"bg-yellow-100 text-yellow-800";case"blacklisted":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Ie=oe=>{switch(oe){case"supplier":return"bg-blue-100 text-blue-800";case"contractor":return"bg-purple-100 text-purple-800";case"service-provider":return"bg-green-100 text-green-800";case"equipment-rental":return"bg-orange-100 text-orange-800";case"consultant":return"bg-indigo-100 text-indigo-800";default:return"bg-gray-100 text-gray-800"}},We=oe=>Array.from({length:5},(we,pe)=>e.jsx("span",{className:pe<oe?"text-yellow-400":"text-gray-300",children:""},pe)),Ke=[{key:"code",header:"Code / ID",width:"120px"},{key:"name",header:"Name",width:"150px"},{key:"vendorType",header:"Type",width:"120px",render:oe=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Ie(oe.vendorType)}`,children:oe.vendorType.replace("-"," ")})},{key:"contactPerson",header:"Contact Person",width:"150px"},{key:"email",header:"Email",width:"200px"},{key:"phone",header:"Phone",width:"120px"},{key:"address",header:"Location",width:"150px",render:oe=>`${oe.address.city}, ${oe.address.state}`},{key:"creditLimit",header:"Credit Limit",width:"120px",render:oe=>oe.creditLimit?ae(oe.creditLimit):"No limit"},{key:"rating",header:"Rating",width:"100px",render:oe=>e.jsxs("div",{className:"flex items-center gap-1",children:[We(oe.rating||0),e.jsxs("span",{className:"text-sm text-gray-500 ml-1",children:["(",oe.rating||0,")"]})]})},{key:"status",header:"Status",width:"100px",render:oe=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${re(oe.status)}`,children:oe.status})},...n.filter(oe=>oe.isActive).map(oe=>({key:`custom_fields.${oe.fieldName}`,header:oe.fieldLabel,width:"120px",render:we=>{var ye;const pe=(ye=we.custom_fields)==null?void 0:ye[oe.fieldName];return pe==null||pe===""?"-":oe.fieldType==="checkbox"?pe?"Yes":"No":String(pe)}}))],st=[{key:"vendorType",label:"All types",options:[{value:"",label:"All types"},{value:"supplier",label:"Supplier"},{value:"contractor",label:"Contractor"},{value:"service-provider",label:"Service Provider"},{value:"equipment-rental",label:"Equipment Rental"},{value:"consultant",label:"Consultant"}]},{key:"status",label:"All status",options:[{value:"",label:"All status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"blacklisted",label:"Blacklisted"}]}],Se=n.filter(oe=>oe.isActive).map(oe=>({fieldName:oe.fieldName,fieldLabel:oe.fieldLabel,fieldType:oe.fieldType,isRequired:oe.isRequired,defaultValue:oe.defaultValue,options:oe.options,validationRules:oe.validationRules,displayOrder:oe.displayOrder,groupName:oe.groupName,description:oe.description,value:V[oe.fieldName],error:be[oe.fieldName]})),ft=e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsx(ie,{label:"Vendor Code",value:l,onChange:oe=>u(oe.target.value),placeholder:"e.g., VENDOR-001",disabled:!!K,required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"Vendor Name",value:o,onChange:oe=>m(oe.target.value),placeholder:"e.g., ABC Construction",required:!0})}),e.jsx("div",{children:e.jsx(Ae,{label:"Vendor Type",value:g,onChange:oe=>p(oe.target.value),options:[{value:"union",label:"Workers Union"},{value:"supplier",label:"Supplier"},{value:"contractor",label:"Contractor"},{value:"service-provider",label:"Service Provider"},{value:"equipment-rental",label:"Equipment Rental"},{value:"consultant",label:"Consultant"}],required:!0})}),e.jsx("div",{children:e.jsx(Ae,{label:"Status",value:B,onChange:oe=>E(oe.target.value),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"blacklisted",label:"Blacklisted"}],required:!0})}),e.jsx("div",{className:"col-span-full",children:e.jsx(ie,{label:"Description",value:h,onChange:oe=>d(oe.target.value),placeholder:"Vendor description"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsx(ie,{label:"Contact Person",value:x,onChange:oe=>A(oe.target.value),placeholder:"Contact person name",required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"Email",value:y,onChange:oe=>N(oe.target.value),placeholder:"email@example.com",type:"email",required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"Phone",value:v,onChange:oe=>j(oe.target.value),placeholder:"Phone number",required:!0})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Address Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"col-span-full",children:e.jsx(ie,{label:"Street Address",value:D.street,onChange:oe=>C(we=>({...we,street:oe.target.value})),placeholder:"Street address",required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"City",value:D.city,onChange:oe=>C(we=>({...we,city:oe.target.value})),placeholder:"City",required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"State",value:D.state,onChange:oe=>C(we=>({...we,state:oe.target.value})),placeholder:"State",required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"ZIP Code",value:D.zipCode,onChange:oe=>C(we=>({...we,zipCode:oe.target.value})),placeholder:"ZIP code",required:!0})}),e.jsx("div",{children:e.jsx(Ae,{label:"Country",value:D.country,onChange:oe=>C(we=>({...we,country:oe.target.value})),options:[{value:"USA",label:"United States"},{value:"Canada",label:"Canada"},{value:"Mexico",label:"Mexico"},{value:"Other",label:"Other"}],required:!0})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Financial Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsx(Ae,{label:"Payment Terms",value:b,onChange:oe=>z(oe.target.value),options:[{value:"Net 15",label:"Net 15"},{value:"Net 30",label:"Net 30"},{value:"Net 45",label:"Net 45"},{value:"Net 60",label:"Net 60"},{value:"Due on Receipt",label:"Due on Receipt"},{value:"2/10 Net 30",label:"2/10 Net 30"}],required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"Credit Limit",value:P.toString(),onChange:oe=>S(parseFloat(oe.target.value)||0),placeholder:"0",type:"number",min:"0",step:"0.01"})}),e.jsx("div",{children:e.jsx(Ae,{label:"Currency",value:k,onChange:oe=>G(oe.target.value),options:[{value:"USD",label:"USD - US Dollar"},{value:"CAD",label:"CAD - Canadian Dollar"},{value:"EUR",label:"EUR - Euro"},{value:"GBP",label:"GBP - British Pound"}],required:!0})}),e.jsx("div",{children:e.jsx(Ae,{label:"Rating",value:M.toString(),onChange:oe=>F(parseInt(oe.target.value)),options:[{value:"1",label:"1 Star"},{value:"2",label:"2 Stars"},{value:"3",label:"3 Stars"},{value:"4",label:"4 Stars"},{value:"5",label:"5 Stars"}]})})]})]}),e.jsx("div",{children:e.jsx(ie,{label:"Notes",value:_,onChange:oe=>L(oe.target.value),placeholder:"Additional notes about the vendor"})}),Se.length>0&&e.jsx("div",{children:e.jsx(Ds,{fields:Se,values:V,errors:be,onChange:O})}),e.jsxs("div",{className:"flex gap-2",children:[(K?H:T)&&e.jsx(xe,{onClick:K?$e:Ce,children:K?"Update Vendor":"Add Vendor"}),e.jsx(xe,{variant:"outline",onClick:$,children:"Cancel"})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(gt,{title:"Vendors Master",items:t,columns:Ke,rowId:oe=>oe.id,searchKeys:["code","name","contactPerson","email"],filters:st,loading:ve,error:me,onAdd:T?()=>{$(),I(null),W(!0)}:void 0,onEdit:H?J:void 0,onDelete:ne?ke:void 0,onDeleteMany:ne?async oe=>{for(const we of oe)await ke(we);await ue()}:void 0,onImport:je,exportHeaders:["Code","Name","Type","Contact Person","Email","Phone","Street","City","State","ZIP Code","Country","Tax ID","Payment Terms","Credit Limit","Currency","Status","Rating","Notes","Created Date","Updated Date",...n.filter(oe=>oe.isActive).map(oe=>oe.fieldLabel)],exportData:oe=>oe.map(we=>[we.code,we.name,we.vendorType,we.contactPerson,we.email,we.phone,we.address.street,we.address.city,we.address.state,we.address.zipCode,we.address.country,we.taxId||"",we.paymentTerms||"Net 30",we.creditLimit||0,we.currency||"USD",we.status,we.rating||5,we.notes||"",we.createdAt||"",we.updatedAt||"",...n.filter(pe=>pe.isActive).map(pe=>{var Me;const ye=(Me=we.custom_fields)==null?void 0:Me[pe.fieldName];return ye==null||ye===""?"":pe.fieldType==="checkbox"?ye?"Yes":"No":String(ye)})])}),e.jsx(Ue,{open:Q,onClose:()=>{W(!1),I(null)},title:K?`Edit Vendor: ${K.code}`:"Create New Vendor",size:"xl",children:ft})]})}const Bu=[{id:"units",label:"Units",icon:kt,permissions:["units_view"]},{id:"divisions",label:"Divisions",icon:il,permissions:["divisions_view"]},{id:"categories",label:"Categories",icon:fl,permissions:["categories_view"]},{id:"costcodes",label:"Cost Codes",icon:Ma,permissions:["cost_codes_view"]},{id:"vendors",label:"Vendors",icon:gl,permissions:["vendors_view"]},{id:"employees",label:"Employees",icon:ot,permissions:["employee_view"]}],Uu=()=>{const[t,s]=c.useState("units"),{hasPermission:a}=Ye(),{theme:r}=Pe();c.useEffect(()=>{document.title="Data Management - Space Rivers"},[]);const n=()=>{switch(t){case"units":return e.jsx($u,{});case"divisions":return e.jsx(Mu,{});case"categories":return e.jsx(Pu,{});case"costcodes":return e.jsx(Eu,{});case"vendors":return e.jsx(_u,{});case"employees":return e.jsx(Ou,{});default:return null}};return e.jsx(ct,{maxWidth:"full",padding:"md",children:e.jsx("div",{className:"bg-white p-6 rounded-xl",children:e.jsxs(Be,{title:"Data Management",variant:"default",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"px-6",children:e.jsx("nav",{className:"flex space-x-8",children:Bu.map(i=>{const l=i.icon,u=t===i.id;return i.permissions.some(m=>a(m))?e.jsxs("button",{onClick:()=>s(i.id),className:"px-3 py-2 border-b-2 font-semibold text-sm flex items-center gap-2 transition-colors",style:{borderColor:u?(r==null?void 0:r.theme.colors.primary[500])||"#3b82f6":"transparent",color:u?(r==null?void 0:r.theme.colors.primary[600])||"#2563eb":"#6b7280"},children:[e.jsx(l,{className:"w-4 h-4"}),i.label]},i.id):null})})})}),e.jsx("div",{className:"overflow-y-auto sidebar-scroll master-content",children:n()})]})})})},qu=({checked:t,onChange:s,disabled:a=!1,size:r="md",variant:n="primary",label:i,description:l,className:u=""})=>{const o=ro(n,r),{theme:m}=Pe(),h=()=>{a||s(!t)};return e.jsxs("div",{className:`flex items-center ${u}`,children:[e.jsx("button",{type:"button",className:`${o.track} ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,style:{backgroundColor:t?(m==null?void 0:m.theme.colors.primary[600])||"#2563eb":(m==null?void 0:m.theme.colors.secondary[200])||"#e5e7eb"},onClick:h,disabled:a,role:"switch","aria-checked":t,children:e.jsx("span",{className:`${o.thumb} ${t?"translate-x-4":"translate-x-0"}`})}),(i||l)&&e.jsxs("div",{className:"ml-3",children:[i&&e.jsx("label",{className:"text-sm font-medium text-gray-700 cursor-pointer",onClick:h,style:{fontFamily:m==null?void 0:m.typography.fontFamily.primary,fontSize:m==null?void 0:m.typography.fontSize.sm},children:i}),l&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",style:{fontSize:m==null?void 0:m.typography.fontSize.xs},children:l})]})]})},Hu=({onClose:t})=>{const[s,a]=c.useState([]),[r,n]=c.useState([]),[i,l]=c.useState([]),[u,o]=c.useState(!1),[m,h]=c.useState(""),[d,g]=c.useState(""),[p,x]=c.useState(null),[A,y]=c.useState(!1),[N,v]=c.useState(null),[j,D]=c.useState("grid"),[C,f]=c.useState({code:"",name:"",status:"draft",description:"",color:"#3B82F6",isActive:!0,duration:0,budgetAmount:0,projectId:"",customFields:{}}),{showToast:w}=at(),b=[{value:"",label:"All Statuses"},{value:"draft",label:"Draft"},{value:"submitted",label:"Submitted"},{value:"approved",label:"Approved"},{value:"published",label:"Published"},{value:"in-progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],z={draft:"bg-gray-100 text-gray-800",submitted:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",published:"bg-purple-100 text-purple-800","in-progress":"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"},P=async()=>{o(!0);try{const E=new URLSearchParams;m&&E.append("q",m),d&&E.append("status",d),p!==null&&E.append("isActive",p.toString());const[M,F]=await Promise.all([le.get(`/phases?${E.toString()}`),le.get("/projects")]);if(M.error)w({message:"Failed to load phases: "+M.error,variant:"error"});else{const _=Array.isArray(M.data)?M.data:[];a(_),n(_)}if(F.error)console.error("Projects API error:",F.error),w({message:"Failed to load projects: "+F.error,variant:"error"});else{console.log("Projects response:",F.data);const _=Array.isArray(F.data)?F.data:[];console.log("Projects data:",_),l(_)}}catch(E){console.error("Error loading data:",E),w({message:"Error loading data",variant:"error"})}finally{o(!1)}};c.useEffect(()=>{P()},[m,d,p]);const S=()=>{v(null),f({code:"",name:"",status:"draft",description:"",color:"#3B82F6",isActive:!0,duration:0,budgetAmount:0,projectId:"",customFields:{}}),y(!0)},k=E=>{v(E),f({...E,customFields:E.customFields||{}}),y(!0)},G=async E=>{if(window.confirm(`Are you sure you want to delete phase "${E.name}"?`))try{const M=await le.delete(`/phases/${E.id}`);M.error?w({message:"Failed to delete phase: "+M.error,variant:"error"}):(w({message:"Phase deleted successfully",variant:"success"}),P())}catch(M){console.error("Error deleting phase:",M),w({message:"Error deleting phase",variant:"error"})}},B=async E=>{if(E.preventDefault(),!C.name||!C.code||!C.projectId){w({message:"Name, code, and project are required",variant:"error"});return}try{console.log("Submitting phase data:",C);let M;N?M=await le.put(`/phases/${N.id}`,C):M=await le.post("/phases",C),console.log("API response:",M),M.error?(console.error("API error:",M.error),w({message:"Failed to save phase: "+M.error,variant:"error"})):(w({message:`Phase ${N?"updated":"created"} successfully`,variant:"success"}),y(!1),P())}catch(M){console.error("Error saving phase:",M),w({message:"Error saving phase",variant:"error"})}};return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Phase Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage project phases and their configurations"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>D("grid"),className:`px-3 py-2 text-sm font-medium transition-all flex items-center gap-2 ${j==="grid"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-50"}`,title:"Grid View",children:[e.jsx(mr,{size:16}),"Grid"]}),e.jsxs("button",{onClick:()=>D("list"),className:`px-3 py-2 text-sm font-medium transition-all flex items-center gap-2 ${j==="list"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-50"}`,title:"List View",children:[e.jsx(Ra,{size:16}),"List"]})]}),e.jsxs(xe,{onClick:S,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"Add Phase"]})]})]})}),e.jsx("div",{className:"mb-6 bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(xt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(ie,{type:"text",placeholder:"Search phases...",value:m,onChange:E=>h(E.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx(Ae,{value:d,onChange:E=>g(E.target.value),options:b})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Active Status"}),e.jsx(Ae,{value:p===null?"":p.toString(),onChange:E=>x(E.target.value===""?null:E.target.value==="true"),options:[{value:"",label:"All"},{value:"true",label:"Active"},{value:"false",label:"Inactive"}]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(xe,{onClick:P,variant:"outline",className:"w-full",children:[e.jsx(ur,{className:"w-4 h-4 mr-2"}),"Apply Filters"]})})]})}),j==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(E=>e.jsxs(vt,{className:"p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:E.color}}),e.jsx("h3",{className:"font-semibold text-gray-900",children:E.name})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:E.code}),E.project&&e.jsxs("p",{className:"text-sm text-blue-600 mb-2",children:["Project: ",E.project.name," (",E.project.code,")"]}),e.jsx(Vs,{className:z[E.status]||"bg-gray-100 text-gray-800",children:E.status})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>k(E),className:"text-blue-600 hover:text-blue-700",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>G(E),className:"text-red-600 hover:text-red-700",children:e.jsx(lt,{className:"w-4 h-4"})})]})]}),E.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:E.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[E.duration&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Oe,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[E.duration," days"]})]}),E.budgetAmount&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(js,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:["$",E.budgetAmount.toLocaleString()]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:E.isActive?"Active":"Inactive"}),e.jsx("span",{className:"text-xs text-gray-500",children:E.createdDate?new Date(E.createdDate).toLocaleDateString():""})]})})]},E.id))}):e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Budget"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Active"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(E=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:E.color}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.name}),E.description&&e.jsx("div",{className:"text-xs text-gray-500 truncate max-w-xs",children:E.description})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-mono",children:E.code})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E.project?e.jsx("span",{className:"text-sm text-gray-900",children:E.project.name}):e.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z[E.status]||"bg-gray-100 text-gray-800"}`,children:E.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center text-sm text-gray-600",children:E.duration?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[E.duration," days"]})]}):e.jsx("span",{className:"text-gray-400",children:"-"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center text-sm text-gray-600",children:E.budgetAmount?e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:["$",E.budgetAmount.toLocaleString()]})]}):e.jsx("span",{className:"text-gray-400",children:"-"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:E.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>k(E),className:"text-blue-600 hover:text-blue-700",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>G(E),className:"text-red-600 hover:text-red-700",children:e.jsx(lt,{className:"w-4 h-4"})})]})})]},E.id))})]})})}),r.length===0&&!u&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(Je,{className:"w-12 h-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No phases found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:m||d||p!==null?"Try adjusting your search criteria":"Get started by creating your first phase"}),!m&&!d&&p===null&&e.jsxs(xe,{onClick:S,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"Add Phase"]})]}),e.jsx(Ue,{open:A,onClose:()=>y(!1),title:N?"Edit Phase":"Create Phase",size:"xl",children:e.jsxs("form",{onSubmit:B,className:"space-y-6 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phase Code *"}),e.jsx(ie,{type:"text",value:C.code||"",onChange:E=>f(M=>({...M,code:E.target.value})),placeholder:"Enter phase code",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phase Name *"}),e.jsx(ie,{type:"text",value:C.name||"",onChange:E=>f(M=>({...M,name:E.target.value})),placeholder:"Enter phase name",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project *"}),e.jsx(Ae,{value:C.projectId||"",onChange:E=>f(M=>({...M,projectId:E.target.value})),options:[{value:"",label:i.length===0?"No projects available":"Select a project"},...i.map(E=>({value:E.id,label:`${E.name} (${E.code})`}))],required:!0,disabled:i.length===0}),i.length===0&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:"No projects available. Please create a project first."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:C.description||"",onChange:E=>f(M=>({...M,description:E.target.value})),placeholder:"Enter phase description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx(Ae,{value:C.status||"draft",onChange:E=>f(M=>({...M,status:E.target.value})),options:b.filter(E=>E.value!=="")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:C.color||"#3B82F6",onChange:E=>f(M=>({...M,color:E.target.value})),className:"w-10 h-10 border border-gray-300 rounded cursor-pointer"}),e.jsx(ie,{type:"text",value:C.color||"#3B82F6",onChange:E=>f(M=>({...M,color:E.target.value})),placeholder:"#3B82F6",className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (days)"}),e.jsx(ie,{type:"number",value:C.duration||0,onChange:E=>f(M=>({...M,duration:parseInt(E.target.value)||0})),placeholder:"0",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget Amount"}),e.jsx(ie,{type:"number",value:C.budgetAmount||0,onChange:E=>f(M=>({...M,budgetAmount:parseFloat(E.target.value)||0})),placeholder:"0.00",min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(qu,{checked:C.isActive||!1,onChange:E=>f(M=>({...M,isActive:E}))}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx(xe,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(xe,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white",children:N?"Update Phase":"Create Phase"})]})]})})]})};function Wu(){const[t,s]=c.useState([]),[a,r]=c.useState([]),[n,i]=c.useState(""),[l,u]=c.useState(""),[o,m]=c.useState(""),[h,d]=c.useState("#3B82F6"),[g,p]=c.useState("draft"),[x,A]=c.useState(""),[y,N]=c.useState({address:"",latitude:0,longitude:0,city:"",state:"",country:""}),[v,j]=c.useState(0),[D,C]=c.useState(""),[f,w]=c.useState(""),[b,z]=c.useState(0),[P,S]=c.useState(!0),[k,G]=c.useState({}),[B,E]=c.useState({}),[M,F]=c.useState(!0),[_,L]=c.useState(null),[R,q]=c.useState(!1),[V,Z]=c.useState(null),[be,X]=c.useState("grid"),{showToast:ve}=at(),{hasPermission:ee}=Ye(),{theme:me}=Pe(),se=ee("projects_create"),Q=ee("projects_edit"),W=ee("projects_delete"),K=["#3B82F6","#8B5CF6","#14B8A6","#F59E0B","#EF4444","#10B981","#F97316","#8B5A2B","#6B7280","#EC4899"],I={draft:"bg-gray-100 text-gray-800",submitted:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",published:"bg-purple-100 text-purple-800","in-progress":"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"},U=async()=>{F(!0);try{const[O,je]=await Promise.all([le.get("/projects"),le.get("/custom-fields?entity=projects")]);if(O.error){L(O.message||"Failed to load projects");return}if(je.error){L(je.message||"Failed to load custom fields");return}const ae=(O.data||[]).map(re=>({...re,isActive:re.isActive!==!1,custom_fields:re.custom_fields||{},createdAt:re.createdAt||new Date().toISOString(),updatedAt:re.updatedAt||new Date().toISOString()}));s(ae),r(je.data||[])}catch(O){L(O.message||"Failed to load projects")}finally{F(!1)}};c.useEffect(()=>{U()},[]);const ce=async()=>{if(!se){L("You don't have permission to create projects.");return}L(null);try{const O={code:n,name:l,description:o,color:h,status:g,client:x,location:y,duration:v,startDate:D||null,endDate:f||null,budgetAmount:b,isActive:P,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};Object.keys(k).length>0&&(O.custom_fields=k);const je=await le.post("/projects",O);if(je.error)throw new Error(je.message||"Failed to add project");ne(),ve({message:"Project created",variant:"success"}),await U()}catch(O){L(O.message),ve({message:O.message||"Failed to add project",variant:"error"})}},T=async O=>{if(!W){L("You don't have permission to delete projects.");return}L(null);try{const je=await le.delete(`/projects/${encodeURIComponent(O)}`);if(je.error)throw new Error(je.message||"Failed to delete project");ve({message:"Project deleted",variant:"success"}),await U()}catch(je){L(je.message),ve({message:je.message||"Failed to delete project",variant:"error"})}},H=async()=>{if(V){if(!Q){L("You don't have permission to edit projects.");return}L(null);try{const O={code:V.code,name:l,description:o,color:h,status:g,client:x,location:y,duration:v,startDate:D||null,endDate:f||null,budgetAmount:b,isActive:P,updatedAt:new Date().toISOString()};Object.keys(k).length>0&&(O.custom_fields=k);const je=await le.put(`/projects/${encodeURIComponent(V.id)}`,O);if(je.error)throw new Error(je.message||"Failed to update project");ne(),ve({message:"Project updated",variant:"success"}),await U()}catch(O){L(O.message),ve({message:O.message||"Failed to update project",variant:"error"})}}},ne=()=>{i(""),u(""),m(""),d("#3B82F6"),p("draft"),A(""),N({address:"",latitude:0,longitude:0,city:"",state:"",country:""}),j(0),C(""),w(""),z(0),S(!0),G({}),E({}),q(!1),Z(null)},ue=O=>{if(!Q){L("You don't have permission to edit projects.");return}i(O.code),u(O.name),m(O.description||""),d(O.color||"#3B82F6"),p(O.status),A(O.client||""),N(O.location||{address:"",latitude:0,longitude:0,city:"",state:"",country:""}),j(O.duration||0),C(O.startDate||""),w(O.endDate||""),z(O.budgetAmount||0),S(O.isActive!==!1),G(O.custom_fields||{}),Z(O),q(!0)},Ce=async O=>{window.confirm("Are you sure you want to delete this project?")&&await T(O)},ke=(O,je)=>{G(ae=>({...ae,[O]:je})),B[O]&&E(ae=>{const re={...ae};return delete re[O],re})},$e=O=>{switch(O){case"draft":return"bg-gray-100 text-gray-600";case"submitted":return"bg-blue-100 text-blue-600";case"approved":return"bg-green-100 text-green-600";case"published":return"bg-purple-100 text-purple-600";case"in-progress":return"bg-yellow-100 text-yellow-600";case"completed":return"bg-green-100 text-green-600";case"cancelled":return"bg-red-100 text-red-600";default:return"bg-gray-100 text-gray-600"}};[...a.filter(O=>O.isActive).map(O=>({key:`custom_fields.${O.fieldName}`,header:O.fieldLabel,width:"120px",render:je=>{var re;const ae=(re=je.custom_fields)==null?void 0:re[O.fieldName];return ae==null||ae===""?"-":O.fieldType==="checkbox"?ae?"Yes":"No":String(ae)}}))];const $=a.filter(O=>O.isActive).map(O=>({fieldName:O.fieldName,fieldLabel:O.fieldLabel,fieldType:O.fieldType,isRequired:O.isRequired,defaultValue:O.defaultValue,options:O.options,validationRules:O.validationRules,displayOrder:O.displayOrder,groupName:O.groupName,description:O.description,value:k[O.fieldName],error:B[O.fieldName]})),J=e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold mb-4",style:{color:me==null?void 0:me.theme.colors.secondary[600]},children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsx("div",{children:e.jsx(ie,{label:"Project Code",value:n,onChange:O=>i(O.target.value),placeholder:"e.g., PRJ001",disabled:!!V,required:!0})}),e.jsx("div",{children:e.jsx(ie,{label:"Project Name",value:l,onChange:O=>u(O.target.value),placeholder:"e.g., Office Building Construction",required:!0})}),e.jsx("div",{children:e.jsx(Ae,{label:"Status",value:g,onChange:O=>p(O.target.value),options:[{value:"draft",label:"Draft"},{value:"submitted",label:"Submitted"},{value:"approved",label:"Approved"},{value:"published",label:"Published"},{value:"in-progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]})}),e.jsx("div",{className:"col-span-full",children:e.jsx(ie,{label:"Description",value:o,onChange:O=>m(O.target.value),placeholder:"Project description"})}),e.jsx("div",{children:e.jsx(ie,{label:"Duration (days)",value:v.toString(),onChange:O=>j(parseInt(O.target.value)||0),placeholder:"30",type:"number",min:"0"})}),e.jsx("div",{children:e.jsx(ie,{label:"Budget Amount",value:b.toString(),onChange:O=>z(parseFloat(O.target.value)||0),placeholder:"100000",type:"number",min:"0",step:"1000"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Client Information"}),e.jsx("div",{children:e.jsx(ie,{label:"Client",value:x,onChange:O=>A(O.target.value),placeholder:"Client name or company"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-1",children:[e.jsx("div",{className:"col-span-full",children:e.jsx(ie,{label:"Address",value:y.address,onChange:O=>N(je=>({...je,address:O.target.value})),placeholder:"Project address"})}),e.jsx("div",{children:e.jsx(ie,{label:"City",value:y.city,onChange:O=>N(je=>({...je,city:O.target.value})),placeholder:"City"})}),e.jsx("div",{children:e.jsx(ie,{label:"State/Province",value:y.state,onChange:O=>N(je=>({...je,state:O.target.value})),placeholder:"State or Province"})}),e.jsx("div",{children:e.jsx(ie,{label:"Country",value:y.country,onChange:O=>N(je=>({...je,country:O.target.value})),placeholder:"Country"})}),e.jsx("div",{children:e.jsx(ie,{label:"Latitude",value:y.latitude.toString(),onChange:O=>N(je=>({...je,latitude:parseFloat(O.target.value)||0})),placeholder:"0.000000",type:"number",step:"any"})}),e.jsx("div",{children:e.jsx(ie,{label:"Longitude",value:y.longitude.toString(),onChange:O=>N(je=>({...je,longitude:parseFloat(O.target.value)||0})),placeholder:"0.000000",type:"number",step:"any"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold mb-4",style:{color:me==null?void 0:me.theme.colors.secondary[600]},children:"Timeline"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx(ie,{label:"Start Date",value:D,onChange:O=>C(O.target.value),type:"date"})}),e.jsx("div",{children:e.jsx(ie,{label:"End Date",value:f,onChange:O=>w(O.target.value),type:"date"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-4",style:{color:me==null?void 0:me.theme.colors.secondary[600]},children:"Project Color"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:K.map(O=>e.jsx("button",{type:"button",onClick:()=>d(O),className:`w-8 h-8 rounded-lg border-2 transition-all duration-200 ${h===O?"border-gray-400 scale-110 shadow-md":"border-gray-200 hover:border-gray-300"}`,style:{backgroundColor:O},children:h===O&&e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})},O))})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:P,onChange:O=>S(O.target.checked)}),"Active"]})}),$.length>0&&e.jsx("div",{children:e.jsx(Ds,{fields:$,values:k,errors:B,onChange:ke})}),e.jsxs("div",{className:"flex gap-2",children:[(V?Q:se)&&e.jsx(xe,{onClick:V?H:ce,children:V?"Update Project":"Add Project"}),e.jsx(xe,{variant:"outline",onClick:ne,children:"Cancel"})]})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage projects and their configurations"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>X("grid"),className:`px-3 py-2 text-sm font-medium transition-all flex items-center gap-2 ${be==="grid"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-50"}`,title:"Grid View",children:[e.jsx(mr,{size:16}),"Grid"]}),e.jsxs("button",{onClick:()=>X("list"),className:`px-3 py-2 text-sm font-medium transition-all flex items-center gap-2 ${be==="list"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-50"}`,title:"List View",children:[e.jsx(Ra,{size:16}),"List"]})]}),se&&e.jsxs(xe,{onClick:()=>{ne(),Z(null),q(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"Add Project"]})]})]})}),_&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:_}),be==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(O=>e.jsxs(vt,{className:"p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:O.color}}),e.jsx("h3",{className:"font-semibold text-gray-900",children:O.name})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:O.code}),O.client&&e.jsxs("p",{className:"text-sm text-blue-600 mb-2",children:["Client: ",O.client]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I[O.status]||"bg-gray-100 text-gray-800"}`,children:O.status})]}),e.jsxs("div",{className:"flex gap-1",children:[Q&&e.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>ue(O),className:"text-blue-600 hover:text-blue-700",children:e.jsx(Tt,{className:"w-4 h-4"})}),W&&e.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>Ce(O.id),className:"text-red-600 hover:text-red-700",children:e.jsx(lt,{className:"w-4 h-4"})})]})]}),O.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:O.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-4",children:[O.duration&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Je,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[O.duration," days"]})]}),O.budgetAmount&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(js,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:["$",O.budgetAmount.toLocaleString()]})]})]}),O.location&&e.jsxs("div",{className:"flex items-center text-gray-600 text-sm mb-4",children:[e.jsx(Nt,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{className:"truncate",children:[O.location.city,", ",O.location.state]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${O.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:O.isActive?"Active":"Inactive"}),e.jsx("span",{className:"text-xs text-gray-500",children:O.createdAt?new Date(O.createdAt).toLocaleDateString():""})]})})]},O.id))}):e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Budget"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Active"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(O=>{var je;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:O.color}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:O.name}),O.description&&e.jsx("div",{className:"text-xs text-gray-500 truncate max-w-xs",children:O.description})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-mono",children:O.code})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O.client?e.jsx("span",{className:"text-sm text-gray-900",children:O.client}):e.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I[O.status]||"bg-gray-100 text-gray-800"}`,children:O.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center text-sm text-gray-600",children:O.budgetAmount?e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:["$",O.budgetAmount.toLocaleString()]})]}):e.jsx("span",{className:"text-gray-400",children:"-"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(je=O.location)!=null&&je.city?e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Nt,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[O.location.city,", ",O.location.state]})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:O.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[Q&&e.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>ue(O),className:"text-blue-600 hover:text-blue-700",children:e.jsx(Tt,{className:"w-4 h-4"})}),W&&e.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>Ce(O.id),className:"text-red-600 hover:text-red-700",children:e.jsx(lt,{className:"w-4 h-4"})})]})})]},O.id)})})]})})}),t.length===0&&!M&&e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(Nt,{className:"w-12 h-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No projects found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first project"}),se&&e.jsxs(xe,{onClick:()=>{ne(),Z(null),q(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"Add Project"]})]}),M&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}),e.jsx(Ue,{open:R,onClose:()=>{q(!1),Z(null)},title:V?`Edit Project: ${V.code}`:"Create New Project",size:"xl",children:e.jsx("div",{className:"space-y-6",children:J})})]})}function Vu(){var j;const{theme:t}=Pe(),[s,a]=c.useState("overview"),[r,n]=c.useState("30d"),[i,l]=c.useState({totalProject:0,totalTemplates:0,activeTasks:0,successRate:0,monthlyGrowth:0,inTransit:0,delivered:0,pending:0}),[u,o]=c.useState(null),[m,h]=c.useState(null),[d,g]=c.useState(!0),[p,x]=c.useState(!1),A=[{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"1y",label:"Last Year"}],y=[{id:"overview",name:"Overview Report",description:"General statistics and performance metrics",icon:_t,color:"bg-blue-500"},{id:"project",name:"Project Report",description:"Detailed  statistics",icon:St,color:"bg-green-500"},{id:"Tasks",name:"Task Performance Report",description:"Task usage, efficiency, and maintenance data",icon:St,color:"bg-purple-500"},{id:"templates",name:"Template Usage Report",description:"Most used templates and design analytics",icon:et,color:"bg-orange-500"},{id:"trends",name:"Trend Analysis Report",description:"Historical trends and forecasting data",icon:qt,color:"bg-red-500"},{id:"locations",name:"Location Analytics Report",description:"Location-based performance and distribution data",icon:_t,color:"bg-indigo-500"}];c.useEffect(()=>{document.title="Reports & Analytics - Space Rivers"},[]),c.useEffect(()=>{N()},[r]);const N=async()=>{var D,C,f,w,b,z,P,S,k;g(!0);try{const[G,B]=await Promise.all([Sl.get(),Cl.stats()]);if(G!=null&&G.success){o(G.data);const E=((C=(D=G.data)==null?void 0:D.performanceMetrics)==null?void 0:C.totalShipments)||0,M=((w=(f=G.data)==null?void 0:f.performanceMetrics)==null?void 0:w.deliverySuccessRate)||0,F=((z=(b=G.data)==null?void 0:b.performanceMetrics)==null?void 0:z.activeShipments)||0,_=((S=(P=G.data)==null?void 0:P.performanceMetrics)==null?void 0:S.deliveredCount)||0,L=E-_-F;let R=0;if((k=G.data)!=null&&k.deliveryTrends&&G.data.deliveryTrends.length>=2){const q=G.data.deliveryTrends.slice(-7).reduce((Z,be)=>Z+(be.delivered||0),0),V=G.data.deliveryTrends.slice(-14,-7).reduce((Z,be)=>Z+(be.delivered||0),0);R=V>0?Math.round((q-V)/V*100):0}l({totalProject:E,successRate:M,monthlyGrowth:R,inTransit:F,delivered:_,pending:L,totalTemplates:0,activeTasks:0})}B!=null&&B.success&&(h(B.data),l(E=>{var M;return{...E,activeTasks:((M=B.data)==null?void 0:M.activeTasks)||0}}))}catch{}finally{g(!1)}},v=async D=>{x(!0);try{}catch{}finally{x(!1)}};return d?e.jsx(ct,{maxWidth:"full",padding:"md",children:e.jsx("div",{className:"bg-white p-5 rounded-xl",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ls,{className:"mx-auto h-12 w-12 animate-spin",style:{color:t?t.theme.colors.primary[600]:"#2563eb"}}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading reports..."})]})})})}):e.jsx(ct,{maxWidth:"full",padding:"md",children:e.jsx("div",{className:"bg-white p-6 rounded-xl",children:e.jsxs(ta,{spacing:"lg",children:[e.jsx(Be,{title:"Reports & Analytics",subtitle:"Generate and view comprehensive reports and analytics",icon:_t,variant:"default",headerActions:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ba,{to:"/reports/analytics",className:"inline-flex items-center px-4 py-2 bg-success-600 text-white rounded-lg hover:bg-success-700 transition-colors duration-200 whitespace-nowrap text-sm font-medium",children:[e.jsx(qt,{className:"h-4 w-4 mr-2"}),"View Analytics"]}),e.jsx(Ae,{value:r,onChange:D=>n(D.target.value),options:A,className:"text-sm h-[42px]"})]}),children:e.jsxs(Js,{cols:4,gap:"md",children:[e.jsx(vt,{className:"p-1",style:{background:t?`linear-gradient(to bottom right, ${t.theme.colors.primary[50]}, ${t.theme.colors.primary[100]})`:"linear-gradient(to bottom right, #eff6ff, #dbeafe)",borderColor:t?t.theme.colors.primary[200]:"#bfdbfe"},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:t?t.theme.colors.primary[200]:"#bfdbfe"},children:e.jsx(St,{className:"h-6 w-6",style:{color:t?t.theme.colors.primary[600]:"#2563eb"}})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:t?t.theme.colors.primary[600]:"#2563eb"},children:"Total Project"}),e.jsx("p",{className:"text-sm font-bold",style:{color:t?t.theme.colors.primary[900]:"#1e3a8a"},children:i.totalProject.toLocaleString()})]})]})}),e.jsx(vt,{className:"p-1",style:{background:t?`linear-gradient(to bottom right, ${t.theme.colors.success[50]}, ${t.theme.colors.success[100]})`:"linear-gradient(to bottom right, #f0fdf4, #dcfce7)",borderColor:t?t.theme.colors.success[200]:"#bbf7d0"},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:t?t.theme.colors.success[200]:"#bbf7d0"},children:e.jsx(et,{className:"h-6 w-6",style:{color:t?t.theme.colors.success[600]:"#16a34a"}})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:t?t.theme.colors.success[600]:"#16a34a"},children:"Templates"}),e.jsx("p",{className:"text-sm font-bold",style:{color:t?t.theme.colors.success[900]:"#14532d"},children:i.totalTemplates})]})]})}),e.jsx(vt,{className:"p-1",style:{background:t?`linear-gradient(to bottom right, ${t.theme.colors.secondary[50]}, ${t.theme.colors.secondary[100]})`:"linear-gradient(to bottom right, #faf5ff, #f3e8ff)",borderColor:t?t.theme.colors.secondary[200]:"#e9d5ff"},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:t?t.theme.colors.secondary[200]:"#e9d5ff"},children:e.jsx(St,{className:"h-6 w-6",style:{color:t?t.theme.colors.secondary[600]:"#9333ea"}})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:t?t.theme.colors.secondary[600]:"#9333ea"},children:"Active Tasks"}),e.jsx("p",{className:"text-sm font-bold",style:{color:t?t.theme.colors.secondary[900]:"#581c87"},children:i.activeTasks})]})]})}),e.jsx(vt,{className:"p-1",style:{background:t?`linear-gradient(to bottom right, ${t.theme.colors.warning[50]}, ${t.theme.colors.warning[100]})`:"linear-gradient(to bottom right, #fffbeb, #fef3c7)",borderColor:t?t.theme.colors.warning[200]:"#fde68a"},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:t?t.theme.colors.warning[200]:"#fde68a"},children:e.jsx(qt,{className:"h-6 w-6",style:{color:t?t.theme.colors.warning[600]:"#d97706"}})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:t?t.theme.colors.warning[600]:"#d97706"},children:"Success Rate"}),e.jsxs("p",{className:"text-sm font-bold",style:{color:t?t.theme.colors.warning[900]:"#92400e"},children:[i.successRate,"%"]})]})]})})]})}),e.jsx(Be,{title:"Report Types",subtitle:"Select a report to view detailed analytics",variant:"elevated",children:e.jsx(Js,{cols:3,gap:"md",children:y.map(D=>{const C=D.icon,f=s===D.id;return e.jsxs(vt,{className:`border-2 p-1 cursor-pointer transition-all duration-200 ${f?"shadow-lg":"hover:shadow-md"}`,style:{borderColor:f?t?t.theme.colors.primary[500]:"#3b82f6":void 0,background:f?t?t.theme.colors.primary[50]:"#eff6ff":void 0},onClick:()=>a(D.id),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${D.color}`,children:e.jsx(C,{className:"h-6 w-6 text-white"})}),f&&e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t?t.theme.colors.primary[500]:"#3b82f6"}})]}),e.jsx("h3",{className:"text-base font-semibold  mb-2",style:{color:t==null?void 0:t.theme.colors.primary[700]},children:D.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:D.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:w=>{w.stopPropagation(),a(D.id)},className:"text-primary-600 hover:text-primary-800 text-sm font-medium",children:"View Report"}),e.jsx("button",{onClick:w=>{w.stopPropagation(),v(D.id)},disabled:p,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50",children:p?e.jsx(ls,{className:"h-4 w-4 animate-spin"}):e.jsx(Ht,{className:"h-4 w-4"})})]})]},D.id)})})}),s&&e.jsxs(Be,{variant:"elevated",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-gray-100 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:t==null?void 0:t.theme.colors.primary[900]},children:(j=y.find(D=>D.id===s))==null?void 0:j.name}),e.jsxs(xe,{onClick:()=>v(),disabled:p,variant:"primary",className:"inline-flex items-center px-4 py-2 text-sm",children:[p?e.jsx(ls,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ht,{className:"h-4 w-4 mr-2"}),"Export Report"]})]})}),e.jsxs("div",{className:"p-3",children:[s==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-3 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600",children:"Total Project"}),e.jsx("p",{className:"text-sm font-bold text-blue-900",children:i.totalProject.toLocaleString()})]}),e.jsx(St,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-3 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-green-600",children:"Success Rate"}),e.jsxs("p",{className:"text-sm font-bold text-green-900",children:[i.successRate,"%"]})]}),e.jsx(qt,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-3 border border-orange-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-orange-600",children:"In Progress"}),e.jsx("p",{className:"text-sm font-bold text-orange-900",children:i.inTransit})]}),e.jsx(St,{className:"h-8 w-8 text-orange-600"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-3 border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-purple-600",children:"Delivered"}),e.jsx("p",{className:"text-sm font-bold text-purple-900",children:i.delivered})]}),e.jsx(et,{className:"h-8 w-8 text-purple-600"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[e.jsx("h3",{className:"text-base font-semibold mb-4",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Monthly Growth:"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[i.monthlyGrowth,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Pending Project:"}),e.jsx("span",{className:"text-sm font-semibold text-orange-600",children:i.pending})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Active Tasks:"}),e.jsx("span",{className:"text-sm font-semibold text-green-600",children:i.activeTasks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Total Templates:"}),e.jsx("span",{className:"text-sm font-semibold text-purple-600",children:i.totalTemplates})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[e.jsx("h3",{className:"text-base font-semibold mb-4",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Task Statistics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Total Task:"}),e.jsx("span",{className:"text-sm font-semibold",children:(m==null?void 0:m.totalTask)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Completed Task:"}),e.jsx("span",{className:"text-sm font-semibold text-green-600",children:(m==null?void 0:m.completedTask)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Failed Task:"}),e.jsx("span",{className:"text-sm font-semibold text-red-600",children:(m==null?void 0:m.failedTask)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Total Copies:"}),e.jsx("span",{className:"text-sm font-semibold text-blue-600",children:(m==null?void 0:m.totalCopies)||0})]})]})]})]})]}),s==="Tasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-3",children:[e.jsx("h4",{className:"text-base font-semibold",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Printer Performance Analytics"}),e.jsxs("button",{onClick:()=>v(),disabled:p,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[p?e.jsx(ls,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ht,{className:"h-4 w-4 mr-2"}),"Export"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base font-semibold",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Print Task"}),e.jsx(St,{className:"h-6 w-6 text-gray-400"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Total Task:"}),e.jsx("span",{className:"text-sm font-semibold",children:(m==null?void 0:m.totalTask)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Completed:"}),e.jsx("span",{className:"text-sm font-semibold text-green-600",children:(m==null?void 0:m.completedTask)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Failed:"}),e.jsx("span",{className:"text-sm font-semibold text-red-600",children:(m==null?void 0:m.failedTask)||0})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base font-semibold",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Print Volume"}),e.jsx(et,{className:"h-6 w-6 text-gray-400"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Total Copies:"}),e.jsx("span",{className:"text-sm font-semibold",children:(m==null?void 0:m.totalCopies)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Reprints:"}),e.jsx("span",{className:"text-sm font-semibold text-orange-600",children:(m==null?void 0:m.reprints)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Success Rate:"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[m!=null&&m.totalTask?Math.round((m.completedTask||0)/m.totalTask*100):0,"%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base font-semibold",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Active Tasks"}),e.jsx(qt,{className:"h-6 w-6 text-gray-400"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Total Tasks:"}),e.jsx("span",{className:"text-sm font-semibold",children:i.activeTasks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Online:"}),e.jsx("span",{className:"text-sm font-semibold text-green-600",children:i.activeTasks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Offline:"}),e.jsx("span",{className:"text-sm font-semibold text-sm -gray-600 mt-1",children:"0"})]})]})]})]})]}),s==="project"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-3",children:[e.jsx("h4",{className:"text-base font-semibold",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Project Report"}),e.jsxs("button",{onClick:()=>v(),disabled:p,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[p?e.jsx(ls,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ht,{className:"h-4 w-4 mr-2"}),"Export"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base font-semibold",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Project Overview"}),e.jsx(St,{className:"h-6 w-6 text-gray-400"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Total Produced:"}),e.jsx("span",{className:"text-sm font-semibold",children:i.totalProject})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Success Rate:"}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[i.successRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Monthly Growth:"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[i.monthlyGrowth,"%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base font-semibold",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Print Statistics"}),e.jsx(St,{className:"h-6 w-6 text-gray-400"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Total Task:"}),e.jsx("span",{className:"text-sm font-semibold",children:(m==null?void 0:m.totalTask)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Completed:"}),e.jsx("span",{className:"text-sm font-semibold text-green-600",children:(m==null?void 0:m.completedTask)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Failed:"}),e.jsx("span",{className:"text-sm font-semibold text-red-600",children:(m==null?void 0:m.failedTask)||0})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base font-semibold",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Template Usage"}),e.jsx(et,{className:"h-6 w-6 text-gray-400"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Total Templates:"}),e.jsx("span",{className:"text-sm font-semibold",children:i.totalTemplates})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Active Tasks:"}),e.jsx("span",{className:"text-sm font-semibold",children:i.activeTasks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Reprints:"}),e.jsx("span",{className:"text-sm font-semibold text-orange-600",children:(m==null?void 0:m.reprints)||0})]})]})]})]})]}),s==="trends"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-3",children:[e.jsx("h4",{className:"text-base font-semibold",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Trend Analysis"}),e.jsxs("button",{onClick:()=>v(),disabled:p,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[p?e.jsx(ls,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ht,{className:"h-4 w-4 mr-2"}),"Export"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base font-semibold",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Growth Trends"}),e.jsx(qt,{className:"h-6 w-6 text-gray-400"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Monthly Growth:"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[i.monthlyGrowth,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Success Rate:"}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[i.successRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Total Project:"}),e.jsx("span",{className:"text-sm font-semibold",children:i.totalProject})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base font-semibold",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Delivery Trends"}),e.jsx(St,{className:"h-6 w-6 text-gray-400"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Delivered:"}),e.jsx("span",{className:"text-sm font-semibold text-green-600",children:i.delivered})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"In Progress:"}),e.jsx("span",{className:"text-sm font-semibold text-orange-600",children:i.inTransit})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Pending:"}),e.jsx("span",{className:"text-sm font-semibold text-sm -gray-600 mt-1",children:i.pending})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base font-semibold",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Performance Trends"}),e.jsx(_t,{className:"h-6 w-6 text-gray-400"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Templates:"}),e.jsx("span",{className:"text-sm font-semibold",children:i.totalTemplates})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Active Tasks:"}),e.jsx("span",{className:"text-sm font-semibold",children:i.activeTasks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Print Task:"}),e.jsx("span",{className:"text-sm font-semibold",children:(m==null?void 0:m.totalTask)||0})]})]})]})]})]}),s==="locations"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-3",children:[e.jsx("h4",{className:"text-base font-semibold",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Location Analytics Report"}),e.jsxs("button",{onClick:()=>v(),disabled:p,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[p?e.jsx(ls,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ht,{className:"h-4 w-4 mr-2"}),"Export"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-3 border border-blue-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-200 rounded-lg",children:e.jsx(_t,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600",children:"Total Locations"}),e.jsx("p",{className:"text-sm font-bold text-blue-900",children:u!=null&&u.locationDistribution?u.locationDistribution.length:0})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-3 border border-green-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-200 rounded-lg",children:e.jsx(qt,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-semibold text-green-600",children:"Active Locations"}),e.jsx("p",{className:"text-sm font-bold text-green-900",children:u!=null&&u.locationDistribution?u.locationDistribution.filter(D=>D.count>0).length:0})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-3 border border-purple-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-200 rounded-lg",children:e.jsx(St,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-semibold text-purple-600",children:"Total Project"}),e.jsx("p",{className:"text-sm font-bold text-purple-900",children:u!=null&&u.locationDistribution?u.locationDistribution.reduce((D,C)=>D+C.count,0):0})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-3 border border-orange-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-200 rounded-lg",children:e.jsx(et,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-semibold text-orange-600",children:"Avg per Location"}),e.jsx("p",{className:"text-sm font-bold text-orange-900",children:u!=null&&u.locationDistribution&&u.locationDistribution.length>0?Math.round(u.locationDistribution.reduce((D,C)=>D+C.count,0)/u.locationDistribution.length):0})]})]})})]}),u!=null&&u.locationDistribution&&u.locationDistribution.length>0?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-1",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"Location Distribution"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project Count"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Distribution"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.locationDistribution.map((D,C)=>{const f=u.locationDistribution.reduce((z,P)=>z+P.count,0),w=f>0?Math.round(D.count/f*100):0,b=Math.max(5,w);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-r from-blue-400 to-blue-600 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-white",children:D.location.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.location}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Location #",C+1]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:D.count})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[w,"%"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${b}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500 w-8",children:[w,"%"]})]})})]},D.location)})})]})})]}):e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-1",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_t,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-1 text-sm font-medium text-gray-900",children:"No Location Data"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Location distribution data will be displayed here when project are created with location information."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[e.jsx("h3",{className:"text-base font-semibold mb-4",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Top Locations"}),u!=null&&u.locationDistribution&&u.locationDistribution.length>0?e.jsx("div",{className:"space-y-3",children:u.locationDistribution.slice(0,5).map((D,C)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900 mr-2",children:["#",C+1]}),e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:D.location})]}),e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[D.count," project"]})]},D.location))}):e.jsx("p",{className:"text-sm text-gray-500",children:"No location data available"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[e.jsx("h3",{className:"text-base font-semibold mb-4",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Location Insights"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Most Active Location:"}),e.jsx("span",{className:"text-sm font-semibold text-green-600",children:u!=null&&u.locationDistribution&&u.locationDistribution.length>0?u.locationDistribution[0].location:"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Total Distribution:"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[u!=null&&u.locationDistribution?u.locationDistribution.length:0," locations"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-sm -gray-600 mt-1",children:"Average Project:"}),e.jsxs("span",{className:"text-sm font-semibold text-purple-600",children:[u!=null&&u.locationDistribution&&u.locationDistribution.length>0?Math.round(u.locationDistribution.reduce((D,C)=>D+C.count,0)/u.locationDistribution.length):0," ","per location"]})]})]})]})]})]})]})]})]})})})}const ui=({tabs:t=[],selected:s,onChange:a})=>{const[r,n]=c.useState();return c.useEffect(()=>{if(t.length){const i=t.find(l=>l.id===s)||t[0];n(i)}},[t,s]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8",children:t.map(i=>{const l=i.icon,u=(r==null?void 0:r.id)===i.id;return e.jsxs("button",{onClick:()=>{n(i),a==null||a(i.id)},className:`flex items-center gap-2 px-3 py-2 border-b-2 font-semibold text-sm transition-colors ${u?"border-primary-500 text-primary-600":"text-secondary-600 border-none"}`,children:[l&&e.jsx(l,{size:18}),i.label]},i.id)})})}),r==null?void 0:r.component]})};function Gu({selectedShifts:t,onPublish:s,onUnpublish:a,onDelete:r,onDuplicate:n,onExport:i,onClearSelection:l,totalShifts:u,onSelectAll:o,allSelected:m,selectionMode:h=!1}){if(!h)return null;const d=t.filter(A=>A.isPublished).length,g=t.length-d,p=d>0,x=g>0;return e.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-40",style:{animation:"slideUp 0.3s ease-out"},children:e.jsx("div",{className:"bg-white rounded-lg shadow-2xl border border-gray-200 px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"flex items-center gap-3 pr-4 border-r border-gray-200",children:[e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Clear selection",children:e.jsx(zt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Ls,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[t.length," selected"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[p&&`${d} published`,p&&x&&"  ",x&&`${g} draft`]})]})]})]}),!m&&t.length<u&&e.jsxs(xe,{variant:"ghost",size:"sm",onClick:o,icon:e.jsx(Gt,{className:"w-4 h-4"}),children:["Select All (",u,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[x&&t.length>0&&e.jsx(xe,{variant:"primary",size:"sm",onClick:s,icon:e.jsx(Cs,{className:"w-4 h-4"}),children:"Publish"}),p&&t.length>0&&e.jsx(xe,{variant:"secondary",size:"sm",onClick:a,icon:e.jsx(Vt,{className:"w-4 h-4"}),children:"Unpublish"}),t.length>0&&e.jsx(xe,{variant:"ghost",size:"sm",onClick:n,icon:e.jsx(Ts,{className:"w-4 h-4"}),title:"Duplicate selected shifts",children:"Duplicate"}),t.length>0&&e.jsx(xe,{variant:"ghost",size:"sm",onClick:i,icon:e.jsx(Qi,{className:"w-4 h-4"}),title:"Export selected shifts",children:"Export"}),t.length>0&&e.jsx("div",{className:"pl-2 ml-2 border-l border-gray-200",children:e.jsx(xe,{variant:"danger",size:"sm",onClick:r,icon:e.jsx(lt,{className:"w-4 h-4"}),title:"Delete selected shifts",children:"Delete"})}),t.length===0&&e.jsx("p",{className:"text-sm text-gray-500 px-3",children:"Click on shifts to select them"})]})]})})})}function Yu({isOpen:t,onClose:s,dependency:a,tasks:r,projects:n=[],onSave:i}){const[l,u]=c.useState({predecessorTaskId:"",successorTaskId:"",dependencyType:"finish-to-start",lag:0}),[o,m]=c.useState(""),[h,d]=c.useState(!1);c.useEffect(()=>{u(a?{predecessorTaskId:a.predecessorTaskId,successorTaskId:a.successorTaskId,dependencyType:a.dependencyType,lag:a.lag}:{predecessorTaskId:"",successorTaskId:"",dependencyType:"finish-to-start",lag:0})},[a]);const g=f=>{const w=n.find(b=>b.id===f);return(w==null?void 0:w.name)||"Unknown Project"},p=f=>{const w=r.find(b=>b.id===f);return(w==null?void 0:w.title)||"Unknown Task"},x=f=>{const w=r.find(b=>b.id===f);return w?{title:w.title,project:g(w.projectId),phase:w.constructionPhase,duration:w.duration||1,status:w.status,isCritical:w.isCritical||!1,progress:w.progress||0}:null},A=f=>{switch(f){case"finish-to-start":return e.jsx(ss,{size:16,className:"text-blue-600"});case"start-to-start":return e.jsx(bn,{size:16,className:"text-green-600"});case"finish-to-finish":return e.jsx(vn,{size:16,className:"text-orange-600"});case"start-to-finish":return e.jsx(Ea,{size:16,className:"text-red-600"});default:return e.jsx(ss,{size:16,className:"text-gray-600"})}},y=f=>{switch(f){case"finish-to-start":return"The successor task cannot start until the predecessor task finishes. This is the most common dependency type in construction.";case"start-to-start":return"Both tasks start at the same time (or with a lag). Useful for parallel activities that need coordination.";case"finish-to-finish":return"Both tasks finish at the same time (or with a lag). Used when tasks must complete together.";case"start-to-finish":return"The successor task finishes when the predecessor task starts. Rare in construction, used for handover scenarios.";default:return""}},N=f=>{switch(f){case"finish-to-start":return"Finish to Start (FS)";case"start-to-start":return"Start to Start (SS)";case"finish-to-finish":return"Finish to Finish (FF)";case"start-to-finish":return"Start to Finish (SF)";default:return f}},v=()=>{if(!l.predecessorTaskId||!l.successorTaskId)return null;const f=x(l.predecessorTaskId),w=x(l.successorTaskId);if(!f||!w)return null;const b=l.lag||0;let z="",P="low";switch(l.dependencyType){case"finish-to-start":z=`Successor "${w.title}" will start ${b} days after "${f.title}" finishes`,P=f.isCritical?"high":"medium";break;case"start-to-start":z=`Both tasks will start together with ${b} day offset`,P="medium";break;case"finish-to-finish":z=`Both tasks will finish together with ${b} day offset`,P="medium";break;case"start-to-finish":z=`Successor "${w.title}" will finish when "${f.title}" starts (${b} day lag)`,P="high";break}return{impact:z,severity:P}},j=()=>{if(!l.predecessorTaskId||!l.successorTaskId)return!1;const f=new Set,w=[l.successorTaskId];for(;w.length>0;){const b=w.pop();if(!f.has(b)&&(f.add(b),b===l.predecessorTaskId))return!0}return!1},D=o?r.filter(f=>f.projectId===o):r,C=f=>{if(f.preventDefault(),l.predecessorTaskId===l.successorTaskId){alert("A task cannot depend on itself");return}const w={...l};a&&(w.id=a.id),i(w),s()};return e.jsx(Ue,{open:t,onClose:s,title:a?"Edit Dependency":"Create Task Dependency",size:"xl",children:e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-blue-900 mb-4 flex items-center gap-2",children:[e.jsx(Fa,{size:20}),"Task Selection"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(he,{label:"Filter by Project",children:e.jsxs("select",{value:o,onChange:f=>m(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"All Projects"}),n.map(f=>e.jsx("option",{value:f.id,children:f.name},f.id))]})}),e.jsxs("div",{children:[e.jsx(he,{label:"Predecessor Task",isRequired:!0,children:e.jsxs("select",{value:l.predecessorTaskId,onChange:f=>u({...l,predecessorTaskId:f.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select predecessor task"}),D.map(f=>e.jsxs("option",{value:f.id,children:[f.title," (",g(f.projectId),")"]},f.id))]})}),l.predecessorTaskId&&(()=>{const f=x(l.predecessorTaskId);return f?e.jsxs("div",{className:"mt-2 p-3 bg-white rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:f.title}),f.isCritical&&e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"Critical"})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("p",{children:["Project: ",f.project]}),e.jsxs("p",{children:["Phase: ",f.phase||"N/A"]}),e.jsxs("p",{children:["Duration: ",f.duration," days"]}),e.jsxs("p",{children:["Status: ",f.status]}),e.jsxs("p",{children:["Progress: ",f.progress,"%"]})]})]}):null})()]}),e.jsxs("div",{children:[e.jsx(he,{label:"Successor Task",isRequired:!0,children:e.jsxs("select",{value:l.successorTaskId,onChange:f=>u({...l,successorTaskId:f.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select successor task"}),D.filter(f=>f.id!==l.predecessorTaskId).map(f=>e.jsxs("option",{value:f.id,children:[f.title," (",g(f.projectId),")"]},f.id))]})}),l.successorTaskId&&(()=>{const f=x(l.successorTaskId);return f?e.jsxs("div",{className:"mt-2 p-3 bg-white rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:f.title}),f.isCritical&&e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"Critical"})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("p",{children:["Project: ",f.project]}),e.jsxs("p",{children:["Phase: ",f.phase||"N/A"]}),e.jsxs("p",{children:["Duration: ",f.duration," days"]}),e.jsxs("p",{children:["Status: ",f.status]}),e.jsxs("p",{children:["Progress: ",f.progress,"%"]})]})]}):null})()]})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-green-900 mb-4 flex items-center gap-2",children:[e.jsx(Oe,{size:20}),"Dependency Configuration"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(he,{label:"Dependency Type",isRequired:!0,children:e.jsxs("select",{value:l.dependencyType,onChange:f=>u({...l,dependencyType:f.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm",required:!0,children:[e.jsx("option",{value:"finish-to-start",children:"Finish to Start (FS)"}),e.jsx("option",{value:"start-to-start",children:"Start to Start (SS)"}),e.jsx("option",{value:"finish-to-finish",children:"Finish to Finish (FF)"}),e.jsx("option",{value:"start-to-finish",children:"Start to Finish (SF)"})]})}),e.jsxs(he,{label:"Lag (days)",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:l.lag,onChange:f=>u({...l,lag:parseInt(f.target.value)||0}),className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm",min:"0",step:"0.5",placeholder:"0"}),e.jsx(Oe,{size:16,className:"absolute right-3 top-3.5 text-gray-400"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Delay between predecessor and successor (in days)"})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[l.predecessorTaskId&&l.successorTaskId&&e.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-orange-900 flex items-center gap-2",children:[e.jsx(it,{size:20}),"Impact Analysis"]}),e.jsx(xe,{type:"button",onClick:()=>d(!h),variant:"ghost",className:"p-1",children:h?e.jsx(Vt,{size:16}):e.jsx(jt,{size:16})})]}),h&&(()=>{const f=v(),w=j();return e.jsxs("div",{className:"space-y-4",children:[w&&e.jsxs("div",{className:"p-3 bg-red-100 border border-red-300 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx(it,{size:16}),e.jsx("span",{className:"font-medium",children:"Circular Dependency Detected!"})]}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"This dependency would create a circular reference. Please select different tasks."})]}),f&&!w&&e.jsxs("div",{className:`p-3 rounded-lg border ${f.severity==="high"?"bg-red-100 border-red-300":f.severity==="medium"?"bg-yellow-100 border-yellow-300":"bg-green-100 border-green-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A(l.dependencyType),e.jsx("span",{className:`font-medium ${f.severity==="high"?"text-red-800":f.severity==="medium"?"text-yellow-800":"text-green-800"}`,children:N(l.dependencyType)})]}),e.jsx("p",{className:`text-sm ${f.severity==="high"?"text-red-700":f.severity==="medium"?"text-yellow-700":"text-green-700"}`,children:f.impact})]}),e.jsxs("div",{className:"p-3 bg-white border border-gray-200 rounded-lg",children:[e.jsx("h6",{className:"font-sm text-gray-900 mb-2",children:"Dependency Description"}),e.jsx("p",{className:"text-sm text-gray-600",children:y(l.dependencyType)})]})]})})()]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Dependency Types"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"p-3 bg-white rounded border border-gray-200",children:[e.jsx("div",{className:"font-medium text-blue-600 mb-1",children:"Finish to Start (FS)"}),e.jsx("div",{className:"text-gray-600",children:"Task B starts when Task A finishes"})]}),e.jsxs("div",{className:"p-3 bg-white rounded border border-gray-200",children:[e.jsx("div",{className:"font-medium text-green-600 mb-1",children:"Start to Start (SS)"}),e.jsx("div",{className:"text-gray-600",children:"Task B starts when Task A starts"})]}),e.jsxs("div",{className:"p-3 bg-white rounded border border-gray-200",children:[e.jsx("div",{className:"font-medium text-purple-600 mb-1",children:"Finish to Finish (FF)"}),e.jsx("div",{className:"text-gray-600",children:"Task B finishes when Task A finishes"})]}),e.jsxs("div",{className:"p-3 bg-white rounded border border-gray-200",children:[e.jsx("div",{className:"font-medium text-orange-600 mb-1",children:"Start to Finish (SF)"}),e.jsx("div",{className:"text-gray-600",children:"Task B finishes when Task A starts"})]})]})]}),l.predecessorTaskId&&l.successorTaskId&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-lg p-1 border border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4 text-center",children:"Dependency Flow Preview"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 text-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-1 border-2 border-blue-200 shadow-sm",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-blue-600 font-bold text-lg",children:"A"})}),e.jsx("div",{className:"font-medium text-gray-900 text-sm mb-1",children:p(l.predecessorTaskId)}),e.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"PREDECESSOR"})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-center px-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(ss,{size:24}),l.lag>0&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 bg-white px-2 py-1 rounded border",children:[e.jsx(Oe,{size:12}),e.jsxs("span",{children:["+",l.lag,"d"]})]})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center font-medium",children:l.dependencyType.replace("-"," to ").toUpperCase()})]}),e.jsx("div",{className:"flex-1 text-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-1 border-2 border-green-200 shadow-sm",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-green-600 font-bold text-lg",children:"B"})}),e.jsx("div",{className:"font-medium text-gray-900 text-sm mb-1",children:p(l.successorTaskId)}),e.jsx("div",{className:"text-xs text-green-600 font-medium",children:"SUCCESSOR"})]})})]}),e.jsxs("div",{className:"mt-6 bg-white rounded-lg p-1 border border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3 text-center",children:"Timeline View"}),e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-blue-200 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Task A"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-green-200 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Task B"})]})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200 mt-8",children:[e.jsx(xe,{type:"button",onClick:s,variant:"outline",children:"Cancel"}),e.jsx(xe,{type:"submit",variant:"primary",children:a?"Update Dependency":"Create Dependency"})]})]})})}const Za=[{id:"1",name:"Main Site"},{id:"2",name:"North Branch"},{id:"3",name:"South Branch"}],Ut=[{id:"1",name:"Project Manager",color:"#3B82F6"},{id:"2",name:"Engineer",color:"#F59E0B"},{id:"3",name:"Technician",color:"#EC4899"},{id:"4",name:"Supervisor",color:"#06B6D4"}],Rs=[{id:"1",firstName:"John",lastName:"Smith",email:"john.smith@example.com",roleId:"1",locationId:"1"},{id:"2",firstName:"Sarah",lastName:"Johnson",email:"sarah.johnson@example.com",roleId:"2",locationId:"1"},{id:"3",firstName:"Michael",lastName:"Williams",email:"michael.williams@example.com",roleId:"3",locationId:"1"},{id:"4",firstName:"Emily",lastName:"Brown",email:"emily.brown@example.com",roleId:"4",locationId:"1"}],Ku=(()=>{const t=new Date,s=new Date(t);s.setDate(s.getDate()-s.getDay()),s.setHours(0,0,0,0);const a=(n,i,l,u,o,m,h="scheduled")=>{const d=new Date(s);d.setDate(s.getDate()+n),d.setHours(o[0],o[1],0,0);const g=new Date(s);return g.setDate(s.getDate()+n),g.setHours(m[0],m[1],0,0),{id:Math.random().toString(36).slice(2,11),employeeId:i,locationId:u,roleId:l,startTime:d,endTime:g,shiftType:i?h:"open",notes:"",breaks:[],costCodes:[],resources:[],quantity:1}},r=[a(1,"1","1","1",[8,0],[17,0],"scheduled"),a(2,"2","2","1",[7,0],[15,0],"confirmed"),a(3,"3","3","1",[8,0],[16,0],"training"),a(4,null,"3","1",[6,0],[14,0],"open"),a(5,"4","4","1",[9,0],[17,0],"confirmed")];return r[0].isPublished=!0,r[0].publishedAt=new Date(Date.now()-864e5),r[0].publishedBy="manager",r[1].isPublished=!0,r[1].publishedAt=new Date(Date.now()-1728e5),r[1].publishedBy="manager",r[2].isDraft=!0,r[3].isDraft=!0,r[4].isDraft=!0,r})(),Ju=[{id:"t1",name:"Standard Day Shift",startTime:"08:00",endTime:"17:00",roleId:"3",breaks:[],costCodes:[],resources:[],quantity:1,isOnCall:!1,notes:"Default 9h shift"},{id:"t2",name:"Half Day",startTime:"08:00",endTime:"12:00",roleId:"1",breaks:[],costCodes:[],resources:[],quantity:1,isOnCall:!1}],mi=[{id:"1",name:"Office Building Construction",description:"New 5-story office building with parking garage",startDate:new Date("2024-01-15"),endDate:new Date("2024-12-31"),status:"active"},{id:"2",name:"Residential Complex",description:"Multi-unit residential complex with amenities",startDate:new Date("2024-03-01"),endDate:new Date("2025-06-30"),status:"active"},{id:"3",name:"Shopping Mall Renovation",description:"Complete renovation of existing shopping mall",startDate:new Date("2024-02-01"),endDate:new Date("2024-11-30"),status:"planning"}],xi=[{id:"1",title:"Foundation Excavation",description:"Excavate foundation area and prepare for concrete",projectId:"1",constructionPhase:"Foundation",duration:5,status:"completed",progress:100,isCritical:!0,startDate:new Date("2024-01-15"),endDate:new Date("2024-01-19")},{id:"2",title:"Foundation Concrete Pour",description:"Pour concrete foundation and allow curing",projectId:"1",constructionPhase:"Foundation",duration:3,status:"completed",progress:100,isCritical:!0,startDate:new Date("2024-01-20"),endDate:new Date("2024-01-22")},{id:"3",title:"Structural Steel Installation",description:"Install structural steel framework",projectId:"1",constructionPhase:"Structure",duration:10,status:"in-progress",progress:60,isCritical:!0,startDate:new Date("2024-01-25"),endDate:new Date("2024-02-05")},{id:"4",title:"Electrical Rough-in",description:"Install electrical conduits and wiring",projectId:"1",constructionPhase:"MEP",duration:7,status:"not-started",progress:0,isCritical:!1,startDate:new Date("2024-02-10"),endDate:new Date("2024-02-16")},{id:"5",title:"Plumbing Rough-in",description:"Install plumbing pipes and fixtures",projectId:"1",constructionPhase:"MEP",duration:6,status:"not-started",progress:0,isCritical:!1,startDate:new Date("2024-02-12"),endDate:new Date("2024-02-17")},{id:"6",title:"Site Preparation",description:"Clear and prepare construction site",projectId:"2",constructionPhase:"Site Work",duration:4,status:"in-progress",progress:75,isCritical:!0,startDate:new Date("2024-03-01"),endDate:new Date("2024-03-04")},{id:"7",title:"Utility Connections",description:"Connect to municipal utilities",projectId:"2",constructionPhase:"Site Work",duration:3,status:"not-started",progress:0,isCritical:!1,startDate:new Date("2024-03-05"),endDate:new Date("2024-03-07")}],hi=[{id:"1",predecessorTaskId:"1",successorTaskId:"2",dependencyType:"finish-to-start",lag:0},{id:"2",predecessorTaskId:"2",successorTaskId:"3",dependencyType:"finish-to-start",lag:2},{id:"3",predecessorTaskId:"3",successorTaskId:"4",dependencyType:"finish-to-start",lag:3},{id:"4",predecessorTaskId:"4",successorTaskId:"5",dependencyType:"start-to-start",lag:2},{id:"5",predecessorTaskId:"6",successorTaskId:"7",dependencyType:"finish-to-start",lag:0}];function Xu({dependencies:t=hi,tasks:s=xi,projects:a=mi,onSaveDependency:r,onDeleteDependency:n}){const[i,l]=c.useState(""),[u,o]=c.useState(""),[m,h]=c.useState(""),[d,g]=c.useState(!1),[p,x]=c.useState(null),{theme:A}=Pe(),y=S=>{const k=a.find(G=>G.id===S);return(k==null?void 0:k.name)||"Unknown Project"},N=S=>{const k=s.find(G=>G.id===S);return k?{title:k.title,project:y(k.projectId),phase:k.constructionPhase,duration:k.duration||1,status:k.status,isCritical:k.isCritical||!1,progress:k.progress||0}:null},v=S=>{switch(S){case"finish-to-start":return e.jsx(ss,{size:16,className:"text-blue-600"});case"start-to-start":return e.jsx(bn,{size:16,className:"text-green-600"});case"finish-to-finish":return e.jsx(vn,{size:16,className:"text-orange-600"});case"start-to-finish":return e.jsx(Ea,{size:16,className:"text-red-600"});default:return e.jsx(ss,{size:16,className:"text-gray-600"})}},j=S=>{switch(S){case"finish-to-start":return"Finish to Start (FS)";case"start-to-start":return"Start to Start (SS)";case"finish-to-finish":return"Finish to Finish (FF)";case"start-to-finish":return"Start to Finish (SF)";default:return S}},D=S=>{switch(S){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"not-started":return"bg-gray-100 text-gray-800";case"on-hold":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},C=c.useMemo(()=>t.filter(S=>{const k=N(S.predecessorTaskId),G=N(S.successorTaskId),B=i===""||(k==null?void 0:k.title.toLowerCase().includes(i.toLowerCase()))||(G==null?void 0:G.title.toLowerCase().includes(i.toLowerCase()))||(k==null?void 0:k.project.toLowerCase().includes(i.toLowerCase()))||(G==null?void 0:G.project.toLowerCase().includes(i.toLowerCase())),E=u===""||(k==null?void 0:k.project)===y(u)||(G==null?void 0:G.project)===y(u),M=m===""||S.dependencyType===m;return B&&E&&M}),[t,i,u,m,a,s]),f=()=>{x(null),g(!0)},w=S=>{x(S),g(!0)},b=S=>{window.confirm("Are you sure you want to delete this dependency?")&&(n==null||n(S))},z=S=>{r==null||r(S),g(!1),x(null)},P=()=>{g(!1),x(null)};return e.jsxs("div",{className:"flex-1 p-5",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm space-y-5",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:A==null?void 0:A.theme.colors.primary[900]},children:"Task Dependencies"}),e.jsx(xe,{onClick:f,variant:"primary",icon:e.jsx(_e,{size:16}),children:"Create Dependency"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(xt,{size:16,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search dependencies...",value:i,onChange:S=>l(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{className:"min-w-48",children:e.jsxs("select",{value:u,onChange:S=>o(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Projects"}),a.map(S=>e.jsx("option",{value:S.id,children:S.name},S.id))]})}),e.jsx("div",{className:"min-w-48",children:e.jsxs("select",{value:m,onChange:S=>h(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"finish-to-start",children:"Finish to Start (FS)"}),e.jsx("option",{value:"start-to-start",children:"Start to Start (SS)"}),e.jsx("option",{value:"finish-to-finish",children:"Finish to Finish (FF)"}),e.jsx("option",{value:"start-to-finish",children:"Start to Finish (SF)"})]})})]})]}),e.jsx("div",{children:C.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Fa,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Dependencies Found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:i||u||m?"Try adjusting your search criteria":"Create your first task dependency to get started"}),!i&&!u&&!m&&e.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Dependency"})]}):e.jsx("div",{className:"space-y-5",children:C.map(S=>{const k=N(S.predecessorTaskId),G=N(S.successorTaskId);return!k||!G?null:e.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"A"})}),e.jsx("h6",{className:"font-sm text-gray-900",children:k.title}),k.isCritical&&e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"Critical"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsxs("p",{className:"text-center mb-2",children:[k.project," "," ",k.phase]}),e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${D(k.status)}`,children:k.status.replace("-"," ")}),e.jsxs("span",{className:"text-xs",children:[k.duration," days"]}),e.jsxs("span",{className:"text-xs",children:[k.progress,"% complete"]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center px-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[v(S.dependencyType),S.lag>0&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 bg-white px-2 py-1 rounded border",children:[e.jsx(Oe,{size:12}),e.jsxs("span",{children:["+",S.lag,"d"]})]})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center font-medium",children:j(S.dependencyType)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 font-bold text-sm",children:"B"})}),e.jsx("h4",{className:"font-medium text-gray-900",children:G.title}),G.isCritical&&e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"Critical"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsxs("p",{className:"text-center mb-2",children:[G.project,"  ",G.phase]}),e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${D(G.status)}`,children:G.status.replace("-"," ")}),e.jsxs("span",{className:"text-xs",children:[G.duration," days"]}),e.jsxs("span",{className:"text-xs",children:[G.progress,"% complete"]})]})]})]})]}),e.jsxs("div",{className:"p-3 rounded-lg text-center text-blue-700",style:{backgroundColor:A==null?void 0:A.theme.colors.information[100]},children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(it,{size:16,className:"text-orange-500"}),e.jsx("span",{className:"text-sm font-semibold",children:"Impact Analysis"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[S.dependencyType==="finish-to-start"&&`Successor "${G.title}" will start ${S.lag} days after "${k.title}" finishes`,S.dependencyType==="start-to-start"&&`Both tasks will start together with ${S.lag} day offset`,S.dependencyType==="finish-to-finish"&&`Both tasks will finish together with ${S.lag} day offset`,S.dependencyType==="start-to-finish"&&`Successor "${G.title}" will finish when "${k.title}" starts (${S.lag} day lag)`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(xe,{onClick:()=>w(S),variant:"ghost",className:"p-2",title:"Edit dependency",children:e.jsx(Tt,{size:16})}),e.jsx(xe,{onClick:()=>b(S.id),variant:"ghost",className:"p-2 text-red-600 hover:text-red-700",title:"Delete dependency",children:e.jsx(lt,{size:16})})]})]})},S.id)})})})]}),e.jsx(Yu,{isOpen:d,onClose:P,dependency:p,tasks:s,projects:a,onSave:z})]})}function Zu({isOpen:t,onClose:s,onSelectEmployee:a,employees:r,roles:n}){const[i,l]=c.useState(""),[u,o]=c.useState("all"),[m,h]=c.useState("firstName"),{theme:d}=Pe(),p=[...r.filter(y=>{const N=y.firstName.toLowerCase().includes(i.toLowerCase())||y.lastName.toLowerCase().includes(i.toLowerCase()),v=u==="all"||y.roleId===u;return N&&v})].sort((y,N)=>{switch(m){case"firstName":return y.firstName.localeCompare(N.firstName);case"lastName":return y.lastName.localeCompare(N.lastName);default:return 0}}),x=y=>{var N;return((N=n.find(v=>v.id===y))==null?void 0:N.name)||"Unknown Role"},A=y=>{var N;return((N=n.find(v=>v.id===y))==null?void 0:N.color)||"#3B82F6"};return e.jsx(Ue,{open:t,onClose:s,title:"Select Employee for Shift",size:"lg",children:e.jsxs("div",{className:"space-y-5 p-7",children:[e.jsx(he,{label:"Date",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),disabled:!0,className:"w-full px-3 py-2 border rounded-lg text-gray-700",style:{borderColor:d==null?void 0:d.theme.colors.primary[300]}}),e.jsxs("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2",style:{color:d==null?void 0:d.theme.colors.primary[500]},width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})]})}),e.jsxs("div",{className:"mb-1",children:[e.jsx("h3",{className:"text-base font-semibold mb-2",style:{color:d==null?void 0:d.theme.colors.primary[700]},children:"Select Employee"}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",placeholder:"Search employees",value:i,onChange:y=>l(y.target.value),className:"w-full px-3 py-2 pl-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",style:{borderColor:d==null?void 0:d.theme.colors.primary[300]}}),e.jsx(xt,{className:"absolute left-3 top-1/2 -translate-y-1/2",size:18,style:{color:d==null?void 0:d.theme.colors.primary[500]}})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:u,onChange:y=>o(y.target.value),className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none pr-8",style:{borderColor:d==null?void 0:d.theme.colors.primary[300]},children:[e.jsx("option",{value:"all",children:"All roles"}),n.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]}),e.jsx(Ft,{className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:18})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:m,onChange:y=>h(y.target.value),className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none pr-8",style:{borderColor:d==null?void 0:d.theme.colors.primary[300]},children:[e.jsx("option",{value:"firstName",children:"First name (A - Z)"}),e.jsx("option",{value:"lastName",children:"Last name (A - Z)"})]}),e.jsx(Ft,{className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:18})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:p.length>0?e.jsx("div",{className:"max-h-96 overflow-y-auto",children:p.map(y=>e.jsxs("div",{onClick:()=>a(y),className:"flex items-center gap-3 p-3 cursor-pointer border-b last:border-b-0 transition-colors sr-row",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{background:d==null?void 0:d.theme.colors.primary[300]},children:e.jsx(wt,{size:20,className:"text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[y.firstName," ",y.lastName]}),e.jsx("div",{className:"text-sm text-gray-600",children:y.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:A(y.roleId)}}),e.jsx("span",{className:"text-sm text-gray-600",children:x(y.roleId)})]})]},y.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[e.jsx(xt,{size:48,className:"mb-4 text-gray-300"}),e.jsx("div",{className:"text-lg font-medium mb-2",children:"No results"}),e.jsx("div",{className:"text-sm",children:"Try adjusting your search or filters"})]})})]})]})})}function Qu({selectedLocation:t,onLocationChange:s,locations:a,manageBy:r,onManageByChange:n,selectedRoles:i,onRoleToggle:l,roles:u,displayOptions:o,onDisplayOptionChange:m,employeeFilter:h,onEmployeeFilterChange:d,publishStatus:g="all",onPublishStatusChange:p,onClearFilters:x}){const A=i.length===u.length,{theme:y}=Pe(),N=()=>{A?u.forEach(v=>l(v.id)):u.forEach(v=>{i.includes(v.id)||l(v.id)})};return e.jsxs("div",{className:"w-80 border-r p-3 overflow-y-auto divide-y",style:{background:y==null?void 0:y.theme.colors.primary[50],borderColor:y==null?void 0:y.theme.colors.primary[200]},children:[e.jsxs("div",{className:"flex items-center justify-between pb-2",children:[e.jsx("h2",{className:"text-lg font-semibold",style:{color:y==null?void 0:y.theme.colors.primary[900]},children:"Filters"}),e.jsx(xe,{onClick:x,variant:"ghost",size:"sm",children:"Clear"})]}),e.jsxs("div",{className:"py-4",style:{borderColor:y==null?void 0:y.theme.colors.primary[200]},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 font-semibold",style:{color:y==null?void 0:y.theme.colors.primary[900]},children:[e.jsx(Nt,{size:18}),e.jsx("span",{children:"Job Location"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:t,onChange:v=>s(v.target.value),className:"w-full px-3 py-2 bg-white border rounded-lg appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-teal-500",style:{borderColor:y==null?void 0:y.theme.colors.primary[300]},children:a.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))}),e.jsx(Ft,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:18})]})]}),e.jsxs("div",{className:"py-4",style:{borderColor:y==null?void 0:y.theme.colors.primary[200]},children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 text-gray-700",children:e.jsx("span",{className:"font-medium",children:"Manage by"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(xe,{onClick:()=>n("employee"),variant:r==="employee"?"primary":"outline",className:"flex-1",children:"Employee"}),e.jsx(xe,{onClick:()=>n("role"),variant:r==="role"?"primary":"outline",className:"flex-1",children:"Role"})]})]}),e.jsxs("div",{className:"py-4",style:{borderColor:y==null?void 0:y.theme.colors.primary[200]},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"flex items-center gap-2 text-gray-700",children:e.jsx("span",{className:"font-semibold",style:{color:y==null?void 0:y.theme.colors.primary[900]},children:"Roles"})}),e.jsx(xe,{onClick:N,variant:"primary",size:"sm",icon:A?e.jsx(zt,{size:14}):void 0,iconPosition:"right",children:"All"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:N,className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"All roles"})]}),u.map(v=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer pl-6",children:[e.jsx("input",{type:"checkbox",checked:i.includes(v.id),onChange:()=>l(v.id),className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:v.color}}),e.jsx("span",{className:"text-sm text-gray-700",children:v.name})]})]},v.id))]})]}),p&&e.jsxs("div",{className:"py-4",style:{borderColor:y==null?void 0:y.theme.colors.primary[200]},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",style:{color:y==null?void 0:y.theme.colors.primary[900]},children:[e.jsx(Cs,{size:18}),e.jsx("span",{className:"font-semibold",children:"Publish Status"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"publishStatus",checked:g==="all",onChange:()=>p("all"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"All shifts"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"publishStatus",checked:g==="published",onChange:()=>p("published"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Published only"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"publishStatus",checked:g==="unpublished",onChange:()=>p("unpublished"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Unpublished / Draft"})]})]})]})]}),e.jsxs("div",{className:"py-4",style:{borderColor:y==null?void 0:y.theme.colors.primary[200]},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 font-semibold",style:{color:y==null?void 0:y.theme.colors.primary[900]},children:[e.jsx(jt,{size:18}),e.jsx("span",{children:"Display"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"font-medium text-sm text-gray-700 mb-2",children:"Shifts"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o.hideTraining,onChange:()=>m("hideTraining"),className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Hide training"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o.hideConfirmedShifts,onChange:()=>m("hideConfirmedShifts"),className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Hide confirmed shifts"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o.filterPrimaryRole,onChange:()=>m("filterPrimaryRole"),className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Filter only the primary role"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o.groupByRole,onChange:()=>m("groupByRole"),className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Group by role"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o.freezeOpenShiftsRow,onChange:()=>m("freezeOpenShiftsRow"),className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Freeze open shifts row"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o.highlightIncompleteTasks,onChange:()=>m("highlightIncompleteTasks"),className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Highlight incomplete tasks"})]})]})]}),e.jsxs("div",{className:"py-4",style:{borderColor:y==null?void 0:y.theme.colors.primary[200]},children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 font-semibold",style:{color:y==null?void 0:y.theme.colors.primary[900]},children:e.jsx("span",{children:"Employees"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:h,onChange:v=>d(v.target.value),className:"w-full px-3 py-2 bg-white border rounded-lg appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-teal-500",style:{borderColor:y==null?void 0:y.theme.colors.primary[300]},children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"withShifts",children:"Employees with shifts"}),e.jsx("option",{value:"withoutShifts",children:"Employees without shifts"})]}),e.jsx(Ft,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:18})]})]})]})}function em({isOpen:t,onClose:s,onPublish:a,selectedShifts:r,employees:n,roles:i}){const[l,u]=c.useState(!0),[o,m]=c.useState("both"),[h,d]=c.useState(!1),[g,p]=c.useState(""),[x,A]=c.useState(!0),y=()=>{a({sendNotifications:l,notificationMethod:o,includeMessage:h,customMessage:h?g:void 0,notifyImmediately:x}),s()},N=new Set(r.filter(C=>C.employeeId).map(C=>C.employeeId)),v=n.filter(C=>N.has(C.id)),j=r.filter(C=>!C.employeeId).length,D=r.filter(C=>C.employeeId).length;return e.jsxs(Ue,{open:t,onClose:s,title:`Publish Shifts (${r.length} selected)`,size:"lg",children:[e.jsx("div",{className:"bg-blue-50 px-4 py-3 -mx-6 -mt-6 mb-1 border-b border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Cs,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[r.length," shift",r.length!==1?"s":""," will be published"]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-1",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ct,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Publishing Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"text-blue-800",children:[D," assigned shift",D!==1?"s":""]})]}),j>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ot,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"text-blue-800",children:[j," open shift",j!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ot,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"text-blue-800",children:[v.length," employee",v.length!==1?"s":""," affected"]})]})]})]})]})}),v.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Affected Employees"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-1 max-h-32 overflow-y-auto",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(C=>{const f=i.find(w=>w.id===C.roleId);return e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-1.5 rounded-full border border-gray-200",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:(f==null?void 0:f.color)||"#6B7280"}}),e.jsxs("span",{className:"text-sm text-gray-700",children:[C.firstName," ",C.lastName]})]},C.id)})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Notification Settings"}),e.jsxs("div",{className:"flex items-center justify-between p-1 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ys,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Send Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Notify employees about their published shifts"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:C=>u(C.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notification Method"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>m("email"),className:`flex flex-col items-center gap-2 p-3 rounded-lg border-2 transition-all ${o==="email"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(Ur,{className:`w-5 h-5 ${o==="email"?"text-blue-600":"text-gray-600"}`}),e.jsx("span",{className:`text-sm font-medium ${o==="email"?"text-blue-900":"text-gray-700"}`,children:"Email"})]}),e.jsxs("button",{type:"button",onClick:()=>m("push"),className:`flex flex-col items-center gap-2 p-3 rounded-lg border-2 transition-all ${o==="push"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(Ys,{className:`w-5 h-5 ${o==="push"?"text-blue-600":"text-gray-600"}`}),e.jsx("span",{className:`text-sm font-medium ${o==="push"?"text-blue-900":"text-gray-700"}`,children:"Push"})]}),e.jsxs("button",{type:"button",onClick:()=>m("both"),className:`flex flex-col items-center gap-2 p-3 rounded-lg border-2 transition-all ${o==="both"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ur,{className:`w-4 h-4 ${o==="both"?"text-blue-600":"text-gray-600"}`}),e.jsx(Ys,{className:`w-4 h-4 ${o==="both"?"text-blue-600":"text-gray-600"}`})]}),e.jsx("span",{className:`text-sm font-medium ${o==="both"?"text-blue-900":"text-gray-700"}`,children:"Both"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-1 bg-gray-50 rounded-lg",children:[e.jsx(Oe,{className:"w-5 h-5 text-gray-600"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer flex-1",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:C=>A(C.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Send notifications immediately"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:C=>d(C.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Include custom message"})]}),h&&e.jsx("textarea",{value:g,onChange:C=>p(C.target.value),placeholder:"Add a message for your employees...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3})]})]})]}),j>0&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-1",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ct,{className:"w-5 h-5 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-900",children:"Open Shifts Included"}),e.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:[j," open shift",j!==1?"s":""," will be published and made available for employees to claim."]})]})]})})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t flex items-center justify-end gap-3",children:[e.jsx(xe,{variant:"secondary",onClick:s,children:"Cancel"}),e.jsxs(xe,{variant:"primary",onClick:y,icon:e.jsx(Cs,{className:"w-4 h-4"}),children:["Publish ",r.length," Shift",r.length!==1?"s":""]})]})]})}function tm({employees:t,roles:s,shifts:a,selectedDate:r,manageBy:n,onShiftClick:i,onShiftDrop:l}){const{theme:u}=Pe(),[o,m]=c.useState(null),[h,d]=c.useState(null),g=Array.from({length:24},(b,z)=>z),p=b=>{var z;return((z=s.find(P=>P.id===b))==null?void 0:z.color)||"#3B82F6"},x=b=>a.filter(z=>{if(z.employeeId!==b)return!1;const P=new Date(z.startTime);return P.getDate()===r.getDate()&&P.getMonth()===r.getMonth()&&P.getFullYear()===r.getFullYear()}),A=()=>a.filter(b=>{if(b.employeeId!==null)return!1;const z=new Date(b.startTime);return z.getDate()===r.getDate()&&z.getMonth()===r.getMonth()&&z.getFullYear()===r.getFullYear()}),y=b=>b.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),N=b=>{const z=new Date(b.startTime).getHours(),P=new Date(b.startTime).getMinutes(),S=new Date(b.endTime).getHours(),k=new Date(b.endTime).getMinutes(),G=z+P/60,E=S+k/60-G;return{top:`${G/24*100}%`,height:`${E/24*100}%`}},v=(b,z)=>{m(z),b.dataTransfer.effectAllowed="move"},j=()=>{m(null),d(null)},D=(b,z)=>{b.preventDefault(),b.dataTransfer.dropEffect="move",d(z)},C=()=>{d(null)},f=(b,z)=>{b.preventDefault(),d(null),o&&l&&l(o.id,r,z),m(null)},w=s.map(b=>({role:b,employees:t.filter(z=>z.roleId===b.id)})).filter(b=>b.employees.length>0);return e.jsx("div",{className:"flex-1 overflow-auto bg-white",children:e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"w-20 border-r",style:{background:u==null?void 0:u.theme.colors.primary[50],borderColor:u==null?void 0:u.theme.colors.primary[200]},children:[e.jsx("div",{className:"h-16 border-b",style:{borderColor:u==null?void 0:u.theme.colors.primary[200]}}),g.map(b=>e.jsxs("div",{className:"h-16 border-b px-2 py-1 text-xs text-gray-500",style:{borderColor:u==null?void 0:u.theme.colors.primary[200]},children:[b.toString().padStart(2,"0"),":00"]},b))]}),e.jsxs("div",{className:"flex-1 border-r relative",style:{borderColor:u==null?void 0:u.theme.colors.primary[200]},children:[e.jsx("div",{className:"h-16 border-b px-4 py-4 sticky top-0 z-10",style:{background:u==null?void 0:u.theme.colors.primary[50],borderColor:u==null?void 0:u.theme.colors.primary[200]},children:e.jsx("div",{className:"font-medium text-gray-900",children:"Open Shifts"})}),e.jsxs("div",{className:`relative h-[1536px] cursor-pointer sr-day-col ${h===""?"bg-amber-50":""}`,onDragOver:b=>D(b,""),onDragLeave:C,onDrop:b=>f(b,""),children:[g.map(b=>e.jsx("div",{className:"h-16 border-b sr-day-cell",style:{borderColor:u==null?void 0:u.theme.colors.primary[200]}},b)),A().map(b=>{const z=N(b),P=(b.endTime.getTime()-b.startTime.getTime())/(1e3*60*60);return e.jsxs("div",{draggable:!0,onDragStart:S=>v(S,b),onDragEnd:j,className:"absolute left-1 right-1 px-2 py-1 rounded text-xs font-medium cursor-move bg-amber-100 text-amber-900 border border-amber-300 overflow-hidden",style:{...z},onClick:()=>i(b,r,""),children:[e.jsxs("div",{className:"font-semibold",children:[y(b.startTime)," - ",y(b.endTime)]}),e.jsxs("div",{className:"text-[10px]",children:[P.toFixed(1),"h"]}),b.notes&&e.jsx("div",{className:"text-[10px] truncate",children:b.notes})]},b.id)})]})]}),n==="employee"?t.map(b=>{const z=x(b.id),P=s.find(S=>S.id===b.roleId);return e.jsxs("div",{className:"flex-1 border-r relative min-w-[160px]",style:{borderColor:u==null?void 0:u.theme.colors.primary[200]},children:[e.jsx("div",{className:"h-16 border-b px-4 py-2 sticky top-0 z-10",style:{background:u==null?void 0:u.theme.colors.primary[50],borderColor:u==null?void 0:u.theme.colors.primary[200]},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:(P==null?void 0:P.color)||"#3B82F6"}}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 text-sm",children:[b.firstName," ",b.lastName]}),e.jsx("div",{className:"text-xs text-gray-500",children:P==null?void 0:P.name})]})]})}),e.jsxs("div",{className:`relative h-[1536px] cursor-pointer sr-day-col ${h===b.id?"bg-teal-50":""}`,onClick:()=>i(null,r,b.id),onDragOver:S=>D(S,b.id),onDragLeave:C,onDrop:S=>f(S,b.id),children:[g.map(S=>e.jsx("div",{className:"h-16 border-b sr-day-cell",style:{borderColor:u==null?void 0:u.theme.colors.primary[200]}},S)),z.map(S=>{const k=N(S),G=(S.endTime.getTime()-S.startTime.getTime())/(1e3*60*60),E=S.shiftType==="confirmed"?Ze:S.shiftType==="training"?va:S.shiftType==="open"?Ct:Oe;return e.jsxs("div",{draggable:!0,onDragStart:M=>v(M,S),onDragEnd:j,className:"absolute left-1 right-1 px-2 py-1 rounded text-xs text-white font-medium cursor-move hover:shadow-lg transition-shadow overflow-hidden",style:{backgroundColor:p(S.roleId),...k},onClick:M=>{M.stopPropagation(),i(S,r,b.id)},children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{size:12}),e.jsxs("span",{className:"font-semibold",children:[y(S.startTime)," - ",y(S.endTime)]})]}),e.jsxs("div",{className:"text-[10px] opacity-90",children:[G.toFixed(1),"h"]}),S.notes&&e.jsx("div",{className:"text-[10px] opacity-90 truncate mt-0.5",children:S.notes}),S.breaks.length>0&&e.jsxs("div",{className:"text-[10px] opacity-90 flex items-center gap-1",children:[e.jsx(ws,{size:10}),S.breaks.reduce((M,F)=>M+F.duration,0),"min"]})]},S.id)})]})]},b.id)}):w.map(({role:b,employees:z})=>z.map((P,S)=>{const k=x(P.id),G=S===0;return e.jsxs("div",{className:"flex-1 border-r relative min-w-[160px]",style:{borderColor:u==null?void 0:u.theme.colors.primary[200]},children:[e.jsxs("div",{className:`h-16 border-b px-4 py-2 sticky top-0 z-10 ${G?"bg-gray-100":"bg-gray-50"}`,style:{borderColor:u==null?void 0:u.theme.colors.primary[200]},children:[G&&e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:b.color}}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:b.name})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{children:e.jsxs("div",{className:"font-medium text-gray-900 text-sm",children:[P.firstName," ",P.lastName]})})})]}),e.jsxs("div",{className:`relative h-[1536px] ${h===P.id?"bg-teal-50":""}`,onClick:()=>i(null,r,P.id),onDragOver:B=>D(B,P.id),onDragLeave:C,onDrop:B=>f(B,P.id),children:[g.map(B=>e.jsx("div",{className:"h-16 border-b",style:{borderColor:u==null?void 0:u.theme.colors.primary[200]}},B)),k.map(B=>{const E=N(B),M=(B.endTime.getTime()-B.startTime.getTime())/(1e3*60*60),_=B.shiftType==="confirmed"?Ze:B.shiftType==="training"?va:B.shiftType==="open"?Ct:Oe;return e.jsxs("div",{draggable:!0,onDragStart:L=>v(L,B),onDragEnd:j,className:"absolute left-1 right-1 px-2 py-1 rounded text-xs text-white font-medium cursor-move hover:shadow-lg transition-shadow overflow-hidden",style:{backgroundColor:b.color,...E},onClick:L=>{L.stopPropagation(),i(B,r,P.id)},children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_,{size:12}),e.jsxs("span",{className:"font-semibold",children:[y(B.startTime)," - ",y(B.endTime)]})]}),e.jsxs("div",{className:"text-[10px] opacity-90",children:[M.toFixed(1),"h"]}),B.notes&&e.jsx("div",{className:"text-[10px] opacity-90 truncate mt-0.5",children:B.notes}),B.breaks.length>0&&e.jsxs("div",{className:"text-[10px] opacity-90 flex items-center gap-1",children:[e.jsx(ws,{size:10}),B.breaks.reduce((L,R)=>L+R.duration,0),"min"]})]},B.id)})]})]},P.id)}))]})})}function sm({employees:t,roles:s,shifts:a,currentWeek:r,manageBy:n,displayOptions:i,onShiftClick:l,onShiftDrop:u,selectedShiftIds:o=[],onShiftSelect:m,selectionMode:h=!1}){const{theme:d}=Pe(),[g,p]=c.useState(null),[x,A]=c.useState(null),y=Array.from({length:7},(F,_)=>{const L=new Date(r);return L.setDate(L.getDate()+_),L}),N=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],j=(F,_)=>{p(_),F.dataTransfer.effectAllowed="move",F.dataTransfer.setData("text/html",F.currentTarget.innerHTML),F.currentTarget instanceof HTMLElement&&(F.currentTarget.style.opacity="0.5")},D=F=>{F.currentTarget instanceof HTMLElement&&(F.currentTarget.style.opacity="1"),p(null),A(null)},C=(F,_,L)=>{F.preventDefault(),F.dataTransfer.dropEffect="move",A({date:_,employeeId:L})},f=()=>{A(null)},w=(F,_,L)=>{F.preventDefault(),A(null),g&&u&&u(g.id,_,L),p(null)},b=F=>{var _;return((_=s.find(L=>L.id===F))==null?void 0:_.color)||"#3B82F6"},z=(F,_)=>{if(F.stopPropagation(),m){const L=o.includes(_);m(_,!L)}},P=F=>o.includes(F),S=(F,_)=>a.filter(L=>{if(L.employeeId!==F)return!1;const R=new Date(L.startTime);return R.getDate()===_.getDate()&&R.getMonth()===_.getMonth()&&R.getFullYear()===_.getFullYear()}),k=F=>F.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),G=F=>{const _=new Date;return F.getDate()===_.getDate()&&F.getMonth()===_.getMonth()&&F.getFullYear()===_.getFullYear()},B=()=>a.reduce((F,_)=>{const L=(_.endTime.getTime()-_.startTime.getTime())/36e5;return F+L},0),E=(F,_)=>a.filter(L=>{if(L.roleId!==F)return!1;const R=new Date(L.startTime);return R.getDate()===_.getDate()&&R.getMonth()===_.getMonth()&&R.getFullYear()===_.getFullYear()}),M=s.map(F=>({role:F,employees:t.filter(_=>_.roleId===F.id),shifts:a.filter(_=>_.roleId===F.id)})).filter(F=>F.employees.length>0);return e.jsx("div",{className:"flex-1 overflow-auto bg-white",children:e.jsxs("div",{className:"min-w-max",children:[e.jsx("div",{className:"sticky top-0 bg-white z-10 border-b",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-64 px-4 py-3 border-r",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:e.jsxs("select",{className:"text-sm text-gray-700 bg-transparent border-none outline-none cursor-pointer",children:[e.jsx("option",{children:"First name [A - Z]"}),e.jsx("option",{children:"First name [Z - A]"}),e.jsx("option",{children:"Last name [A - Z]"}),e.jsx("option",{children:"Last name [Z - A]"})]})}),y.map((F,_)=>{const L=G(F);return e.jsxs("div",{className:"flex-1 min-w-[140px] px-4 py-3 text-center border-r",style:{background:L?d==null?void 0:d.theme.colors.primary[50]:"",borderColor:d==null?void 0:d.theme.colors.primary[200]},children:[e.jsxs("div",{className:`text-sm ${L?"font-semibold":"font-medium"}`,style:{color:L?d==null?void 0:d.theme.colors.primary[600]:d==null?void 0:d.theme.colors.secondary[700]},children:[N[F.getDay()]," ",F.getDate()]}),e.jsxs("div",{className:"text-xs",style:{color:L?d==null?void 0:d.theme.colors.primary[500]:d==null?void 0:d.theme.colors.secondary[500]},children:[v[F.getMonth()],L&&" (Today)"]})]},_)}),e.jsx("div",{className:"w-24 px-4 py-3 text-center",children:e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Total"})})]})}),e.jsx("div",{className:"border-b",style:{backgroundColor:d==null?void 0:d.theme.colors.primary[50],borderColor:d==null?void 0:d.theme.colors.primary[200]},children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"w-64 px-4 py-3 border-r flex items-center gap-2",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:[e.jsx(or,{size:16,style:{color:d==null?void 0:d.theme.colors.primary[900]}}),e.jsx("span",{className:"text-sm font-semibold",style:{color:d==null?void 0:d.theme.colors.primary[900]},children:"Open Shifts"}),e.jsx(zs,{size:14,className:"text-teal-600"})]}),y.map((F,_)=>{const L=a.filter(R=>{if(R.employeeId!==null)return!1;const q=new Date(R.startTime);return q.getDate()===F.getDate()&&q.getMonth()===F.getMonth()&&q.getFullYear()===F.getFullYear()});return e.jsx("div",{className:`flex-1 min-w-[140px] px-2 py-2 border-r cursor-pointer transition-colors sr-row ${(x==null?void 0:x.date.getTime())===F.getTime()&&(x==null?void 0:x.employeeId)===""?"bg-amber-100 border-2 border-amber-400 border-dashed":""}`,style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},onClick:()=>l(null,F,""),onDragOver:R=>C(R,F,""),onDragLeave:f,onDrop:R=>w(R,F,""),children:L.map(R=>{const q=(R.endTime.getTime()-R.startTime.getTime())/36e5,V=P(R.id);return e.jsxs("div",{draggable:!h,onDragStart:Z=>!h&&j(Z,R),onDragEnd:D,className:`mb-1 px-2 py-1.5 rounded text-xs font-medium hover:shadow-md transition-all ${h?"cursor-pointer":"cursor-move"} bg-amber-100 text-amber-900 border-2 ${V?"border-blue-500 ring-2 ring-blue-200":"border-amber-300"}`,onClick:Z=>{Z.stopPropagation(),h?z(Z,R.id):l(R,F,"")},children:[e.jsxs("div",{className:"flex items-center justify-between gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[h?V?e.jsx(Ls,{size:12,className:"flex-shrink-0 text-blue-600"}):e.jsx(Gt,{size:12,className:"flex-shrink-0"}):e.jsx(Ct,{size:12,className:"flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[k(R.startTime)," - ",k(R.endTime)]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[R.isPublished&&!h&&e.jsx(jt,{size:10,className:"flex-shrink-0 text-green-600",title:"Published"}),e.jsxs("span",{className:"text-[10px] opacity-80 flex-shrink-0",children:[q.toFixed(1),"h"]})]})]}),R.quantity&&R.quantity>1&&e.jsxs("div",{className:"text-[10px] mt-0.5 flex items-center gap-1",children:[e.jsx(_t,{size:10}),R.quantity," employees"]}),R.notes&&e.jsx("div",{className:"text-[10px] mt-0.5 truncate",children:R.notes})]},R.id)})},_)}),e.jsxs("div",{className:"w-24 px-4 py-3 text-center text-sm text-gray-700",children:[a.filter(F=>F.employeeId===null).reduce((F,_)=>{const L=(_.endTime.getTime()-_.startTime.getTime())/36e5;return F+L},0).toFixed(0),"h"]})]})}),t.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("div",{className:"text-sm text-gray-300 font-light mb-2",children:"No employees matching"}),e.jsx("div",{className:"text-sm text-gray-300 font-light mb-1",children:"your filters"}),e.jsx("button",{className:"px-6 py-2 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",style:{color:d==null?void 0:d.theme.colors.primary[100]},children:"Reset filters"})]}):n==="employee"?e.jsxs(e.Fragment,{children:[t.map(F=>{const _=s.find(L=>L.id===F.roleId);return e.jsxs("div",{className:"flex border-b hover:bg-gray-50",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:[e.jsx("div",{className:"w-64 px-4 py-4 border-r",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:(_==null?void 0:_.color)||"#3B82F6"}}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[F.firstName," ",F.lastName]})]})}),y.map((L,R)=>{const q=S(F.id,L);return e.jsx("div",{className:`flex-1 min-w-[140px] px-2 py-2 border-r cursor-pointer transition-colors sr-col ${(x==null?void 0:x.date.getTime())===L.getTime()&&(x==null?void 0:x.employeeId)===F.id?"bg-teal-100 border-2 border-teal-400 border-dashed":""}`,style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},onClick:()=>l(null,L,F.id),onDragOver:V=>C(V,L,F.id),onDragLeave:f,onDrop:V=>w(V,L,F.id),children:q.map(V=>{const Z=(V.endTime.getTime()-V.startTime.getTime())/36e5,X=V.shiftType==="confirmed"?Ze:V.shiftType==="training"?va:V.shiftType==="open"?Ct:Oe,ve=P(V.id);return e.jsxs("div",{draggable:!h,onDragStart:ee=>!h&&j(ee,V),onDragEnd:D,className:`mb-1 px-2 py-1.5 rounded text-xs text-white font-medium hover:shadow-md transition-all ${h?"cursor-pointer":"cursor-move"} relative group border-2 ${ve?"border-blue-300 ring-2 ring-blue-200":"border-transparent"}`,style:{backgroundColor:b(V.roleId)},onClick:ee=>{ee.stopPropagation(),h?z(ee,V.id):l(V,L,F.id)},children:[e.jsxs("div",{className:"flex items-center justify-between gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[h?ve?e.jsx(Ls,{size:12,className:"flex-shrink-0"}):e.jsx(Gt,{size:12,className:"flex-shrink-0"}):e.jsx(X,{size:12,className:"flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[k(V.startTime)," - ",k(V.endTime)]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[V.isPublished&&!h&&e.jsx(jt,{size:10,className:"flex-shrink-0",title:"Published"}),e.jsxs("span",{className:"text-[10px] opacity-80 flex-shrink-0",children:[Z.toFixed(1),"h"]})]})]}),V.notes&&e.jsx("div",{className:"text-[10px] opacity-90 mt-0.5 truncate",children:V.notes}),V.costCodes.length>0&&e.jsxs("div",{className:"text-[10px] opacity-90 mt-0.5 flex items-center gap-1",children:[e.jsx(sr,{size:10}),e.jsxs("span",{className:"truncate",children:[V.costCodes.length," cost code",V.costCodes.length>1?"s":""]})]}),V.breaks.length>0&&e.jsxs("div",{className:"text-[10px] opacity-90 mt-0.5 flex items-center gap-1",children:[e.jsx(ws,{size:10}),V.breaks.reduce((ee,me)=>ee+me.duration,0),"min break"]})]},V.id)})},R)}),e.jsxs("div",{className:"w-24 px-4 py-4 text-center text-sm text-gray-700",children:[a.filter(L=>L.employeeId===F.id).reduce((L,R)=>{const q=(R.endTime.getTime()-R.startTime.getTime())/36e5;return L+q},0).toFixed(0),"h"]})]},F.id)}),e.jsxs("div",{className:"flex border-t-2",style:{backgroundColor:d==null?void 0:d.theme.colors.primary[50],borderColor:d==null?void 0:d.theme.colors.primary[400]},children:[e.jsx("div",{className:"w-64 px-4 py-3 border-r",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:e.jsx("span",{className:"text-sm font-semibold",style:{color:d==null?void 0:d.theme.colors.primary[900]},children:"Total filtered"})}),y.map((F,_)=>{const L=a.filter(R=>{const q=new Date(R.startTime);return q.getDate()===F.getDate()&&q.getMonth()===F.getMonth()&&q.getFullYear()===F.getFullYear()}).reduce((R,q)=>{const V=(q.endTime.getTime()-q.startTime.getTime())/36e5;return R+V},0);return e.jsxs("div",{className:"flex-1 min-w-[140px] px-4 py-3 text-center border-r text-sm text-gray-700",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:[L.toFixed(0),"h"]},_)}),e.jsxs("div",{className:"w-24 px-4 py-3 text-center text-sm font-semibold text-gray-900",children:[B().toFixed(0),"h"]})]}),e.jsxs("div",{className:"flex",style:{backgroundColor:d==null?void 0:d.theme.colors.primary[50]},children:[e.jsx("div",{className:"w-64 px-4 py-3 border-r",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:e.jsx("span",{className:"text-sm font-semibold",style:{color:d==null?void 0:d.theme.colors.primary[900]},children:"Total for job location"})}),y.map((F,_)=>e.jsx("div",{className:"flex-1 min-w-[140px] px-4 py-3 text-center border-r text-sm text-gray-700",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:"0h"},_)),e.jsx("div",{className:"w-24 px-4 py-3 text-center text-sm font-semibold text-gray-900",children:"0h"})]})]}):e.jsxs(e.Fragment,{children:[M.map(({role:F,employees:_,shifts:L})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex border-b-2 sticky top-[60px] z-[9]",style:{background:d==null?void 0:d.theme.colors.primary[100],borderColor:d==null?void 0:d.theme.colors.primary[300]},children:[e.jsx("div",{className:"w-64 px-4 py-3 border-r",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:F.color}}),e.jsx("span",{className:"text-sm font-bold",style:{color:d==null?void 0:d.theme.colors.primary[900]},children:F.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",_.length,")"]})]})}),y.map((R,q)=>{const Z=E(F.id,R).reduce((be,X)=>{const ve=(X.endTime.getTime()-X.startTime.getTime())/36e5;return be+ve},0);return e.jsx("div",{className:"flex-1 min-w-[140px] px-4 py-3 text-center border-r text-sm font-semibold text-gray-700",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:Z>0?`${Z.toFixed(0)}h`:"-"},q)}),e.jsxs("div",{className:"w-24 px-4 py-3 text-center text-sm font-semibold text-gray-900",children:[L.reduce((R,q)=>{const V=(q.endTime.getTime()-q.startTime.getTime())/36e5;return R+V},0).toFixed(0),"h"]})]}),_.map(R=>e.jsxs("div",{className:"flex border-b hover:bg-gray-50",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:[e.jsx("div",{className:"w-64 px-4 py-4 border-r pl-8",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-sm text-gray-900",children:[R.firstName," ",R.lastName]})})}),y.map((q,V)=>{const Z=S(R.id,q),be=(x==null?void 0:x.date.getTime())===q.getTime()&&(x==null?void 0:x.employeeId)===R.id;return e.jsx("div",{className:`flex-1 min-w-[140px] px-2 py-2 border-r cursor-pointer transition-colors ${(x==null?void 0:x.date.getTime())===q.getTime()&&(x==null?void 0:x.employeeId)===R.id?"border-2 border-dashed":""}`,style:{backgroundColor:be?d==null?void 0:d.theme.colors.primary[100]:"transparent",borderColor:be?d==null?void 0:d.theme.colors.primary[400]:"inherit"},onClick:()=>l(null,q,R.id),onDragOver:X=>C(X,q,R.id),onDragLeave:f,onDrop:X=>w(X,q,R.id),children:Z.map(X=>{const ve=(X.endTime.getTime()-X.startTime.getTime())/36e5,me=X.shiftType==="confirmed"?Ze:X.shiftType==="training"?va:X.shiftType==="open"?Ct:Oe,se=P(X.id);return e.jsxs("div",{draggable:!h,onDragStart:Q=>!h&&j(Q,X),onDragEnd:D,className:`mb-1 px-2 py-1.5 rounded text-xs text-white font-medium hover:shadow-md transition-all ${h?"cursor-pointer":"cursor-move"} relative group border-2 ${se?"border-blue-300 ring-2 ring-blue-200":"border-transparent"}`,style:{backgroundColor:b(X.roleId)},onClick:Q=>{Q.stopPropagation(),h?z(Q,X.id):l(X,q,R.id)},children:[e.jsxs("div",{className:"flex items-center justify-between gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[h?se?e.jsx(Ls,{size:12,className:"flex-shrink-0"}):e.jsx(Gt,{size:12,className:"flex-shrink-0"}):e.jsx(me,{size:12,className:"flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[k(X.startTime)," - ",k(X.endTime)]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[X.isPublished&&!h&&e.jsx(jt,{size:10,className:"flex-shrink-0",title:"Published"}),e.jsxs("span",{className:"text-[10px] opacity-80 flex-shrink-0",children:[ve.toFixed(1),"h"]})]})]}),X.notes&&e.jsx("div",{className:"text-[10px] opacity-90 mt-0.5 truncate",children:X.notes}),X.costCodes.length>0&&e.jsxs("div",{className:`text-[10px] opacity-90 mt-0.5 flex items-center gap-1 ${i!=null&&i.highlightIncompleteTasks?"text-yellow-300 font-semibold":""}`,children:[e.jsx(sr,{size:10}),e.jsxs("span",{className:"truncate",children:[X.costCodes.length," cost code",X.costCodes.length>1?"s":""]}),(i==null?void 0:i.highlightIncompleteTasks)&&e.jsx(it,{size:10,className:"text-yellow-300"})]}),X.breaks.length>0&&e.jsxs("div",{className:"text-[10px] opacity-90 mt-0.5 flex items-center gap-1",children:[e.jsx(ws,{size:10}),X.breaks.reduce((Q,W)=>Q+W.duration,0),"min break"]})]},X.id)})},V)}),e.jsxs("div",{className:"w-24 px-4 py-4 text-center text-sm text-gray-700",children:[a.filter(q=>q.employeeId===R.id).reduce((q,V)=>{const Z=(V.endTime.getTime()-V.startTime.getTime())/36e5;return q+Z},0).toFixed(0),"h"]})]},R.id))]},F.id)),e.jsxs("div",{className:"flex border-t-2",style:{background:d==null?void 0:d.theme.colors.primary[50],borderColor:d==null?void 0:d.theme.colors.primary[300]},children:[e.jsx("div",{className:"w-64 px-4 py-3 border-r",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:e.jsx("span",{className:"text-sm font-semibold",style:{borderColor:d==null?void 0:d.theme.colors.primary[900]},children:"Total filtered"})}),y.map((F,_)=>{const L=a.filter(R=>{const q=new Date(R.startTime);return q.getDate()===F.getDate()&&q.getMonth()===F.getMonth()&&q.getFullYear()===F.getFullYear()}).reduce((R,q)=>{const V=(q.endTime.getTime()-q.startTime.getTime())/36e5;return R+V},0);return e.jsxs("div",{className:"flex-1 min-w-[140px] px-4 py-3 text-center border-r text-sm text-gray-700",style:{borderColor:d==null?void 0:d.theme.colors.primary[200]},children:[L.toFixed(0),"h"]},_)}),e.jsxs("div",{className:"w-24 px-4 py-3 text-center text-sm font-semibold text-gray-900",children:[B().toFixed(0),"h"]})]})]})]})})}function am({searchQuery:t,onSearchChange:s,viewMode:a,onViewModeChange:r,currentWeek:n,onWeekChange:i,onDateSelect:l,onCreateShift:u,onCreateOpenShift:o,onCreateFromTemplate:m,onToggleFilters:h,isFiltersPanelVisible:d,selectionMode:g=!1,onToggleSelectionMode:p}){const{theme:x}=Pe(),[A,y]=c.useState(!1),N=c.useRef(null);c.useEffect(()=>{const D=C=>{N.current&&!N.current.contains(C.target)&&y(!1)};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[]);const v=D=>{const C=new Date(D.getFullYear(),0,1),f=(D.getTime()-C.getTime())/864e5;return Math.ceil((f+C.getDay()+1)/7)},j=(D,C)=>{const f=new Date(D,0,1),w=(C-1)*7,b=new Date(f.getTime()+w*864e5);return b.setDate(b.getDate()-b.getDay()),b};return e.jsxs("div",{className:"bg-white border-b px-6 py-4",style:{borderColor:x==null?void 0:x.theme.colors.primary[200]},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[h&&e.jsx(xe,{onClick:h,variant:"outline",icon:d?e.jsx(Sn,{size:18}):e.jsx(ur,{size:18}),title:d?"Hide Filters":"Show Filters",children:d?"Hide Filters":"Show Filters"}),e.jsxs("div",{className:"relative",ref:N,children:[e.jsxs(xe,{onClick:()=>y(!A),variant:"outline",icon:e.jsx(ar,{size:18}),iconPosition:"left",children:["Create",e.jsx(Ft,{size:16,className:"ml-2"})]}),A&&e.jsxs("div",{className:"absolute left-0 mt-2 w-72 bg-white border rounded-lg shadow-lg z-50",style:{borderColor:x==null?void 0:x.theme.colors.primary[200]},children:[e.jsxs("button",{onClick:()=>{u(),y(!1)},className:"w-full px-4 py-3 text-left text-sm transition-colors rounded-t-lg flex items-center gap-3 sr-create-items",children:[e.jsx(wt,{size:18,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Shift"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Create a shift assigned to a specific employee"})]})]}),e.jsxs("button",{onClick:()=>{o(),y(!1)},className:"w-full px-4 py-3 text-left text-sm transition-colors flex items-center gap-3 border-t sr-create-items",style:{borderColor:x==null?void 0:x.theme.colors.primary[200]},children:[e.jsx(ot,{size:18,className:"text-orange-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Open Shift"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Create an open shift that can be assigned to employees later"})]})]}),e.jsxs("button",{onClick:()=>{m(),y(!1)},className:"w-full px-4 py-3 text-left text-sm transition-colors rounded-b-lg flex items-center gap-3 border-t sr-create-items",style:{borderColor:x==null?void 0:x.theme.colors.primary[200]},children:[e.jsx(et,{size:18,className:"text-teal-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"From Template"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Use a saved shift template"})]})]})]})]}),p&&e.jsx(xe,{onClick:p,variant:g?"primary":"outline",icon:e.jsx(Ls,{size:18}),iconPosition:"left",children:g?"Done":"Action"}),e.jsxs("div",{className:"relative",children:[e.jsx(xt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search resources...",value:t,onChange:D=>s(D.target.value),className:"pl-10 pr-10 py-2 w-64 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",style:{borderColor:x==null?void 0:x.theme.colors.primary[300]}})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(xe,{variant:"ghost",className:"p-2",children:e.jsx(ea,{size:20})})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xe,{onClick:()=>i("prev"),variant:"ghost",className:"p-2",children:e.jsx(Ns,{size:20})}),a==="day"&&e.jsx("input",{type:"date",value:n.toISOString().split("T")[0],onChange:D=>{const C=new Date(D.target.value);l(C)},className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:border-transparent text-sm font-medium text-gray-900 sr-date-selector",style:{borderColor:x==null?void 0:x.theme.colors.primary[300]}}),a==="week"&&e.jsx("input",{type:"week",value:`${n.getFullYear()}-W${String(v(n)).padStart(2,"0")}`,onChange:D=>{const[C,f]=D.target.value.split("-W"),w=j(parseInt(C),parseInt(f));l(w)},className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:border-transparent text-sm font-medium text-gray-900 sr-date-selector",style:{borderColor:x==null?void 0:x.theme.colors.primary[300]}}),a==="month"&&e.jsx("input",{type:"month",value:`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`,onChange:D=>{const[C,f]=D.target.value.split("-"),w=new Date(parseInt(C),parseInt(f)-1,1);l(w)},className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:border-transparent text-sm font-medium text-gray-900 sr-date-selector",style:{borderColor:x==null?void 0:x.theme.colors.primary[300]}}),e.jsx(xe,{onClick:()=>i("next"),variant:"ghost",className:"p-2",children:e.jsx(ds,{size:20})})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center space-x-1 rounded-lg p-1",style:{backgroundColor:x==null?void 0:x.theme.colors.primary[100]},children:[e.jsxs("button",{onClick:()=>r("day"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 ${a==="day"?"bg-white shadow-sm font-semibold":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,style:{color:a==="day"?x==null?void 0:x.theme.colors.primary[700]:"inherit"},children:[e.jsx(Je,{size:16}),"Day"]}),e.jsxs("button",{onClick:()=>r("week"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 ${a==="week"?"bg-white shadow-sm font-semibold":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,style:{color:a==="week"?x==null?void 0:x.theme.colors.primary[700]:"inherit"},children:[e.jsx(Tn,{size:16}),"Week"]}),e.jsxs("button",{onClick:()=>r("month"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 ${a==="month"?"bg-white shadow-sm font-semibold":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,style:{color:a==="month"?x==null?void 0:x.theme.colors.primary[700]:"inherit"},children:[e.jsx(cr,{size:16}),"Month"]})]})})]})]})}function rm({employees:t,roles:s,shifts:a,currentMonth:r,onShiftClick:n,onDateClick:i}){const{theme:l}=Pe(),u=r.getFullYear(),o=r.getMonth(),m=new Date(u,o,1),d=new Date(u,o+1,0).getDate(),g=m.getDay(),p=[];for(let j=0;j<g;j++){const D=new Date(u,o,-g+j+1);p.push(D)}for(let j=1;j<=d;j++)p.push(new Date(u,o,j));const x=7-p.length%7;if(x<7)for(let j=1;j<=x;j++)p.push(new Date(u,o+1,j));const A=j=>a.filter(D=>{const C=new Date(D.startTime);return C.getDate()===j.getDate()&&C.getMonth()===j.getMonth()&&C.getFullYear()===j.getFullYear()}),y=j=>{const D=new Date;return j.getDate()===D.getDate()&&j.getMonth()===D.getMonth()&&j.getFullYear()===D.getFullYear()},N=j=>j.getMonth()===o,v=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return e.jsx("div",{className:"flex-1 overflow-auto bg-white",children:e.jsxs("div",{className:"min-h-full",children:[e.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200 sticky top-0 z-10",style:{background:l==null?void 0:l.theme.colors.primary[50]},children:v.map(j=>e.jsx("div",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700 border-r border-gray-200 last:border-r-0",children:j},j))}),e.jsx("div",{className:"grid grid-cols-7",style:{gridAutoRows:"minmax(140px, 1fr)"},children:p.map((j,D)=>{if(!j)return null;const C=A(j),f=N(j),w=y(j),b=t.map(S=>({employee:S,shifts:C.filter(k=>k.employeeId===S.id)})).filter(S=>S.shifts.length>0),z=C.filter(S=>S.employeeId===null).length,P=C.reduce((S,k)=>{const G=(k.endTime.getTime()-k.startTime.getTime())/36e5;return S+G},0);return e.jsxs("div",{className:"border-r border-b border-gray-200 p-2 cursor-pointer transition-colors sr-month-col",onClick:()=>i(j),style:{background:w?l==null?void 0:l.theme.colors.primary[100]:f?"":l==null?void 0:l.theme.colors.primary[50]},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:`text-sm font-medium ${w?"bg-teal-600 text-white w-6 h-6 rounded-full flex items-center justify-center":f?"text-gray-900":"text-gray-400"}`,children:j.getDate()}),P>0&&e.jsxs("div",{className:"text-xs text-gray-600 font-medium",children:[P.toFixed(0),"h"]})]}),e.jsxs("div",{className:"space-y-1",children:[b.slice(0,3).map(({employee:S,shifts:k})=>{const G=s.find(B=>B.id===S.roleId);return e.jsxs("div",{className:"text-xs px-1.5 py-1 rounded truncate font-semibold",style:{backgroundColor:G!=null&&G.color?`${G.color}20`:"#3B82F620",color:(G==null?void 0:G.color)||"#3B82F6",borderLeft:`2px solid ${(G==null?void 0:G.color)||"#3B82F6"}`},onClick:B=>{B.stopPropagation(),k[0]&&n(k[0],j,S.id)},children:[S.firstName," ",S.lastName.charAt(0),". (",k.length,")"]},S.id)}),b.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 px-1.5",children:["+",b.length-3," more"]}),z>0&&e.jsxs("div",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-100 text-amber-900 border-l-2 border-amber-600",children:[z," open shift",z>1?"s":""]}),C.length===0&&f&&e.jsx("div",{className:"text-xs text-gray-400 px-1.5 py-0.5",children:"No shifts"})]})]},D)})})]})})}const nm=[{id:"cc1",name:"Regular Labor",description:"Standard hourly labor",category:"labor"},{id:"cc2",name:"Overtime Labor",description:"Overtime hours",category:"labor"},{id:"cc3",name:"Skilled Labor",description:"Specialized skilled workers",category:"labor"},{id:"cc4",name:"Building Materials",description:"Lumber, concrete, etc.",category:"materials"},{id:"cc5",name:"Electrical Materials",description:"Wiring, fixtures, panels",category:"materials"},{id:"cc6",name:"Plumbing Materials",description:"Pipes, fittings, fixtures",category:"materials"},{id:"cc7",name:"Paint & Finishes",description:"Paint, stain, sealers",category:"materials"},{id:"cc8",name:"Heavy Equipment",description:"Excavators, loaders",category:"equipment"},{id:"cc9",name:"Tools & Machinery",description:"Power tools, small equipment",category:"equipment"},{id:"cc10",name:"Vehicle Rental",description:"Trucks, vans",category:"equipment"},{id:"cc11",name:"Site Preparation",description:"Clearing, grading",category:"project"},{id:"cc12",name:"Foundation Work",description:"Foundation and concrete",category:"project"},{id:"cc13",name:"Framing",description:"Structural framing",category:"project"},{id:"cc14",name:"Electrical Work",description:"Electrical installation",category:"project"},{id:"cc15",name:"Plumbing Work",description:"Plumbing installation",category:"project"},{id:"cc16",name:"HVAC Work",description:"Heating and cooling",category:"project"},{id:"cc17",name:"Drywall & Insulation",description:"Interior walls",category:"project"},{id:"cc18",name:"Finishing Work",description:"Paint, trim, flooring",category:"project"},{id:"cc19",name:"Permits & Fees",description:"Building permits, inspections",category:"admin"},{id:"cc20",name:"Project Management",description:"Management overhead",category:"admin"},{id:"cc21",name:"Safety & Compliance",description:"Safety equipment, training",category:"admin"}];function im({isOpen:t,onClose:s,onSelectCostCode:a,existingCostCodes:r}){const[n,i]=c.useState(""),[l,u]=c.useState("all"),{theme:o}=Pe(),m=nm.filter(p=>{var N;const x=p.name.toLowerCase().includes(n.toLowerCase())||(((N=p.description)==null?void 0:N.toLowerCase().includes(n.toLowerCase()))??!1),A=l==="all"||p.category===l,y=!r.some(v=>v.id===p.id);return x&&A&&y}),h=p=>{switch(p){case"labor":return e.jsx(or,{size:16,className:"text-blue-600"});case"materials":return e.jsx(sl,{size:16,className:"text-green-600"});case"equipment":return e.jsx(Oa,{size:16,className:"text-orange-600"});case"project":return e.jsx(js,{size:16,className:"text-purple-600"});case"admin":return e.jsx(js,{size:16,className:"text-gray-600"});default:return e.jsx(js,{size:16,className:"text-gray-600"})}},d=p=>{switch(p){case"labor":return"bg-blue-50 border-blue-200 hover:bg-blue-100";case"materials":return"bg-green-50 border-green-200 hover:bg-green-100";case"equipment":return"bg-orange-50 border-orange-200 hover:bg-orange-100";case"project":return"bg-purple-50 border-purple-200 hover:bg-purple-100";case"admin":return"bg-gray-50 border-gray-200 hover:bg-gray-100";default:return"bg-gray-50 border-gray-200 hover:bg-gray-100"}},g=p=>{const x={id:p.id,name:p.name,description:p.description};a(x),s()};return e.jsx(Ue,{open:t,onClose:s,title:"Select Cost Code",size:"lg",children:e.jsxs("div",{className:"space-y-7 p-7",children:[e.jsxs("div",{className:"flex gap-5",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",placeholder:"Search cost codes...",value:n,onChange:p=>i(p.target.value),className:"w-full px-3 py-2 pl-10 border border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-indigo-50"}),e.jsx(xt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-indigo-400",size:18})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:l,onChange:p=>u(p.target.value),className:"px-3 py-2 border border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 appearance-none pr-8 bg-indigo-50",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"labor",children:"Labor"}),e.jsx("option",{value:"materials",children:"Materials"}),e.jsx("option",{value:"equipment",children:"Equipment"}),e.jsx("option",{value:"project",children:"Project"}),e.jsx("option",{value:"admin",children:"Administrative"})]}),e.jsx(Ft,{className:"absolute right-2 top-1/2 -translate-y-1/2 text-indigo-400 pointer-events-none",size:18})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-indigo-900 mb-4",children:"Available Cost Codes"}),m.length>0?e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:m.map(p=>e.jsxs("div",{onClick:()=>g(p),className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-colors ${d(p.category)}`,children:[h(p.category),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:p.name}),p.description&&e.jsx("div",{className:"text-sm text-gray-600",children:p.description})]}),e.jsx("div",{className:"text-xs text-gray-500 capitalize px-2 py-1 bg-white rounded",children:p.category})]},p.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-2 text-gray-500",children:[e.jsx(xt,{size:48,className:"mb-4 text-gray-300"}),e.jsx("div",{className:"text-lg font-medium mb-2",children:"No cost codes found"}),e.jsx("div",{className:"text-sm",children:"Try adjusting your search or filters"})]})]}),e.jsx("div",{className:"px-6 py-4 border-t-2",style:{background:o==null?void 0:o.theme.colors.primary[50],borderColor:o==null?void 0:o.theme.colors.primary[200]},children:e.jsx("div",{className:"flex justify-end",children:e.jsx(xe,{onClick:s,variant:"primary",children:"Done"})})})]})})}function lm({isOpen:t,onClose:s,onSelectResource:a,employees:r,existingResources:n}){const[i,l]=c.useState(""),[u,o]=c.useState("all"),{theme:m}=Pe(),h=[{id:"eq1",name:"Laptop",type:"equipment"},{id:"eq2",name:"Projector",type:"equipment"},{id:"eq3",name:"Safety Helmet",type:"equipment"},{id:"eq4",name:"Tool Kit",type:"equipment"}],d=[{id:"mat1",name:"Cables",type:"material"},{id:"mat2",name:"Screws",type:"material"},{id:"mat3",name:"Paint",type:"material"},{id:"mat4",name:"Wood",type:"material"}],x=[...r.map(v=>({id:`emp-${v.id}`,name:`${v.firstName} ${v.lastName}`,type:"employee",email:v.email})),...h,...d].filter(v=>{const j=v.name.toLowerCase().includes(i.toLowerCase()),D=u==="all"||v.type===u,C=!n.some(f=>f.type===v.type&&f.name===v.name);return j&&D&&C}),A=v=>{switch(v){case"employee":return e.jsx(wt,{size:16,className:"text-green-600"});case"equipment":return e.jsx(jl,{size:16,className:"text-blue-600"});case"material":return e.jsx(St,{size:16,className:"text-purple-600"});default:return e.jsx(wt,{size:16,className:"text-gray-600"})}},y=v=>{switch(v){case"employee":return"bg-green-50 border-green-200 hover:bg-green-100";case"equipment":return"bg-blue-50 border-blue-200 hover:bg-blue-100";case"material":return"bg-purple-50 border-purple-200 hover:bg-purple-100";default:return"bg-gray-50 border-gray-200 hover:bg-gray-100"}},N=v=>{const j={id:v.id,name:v.name,type:v.type};a(j),s()};return e.jsx(Ue,{open:t,onClose:s,title:"Select Resource",size:"lg",children:e.jsxs("div",{className:"space-y-7 p-7",children:[e.jsxs("div",{className:"flex gap-5",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",placeholder:"Search",value:i,onChange:v=>l(v.target.value),className:"w-full px-3 py-2 pl-10 border border-teal-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 bg-teal-50"}),e.jsx(xt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-teal-400",size:18})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:u,onChange:v=>o(v.target.value),className:"px-3 py-2 border border-teal-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 appearance-none pr-8 bg-teal-50",children:[e.jsx("option",{value:"all",children:"All types"}),e.jsx("option",{value:"employee",children:"Employees"}),e.jsx("option",{value:"equipment",children:"Equipment"}),e.jsx("option",{value:"material",children:"Materials"})]}),e.jsx(Ft,{className:"absolute right-2 top-1/2 -translate-y-1/2 text-teal-400 pointer-events-none",size:18})]})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-teal-900 mb-4",children:"Available"}),x.length>0?e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:x.map(v=>e.jsxs("div",{onClick:()=>N(v),className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-colors ${y(v.type)}`,children:[A(v.type),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:v.name}),v.email&&e.jsx("div",{className:"text-sm text-gray-600",children:v.email})]}),e.jsx("div",{className:"text-xs text-gray-500 capitalize",children:v.type})]},v.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-2 text-gray-500",children:[e.jsx(xt,{size:48,className:"mb-4 text-gray-300"}),e.jsx("div",{className:"text-lg font-medium mb-2",children:"No resources found"}),e.jsx("div",{className:"text-sm",children:"Try adjusting your search or filters"})]})]}),e.jsx("div",{className:"px-6 py-4 border-t-2",style:{background:m==null?void 0:m.theme.colors.primary[50],borderColor:m==null?void 0:m.theme.colors.primary[200]},children:e.jsx("div",{className:"flex justify-end",children:e.jsx(xe,{onClick:s,variant:"primary",children:"Done"})})})]})})}function om({isOpen:t,onClose:s,onTransfer:a,employees:r,roles:n,locations:i,currentShift:l}){var f,w,b,z;const[u,o]=c.useState(""),[m,h]=c.useState(""),[d,g]=c.useState(""),[p,x]=c.useState(""),[A,y]=c.useState(""),N=P=>{if(P.preventDefault(),!u||!m||!d||!p){alert("Please fill in all required fields");return}const S=new Date(m);a({newEmployeeId:u,newDate:S,newStartTime:d,newEndTime:p,reason:A}),s()},v=()=>r.find(P=>P.id===l.employeeId),j=()=>n.find(P=>P.id===l.roleId),D=()=>i.find(P=>P.id===l.locationId),C=P=>P.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsx(Ue,{open:t,onClose:s,title:"Transfer Shift",size:"lg",children:e.jsxs("div",{className:"p-5",children:[e.jsx("div",{className:"bg-red-50 px-4 py-3 -mx-6 -mt-6 mb-1 border-b border-red-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(it,{size:20,className:"text-red-600"})}),e.jsx("span",{className:"text-sm font-medium text-red-800",children:"Warning: This will reassign the shift to a different employee"})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 p-1 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Current Shift"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wt,{size:16,className:"text-gray-500 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600",children:"Employee:"}),e.jsxs("span",{className:"font-medium",children:[(f=v())==null?void 0:f.firstName," ",(w=v())==null?void 0:w.lastName]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{size:16,className:"text-gray-500 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600",children:"Date & Time:"}),e.jsxs("span",{className:"font-medium text-xs",children:[C(l.startTime)," - ",C(l.endTime)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{size:16,className:"text-gray-500 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600",children:"Role:"}),e.jsx("span",{className:"font-medium",children:(b=j())==null?void 0:b.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nt,{size:16,className:"text-gray-500 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600",children:"Location:"}),e.jsx("span",{className:"font-medium",children:(z=D())==null?void 0:z.name})]})]})]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer to Employee *"}),e.jsxs("select",{value:u,onChange:P=>o(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:!0,children:[e.jsx("option",{value:"",children:"Select an employee"}),r.filter(P=>P.id!==l.employeeId).map(P=>{var S;return e.jsxs("option",{value:P.id,children:[P.firstName," ",P.lastName," - ",(S=n.find(k=>k.id===P.roleId))==null?void 0:S.name]},P.id)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Date *"}),e.jsx("input",{type:"date",value:m,onChange:P=>h(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time *"}),e.jsx("input",{type:"time",value:d,onChange:P=>g(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time *"}),e.jsx("input",{type:"time",value:p,onChange:P=>x(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Reason"}),e.jsx("textarea",{value:A,onChange:P=>y(P.target.value),placeholder:"Explain why this shift is being transferred...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 h-20 resize-none"})]}),e.jsxs("div",{className:"p-1 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(it,{size:18,className:"text-yellow-600"}),e.jsx("span",{className:"font-medium text-yellow-800",children:"Transfer Notice"})]}),e.jsx("p",{className:"text-sm text-yellow-700",children:"This action will move the shift from the current employee to the selected employee. Please ensure the new employee is available and qualified for this role."})]}),e.jsxs("div",{className:"flex gap-3 pt-4 sticky bottom-0 bg-white border-t border-gray-200 -mx-6 px-6 py-4 mt-6",children:[e.jsx(xe,{type:"button",onClick:s,variant:"outline",className:"flex-1",children:"Cancel"}),e.jsx(xe,{type:"submit",variant:"primary",className:"flex-1 bg-red-600 hover:bg-red-700",children:"Transfer Shift"})]})]})]})]})})}function cm({isOpen:t,onClose:s,onSave:a,onSaveTemplate:r,onDelete:n,onDuplicate:i,onTransfer:l,employees:u,roles:o,locations:m,selectedDate:h,selectedEmployeeId:d,editingShift:g,existingShifts:p=[],mode:x="open",onEmployeeSelection:A,onSwitchToTemplate:y}){var As,Ps;const[N,v]=c.useState((g==null?void 0:g.employeeId)||d||""),[j,D]=c.useState((g==null?void 0:g.roleId)||((As=o[0])==null?void 0:As.id)||""),[C,f]=c.useState(g?new Date(g.startTime).toTimeString().slice(0,5):"06:00"),[w,b]=c.useState(g?new Date(g.endTime).toTimeString().slice(0,5):"16:00"),[z,P]=c.useState((g==null?void 0:g.shiftType)||"open"),[S,k]=c.useState((g==null?void 0:g.notes)||""),[G,B]=c.useState((g==null?void 0:g.locationId)||((Ps=m[0])==null?void 0:Ps.id)||"1"),[E,M]=c.useState((g==null?void 0:g.quantity)||1),[F,_]=c.useState((g==null?void 0:g.breaks)||[{id:"1",name:"Break",duration:15,paid:!0}]),[L,R]=c.useState((g==null?void 0:g.costCodes)||[{id:"1",name:"Electrical Work",description:"Start 6:00am"}]),[q,V]=c.useState((g==null?void 0:g.resources)||[]),[Z,be]=c.useState(!1),[X,ve]=c.useState(!1),[ee,me]=c.useState(!1),[se,Q]=c.useState(!1),[W,K]=c.useState([]),[I,U]=c.useState("daily"),[ce,T]=c.useState(1),[H,ne]=c.useState("never"),[ue,Ce]=c.useState(""),[ke,$e]=c.useState(10),[$,J]=c.useState([!1,!0,!0,!0,!0,!0,!1]),[O,je]=c.useState(1),[ae,re]=c.useState(!1),[Ie,We]=c.useState(!1),[Ke,st]=c.useState(!1),{theme:Se}=Pe();c.useEffect(()=>{if(g){v(g.employeeId||""),D(g.roleId||""),f(new Date(g.startTime).toTimeString().slice(0,5)),b(new Date(g.endTime).toTimeString().slice(0,5)),P(g.shiftType||"open"),k(g.notes||""),B(g.locationId||"1"),M(g.quantity||1),_(g.breaks||[]),R(g.costCodes||[]);const de=g.resources||[];if(g.employeeId){const De=u.find(qe=>qe.id===g.employeeId),ze=de.some(qe=>qe.type==="employee"&&qe.name===`${De==null?void 0:De.firstName} ${De==null?void 0:De.lastName}`);if(De&&!ze){const qe={id:`employee-${g.employeeId}`,name:`${De.firstName} ${De.lastName}`,type:"employee"};V([qe,...de])}else V(de)}else V(de)}},[g,u]),c.useEffect(()=>{if(!g&&N){const de=u.find(De=>De.id===N);de&&V(De=>De.some(qe=>qe.type==="employee"&&qe.name===`${de.firstName} ${de.lastName}`)?De:[{id:`employee-${N}`,name:`${de.firstName} ${de.lastName}`,type:"employee"},...De])}},[N,u,g]),c.useEffect(()=>{if(!N||!C||!w){se&&Q(!1);return}const[de,De]=C.split(":").map(Number),[ze,qe]=w.split(":").map(Number),yt=new Date(h);yt.setHours(de,De,0,0);const It=new Date(h);It.setHours(ze,qe,0,0);const Pt=p.filter(Bt=>{if(g&&Bt.id===g.id||Bt.employeeId!==N)return!1;const Bs=new Date(Bt.startTime),aa=new Date(Bt.endTime);return yt<aa&&It>Bs}),Et=Pt.length>0;Et!==se&&Q(Et),Pt.length>0&&K(Pt)},[N,C,w,h,p,g,se]),c.useEffect(()=>{const de=De=>{De.key==="Escape"&&s()};return t&&window.addEventListener("keydown",de),()=>{window.removeEventListener("keydown",de)}},[t,s]);const ft=de=>{de.preventDefault();const[De,ze]=C.split(":").map(Number),[qe,yt]=w.split(":").map(Number),It=new Date(h);It.setHours(De,ze,0,0);const Pt=new Date(h);Pt.setHours(qe,yt,0,0),a({employeeId:N||null,locationId:G,roleId:j,startTime:It,endTime:Pt,shiftType:z,notes:S,quantity:E,breaks:F,costCodes:L,resources:q}),s()},oe=()=>{n&&g&&window.confirm("Are you sure you want to delete this shift?")&&(n(g.id),s())},we=()=>{i&&g&&(i(g),s())},pe=()=>{const de={id:Math.random().toString(36).substr(2,9),name:"Break",duration:30,paid:!1};_([...F,de])},ye=de=>{_(F.filter(De=>De.id!==de))},Me=()=>{st(!0)},tt=de=>{R([...L,de])},nt=de=>{R(L.filter(De=>De.id!==de))},Rt=()=>{We(!0)},At=de=>{V([...q,de])},ge=de=>{de.startsWith("employee-")||V(q.filter(De=>De.id!==de))},Te=()=>{var De;if(!r)return;const de={name:`${((De=o.find(ze=>ze.id===j))==null?void 0:De.name)||"Shift"} Template`,startTime:C,endTime:w,roleId:j,breaks:F,costCodes:L,resources:q,quantity:E,isOnCall:Z,notes:S};r(de),s()},Ee=()=>{A?A():s()},te=()=>{re(!0)},Ne=de=>{l&&l(de),re(!1)},Re=()=>{const[de,De]=C.split(":").map(Number),[ze,qe]=w.split(":").map(Number),yt=ze*60+qe-(de*60+De),It=F.reduce((Pt,Et)=>Pt+Et.duration,0);return((yt-It)/60).toFixed(0)},dt=de=>{const[De,ze]=de.split(":").map(Number);return De*60+ze},Lt=(de,De,ze)=>Math.max(De,Math.min(ze,de)),Is=()=>{const qe=dt(C),yt=dt(w),It=Lt(qe,0,1440),Pt=Lt(yt,0,1440),Et=(It-0)/1440*100,Bt=Math.max(0,(Pt-It)/1440*100);return{leftPct:Et,widthPct:Bt}},xs=()=>{let de="";if(ce===1?de=`Every ${I}`:de=`Every ${ce} ${I}${I==="daily"?"s":""}`,I==="weekly"){const De=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ze=$.map((qe,yt)=>qe?De[yt]:null).filter(Boolean);ze.length===1?de+=` on ${ze[0]}`:ze.length>1&&(de+=` on ${ze.slice(0,-1).join(", ")} and ${ze[ze.length-1]}`)}else I==="monthly"&&(de+=` on the ${O}${hs(O)} day of the month`);if(H==="date"&&ue){const De=new Date(ue);de+=` until ${De.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}`}else H==="count"&&(de+=` for ${ke} occurrence${ke!==1?"s":""}`);return de},hs=de=>{const De=de%10,ze=de%100;return De===1&&ze!==11?"st":De===2&&ze!==12?"nd":De===3&&ze!==13?"rd":"th"},Kt=de=>{const[De,ze]=de.split(":"),qe=parseInt(De),yt=qe>=12?"pm":"am";return`${qe%12||12}:${ze}${yt}`},ps=de=>{var De;return((De=o.find(ze=>ze.id===de))==null?void 0:De.name)||"Unknown Role"},Jt=de=>{const De=u.find(ze=>ze.id===de);return De?`${De.firstName} ${De.lastName}`:"Unknown Employee"},gs=()=>e.jsx("form",{id:"shift-form",onSubmit:ft,className:"flex-1 overflow-y-auto px-2",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"flex-1 ps-0 p-2 space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-3",style:{color:Se==null?void 0:Se.theme.colors.primary[900]},children:"Details"}),e.jsx(he,{label:"Date",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"}),e.jsx(Je,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",size:18})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-semibold mb-3",style:{color:Se==null?void 0:Se.theme.colors.primary[900]},children:"Hours"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(he,{label:"Start",children:e.jsx("input",{type:"time",value:C,onChange:de=>f(de.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",required:!0})}),e.jsx(he,{label:"End",children:e.jsx("input",{type:"time",value:w,onChange:de=>b(de.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",required:!0})}),e.jsx(he,{label:"Quantity",children:e.jsx("input",{type:"number",min:"1",value:E,onChange:de=>M(parseInt(de.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500"})})]})]}),e.jsx(he,{label:"Job Location",children:e.jsx("select",{value:G,onChange:de=>B(de.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",children:m.map(de=>e.jsx("option",{value:de.id,children:de.name},de.id))})}),e.jsx(he,{label:"Role",children:e.jsxs("select",{value:j,onChange:de=>D(de.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",required:!0,children:[e.jsx("option",{value:"",children:"Select role..."}),o.map(de=>e.jsx("option",{value:de.id,children:de.name},de.id))]})}),e.jsx(he,{label:"Manage audience",icon:e.jsx(ot,{size:16}),children:e.jsx("div",{className:"bg-gray-100 border border-gray-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:g!=null&&g.employeeId||N?`Assigned to: ${Jt((g==null?void 0:g.employeeId)||N)}`:"View the current rules and eligible employees"}),e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})}),e.jsx(he,{label:"Note",children:e.jsx("textarea",{value:S,onChange:de=>k(de.target.value),placeholder:"Add a note for this shift...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 h-20 resize-none"})})]}),e.jsxs("div",{className:"w-64 p-2 space-y-6",style:{backgroundColor:Se==null?void 0:Se.theme.colors.primary[50]},children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-xl font-semibold",style:{color:Se==null?void 0:Se.theme.colors.primary[900]},children:"Breaks"}),e.jsxs("div",{className:"flex items-center gap-2",style:{color:Se==null?void 0:Se.theme.colors.primary[600]},children:[e.jsx(zs,{size:14}),e.jsx("span",{className:"text-sm",children:"Automated"})]})]}),F.length>0&&e.jsx("div",{className:"space-y-2 mb-3",children:F.map(de=>e.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded-lg border border-gray-200",children:[e.jsx(La,{size:14,className:"text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium",children:[de.duration,"m"]}),e.jsx("span",{className:"text-xs text-gray-600",children:de.paid?"Paid":"Unpaid"}),e.jsx(xe,{type:"button",onClick:()=>ye(de.id),variant:"ghost",className:"ml-auto p-1 text-red-600 hover:text-red-700",children:e.jsx(qa,{size:14})})]},de.id))}),e.jsx(xe,{type:"button",onClick:pe,variant:"outline",fullWidth:!0,size:"sm",icon:e.jsx(_e,{size:16}),children:"Add"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:Se==null?void 0:Se.theme.colors.primary[900]},children:"Cost Code"}),L.length>0&&e.jsx("div",{className:"space-y-2 mb-3",children:L.map(de=>e.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded-lg border border-gray-200",children:[e.jsx("span",{className:"text-sm font-medium flex-1",children:de.name}),de.description&&e.jsx("span",{className:"text-xs text-gray-600",children:de.description}),e.jsx(xe,{type:"button",onClick:()=>nt(de.id),variant:"ghost",className:"p-1 text-red-600 hover:text-red-700",children:e.jsx(qa,{size:14})})]},de.id))}),e.jsx(xe,{type:"button",onClick:Me,variant:"outline",fullWidth:!0,size:"sm",icon:e.jsx(_e,{size:16}),children:"Add"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:Se==null?void 0:Se.theme.colors.primary[900]},children:"Resources"}),q.length>0&&e.jsx("div",{className:"space-y-2 mb-3",children:q.map(de=>e.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded-lg border border-gray-200",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${de.type==="employee"?"bg-green-500":de.type==="equipment"?"bg-blue-500":"bg-gray-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium",children:de.name}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2 capitalize",children:["(",de.type,")"]})]}),!de.id.startsWith("employee-")&&e.jsx(xe,{type:"button",onClick:()=>ge(de.id),variant:"ghost",className:"p-1 text-red-600 hover:text-red-700",children:e.jsx(qa,{size:14})}),de.id.startsWith("employee-")&&e.jsx("span",{className:"text-xs text-gray-400",children:"Assigned"})]},de.id))}),e.jsx(xe,{type:"button",onClick:Rt,variant:"outline",fullWidth:!0,size:"sm",icon:e.jsx(_e,{size:16}),children:"Add"})]})]})]})}),_s=()=>e.jsxs("div",{className:"p-2 ps-0",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:Se==null?void 0:Se.theme.colors.primary[900]},children:"Recurrence Settings"}),e.jsxs("div",{className:`mb-6 p-3 bg-${Se==null?void 0:Se.theme.name}-50 border border-${Se==null?void 0:Se.theme.name}-200 rounded-lg`,children:[e.jsx("h4",{className:`text-base font-semibold text-${Se==null?void 0:Se.theme.name}-900 mb-2`,children:"Summary"}),e.jsx("p",{className:`text-sm text-${Se==null?void 0:Se.theme.name}-800`,children:xs()})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(he,{label:"Repeat",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"radio",name:"recurrenceType",value:"daily",checked:I==="daily",onChange:de=>U(de.target.value),className:"w-4 h-4 text-teal-600 focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Daily"})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"radio",name:"recurrenceType",value:"weekly",checked:I==="weekly",onChange:de=>U(de.target.value),className:"w-4 h-4 text-teal-600 focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Weekly"})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"radio",name:"recurrenceType",value:"monthly",checked:I==="monthly",onChange:de=>U(de.target.value),className:"w-4 h-4 text-teal-600 focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Monthly"})]})]})}),e.jsx(he,{label:"Every",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"1",value:ce,onChange:de=>T(parseInt(de.target.value)),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:I==="daily"?"day(s)":I==="weekly"?"week(s)":"month(s)"})]})}),I==="monthly"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Day of month"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"On the"}),e.jsx("input",{type:"number",min:"1",max:"31",value:O,onChange:de=>je(parseInt(de.target.value)),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"day of the month"})]})]}),e.jsx(he,{label:"End date",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"radio",name:"endType",value:"never",checked:H==="never",onChange:de=>ne(de.target.value),className:"w-4 h-4 text-teal-600 focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Never"})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"radio",name:"endType",value:"date",checked:H==="date",onChange:de=>ne(de.target.value),className:"w-4 h-4 text-teal-600 focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"On"}),e.jsx("input",{type:"date",value:ue,onChange:de=>Ce(de.target.value),className:"px-3 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"radio",name:"endType",value:"count",checked:H==="count",onChange:de=>ne(de.target.value),className:"w-4 h-4 text-teal-600 focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"After"}),e.jsx("input",{type:"number",min:"1",value:ke,onChange:de=>$e(parseInt(de.target.value)),className:"w-20 px-3 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"occurrence(s)"})]})]})}),I==="weekly"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Days of the week"}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map((de,De)=>e.jsxs("label",{className:"flex flex-col items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:$[De],onChange:ze=>{const qe=[...$];qe[De]=ze.target.checked,J(qe)},className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:de})]},de))})]})]})]}),fs=[{id:"shift",label:"Shift",component:e.jsx(gs,{})},{id:"recurrence",label:"Recurrence",component:e.jsx(_s,{})}];return e.jsxs(Ue,{open:t,onClose:s,size:"xl",children:[e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"w-52 h-full p-2 pt-20",style:{background:Se==null?void 0:Se.theme.colors.primary[50]},children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 mb-4",children:[e.jsx("span",{style:{color:Se==null?void 0:Se.theme.colors.primary[800]},children:e.jsx(Je,{size:32})}),e.jsx("div",{className:"text-base font-semibold mb-3",style:{color:Se==null?void 0:Se.theme.colors.primary[800]},children:g!=null&&g.employeeId?Jt(g.employeeId):N?Jt(N):"1 Open shift"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm text-gray-600",children:ps(j)}),e.jsx("div",{className:"text-sm text-gray-600",children:h.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})}),e.jsxs("div",{className:"text-sm text-gray-600",children:[Kt(C)," - ",Kt(w)]})]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(xe,{onClick:Ee,variant:"primary",fullWidth:!0,icon:e.jsx(_e,{size:20}),className:"py-3",children:"Shift"}),e.jsx(xe,{onClick:()=>{y?y():Te()},variant:"outline",fullWidth:!0,icon:e.jsx(et,{size:20}),className:"py-3",children:"Template"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col p-4",children:[e.jsx("h3",{className:"mb-5 pb-5 border-b-2",style:{color:Se==null?void 0:Se.theme.colors.primary[900],borderColor:Se==null?void 0:Se.theme.colors.primary[200]},children:g?"Edit Shift":x==="open"?"Create Open Shift":"Create Shift"}),e.jsx(ui,{tabs:fs}),e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:e.jsx("div",{className:"bg-teal-50 border border-teal-100 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex justify-between text-[10px] text-teal-700 mb-2",children:["12a","1a","2a","3a","4a","5a","6a","7a","8a","9a","10a","11a","12p","1p","2p","3p","4p","5p","6p","7p","8p","9p","10p","11p"].map(de=>e.jsx("span",{children:de},de))}),e.jsx("div",{className:"relative h-8 border border-dashed border-teal-300 rounded overflow-hidden",children:(()=>{const{leftPct:de,widthPct:De}=Is();return e.jsx("div",{className:"absolute top-0 bottom-0 bg-teal-300/50",style:{left:`${de}%`,width:`${De}%`},"aria-label":"Selected time range"})})()})]}),e.jsxs("div",{className:"ml-4 flex items-center",children:[e.jsx("div",{className:"text-sm text-teal-800 mr-2",children:"Total"}),e.jsxs("div",{className:"text-sm font-semibold text-teal-900",children:[Re(),"h"]})]})]})})}),e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200 bg-white",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:ee,onChange:de=>me(de.target.checked),className:"w-4 h-4 text-teal-600 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Save as template"}),e.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600",children:e.jsx(zs,{size:14})})]}),e.jsxs("div",{className:"flex gap-3",children:[g&&e.jsxs(e.Fragment,{children:[e.jsx(xe,{type:"button",onClick:oe,variant:"outline",icon:e.jsx(lt,{size:18}),className:"text-red-600 hover:text-red-700 border-red-300",children:"Delete"}),e.jsx(xe,{type:"button",onClick:we,variant:"outline",icon:e.jsx(Ts,{size:18}),children:"Copy"}),e.jsx(xe,{type:"button",onClick:te,variant:"outline",icon:e.jsx($s,{size:18}),children:"Transfer"})]}),e.jsx(xe,{type:"submit",form:"shift-form",variant:"primary",children:g?"Modify":"Create"})]})]})]})]}),g&&e.jsx(om,{isOpen:ae,onClose:()=>re(!1),onTransfer:Ne,employees:u,roles:o,locations:m,currentShift:{employeeId:g.employeeId||"",startTime:new Date(g.startTime),endTime:new Date(g.endTime),roleId:g.roleId,locationId:g.locationId}}),e.jsx(lm,{isOpen:Ie,onClose:()=>We(!1),onSelectResource:At,employees:u,existingResources:q}),e.jsx(im,{isOpen:Ke,onClose:()=>st(!1),onSelectCostCode:tt,existingCostCodes:L})]})}function dm({isOpen:t,onClose:s,onCreateShift:a,onCreateOpenShift:r}){const{theme:n}=Pe();return e.jsxs(Ue,{open:t,onClose:s,title:"Create Shift",size:"md",children:[e.jsx("p",{className:"mb-2 ",style:{color:n==null?void 0:n.theme.colors.primary[800]},children:"Choose the type of shift you want to create:"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:()=>{a(),s()},className:"w-full p-3 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:e.jsx(wt,{size:24,className:"text-blue-600"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Shift"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create a shift assigned to a specific employee"})]}),e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(ar,{size:16,className:"text-white"})})]})}),e.jsx("button",{onClick:()=>{r(),s()},className:"w-full p-3 border border-gray-200 rounded-lg hover:border-orange-300 hover:bg-orange-50 transition-all group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center group-hover:bg-orange-200 transition-colors",children:e.jsx(ot,{size:24,className:"text-orange-600"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Open Shift"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create an open shift that can be assigned to employees later"})]}),e.jsx("div",{className:"w-8 h-8 bg-orange-600 rounded-full flex items-center justify-center",children:e.jsx(ar,{size:16,className:"text-white"})})]})})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border border-gray-200 rounded-b-lg mt-4",children:e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"You can always change the assignment later"})})]})}function um({shifts:t,employees:s,currentWeek:a}){const{theme:r}=Pe(),n=t.filter(h=>{const d=new Date(h.startTime),g=new Date(a);return g.setDate(g.getDate()+6),d>=a&&d<=g}),i=n.reduce((h,d)=>{const g=(d.endTime.getTime()-d.startTime.getTime())/36e5,p=d.breaks.reduce((x,A)=>x+A.duration/60,0);return h+g-p},0),l=n.filter(h=>h.employeeId===null).length,u=new Set(n.filter(h=>h.employeeId).map(h=>h.employeeId)).size,o=n.filter(h=>h.shiftType==="confirmed").length,m=[{icon:Oe,value:`${i.toFixed(0)}h`,label:"Total Hours",colorScheme:"primary"},{icon:ot,value:u,label:"Employees Scheduled",colorScheme:"primary"},{icon:Je,value:n.length,label:"Total Shifts",colorScheme:"secondary"},{icon:Ct,value:l,label:"Open Shifts",colorScheme:"warning"},{icon:Je,value:o,label:"Confirmed",colorScheme:"success"}];return e.jsx("div",{className:"bg-white border-b px-6 py-4",style:{borderColor:r==null?void 0:r.theme.colors.primary[200]},children:e.jsx("div",{className:"flex items-center gap-5",children:m.map((h,d)=>{const g=h.icon;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:(r==null?void 0:r.theme.colors[h.colorScheme][100])||"#e3f2fd",borderRadius:(r==null?void 0:r.components.button.borderRadius)||"0.5rem"},children:e.jsx(g,{size:20,style:{color:(r==null?void 0:r.theme.colors[h.colorScheme][600])||"#1e88e5"}})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold",style:{color:(r==null?void 0:r.theme.colors.primary[900])||"#212121",fontFamily:r==null?void 0:r.typography.fontFamily.primary,fontSize:r==null?void 0:r.typography.fontSize["2xl"],fontWeight:r==null?void 0:r.typography.fontWeight.bold},children:h.value}),e.jsx("div",{className:"text-xs",style:{color:(r==null?void 0:r.theme.colors.secondary[500])||"#9e9e9e",fontSize:r==null?void 0:r.typography.fontSize.xs},children:h.label})]})]},d)})})})}function mm({isOpen:t,onClose:s,onSelectTemplate:a,templates:r,roles:n,onSwitchToShift:i}){const[l,u]=c.useState(""),[o,m]=c.useState("name"),{theme:h}=Pe(),d=r.filter(y=>y.name.toLowerCase().includes(l.toLowerCase())),g=y=>{var N;return((N=n.find(v=>v.id===y))==null?void 0:N.name)||"Unknown Role"},p=y=>{var N;return((N=n.find(v=>v.id===y))==null?void 0:N.color)||"#3B82F6"},x=(y,N)=>{const[v,j]=y.split(":").map(Number),[D,C]=N.split(":").map(Number),f=D*60+C-(v*60+j),w=Math.floor(f/60),b=f%60;return b>0?`${w}h${b}m`:`${w}h`},A=y=>{const[N,v]=y.split(":"),j=parseInt(N),D=j>=12?"pm":"am";return`${j%12||12}:${v}${D}`};return e.jsx(Ue,{open:t,onClose:s,title:"Select Shift Template",size:"xl",children:e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"w-80 p-7",style:{background:h==null?void 0:h.theme.colors.primary[50]},children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 mb-4 text-center",children:[e.jsxs("div",{className:"relative",style:{color:h==null?void 0:h.theme.colors.primary[600]},children:[e.jsx(Je,{size:32}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",style:{color:h==null?void 0:h.theme.colors.primary[600]},children:"1 open shift"}),e.jsx("div",{className:"text-sm text-gray-600",children:new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})})]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(xe,{onClick:()=>{i&&i()},variant:"outline",fullWidth:!0,icon:e.jsx(_e,{size:20}),className:"py-3",children:"Shift"}),e.jsx(xe,{variant:"primary",fullWidth:!0,icon:e.jsx(et,{size:20}),className:"py-3",children:"Template"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col p-4",children:[e.jsx("div",{className:"pb-3 mb-5 border-b",style:{borderColor:h==null?void 0:h.theme.colors.primary[200]},children:e.jsx("h2",{className:"text-xl font-semibold",style:{color:h==null?void 0:h.theme.colors.primary[800]},children:"Create shift from template"})}),e.jsxs("div",{className:"flex-1 p-1 overflow-y-auto",children:[e.jsxs("div",{className:"flex gap-3 mb-5",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsxs("select",{value:o,onChange:y=>m(y.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 appearance-none",style:{borderColor:h==null?void 0:h.theme.colors.primary[300]},children:[e.jsx("option",{value:"name",children:"Name (A - Z)"}),e.jsx("option",{value:"duration",children:"Duration"}),e.jsx("option",{value:"role",children:"Role"})]}),e.jsx(Ft,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:18})]}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",placeholder:"Search by name",value:l,onChange:y=>u(y.target.value),className:"w-full px-3 py-2 pl-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",style:{borderColor:h==null?void 0:h.theme.colors.primary[300]}}),e.jsx(xt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",style:{color:h==null?void 0:h.theme.colors.primary[700]},children:"Available templates"}),e.jsx("div",{className:"flex flex-col gap-5",children:d.length>0?d.map(y=>e.jsx("div",{onClick:()=>a(y),className:"border-l-4 border-green-500 bg-white p-3 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-green-600 mb-2",children:y.name}),e.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Time:"}),e.jsxs("span",{children:[A(y.startTime)," - ",A(y.endTime)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Duration:"}),e.jsx("span",{children:x(y.startTime,y.endTime)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Role:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:p(y.roleId)}}),e.jsx("span",{children:g(y.roleId)})]})]}),y.breaks.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Break:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(La,{size:12,className:"text-gray-500"}),e.jsxs("span",{children:[y.breaks.reduce((N,v)=>N+v.duration,0),"m"]})]})]})]}),y.isOnCall&&e.jsx("div",{className:"mt-3",children:e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:[e.jsx(dl,{size:10}),"On-call"]})})]})})},y.id)):e.jsx("div",{className:"text-center py-2 text-gray-500",children:"No templates found"})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t",style:{borderColor:h==null?void 0:h.theme.colors.primary[200]},children:e.jsx(xe,{variant:"ghost",icon:e.jsx(et,{size:16}),size:"sm",children:"Manage shift templates"})})]})]})]})})}function Qa(){const t=Aa(),[s,a]=c.useState(Za[0].id),[r,n]=c.useState("employee"),[i,l]=c.useState(Ut.map(ge=>ge.id)),[u,o]=c.useState({hideBackgroundShifts:!1,hideOpenShifts:!1,hideTraining:!1,hideConfirmedShifts:!1,filterPrimaryRole:!1,groupByRole:!1,freezeOpenShiftsRow:!1,highlightIncompleteTasks:!1}),[m,h]=c.useState("all"),[d,g]=c.useState(""),[p,x]=c.useState("week"),[A,y]=c.useState(()=>{const ge=new Date;return ge.setDate(ge.getDate()-ge.getDay()),ge}),[N,v]=c.useState(Ku),[j,D]=c.useState(Ju),[C,f]=c.useState(hi),[w,b]=c.useState(!1),[z,P]=c.useState(!1),[S,k]=c.useState(!1),[G,B]=c.useState(!1),[E,M]=c.useState(new Date),[F,_]=c.useState(""),[L,R]=c.useState(null),[q,V]=c.useState("open"),[Z,be]=c.useState(!0),[X,ve]=c.useState([]),[ee,me]=c.useState(!1),[se,Q]=c.useState(!1),[W,K]=c.useState("all");c.useEffect(()=>{document.title="Scheduling - Space Rivers"},[]);const I=c.useMemo(()=>Rs.filter(ge=>{const Te=ge.locationId===s,Ee=i.includes(ge.roleId),te=d===""||ge.firstName.toLowerCase().includes(d.toLowerCase())||ge.lastName.toLowerCase().includes(d.toLowerCase()),Ne=N.some(dt=>dt.employeeId===ge.id);let Re=!0;return m==="withShifts"?Re=Ne:m==="withoutShifts"&&(Re=!Ne),Te&&Ee&&te&&Re}),[s,i,d,m,N]),U=ge=>{l(Te=>Te.includes(ge)?Te.filter(Ee=>Ee!==ge):[...Te,ge])},ce=ge=>{o(Te=>({...Te,[ge]:!Te[ge]}))},T=c.useMemo(()=>N.filter(ge=>{if(u.hideOpenShifts&&ge.employeeId===null||u.hideTraining&&ge.shiftType==="training"||u.hideConfirmedShifts&&ge.shiftType==="confirmed"||u.hideBackgroundShifts&&ge.shiftType==="scheduled"||W==="published"&&!ge.isPublished||W==="unpublished"&&ge.isPublished)return!1;const Te=Rs.find(Ne=>Ne.id===ge.employeeId);if(!Te)return!0;const Ee=Te.locationId===s,te=i.includes(ge.roleId);return Ee&&te}),[N,u,s,i,W]),H=c.useMemo(()=>{if(p==="day")return T.filter(ge=>{const Te=new Date(ge.startTime);return Te.getDate()===A.getDate()&&Te.getMonth()===A.getMonth()&&Te.getFullYear()===A.getFullYear()});if(p==="week"){const ge=new Date(A),Te=new Date(A);return Te.setDate(Te.getDate()+6),T.filter(Ee=>{const te=new Date(Ee.startTime);return te>=ge&&te<=Te})}else return T.filter(ge=>{const Te=new Date(ge.startTime);return Te.getMonth()===A.getMonth()&&Te.getFullYear()===A.getFullYear()})},[T,p,A]),ne=()=>{l(Ut.map(ge=>ge.id)),o({hideBackgroundShifts:!1,hideOpenShifts:!1,hideTraining:!1,hideConfirmedShifts:!1,filterPrimaryRole:!1,groupByRole:!1,freezeOpenShiftsRow:!1,highlightIncompleteTasks:!1}),h("all"),g("")},ue=ge=>{y(Te=>{const Ee=new Date(Te);return p==="day"?Ee.setDate(Ee.getDate()+(ge==="next"?1:-1)):p==="week"?Ee.setDate(Ee.getDate()+(ge==="next"?7:-7)):Ee.setMonth(Ee.getMonth()+(ge==="next"?1:-1)),Ee})},Ce=ge=>{y(ge),x("day")},ke=(ge,Te,Ee)=>{M(Te),_(Ee),R(ge),b(!0)},$e=ge=>{if(L)v(Te=>Te.map(Ee=>Ee.id===L.id?{...ge,id:L.id}:Ee));else{const Te={...ge,id:Math.random().toString(36).substr(2,9),breaks:ge.breaks||[],costCodes:ge.costCodes||[],resources:ge.resources||[]};v(Ee=>[...Ee,Te])}b(!1),R(null)},$=ge=>{v(Te=>Te.filter(Ee=>Ee.id!==ge))},J=()=>{V("open"),b(!0)},O=()=>{M(A),_(""),R(null),V("shift"),b(!1),k(!0)},je=ge=>{_(ge.id),k(!1),b(!0)},ae=(ge,Te)=>{ve(Ee=>Te?[...Ee,ge]:Ee.filter(te=>te!==ge))},re=()=>{ve(H.map(ge=>ge.id))},Ie=()=>{ve([]),me(!1)},We=ge=>{const Te=N.filter(Ee=>X.includes(Ee.id));v(Ee=>Ee.map(te=>X.includes(te.id)?{...te,isPublished:!0,publishedAt:new Date,publishedBy:"current-user",isDraft:!1}:te)),console.log("Publishing shifts with options:",ge),console.log("Published shifts:",Te.length),Ie()},Ke=()=>{window.confirm(`Are you sure you want to unpublish ${X.length} shift(s)?`)&&(v(ge=>ge.map(Te=>X.includes(Te.id)?{...Te,isPublished:!1,publishedAt:void 0,publishedBy:void 0,isDraft:!0}:Te)),Ie())},st=()=>{window.confirm(`Are you sure you want to delete ${X.length} shift(s)?`)&&(v(ge=>ge.filter(Te=>!X.includes(Te.id))),Ie())},Se=()=>{const Te=N.filter(Ee=>X.includes(Ee.id)).map(Ee=>({...Ee,id:Math.random().toString(36).substr(2,9),isPublished:!1,isDraft:!0,publishedAt:void 0,publishedBy:void 0}));v(Ee=>[...Ee,...Te]),Ie()},ft=()=>{const ge=N.filter(Te=>X.includes(Te.id));console.log("Exporting shifts:",ge),alert("Export functionality coming soon!")},oe=ge=>{const Te={employeeId:null,locationId:s,roleId:ge.roleId,startTime:(()=>{const Ee=new Date(E);return Ee.setHours(parseInt(ge.startTime.split(":")[0]),parseInt(ge.startTime.split(":")[1]),0,0),Ee})(),endTime:(()=>{const Ee=new Date(E);return Ee.setHours(parseInt(ge.endTime.split(":")[0]),parseInt(ge.endTime.split(":")[1]),0,0),Ee})(),shiftType:"open",notes:ge.notes,breaks:ge.breaks,costCodes:ge.costCodes,resources:ge.resources,quantity:ge.quantity};v(Ee=>[...Ee,{...Te,id:Math.random().toString(36).substr(2,9)}]),P(!1)},we=()=>{P(!0)},pe=(ge,Te,Ee)=>{v(te=>te.map(Ne=>{if(Ne.id!==ge)return Ne;const Re=new Date(Ne.startTime),dt=Re.getTime()-new Date(Re.getFullYear(),Re.getMonth(),Re.getDate()).getTime(),Lt=new Date(Te);Lt.setHours(0,0,0,0),Lt.setTime(Lt.getTime()+dt);const xs=new Date(Ne.endTime).getTime()-Re.getTime(),hs=new Date(Lt.getTime()+xs),Kt=Rs.find(Jt=>Jt.id===Ee),ps=Kt?Kt.roleId:Ne.roleId;return{...Ne,employeeId:Ee||null,roleId:ps,startTime:Lt,endTime:hs}}))},ye=ge=>{if(ge.id)f(C.map(Te=>Te.id===ge.id?{...Te,...ge}:Te));else{const Te={id:Math.random().toString(36).slice(2,11),predecessorTaskId:ge.predecessorTaskId||"",successorTaskId:ge.successorTaskId||"",dependencyType:ge.dependencyType||"finish-to-start",lag:ge.lag||0};f([...C,Te])}},Me=ge=>{f(C.filter(Te=>Te.id!==ge))},{theme:tt}=Pe(),nt=()=>e.jsxs("div",{className:"flex h-full overflow-hidden",children:[Z&&e.jsx(Qu,{selectedLocation:s,onLocationChange:a,locations:Za,manageBy:r,onManageByChange:n,selectedRoles:i,onRoleToggle:U,roles:Ut,displayOptions:u,onDisplayOptionChange:ce,employeeFilter:m,onEmployeeFilterChange:h,publishStatus:W,onPublishStatusChange:K,onClearFilters:ne}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(am,{searchQuery:d,onSearchChange:g,viewMode:p,onViewModeChange:x,currentWeek:A,onWeekChange:ue,onDateSelect:ge=>y(ge),onCreateShift:O,onCreateOpenShift:J,onCreateFromTemplate:we,onToggleFilters:()=>be(!Z),isFiltersPanelVisible:Z,selectionMode:ee,onToggleSelectionMode:()=>{me(!ee),ee&&Ie()}}),e.jsx(um,{shifts:H,employees:I,currentWeek:A}),p==="week"&&e.jsx(sm,{employees:I,roles:Ut,shifts:H,currentWeek:A,manageBy:r,displayOptions:u,onShiftClick:ke,onShiftDrop:pe,selectedShiftIds:X,onShiftSelect:ae,selectionMode:ee}),p==="day"&&e.jsx(tm,{employees:I,roles:Ut,shifts:H,selectedDate:A,manageBy:r,onShiftClick:ke,onShiftDrop:pe}),p==="month"&&e.jsx(rm,{employees:I,roles:Ut,shifts:H,currentMonth:A,onShiftClick:ke,onDateClick:Ce})]})]}),Rt=()=>e.jsx("div",{className:"flex-1 p-5",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",style:{color:tt==null?void 0:tt.theme.colors.primary[900]},children:"Critical Path"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"Critical Activities"}),e.jsx("p",{className:"text-sm text-red-800",children:"Identify and manage activities that directly impact project completion time."})]}),e.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-purple-900 mb-2",children:"Path Analysis"}),e.jsx("p",{className:"text-sm text-purple-800",children:"Analyze the longest path through your project network."})]}),e.jsxs("div",{className:"p-3 bg-indigo-50 border border-indigo-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-indigo-900 mb-2",children:"Risk Management"}),e.jsx("p",{className:"text-sm text-indigo-800",children:"Monitor critical path activities for potential delays and risks."})]})]})]})}),At=[{id:"view",label:"Scheduling",icon:Je,component:e.jsx(nt,{})},{id:"dependencies",label:"Dependencies",icon:Fa,component:e.jsx(Xu,{dependencies:C,tasks:xi,projects:mi,onSaveDependency:ye,onDeleteDependency:Me})},{id:"critical-path",label:"Critical Path",icon:Pn,component:e.jsx(Rt,{})}];return e.jsx(ct,{maxWidth:"full",padding:"md",children:e.jsx("div",{className:"bg-white p-6 rounded-xl",children:e.jsx(Be,{title:"Scheduling",variant:"default",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx(ui,{tabs:At,selected:t.pathname.split("/").pop()||""}),e.jsx(cm,{isOpen:w,onClose:()=>{b(!1),R(null)},onSave:$e,onDelete:$,onSaveTemplate:ge=>{D(Te=>[...Te,{...ge,id:Math.random().toString(36).substr(2,9)}])},onEmployeeSelection:O,onSwitchToTemplate:()=>{b(!1),P(!0)},employees:Rs,roles:Ut,locations:Za,selectedDate:E,selectedEmployeeId:F,editingShift:L}),e.jsx(mm,{isOpen:z,onClose:()=>P(!1),onSelectTemplate:oe,templates:j,roles:Ut,onSwitchToShift:()=>{P(!1),B(!0)}}),e.jsx(Zu,{isOpen:S,onClose:()=>k(!1),onSelectEmployee:je,employees:Rs,roles:Ut}),e.jsx(dm,{isOpen:G,onClose:()=>B(!1),onCreateShift:O,onCreateOpenShift:J}),e.jsx(em,{isOpen:se,onClose:()=>Q(!1),onPublish:We,selectedShifts:N.filter(ge=>X.includes(ge.id)),employees:Rs,roles:Ut}),e.jsx(Gu,{selectedShifts:N.filter(ge=>X.includes(ge.id)),onPublish:()=>Q(!0),onUnpublish:Ke,onDelete:st,onDuplicate:Se,onExport:ft,onClearSelection:Ie,totalShifts:H.length,onSelectAll:re,allSelected:X.length===H.length&&H.length>0,selectionMode:ee})]})})})})}const pi=({onClose:t})=>{var _;const{theme:s,availableThemes:a,isLoading:r,error:n,updateTheme:i,resetTheme:l,applyTheme:u,refreshTheme:o}=Pe(),[m,h]=c.useState(""),[d,g]=c.useState({primary:"#3b82f6",secondary:"#6b7280",success:"#10b981",warning:"#f59e0b",danger:"#ef4444"}),[p,x]=c.useState({primaryFont:'"Century Gothic"',secondaryFont:"system-ui",monoFont:"JetBrains Mono"}),[A,y]=c.useState({sidebarWidth:"280px",headerHeight:"48px",contentMaxWidth:"1200px",contentPadding:"24px"}),[N,v]=c.useState({buttonRadius:"0.5rem",cardRadius:"0.75rem",inputRadius:"0.5rem",buttonShadow:"sm",cardShadow:"md"}),[j,D]=c.useState(!1),[C,f]=c.useState(null),[w,b]=c.useState(!1),[z]=c.useState(()=>ga());c.useEffect(()=>{s&&(h(s.theme.name),g({primary:s.theme.colors.primary[500],secondary:s.theme.colors.secondary[500],success:s.theme.colors.success[500],warning:s.theme.colors.warning[500],danger:s.theme.colors.danger[500]}),x({primaryFont:s.typography.fontFamily.primary,secondaryFont:s.typography.fontFamily.secondary,monoFont:s.typography.fontFamily.mono}),y({sidebarWidth:s.layout.sidebar.width,headerHeight:s.layout.header.height,contentMaxWidth:s.layout.content.maxWidth,contentPadding:s.layout.content.padding}),v({buttonRadius:s.components.button.borderRadius,cardRadius:s.components.card.borderRadius,inputRadius:s.components.input.borderRadius,buttonShadow:s.components.button.shadow,cardShadow:s.components.card.shadow}))},[s]);const P=L=>{const R=ve=>{const ee=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(ve);return ee?{r:parseInt(ee[1],16),g:parseInt(ee[2],16),b:parseInt(ee[3],16)}:null},q=(ve,ee,me)=>"#"+(16777216+(ve<<16)+(ee<<8)+me).toString(16).slice(1),V=R(L);if(!V)return{};const{r:Z,g:be,b:X}=V;return{50:q(Math.min(255,Z+100),Math.min(255,be+100),Math.min(255,X+100)),100:q(Math.min(255,Z+80),Math.min(255,be+80),Math.min(255,X+80)),200:q(Math.min(255,Z+60),Math.min(255,be+60),Math.min(255,X+60)),300:q(Math.min(255,Z+40),Math.min(255,be+40),Math.min(255,X+40)),400:q(Math.min(255,Z+20),Math.min(255,be+20),Math.min(255,X+20)),500:L,600:q(Math.max(0,Z-20),Math.max(0,be-20),Math.max(0,X-20)),700:q(Math.max(0,Z-40),Math.max(0,be-40),Math.max(0,X-40)),800:q(Math.max(0,Z-60),Math.max(0,be-60),Math.max(0,X-60)),900:q(Math.max(0,Z-80),Math.max(0,be-80),Math.max(0,X-80))}},S=(L,R)=>{g(q=>({...q,[L]:R}))},k=(L,R)=>{x(q=>({...q,[L]:R}))},G=(L,R)=>{y(q=>({...q,[L]:R}))},B=(L,R)=>{v(q=>({...q,[L]:R}))},E=async()=>{if(s){D(!0);try{const L={...s,theme:{name:"custom",colors:{...s.theme.colors,primary:P(d.primary),secondary:P(d.secondary),success:P(d.success),warning:P(d.warning),danger:P(d.danger)}},typography:{...s.typography,fontFamily:{primary:p.primaryFont,secondary:p.secondaryFont,mono:p.monoFont}},layout:{...s.layout,sidebar:{...s.layout.sidebar,width:A.sidebarWidth},header:{...s.layout.header,height:A.headerHeight},content:{...s.layout.content,maxWidth:A.contentMaxWidth,padding:A.contentPadding}},components:{...s.components,button:{...s.components.button,borderRadius:N.buttonRadius,shadow:N.buttonShadow},card:{...s.components.card,borderRadius:N.cardRadius,shadow:N.cardShadow},input:{...s.components.input,borderRadius:N.inputRadius}}};await i(L),f("Custom theme saved successfully!"),setTimeout(()=>f(null),3e3)}catch{}finally{D(!1)}}},M=async()=>{if(window.confirm("Are you sure you want to reset to default theme? This will lose all customizations."))try{await l(),f("Theme reset to default successfully!"),setTimeout(()=>f(null),3e3)}catch{}};if(r)return e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-sm -gray-600 mt-1",children:"Loading theme settings..."})]})});const F=async L=>{var R;if(s){D(!0);try{const q=z.find(V=>V.id===L);if(q){const V={...s,theme:{...s.theme,name:q.id,colors:{...s.theme.colors,primary:((R=q==null?void 0:q.colors)==null?void 0:R.primary)??s.theme.colors.primary}}};await i(V),h(L),setTimeout(()=>f(null),3e3)}}catch{}finally{D(!1)}}};return e.jsxs("div",{className:"space-y-8",children:[n&&e.jsx(os,{type:"error",message:n}),C&&e.jsx(os,{type:"success",message:C}),e.jsx(vt,{children:e.jsx("div",{className:"p-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[w?e.jsx(qr,{size:20,className:"text-gray-700"}):e.jsx(Wr,{size:20,className:"text-yellow-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold",style:{color:s==null?void 0:s.theme.colors.primary[900]},children:"Appearance Mode"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Choose between light and dark themes"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>b(!1),className:`p-3 rounded-lg transition-colors ${w?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-primary-100 text-primary-700 ring-2 ring-primary-200"}`,children:e.jsx(Wr,{size:20})}),e.jsx("button",{onClick:()=>b(!0),className:`p-3 rounded-lg transition-colors ${w?"bg-gray-800 text-gray-100 ring-2 ring-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(qr,{size:20})})]})]})})}),e.jsx(vt,{children:e.jsxs("div",{className:"p-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(An,{size:20,className:"text-gray-700"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold",style:{color:s==null?void 0:s.theme.colors.primary[900]},children:"Theme Presets"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Choose from professionally designed themes"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:z.map(L=>{var q;const R=((q=s==null?void 0:s.theme)==null?void 0:q.name)===L.id;return e.jsxs("button",{onClick:()=>F(L.id),disabled:j,className:`
                    relative text-left p-5 rounded-lg border-2 transition-all
                    ${R?"border-primary-500 bg-primary-50 shadow-lg":"border-gray-200 hover:border-gray-300 hover:shadow-md"}
                    ${j?"opacity-50 cursor-not-allowed":"cursor-pointer"}
                  `,children:[R&&e.jsx("div",{className:"absolute -top-2 -right-2 bg-primary-600 text-white text-xs px-3 py-1 rounded-full font-medium shadow-md",children:"Active"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-lg shadow-sm ring-2 ring-white",style:{backgroundColor:L.preview}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`font-semibold text-base mb-1 ${R?"text-primary-900":"text-gray-900"}`,children:L.name}),e.jsx("p",{className:`text-sm ${R?"text-primary-700":"text-gray-600"}`,children:L.description})]})]})]},L.id)})})]})}),((_=s==null?void 0:s.theme)==null?void 0:_.name)==="custom"&&e.jsx(vt,{children:e.jsxs("div",{className:"p-1",children:[e.jsx("h3",{className:"text-base font-semibold mb-4",children:"Current Custom Theme"}),e.jsxs("div",{className:"bg-primary-50 border-2 border-primary-200 rounded-lg p-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white shadow-sm ring-2 ring-primary-300",style:{backgroundColor:s.theme.colors.primary[500]}}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-sm text-primary-900",children:"Custom Theme"}),e.jsx("p",{className:"text-sm text-primary-700",children:"Your personalized theme"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx("div",{className:"bg-primary-600 text-white text-xs px-2 py-1 rounded-full font-medium",children:"Active"})})]}),e.jsx("div",{className:"flex space-x-1",children:Object.values(s.theme.colors.primary).slice(0,5).map((L,R)=>e.jsx("div",{className:"w-4 h-4 rounded border border-gray-200",style:{backgroundColor:L}},R))})]})]})}),e.jsx(vt,{children:e.jsxs("div",{className:"p-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(En,{size:20,className:"text-gray-700"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold",style:{color:s==null?void 0:s.theme.colors.primary[900]},children:"Custom Colors"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Fine-tune your brand colors"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-5",children:Object.entries(d).map(([L,R])=>e.jsx(he,{label:L,className:"space-y-2 capitalize",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"color",value:R,onChange:q=>S(L,q.target.value),className:"w-10 h-10 rounded border border-gray-300 cursor-pointer"}),e.jsx(ie,{value:R,onChange:q=>S(L,q.target.value),className:"flex-1",placeholder:"#000000"})]})},L))})]})}),e.jsx(vt,{children:e.jsxs("div",{className:"p-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(bl,{size:20,className:"text-gray-700"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold",style:{color:s==null?void 0:s.theme.colors.primary[900]},children:"Typography"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Customize fonts for your application"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5",children:[e.jsx(he,{label:"Primary Font",children:e.jsx(Ae,{value:p.primaryFont,onChange:L=>k("primaryFont",L.target.value),options:[{value:"Century Gothic",label:"Century Gothic"},{value:"Roboto",label:"Roboto"},{value:"Open Sans",label:"Open Sans"},{value:"Lato",label:"Lato"},{value:"Poppins",label:"Poppins"},{value:"system-ui",label:"System UI"}]})}),e.jsx(he,{label:"Secondary Font",children:e.jsx(Ae,{value:p.secondaryFont,onChange:L=>k("secondaryFont",L.target.value),options:[{value:"system-ui",label:"System UI"},{value:"Century Gothic",label:"Century Gothic"},{value:"Roboto",label:"Roboto"},{value:"Open Sans",label:"Open Sans"},{value:"Lato",label:"Lato"}]})}),e.jsx(he,{label:"Monospace Font",children:e.jsx(Ae,{value:p.monoFont,onChange:L=>k("monoFont",L.target.value),options:[{value:"JetBrains Mono",label:"JetBrains Mono"},{value:"Fira Code",label:"Fira Code"},{value:"Source Code Pro",label:"Source Code Pro"},{value:"Monaco",label:"Monaco"},{value:"Consolas",label:"Consolas"}]})})]})]})}),e.jsx(vt,{children:e.jsxs("div",{className:"p-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(cl,{size:20,className:"text-gray-700"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold",style:{color:s==null?void 0:s.theme.colors.primary[900]},children:"Layout Settings"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Adjust spacing and dimensions"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:[e.jsx("div",{children:e.jsx(ie,{label:"Sidebar Width",value:A.sidebarWidth,onChange:L=>G("sidebarWidth",L.target.value),placeholder:"280px"})}),e.jsx("div",{children:e.jsx(ie,{label:"Header Height",value:A.headerHeight,onChange:L=>G("headerHeight",L.target.value),placeholder:"48px"})}),e.jsx("div",{children:e.jsx(ie,{label:"Content Max Width",value:A.contentMaxWidth,onChange:L=>G("contentMaxWidth",L.target.value),placeholder:"1200px"})}),e.jsx("div",{children:e.jsx(ie,{label:"Content Padding",value:A.contentPadding,onChange:L=>G("contentPadding",L.target.value),placeholder:"24px"})})]})]})}),e.jsx(vt,{children:e.jsxs("div",{className:"p-1",children:[e.jsx("h3",{className:"text-base font-semibold mb-4",style:{color:s==null?void 0:s.theme.colors.primary[900]},children:"Component Styles"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-5",children:[e.jsx(he,{label:"Button Radius",children:e.jsx(Ae,{value:N.buttonRadius,onChange:L=>B("buttonRadius",L.target.value),options:[{value:"0",label:"None"},{value:"0.25rem",label:"Small"},{value:"0.5rem",label:"Medium"},{value:"0.75rem",label:"Large"},{value:"1rem",label:"Extra Large"}]})}),e.jsx(he,{label:"Card Radius",children:e.jsx(Ae,{value:N.cardRadius,onChange:L=>B("cardRadius",L.target.value),options:[{value:"0",label:"None"},{value:"0.25rem",label:"Small"},{value:"0.5rem",label:"Medium"},{value:"0.75rem",label:"Large"},{value:"1rem",label:"Extra Large"}]})}),e.jsx(he,{label:"Input Radius",children:e.jsx(Ae,{value:N.inputRadius,onChange:L=>B("inputRadius",L.target.value),options:[{value:"0",label:"None"},{value:"0.25rem",label:"Small"},{value:"0.5rem",label:"Medium"},{value:"0.75rem",label:"Large"},{value:"1rem",label:"Extra Large"}]})}),e.jsx(he,{label:"Button Shadow",children:e.jsx(Ae,{value:N.buttonShadow,onChange:L=>B("buttonShadow",L.target.value),options:[{value:"none",label:"None"},{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"}]})}),e.jsx(he,{label:"Card Shadow",children:e.jsx(Ae,{value:N.cardShadow,onChange:L=>B("cardShadow",L.target.value),options:[{value:"none",label:"None"},{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"}]})})]})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(xe,{variant:"outline",onClick:M,disabled:j,children:"Reset to Default"}),e.jsxs("div",{className:"flex space-x-3",children:[t&&e.jsx(xe,{variant:"outline",onClick:t,disabled:j,children:"Close"}),e.jsx(xe,{variant:"primary",onClick:E,loading:j,children:"Save Custom Theme"})]})]})]})};function xm({title:t,open:s,onClose:a,children:r}){const{theme:n}=Pe();return s?e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm z-50",children:e.jsxs("div",{className:"bg-white w-full max-w-3xl p-3 border border-gray-200",style:{borderRadius:(n==null?void 0:n.components.card.borderRadius)||"0.75rem",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},children:[t&&e.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-sm font-semibold",style:{fontFamily:n==null?void 0:n.typography.fontFamily.primary,fontSize:n==null?void 0:n.typography.fontSize.xl,fontWeight:n==null?void 0:n.typography.fontWeight.semibold,color:(n==null?void 0:n.theme.colors.primary[900])||"#212121"},children:t}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-900 p-2 hover:bg-gray-100 rounded-lg transition-colors",style:{borderRadius:(n==null?void 0:n.components.button.borderRadius)||"0.5rem"},children:e.jsx(zt,{size:18})})]}),e.jsx("div",{children:r})]})}):null}const hm=["Construction","Real Estate","Engineering","Architecture","Manufacturing","Other"],un=[{value:"head-office",label:"Head Office"},{value:"branch",label:"Branch Office"},{value:"billing",label:"Billing Address"},{value:"shipping",label:"Shipping Address"},{value:"warehouse",label:"Warehouse"},{value:"other",label:"Other"}],pm=["United States","Canada","United Kingdom","Australia","India","Germany","France","Japan","China","Brazil","Mexico","Other"],gm=()=>{const{user:t,hasPermission:s}=Ye(),{showToast:a}=at(),{theme:r}=Pe(),[n,i]=Di(),[l,u]=c.useState("profile"),[o,m]=c.useState(!1),[h,d]=c.useState(!0),[g,p]=c.useState(null),[x,A]=c.useState(null),y=s("settings_edit")||s("admin"),N=s("settings_view")||s("settings_edit")||s("admin"),[v,j]=c.useState({id:"",first_name:"",last_name:"",email:"",phone:"",avatar:""}),[D,C]=c.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[f,w]=c.useState({current:!1,new:!1,confirm:!1}),[b,z]=c.useState({theme:"light",language:"en",timezone:"UTC-5",dateFormat:"MM/DD/YYYY",currency:"USD",geofencedistance:"MILES",pinLength:"4",emailNotifications:!0,ioJobAlerts:!0,scheduleChangesAlerts:!0,overtimeAlerts:!0,systemUpdates:!1,sessionTimeout:30,autoBackup:!0,dataRetention:2}),[P,S]=c.useState(""),[k,G]=c.useState(""),[B,E]=c.useState(""),[M,F]=c.useState(""),[_,L]=c.useState(""),[R,q]=c.useState(null),[V,Z]=c.useState(null),[be,X]=c.useState([]),[ve,ee]=c.useState(!1),[me,se]=c.useState(null),[Q,W]=c.useState("head-office"),[K,I]=c.useState(""),[U,ce]=c.useState(""),[T,H]=c.useState(""),[ne,ue]=c.useState(""),[Ce,ke]=c.useState(""),[$e,$]=c.useState(""),[J,O]=c.useState(!1),je=[{id:"profile",name:"Profile",icon:wt},{id:"security",name:"Security",icon:ms},{id:"notifications",name:"Notifications",icon:Ys},{id:"theme",name:"Theme Manager",icon:An},{id:"regional",name:"Regional",icon:Qs},{id:"system",name:"System",icon:wn},{id:"company",name:"Company Profile",icon:Ot}];c.useEffect(()=>{ae()},[]),c.useEffect(()=>{const te=n.get("tab");te&&je.some(Ne=>Ne.id===te)&&u(te)},[n]);const ae=async()=>{d(!0);try{const te=await le.get("/auth/profile");te.success&&te.data?j({id:te.data.id||"",first_name:te.data.first_name||"",last_name:te.data.last_name||"",email:te.data.email||"",phone:te.data.phone||"",avatar:te.data.avatar||""}):t&&j({id:t.id||t.user_id||"",first_name:t.firstName||"",last_name:t.lastName||"",email:t.email||"",phone:"",avatar:""});const Ne=localStorage.getItem("userSettings");Ne&&z(JSON.parse(Ne));const Re=await le.get("/settings/company_profile");!Re.error&&Re.data&&(S(Re.data.name||""),G(Re.data.industryType||""),E(Re.data.phone||""),F(Re.data.email||""),L(Re.data.website||""),q(Re.data.logo||null),X(Re.data.addresses||[]))}catch(te){t&&j({id:t.id||t.user_id||"",first_name:t.firstName||"",last_name:t.lastName||"",email:t.email||"",phone:"",avatar:""}),p("Failed to load user data: "+te.message)}finally{d(!1)}},re=async()=>{var te;m(!0),p(null),A(null);try{if(!v.first_name.trim()||!v.last_name.trim()||!v.email.trim())throw new Error("First name, last name, and email are required");const Ne=await le.put("/auth/profile",{first_name:v.first_name.trim(),last_name:v.last_name.trim(),email:v.email.trim(),phone:(te=v.phone)==null?void 0:te.trim()});if(Ne.error)throw new Error(Ne.message||"Failed to update profile");Ne.data&&j({id:Ne.data.id||v.id,first_name:Ne.data.first_name||v.first_name,last_name:Ne.data.last_name||v.last_name,email:Ne.data.email||v.email,phone:Ne.data.phone||v.phone,avatar:Ne.data.avatar||v.avatar}),A("Profile updated successfully"),a({message:"Profile updated successfully",variant:"success"})}catch(Ne){p(Ne.message),a({message:Ne.message,variant:"error"})}finally{m(!1)}},Ie=async()=>{m(!0),p(null),A(null);try{if(!D.currentPassword||!D.newPassword||!D.confirmPassword)throw new Error("All password fields are required");if(D.newPassword!==D.confirmPassword)throw new Error("New passwords do not match");if(D.newPassword.length<8)throw new Error("New password must be at least 8 characters long");const te=await le.post("/auth/change-password",{currentPassword:D.currentPassword,newPassword:D.newPassword});if(te.error){const Ne=te.message||te.error||"Failed to change password";throw Ne.includes("Current password is incorrect")||Ne.includes("Incorrect password")||Ne.includes("Invalid password")?new Error("The current password you entered is incorrect. Please try again."):Ne.includes("at least 8 characters")?new Error("New password must be at least 8 characters long."):Ne.includes("Unauthorized")||Ne.includes("401")?new Error("You are not logged in. Please log in again and try again."):new Error(Ne)}C({currentPassword:"",newPassword:"",confirmPassword:""}),A("Password changed successfully"),a({message:"Password changed successfully",variant:"success"})}catch(te){const Ne=te.message||"An unexpected error occurred while changing password";p(Ne),a({message:Ne,variant:"error"}),C(Re=>({...Re,currentPassword:""}))}finally{m(!1)}},We=async()=>{m(!0),p(null),A(null);try{localStorage.setItem("userSettings",JSON.stringify(b)),(await le.put("/settings/user_preferences",b)).error,A("Settings saved successfully"),a({message:"Settings saved successfully",variant:"success"})}catch(te){p(te.message),a({message:te.message,variant:"error"})}finally{m(!1)}},Ke=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold mb-4",style:{color:r==null?void 0:r.theme.colors.primary[800]},children:"User Profile"}),!N&&e.jsx(os,{variant:"error",className:"mb-4",children:"You don't have permission to view settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx(he,{label:"First Name",isRequired:!0,children:e.jsx(ie,{type:"text",value:v.first_name,onChange:te=>j({...v,first_name:te.target.value}),placeholder:"Enter your first name",disabled:!y})}),e.jsx(he,{label:"Last Name",isRequired:!0,children:e.jsx(ie,{type:"text",value:v.last_name,onChange:te=>j({...v,last_name:te.target.value}),placeholder:"Enter your last name",disabled:!y})}),e.jsx(he,{label:"Email",isRequired:!0,children:e.jsx(ie,{type:"email",value:v.email,onChange:te=>j({...v,email:te.target.value}),placeholder:"Enter your email",disabled:!y})}),e.jsx(he,{label:"Phone",children:e.jsx(ie,{type:"tel",value:v.phone||"",onChange:te=>j({...v,phone:te.target.value}),placeholder:"Enter your phone number",disabled:!y})})]})]})}),st=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold mb-4",style:{color:r==null?void 0:r.theme.colors.primary[800]},children:"Security Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h6",{className:"font-sm mb-4",style:{color:r==null?void 0:r.theme.colors.primary[600]},children:"Change Password"}),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(he,{label:"Current Password",isRequired:!0,children:e.jsxs("div",{className:"relative",children:[e.jsx(ie,{type:f.current?"text":"password",value:D.currentPassword,onChange:te=>C({...D,currentPassword:te.target.value}),placeholder:"Enter current password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>w({...f,current:!f.current}),children:f.current?e.jsx(Vt,{className:"h-4 w-4 text-gray-400"}):e.jsx(jt,{className:"h-4 w-4 text-gray-400"})})]})}),e.jsx(he,{label:"New Password",isRequired:!0,children:e.jsxs("div",{className:"relative",children:[e.jsx(ie,{type:f.new?"text":"password",value:D.newPassword,onChange:te=>C({...D,newPassword:te.target.value}),placeholder:"Enter new password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>w({...f,new:!f.new}),children:f.new?e.jsx(Vt,{className:"h-4 w-4 text-gray-400"}):e.jsx(jt,{className:"h-4 w-4 text-gray-400"})})]})}),e.jsx(he,{label:"Confirm New Password",isRequired:!0,children:e.jsxs("div",{className:"relative",children:[e.jsx(ie,{type:f.confirm?"text":"password",value:D.confirmPassword,onChange:te=>C({...D,confirmPassword:te.target.value}),placeholder:"Confirm new password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>w({...f,confirm:!f.confirm}),children:f.confirm?e.jsx(Vt,{className:"h-4 w-4 text-gray-400"}):e.jsx(jt,{className:"h-4 w-4 text-gray-400"})})]})})]}),e.jsx(xe,{onClick:Ie,disabled:o||!D.currentPassword||!D.newPassword||!D.confirmPassword,className:"mt-4",children:"Update Password"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-sm mb-3",style:{color:r==null?void 0:r.theme.colors.primary[600]},children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Add an extra layer of security"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]})]})}),Se=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold mb-4",style:{color:r==null?void 0:r.theme.colors.primary[800]},children:"Notification Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-sm",style:{color:r==null?void 0:r.theme.colors.primary[600]},children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications via email"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.emailNotifications,onChange:te=>z({...b,emailNotifications:te.target.checked}),className:"sr-only peer",disabled:!y}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-sm",style:{color:r==null?void 0:r.theme.colors.primary[600]},children:"Clock In/Out Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Notify when job In/Out"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.ioJobAlerts,onChange:te=>z({...b,ioJobAlerts:te.target.checked}),className:"sr-only peer",disabled:!y}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-sm",style:{color:r==null?void 0:r.theme.colors.primary[600]},children:"Schedule Changes"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Notify when Schedule Changes"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.scheduleChangesAlerts,onChange:te=>z({...b,scheduleChangesAlerts:te.target.checked}),className:"sr-only peer",disabled:!y}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-sm",style:{color:r==null?void 0:r.theme.colors.primary[600]},children:"Overtime Alerts"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Notify when Overtime"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.overtimeAlerts,onChange:te=>z({...b,overtimeAlerts:te.target.checked}),className:"sr-only peer",disabled:!y}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-sm",style:{color:r==null?void 0:r.theme.colors.primary[600]},children:"System Updates"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Notify about system updates"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.systemUpdates,onChange:te=>z({...b,systemUpdates:te.target.checked}),className:"sr-only peer",disabled:!y}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]})]})}),ft=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold mb-4",style:{color:r==null?void 0:r.theme.colors.primary[800]},children:"Regional Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx(he,{label:"Language",children:e.jsx(Ae,{value:b.language,onChange:te=>z({...b,language:te.target.value}),options:[{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"}],disabled:!y})}),e.jsx(he,{label:"Time Zone",children:e.jsx(Ae,{value:b.timezone,onChange:te=>z({...b,timezone:te.target.value}),options:[{value:"UTC-5",label:"UTC-5 (Eastern Time)"},{value:"UTC-8",label:"UTC-8 (Pacific Time)"},{value:"UTC+0",label:"UTC+0 (GMT)"},{value:"UTC+1",label:"UTC+1 (Central European Time)"}],disabled:!y})}),e.jsx(he,{label:"Date Format",children:e.jsx(Ae,{value:b.dateFormat,onChange:te=>z({...b,dateFormat:te.target.value}),options:[{value:"MM/DD/YYYY",label:"MM/DD/YYYY"},{value:"DD/MM/YYYY",label:"DD/MM/YYYY"},{value:"YYYY-MM-DD",label:"YYYY-MM-DD"}],disabled:!y})}),e.jsx(he,{label:"Currency",children:e.jsx(Ae,{value:b.currency,onChange:te=>z({...b,currency:te.target.value}),options:[{value:"USD",label:"USD ($)"},{value:"CAD",label:"CAD (C$)"},{value:"EUR",label:"EUR ()"},{value:"GBP",label:"GBP ()"},{value:"JPY",label:"JPY ()"}],disabled:!y})}),e.jsx(he,{label:"Geofence Distance",children:e.jsx(Ae,{value:b.geofencedistance,onChange:te=>z({...b,geofencedistance:te.target.value}),options:[{value:"KM",label:"KM"},{value:"MILES",label:"Miles"}],disabled:!y})}),e.jsx(he,{label:"PIN Length",children:e.jsx(Ae,{value:b.pinLength,onChange:te=>z({...b,pinLength:te.target.value}),options:[{value:"4",label:"4 digits"},{value:"5",label:"5 digits"},{value:"6",label:"6 digits"},{value:"7",label:"7 digits"},{value:"8",label:"8 digits"},{value:"9",label:"9 digits"},{value:"10",label:"10 digits"},{value:"11",label:"12 digits"},{value:"12",label:"12 digits"}],disabled:!y})})]})]})}),oe=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold mb-4",style:{color:r==null?void 0:r.theme.colors.primary[800]},children:"System Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-sm",style:{color:r==null?void 0:r.theme.colors.primary[600]},children:"Auto Backup"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Automatically backup data daily"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.autoBackup,onChange:te=>z({...b,autoBackup:te.target.checked}),className:"sr-only peer",disabled:!y}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"w-36",children:[e.jsx("h6",{className:"font-sm",style:{color:r==null?void 0:r.theme.colors.primary[600]},children:"Data Retention"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Keep data for ",b.dataRetention," years"]})]}),e.jsx(Ae,{value:b.dataRetention.toString(),onChange:te=>z({...b,dataRetention:parseInt(te.target.value)}),options:[{value:"1",label:"1 year"},{value:"2",label:"2 years"},{value:"5",label:"5 years"},{value:"10",label:"10 years"}],disabled:!y})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"w-36",children:[e.jsx("h6",{className:"font-sm",style:{color:r==null?void 0:r.theme.colors.primary[600]},children:"Session Timeout"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Auto logout after ",b.sessionTimeout," minutes"]})]}),e.jsx(Ae,{value:b.sessionTimeout.toString(),onChange:te=>z({...b,sessionTimeout:parseInt(te.target.value)}),options:[{value:"15",label:"15 minutes"},{value:"30",label:"30 minutes"},{value:"60",label:"1 hour"},{value:"240",label:"4 hours"}],disabled:!y})]})]})]})}),we=te=>{var Re;const Ne=(Re=te.target.files)==null?void 0:Re[0];if(Ne){if(Ne.size>2*1024*1024){a({message:"Logo size should be less than 2MB",variant:"error"});return}if(!Ne.type.startsWith("image/")){a({message:"Please upload an image file",variant:"error"});return}Z(Ne);const dt=new FileReader;dt.onloadend=()=>{q(dt.result)},dt.readAsDataURL(Ne)}},pe=()=>{se(null),nt(),ee(!0)},ye=te=>{se(te),W(te.addressType),I(te.addressLine1),ce(te.addressLine2||""),H(te.city),ue(te.state),ke(te.country),$(te.zipCode),O(te.isDefault),ee(!0)},Me=te=>{if(!te){const Ne=be.findIndex(Re=>!Re.id);Ne>-1&&X(be.filter((Re,dt)=>dt!==Ne));return}X(be.filter(Ne=>Ne.id!==te)),a({message:"Address removed",variant:"success"})},tt=()=>{if(!K.trim()||!T.trim()||!ne.trim()||!Ce.trim()||!$e.trim()){a({message:"Please fill in all required address fields",variant:"error"});return}const te={id:(me==null?void 0:me.id)||`temp-${Date.now()}`,addressType:Q,addressLine1:K,addressLine2:U,city:T,state:ne,country:Ce,zipCode:$e,isDefault:J};let Ne=be;J&&(Ne=be.map(Re=>({...Re,isDefault:!1}))),X(me?Ne.map(Re=>Re.id===me.id?te:Re):[...Ne,te]),ee(!1),nt(),a({message:"Address saved",variant:"success"})},nt=()=>{W("head-office"),I(""),ce(""),H(""),ue(""),ke(""),$(""),O(!1)},Rt=te=>{var Ne;return((Ne=un.find(Re=>Re.value===te))==null?void 0:Ne.label)||te},At=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold mb-4",style:{color:r==null?void 0:r.theme.colors.primary[800]},children:"Company Information"}),e.jsxs("div",{className:"space-y-7",children:[e.jsxs("div",{className:"mb-1 p-4 border border-gray-200 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-semibold mb-3",style:{color:r==null?void 0:r.theme.colors.primary[600]},children:"Company Logo"}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"w-32 h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50 overflow-hidden",children:R?e.jsx("img",{src:R,alt:"Company Logo",className:"w-full h-full object-contain"}):e.jsx(Ot,{size:48,className:"text-gray-400"})}),e.jsxs("div",{children:[y?e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:we,className:"hidden"}),e.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(ja,{size:16}),"Upload Logo"]})]}):e.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-400 rounded-lg cursor-not-allowed",children:[e.jsx(ja,{size:16}),"Upload Logo"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Max size: 2MB"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx(he,{label:"Company Name",isRequired:!0,children:e.jsx(ie,{type:"text",value:P,onChange:te=>S(te.target.value),placeholder:"Enter company name",disabled:!y})}),e.jsx(he,{label:"Industry Type",children:e.jsx(Ae,{value:k,onChange:te=>G(te.target.value),disabled:!y,options:[{value:"",label:" Select Industry "},...hm.map(te=>({value:te,label:te}))]})}),e.jsx(he,{label:"Phone",isRequired:!0,children:e.jsx(ie,{type:"tel",value:B,onChange:te=>E(te.target.value),placeholder:"+1 (555) 123-4567",disabled:!y})}),e.jsx(he,{label:"Email",isRequired:!0,children:e.jsx(ie,{type:"email",value:M,onChange:te=>F(te.target.value),placeholder:"contact@company.com",disabled:!y})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(he,{label:"Website",children:e.jsx(ie,{type:"url",value:_,onChange:te=>L(te.target.value),placeholder:"https://www.company.com",disabled:!y})})})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-base font-semibold flex items-center gap-2",style:{color:r==null?void 0:r.theme.colors.primary[600]},children:[e.jsx(Nt,{size:18}),"Addresses"]}),y&&e.jsxs("button",{onClick:pe,className:"flex items-center gap-1 px-3 py-1.5 text-sm text-blue-600 hover:bg-blue-50 rounded transition-colors",children:[e.jsx(_e,{size:16}),"Add Address"]})]}),be.length===0?e.jsxs("div",{className:"text-center p-5 text-gray-500 border border-gray-200 rounded-lg",children:[e.jsx(Nt,{size:36,className:"mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"No addresses added yet"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:be.map((te,Ne)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-1 relative",children:[te.isDefault&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-medium rounded",children:[e.jsx(Ze,{size:12}),"Default"]})}),e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:Rt(te.addressType)})}),e.jsxs("div",{className:"space-y-0.5 text-sm text-gray-700 mb-3",children:[e.jsx("p",{className:"font-medium",children:te.addressLine1}),te.addressLine2&&e.jsx("p",{children:te.addressLine2}),e.jsxs("p",{children:[te.city,", ",te.state," ",te.zipCode]}),e.jsx("p",{children:te.country})]}),y&&e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>ye(te),className:"flex items-center gap-1 px-2 py-1 text-xs text-blue-600 hover:bg-blue-50 rounded",children:[e.jsx(Tt,{size:12}),"Edit"]}),e.jsxs("button",{onClick:()=>Me(te.id),className:"flex items-center gap-1 px-2 py-1 text-xs text-red-600 hover:bg-red-50 rounded",children:[e.jsx(lt,{size:12}),"Delete"]})]})]},te.id||Ne))})]})]}),ge=()=>{switch(l){case"profile":return Ke();case"security":return st();case"notifications":return Se();case"theme":return e.jsx(pi,{});case"regional":return ft();case"system":return oe();case"company":return At();default:return Ke()}},Te=async()=>{if(!P.trim()||!B.trim()||!M.trim()){a({message:"Please fill in all required fields",variant:"error"});return}m(!0);try{let te;if(V){const Ne=new FormData;Ne.append("name",P),Ne.append("phone",B),Ne.append("email",M),k&&Ne.append("industryType",k),_&&Ne.append("website",_),Ne.append("logo",V),Ne.append("addresses",JSON.stringify(be)),te=await le.post("/settings/company_profile/upload",Ne)}else{const Ne={name:P,phone:B,email:M,industryType:k||"",website:_||"",logo:R,addresses:be};te=await le.put("/settings/company_profile",Ne)}if(te.error)throw new Error(te.message||"Failed to save company");a({message:"Company profile saved successfully",variant:"success"}),A("Company profile saved successfully"),Z(null)}catch(te){p(te.message),a({message:te.message||"Failed to save company",variant:"error"})}finally{m(!1)}},Ee=async()=>{switch(l){case"profile":await re();break;case"security":break;case"company":await Te();break;default:await We();break}};return h?e.jsx(ct,{maxWidth:"full",padding:"lg",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-base",children:"Loading settings..."})})}):e.jsx(ct,{maxWidth:"full",padding:"md",children:e.jsx("div",{className:"rounded-xl",children:e.jsxs(Be,{title:"Settings",variant:"default",children:[g&&e.jsx(os,{variant:"error",className:"mb-4",children:g}),x&&e.jsx(os,{variant:"success",className:"mb-4",children:x}),e.jsx("div",{className:"bg-white shadow-lg rounded-xl border border-gray-200",style:{background:r==null?void 0:r.theme.colors.primary[50]},children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4",children:[e.jsx("div",{className:"lg:col-span-1 border-r border-gray-200",children:e.jsx("nav",{className:"p-5",children:e.jsx("ul",{className:"space-y-2",children:je.map(te=>{const Ne=te.icon;return e.jsx("li",{children:e.jsxs("button",{onClick:()=>{u(te.id),i({tab:te.id})},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors duration-200 ${l===te.id?"bg-primary-100 text-primary-700 border-r-2 border-primary-700":"text-primary-500 hover:bg-primary-100 hover:text-primary-900"}`,children:[e.jsx(Ne,{className:`h-5 w-5 ${l===te.id?"text-primary-700":"text-primary-400"}`}),e.jsx("span",{className:"font-semibold",children:te.name})]})},te.id)})})})}),e.jsxs("div",{className:"lg:col-span-3 p-5",children:[ge(),l!=="security"&&l!=="theme"&&y&&e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsx("div",{className:"flex items-center justify-end space-x-3",children:e.jsxs(xe,{onClick:Ee,disabled:o,variant:"primary",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save Changes"]})})}),!y&&N&&l!=="security"&&l!=="theme"&&e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsx(os,{variant:"info",children:"You have view-only access to settings. Contact an administrator to make changes."})})]})]})}),e.jsx(xm,{open:ve,onClose:()=>{ee(!1),nt()},title:me?"Edit Address":"Add New Address",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ae,{label:"Address Type",value:Q,onChange:te=>W(te.target.value),options:un,required:!0}),e.jsx(ie,{label:"Address Line 1",value:K,onChange:te=>I(te.target.value),required:!0,placeholder:"Street address, P.O. box"}),e.jsx(ie,{label:"Address Line 2",value:U,onChange:te=>ce(te.target.value),placeholder:"Apartment, suite, unit, building, floor, etc."}),e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsx(ie,{label:"City",value:T,onChange:te=>H(te.target.value),required:!0,placeholder:"City"}),e.jsx(ie,{label:"State/Province",value:ne,onChange:te=>ue(te.target.value),required:!0,placeholder:"State"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsx(Ae,{label:"Country",value:Ce,onChange:te=>ke(te.target.value),required:!0,options:[{value:"",label:" Select Country "},...pm.map(te=>({value:te,label:te}))]}),e.jsx(ie,{label:"Zip/Postal Code",value:$e,onChange:te=>$(te.target.value),required:!0,placeholder:"12345"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:J,onChange:te=>O(te.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Set as default address"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsxs(xe,{onClick:tt,children:[e.jsx(Ss,{size:16,className:"mr-2"}),"Save Address"]}),e.jsx(xe,{variant:"outline",onClick:()=>{ee(!1),nt()},children:"Cancel"})]})]})})]})})})};function fm({selectedDate:t,entries:s,totalHours:a,projects:r,tasks:n,users:i,onEditEntry:l,onDeleteEntry:u,onCopyEntry:o,onApproveTimesheet:m,onRejectTimesheet:h}){const{theme:d}=Pe(),g=j=>j.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),p=j=>new Date(`2000-01-01T${j}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),x=j=>{switch(j){case"draft":return"bg-gray-100 text-gray-800";case"submitted":return"bg-blue-100 text-blue-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},A=j=>{var D;return((D=r.find(C=>C.id===j))==null?void 0:D.name)||"Unknown Project"},y=j=>{var D;return j?((D=n.find(C=>C.id===j))==null?void 0:D.title)||"Unknown Task":"No specific task"},N=j=>{var D;return((D=i.find(C=>C.id===j))==null?void 0:D.name)||"Unknown User"},v=j=>{var D;return((D=i.find(C=>C.id===j))==null?void 0:D.position)||""};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Je,{size:24,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:d==null?void 0:d.theme.colors.primary[900]},children:g(t)}),e.jsxs("p",{className:"text-gray-600",children:[s.length," ",s.length===1?"entry":"entries","  ",a.toFixed(1)," hours total"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-bold text-blue-600",children:[a.toFixed(1),"h"]}),e.jsx("div",{className:"text-sm text-gray-500",children:a>=8?"Full day":a>=4?"Half day":"Partial day"})]})]})}),s.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(Oe,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No timesheet entries"}),e.jsx("p",{className:"text-gray-600",children:"No entries found for this date. Create your first entry to get started."})]}):e.jsx("div",{className:"space-y-4",children:s.map(j=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-1",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 px-3 py-1.5 rounded-lg",children:[e.jsx(wt,{size:18,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:N(j.userId)}),e.jsx("div",{className:"text-xs text-gray-500",children:v(j.userId)})]})]}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${x(j.status)}`,children:j.status.charAt(0).toUpperCase()+j.status.slice(1)}),e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[j.totalHours,"h"]}),j.isOvertime&&e.jsx("div",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded-full text-xs font-medium",children:"Overtime"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1 mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Zs,{size:14}),e.jsx("span",{className:"font-medium",children:"Project:"}),e.jsx("span",{children:A(j.projectId)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(et,{size:14}),e.jsx("span",{className:"font-medium",children:"Task:"}),e.jsx("span",{children:y(j.taskId)})]})]}),e.jsxs("div",{className:"space-y-2",children:[j.startTime&&j.endTime&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Oe,{size:14}),e.jsx("span",{className:"font-medium",children:"Time:"}),e.jsxs("span",{children:[p(j.startTime)," - ",p(j.endTime)]})]}),j.breakDuration&&j.breakDuration>0&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Break:"})," ",j.breakDuration," minutes"]}),j.description&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Description:"})," ",j.description]})]})]}),j.rejectedReason&&e.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("span",{className:"font-medium",children:"Rejection Reason:"})," ",j.rejectedReason]})})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[j.status==="submitted"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m(j.id,"current-user"),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve",children:e.jsx(dr,{size:16})}),e.jsx("button",{onClick:()=>{const D=prompt("Enter rejection reason:");D&&h(j.id,D)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject",children:e.jsx(zt,{size:16})})]}),j.status==="draft"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>l(j),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:e.jsx(Tt,{size:16})}),e.jsx("button",{onClick:()=>o(j),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Copy",children:e.jsx(Ts,{size:16})})]}),e.jsx("button",{onClick:()=>u(j.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(lt,{size:16})})]})]})},j.id))}),s.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Daily Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-1",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-bold text-blue-600",children:[a.toFixed(1),"h"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Hours"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-bold text-green-600",children:s.filter(j=>j.status==="approved").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Approved"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-bold text-orange-600",children:[s.filter(j=>j.isOvertime).reduce((j,D)=>j+(D.overtimeHours||0),0).toFixed(1),"h"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Overtime"})]})]})]})]})}function ym({users:t,projects:s,tasks:a,timeEntries:r,currentUserId:n,onClockIn:i,onClockOut:l,onBreakStart:u,onBreakEnd:o}){var G,B;const[m,h]=c.useState(new Date),[d,g]=c.useState(""),[p,x]=c.useState(""),[A,y]=c.useState(""),[N,v]=c.useState(""),{theme:j}=Pe();c.useEffect(()=>{const E=setInterval(()=>{h(new Date)},1e3);return()=>clearInterval(E)},[]);const D=r.find(E=>E.userId===n&&E.status==="clocked-in"),C=r.find(E=>E.userId===n&&E.status==="on-break"),f=()=>{if(!D)return"00:00:00";const E=new Date(D.clockIn),M=m.getTime()-E.getTime(),F=Math.floor(M/(1e3*60*60)),_=Math.floor(M%(1e3*60*60)/(1e3*60)),L=Math.floor(M%(1e3*60)/1e3);return`${String(F).padStart(2,"0")}:${String(_).padStart(2,"0")}:${String(L).padStart(2,"0")}`},w=()=>{const E={userId:n,projectId:d||void 0,taskId:p||void 0,clockIn:new Date().toISOString(),originalClockIn:new Date().toISOString(),status:"clocked-in",deviceType:"web",jobCode:A||void 0,costCode:N||void 0,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,date:new Date().toISOString().split("T")[0],totalHours:0,overtimeHours:0,regularHours:0,breaks:[]};i(E)},b=()=>{D&&l(D.id)},z=()=>{D&&u(D.id)},P=()=>{C&&o(C.id)},S=t.find(E=>E.id===n),k=d?a.filter(E=>E.projectId===d):[];return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 p-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-800 rounded-2xl p-8 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Time Clock"}),e.jsxs("p",{className:"text-blue-100",children:["Welcome, ",S==null?void 0:S.firstName,"!"]})]}),e.jsx("div",{className:"w-16 h-16 bg-blue-500/30 rounded-full flex items-center justify-center",children:e.jsx(Oe,{size:32})})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"text-6xl font-bold mb-2",children:m.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),e.jsx("div",{className:"text-xl text-white",children:m.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),D&&e.jsx("div",{className:"bg-white rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(he,{label:"Active Session",children:e.jsx("p",{className:"text-sm font-bold text-gray-600",children:f()})}),e.jsx("div",{className:"w-3 h-3 bg-green-800 rounded-full animate-pulse"})]})}),C&&e.jsx("div",{className:"bg-white rounded-lg p-3 mt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(he,{label:"On Break",children:e.jsx("p",{className:"text-sm font-bold text-gray-600",children:f()})}),e.jsx(ws,{size:24,className:"text-orange-600"})]})})]}),!D&&!C?e.jsx(Be,{title:"Clock In",variant:"elevated",children:e.jsxs("div",{className:"p-3 space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(he,{label:"Project (Optional)",icon:e.jsx(or,{size:16}),children:e.jsxs("select",{value:d,onChange:E=>{g(E.target.value),x("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"No Project Selected"}),s.map(E=>e.jsxs("option",{value:E.id,children:[E.name," (",E.code,")"]},E.id))]})}),d&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{size:16}),"Cost Code (Optional)"]})}),e.jsxs("select",{value:p,onChange:E=>x(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"No Cost Code Selected"}),k.map(E=>e.jsx("option",{value:E.id,children:E.title},E.id))]})]})]}),e.jsxs("button",{onClick:w,className:"w-fit mx-auto flex items-center justify-center gap-1 px-2 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-lh font-semibold",children:[e.jsx($s,{size:16}),"Clock In"]})]})}):e.jsx(Be,{title:"Active Session",variant:"elevated",children:e.jsxs("div",{className:"p-3",children:[D&&e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsx(he,{label:"Clocked In",children:e.jsx("p",{className:"font-semibold text-gray-900",children:new Date(D.clockIn).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})}),e.jsx(he,{label:"Duration",children:e.jsx("p",{className:"font-semibold text-gray-900",children:f()})}),D.projectId&&e.jsx("div",{className:"col-span-2",children:e.jsx(he,{label:"Project",children:e.jsx("p",{className:"font-semibold text-gray-900",children:(G=s.find(E=>E.id===D.projectId))==null?void 0:G.name})})}),D.taskId&&e.jsx("div",{className:"col-span-2",children:e.jsx(he,{label:"Task",children:e.jsx("p",{className:"font-semibold text-gray-900",children:(B=a.find(E=>E.id===D.taskId))==null?void 0:B.title})})})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[D&&!C&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:z,className:"flex items-center justify-center gap-2 px-4 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-semibold",children:[e.jsx(ws,{size:20}),"Start Break"]}),e.jsxs("button",{onClick:b,className:"flex items-center justify-center gap-2 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-semibold",children:[e.jsx(Gt,{size:20}),"Clock Out"]})]}),C&&e.jsxs("button",{onClick:P,className:"col-span-2 flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:[e.jsx($s,{size:20}),"End Break"]})]})]})}),e.jsx(Be,{title:"Today's Activity",variant:"elevated",children:e.jsxs("div",{className:"space-y-3 p-3",children:[r.filter(E=>{const M=new Date(E.date),F=new Date;return E.userId===n&&M.toDateString()===F.toDateString()}).slice(0,3).map(E=>{var M;return e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:j==null?void 0:j.theme.colors.primary[100]},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${E.status==="clocked-in"?"bg-green-100":E.status==="on-break"?"bg-yellow-100":`bg-${j==null?void 0:j.theme.name}-400`}`,children:e.jsx(Oe,{size:20,className:E.status==="clocked-in"?"text-green-600":E.status==="on-break"?"text-yellow-600":"text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[new Date(E.clockIn).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),E.clockOut&&e.jsxs(e.Fragment,{children:[" ","-"," ",new Date(E.clockOut).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:E.projectId?(M=s.find(F=>F.id===E.projectId))==null?void 0:M.name:"No project"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[E.totalHours.toFixed(2),"h"]}),e.jsx("p",{className:`text-xs ${E.status==="clocked-in"?"text-green-600":E.status==="on-break"?"text-yellow-600":"text-gray-500"}`,children:E.status.replace("-"," ")})]})]},E.id)}),r.filter(E=>{const M=new Date(E.date),F=new Date;return E.userId===n&&M.toDateString()===F.toDateString()}).length===0&&e.jsx("p",{className:"text-center text-gray-500 py-4",children:"No activity today"})]})})]})}function bm({employeeFilter:t,onEmployeeFilterChange:s,statusFilter:a,onStatusFilterChange:r,projectFilter:n,onProjectFilterChange:i,projects:l,divisions:u=[],selectedDivisions:o=[],onDivisionToggle:m,displayOptions:h,onDisplayOptionChange:d,onClearFilters:g}){const p=u.length>0&&o.length===u.length,{theme:x}=Pe(),A=()=>{m&&(p?u.forEach(y=>m(y.id)):u.forEach(y=>{o.includes(y.id)||m(y.id)}))};return e.jsxs("div",{className:"w-80 border-r p-3 overflow-y-auto h-full divide-y",style:{background:x==null?void 0:x.theme.colors.primary[50],borderColor:x==null?void 0:x.theme.colors.primary[200]},children:[e.jsxs("div",{className:"flex items-center justify-between",style:{borderColor:x==null?void 0:x.theme.colors.primary[200]},children:[e.jsx("h2",{className:"text-lg font-semibold",style:{color:x==null?void 0:x.theme.colors.primary[900]},children:"Filters"}),e.jsx(xe,{onClick:g,variant:"ghost",size:"sm",children:"Clear"})]}),e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 font-semibold",style:{color:x==null?void 0:x.theme.colors.primary[800]},children:[e.jsx(Ze,{size:18}),e.jsx("span",{children:"Status"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"statusFilter",checked:a==="all",onChange:()=>r("all"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"All statuses"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"statusFilter",checked:a==="draft",onChange:()=>r("draft"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Draft"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"statusFilter",checked:a==="submitted",onChange:()=>r("submitted"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Submitted"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"statusFilter",checked:a==="approved",onChange:()=>r("approved"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Approved"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"statusFilter",checked:a==="rejected",onChange:()=>r("rejected"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Rejected"})]})]})]})]}),e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 font-semibold",style:{color:x==null?void 0:x.theme.colors.primary[800]},children:[e.jsx(Nt,{size:18}),e.jsx("span",{children:"Project"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:n,onChange:y=>i(y.target.value),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All projects"}),l.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]}),e.jsx(Ft,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:18})]})]}),u.length>0&&m&&e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(Users,{size:18}),e.jsx("span",{className:"font-medium",children:"Divisions"})]}),e.jsx(xe,{onClick:A,variant:"ghost",size:"sm",children:p?"None":"All"})]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:u.map(y=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o.includes(y.id),onChange:()=>m(y.id),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:y.name})]},y.id))})]}),e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 font-semibold",style:{color:x==null?void 0:x.theme.colors.primary[800]},children:[e.jsx(wt,{size:18}),e.jsx("span",{children:"Employees"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:t,onChange:y=>s(y.target.value),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All employees"}),e.jsx("option",{value:"withEntries",children:"With time entries"}),e.jsx("option",{value:"withoutEntries",children:"Without entries"})]}),e.jsx(Ft,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:18})]})]}),e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 font-semibold",style:{color:x==null?void 0:x.theme.colors.primary[800]},children:[e.jsx(jt,{size:18}),e.jsx("span",{children:"Display"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.hideApproved,onChange:()=>d("hideApproved"),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Hide approved entries"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.hideRejected,onChange:()=>d("hideRejected"),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Hide rejected entries"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.showOvertimeOnly,onChange:()=>d("showOvertimeOnly"),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show overtime only"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.showConflictsOnly,onChange:()=>d("showConflictsOnly"),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show conflicts only"})]})]})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("div",{className:"font-semibold text-sm mb-2",style:{color:x==null?void 0:x.theme.colors.primary[800]},children:"Grouping"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.groupByEmployee,onChange:()=>d("groupByEmployee"),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Group by employee"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mt-2",children:[e.jsx("input",{type:"checkbox",checked:h.groupByProject,onChange:()=>d("groupByProject"),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Group by project"})]})]})]})}function vm({timeEntries:t,users:s,projects:a,tasks:r,batchConflicts:n,selectedEntries:i,onAddEntry:l,onEditEntry:u,onSelectEntry:o,onSelectAll:m,onBatchAction:h}){const[d,g]=c.useState("open"),p=i||[],[x,A]=c.useState(""),[y,N]=c.useState("all"),[v,j]=c.useState("all"),[D,C]=c.useState("week"),[f,w]=c.useState(()=>{const $=new Date;return $.setHours(0,0,0,0),$}),[b,z]=c.useState("all"),[P,S]=c.useState("date"),[k,G]=c.useState("desc"),[B,E]=c.useState(["tags","firstName","lastName","device","jobCode","costCode","clockIn","clockOut","totalHours","originalClockIn","originalClockOut","manager","payCode","timezone"]),[M,F]=c.useState(!1),[_,L]=c.useState(!0),[R,q]=c.useState(!1),V=c.useRef(null),[Z,be]=c.useState({hideApproved:!1,hideRejected:!1,showOvertimeOnly:!1,showConflictsOnly:!1,groupByEmployee:!1,groupByProject:!1});c.useEffect(()=>{const $=J=>{V.current&&!V.current.contains(J.target)&&q(!1)};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]);const X={tags:{label:"Tags",width:"80px"},firstName:{label:"First",width:"120px"},lastName:{label:"Last",width:"120px"},device:{label:"Device",width:"120px"},jobCode:{label:"Job Code",width:"100px"},costCode:{label:"Cost Code",width:"120px"},clockIn:{label:"In",width:"140px"},clockOut:{label:"Out",width:"140px"},totalHours:{label:"Total",width:"80px"},originalClockIn:{label:"Original In",width:"140px"},originalClockOut:{label:"Original Out",width:"140px"},manager:{label:"Mgr",width:"80px"},payCode:{label:"Pay Code",width:"100px"},timezone:{label:"In TZ",width:"100px"}},ve=$=>{var J;return((J=s.find(O=>O.id===$))==null?void 0:J.firstName)||"Unknown"},ee=$=>{var J;return((J=s.find(O=>O.id===$))==null?void 0:J.lastName)||"User"},me=$=>{var J;return $?((J=a.find(O=>O.id===$))==null?void 0:J.name)||"Unknown Project":"No Project"},se=$=>new Date($).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}),Q=$=>{var J;return $&&((J=$.split("/")[1])==null?void 0:J.substring(0,5))||"Ameri"},W=$=>{const J=[];return $.status==="clocked-out"&&J.push(e.jsx(Ze,{size:12,className:"text-green-600"},"check")),$.deviceType==="mobile"&&J.push(e.jsx(Oe,{size:12,className:"text-blue-600"},"mobile")),$.manager&&J.push(e.jsx(Ze,{size:12,className:"text-purple-600"},"manager")),$.overtimeHours>0&&J.push(e.jsx(it,{size:12,className:"text-orange-600"},"overtime")),$.originalClockIn!==$.clockIn&&J.push(e.jsx(Tt,{size:12,className:"text-yellow-600"},"edited")),e.jsx("div",{className:"flex items-center gap-1",children:J.length>0?J:e.jsx("span",{className:"text-gray-400 text-xs",children:""})})},K=$=>{be(J=>({...J,[$]:!J[$]}))},I=()=>{const $=new Date(f);D==="day"?$.setDate($.getDate()-1):D==="week"?$.setDate($.getDate()-7):$.setMonth($.getMonth()-1),w($)},U=()=>{const $=new Date(f);D==="day"?$.setDate($.getDate()+1):D==="week"?$.setDate($.getDate()+7):$.setMonth($.getMonth()+1),w($)},ce=$=>{const J=new Date($.getFullYear(),0,1),O=($.getTime()-J.getTime())/864e5;return Math.ceil((O+J.getDay()+1)/7)},T=($,J)=>{const O=new Date($,0,1),je=(J-1)*7,ae=new Date(O.getTime()+je*864e5);return ae.setDate(ae.getDate()-ae.getDay()),ae},H=()=>{N("all"),j("all"),z("all"),be({hideApproved:!1,hideRejected:!1,showOvertimeOnly:!1,showConflictsOnly:!1,groupByEmployee:!1,groupByProject:!1})},ne=c.useMemo(()=>{let $=t.filter(J=>{const O=`${ve(J.userId)} ${ee(J.userId)}`,je=!x||O.toLowerCase().includes(x.toLowerCase())||me(J.projectId).toLowerCase().includes(x.toLowerCase()),ae=y==="all"||J.status===y,re=v==="all"||J.projectId===v;if(Z.hideApproved&&J.status==="approved"||Z.hideRejected&&J.status==="rejected"||Z.showOvertimeOnly&&(!J.overtimeHours||J.overtimeHours<=0))return!1;const Ie=new Date(J.date);Ie.setHours(0,0,0,0);let We=!0;if(D==="day"){const Ke=new Date(f);Ke.setHours(0,0,0,0),We=Ie.getTime()===Ke.getTime()}else if(D==="week"){const Ke=new Date(f);Ke.setDate(Ke.getDate()-Ke.getDay()),Ke.setHours(0,0,0,0);const st=new Date(Ke);st.setDate(st.getDate()+6),st.setHours(23,59,59,999),We=Ie>=Ke&&Ie<=st}else D==="month"&&(We=Ie.getMonth()===f.getMonth()&&Ie.getFullYear()===f.getFullYear());return d==="batched"||d==="batched-per-employee"?!1:je&&ae&&re&&We});return $.sort((J,O)=>{const je=J[P],ae=O[P];return je===void 0&&ae===void 0?0:je===void 0?k==="asc"?-1:1:ae===void 0?k==="asc"?1:-1:je<ae?k==="asc"?-1:1:je>ae?k==="asc"?1:-1:0}),$},[t,d,x,y,v,D,f,P,k,Z]),ue=$=>{o&&o($)},Ce=()=>{m&&m(ne)},ke=$=>{P===$?G(k==="asc"?"desc":"asc"):(S($),G("asc"))},$e=$=>{E(J=>J.includes($)?J.filter(O=>O!==$):[...J,$])};return e.jsxs("div",{className:"flex h-full overflow-hidden bg-gray-50",children:[_&&e.jsx(bm,{employeeFilter:b,onEmployeeFilterChange:z,statusFilter:y,onStatusFilterChange:N,projectFilter:v,onProjectFilterChange:j,projects:a,displayOptions:Z,onDisplayOptionChange:K,onClearFilters:H}),e.jsx("div",{className:"flex-1 flex flex-col overflow-hidden p-3 bg-white",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"flex space-x-8 px-6",children:[{id:"open",label:"Open",icon:sr,count:t.length},{id:"batched",label:"Batched",icon:St,count:0},{id:"batched-per-employee",label:"Per Employee",icon:ot,count:s.length},{id:"batch-conflicts",label:"Conflicts",icon:it,count:n.length}].map(({id:$,label:J,icon:O,count:je})=>{const ae=d===$;return e.jsxs("button",{onClick:()=>g($),className:`flex items-center gap-2 px-3 py-2 border-b-2 font-semibold text-sm transition-all duration-200 ${ae?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:[e.jsx(O,{size:18,className:ae?"text-blue-600":"text-gray-400"}),e.jsx("span",{children:J}),je!==void 0&&e.jsx("span",{className:`ml-2 px-2.5 py-0.5 text-xs font-semibold rounded-full ${ae?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:je})]},$)})})}),e.jsx("div",{className:"bg-white rounded-lg border p-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xe,{onClick:()=>L(!_),variant:"outline",icon:_?e.jsx(Sn,{size:18}):e.jsx(ur,{size:18}),title:_?"Hide Filters":"Show Filters",children:_?"Hide Filters":"Show Filters"}),e.jsxs("div",{className:"relative",children:[e.jsx(xt,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search entries...",value:x,onChange:$=>A($.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]}),e.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>C("day"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 ${D==="day"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(Je,{size:16}),"Day"]}),e.jsxs("button",{onClick:()=>C("week"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 ${D==="week"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(Tn,{size:16}),"Week"]}),e.jsxs("button",{onClick:()=>C("month"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 ${D==="month"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(cr,{size:16}),"Month"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:I,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:`Previous ${D}`,children:e.jsx(Ns,{size:20})}),D==="day"&&e.jsx("input",{type:"date",value:f.toISOString().split("T")[0],onChange:$=>{const J=new Date($.target.value);w(J)},className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm font-medium text-gray-900"}),D==="week"&&e.jsx("input",{type:"week",value:`${f.getFullYear()}-W${String(ce(f)).padStart(2,"0")}`,onChange:$=>{const[J,O]=$.target.value.split("-W"),je=T(parseInt(J),parseInt(O));w(je)},className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm font-medium text-gray-900"}),D==="month"&&e.jsx("input",{type:"month",value:`${f.getFullYear()}-${String(f.getMonth()+1).padStart(2,"0")}`,onChange:$=>{const[J,O]=$.target.value.split("-"),je=new Date(parseInt(J),parseInt(O)-1,1);w(je)},className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm font-medium text-gray-900"}),e.jsx("button",{onClick:U,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:`Next ${D}`,children:e.jsx(ds,{size:20})}),e.jsxs("div",{className:"relative",ref:V,children:[e.jsx("button",{onClick:()=>q(!R),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"More options",children:e.jsx(ea,{size:20})}),R&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[e.jsxs("button",{onClick:()=>{F(!M),q(!1)},className:"w-full px-4 py-3 text-left text-sm hover:bg-gray-50 transition-colors flex items-center gap-3 rounded-t-lg",children:[e.jsx(kt,{size:18,className:"text-gray-600"}),e.jsx("span",{className:"text-gray-900",children:"Columns"})]}),e.jsxs("button",{onClick:()=>{q(!1)},className:"w-full px-4 py-3 text-left text-sm hover:bg-gray-50 transition-colors flex items-center gap-3 border-t border-gray-100",children:[e.jsx(Ht,{size:18,className:"text-gray-600"}),e.jsx("span",{className:"text-gray-900",children:"Export"})]}),e.jsxs("button",{onClick:()=>{q(!1)},className:"w-full px-4 py-3 text-left text-sm hover:bg-gray-50 transition-colors flex items-center gap-3 border-t border-gray-100 rounded-b-lg",children:[e.jsx(ja,{size:18,className:"text-gray-600"}),e.jsx("span",{className:"text-gray-900",children:"Import"})]})]})]})]})]})}),e.jsxs("div",{children:[l&&e.jsx("div",{className:"flex items-center justify-end mb-4",children:e.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(_e,{size:16}),"Add Entry"]})}),p.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-1 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-blue-800",children:[p.length," entries selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>h==null?void 0:h("approve",p),className:"flex items-center gap-2 px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm",children:[e.jsx(Ze,{size:14}),"Approve"]}),e.jsxs("button",{onClick:()=>h==null?void 0:h("reject",p),className:"flex items-center gap-2 px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm",children:[e.jsx(rr,{size:14}),"Reject"]}),e.jsxs("button",{onClick:()=>h==null?void 0:h("export",p),className:"flex items-center gap-2 px-3 py-1 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors text-sm",children:[e.jsx(Ht,{size:14}),"Export"]}),e.jsx("button",{onClick:()=>setSelectedEntries([]),className:"px-3 py-1 text-gray-600 hover:text-gray-800 transition-colors text-sm",children:"Clear"})]})]})}),M&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-1 mb-4",children:[e.jsx("h6",{className:"font-sm text-gray-900 mb-3",children:"Select Columns"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(X).map(([$,J])=>e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:B.includes($),onChange:()=>$e($),className:"rounded border-gray-300"}),J.label]},$))})]})]}),d==="batch-conflicts"?e.jsx(Be,{variant:"elevated",title:"Batch Conflicts",children:e.jsxs("div",{className:"space-y-4 p-3",children:[n.map($=>e.jsxs("div",{className:"border border-red-200 bg-red-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(it,{size:16,className:"text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-900",children:$.batchId}),e.jsx("p",{className:"text-sm text-red-700",children:$.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${$.severity==="high"?"bg-red-100 text-red-800":$.severity==="medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:[$.severity," severity"]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${$.resolved?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:$.resolved?"Resolved":"Active"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 mb-3",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Conflict Type"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 capitalize",children:$.conflictType.replace(/_/g," ")})]}),!$.resolved&&e.jsxs("div",{className:"mt-3 flex gap-2 justify-end",children:[e.jsx("button",{className:"px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700 transition-colors",children:"Resolve Conflict"}),e.jsx("button",{className:"px-3 py-1 bg-gray-600 text-white rounded text-xs hover:bg-gray-700 transition-colors",children:"View Details"})]})]},$.id)),n.length===0&&e.jsxs("div",{className:"text-center py-2",children:[e.jsx(Ze,{size:48,className:"mx-auto text-green-400 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No batch conflicts found"})]})]})}):e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:p.length===ne.length&&ne.length>0,onChange:Ce,className:"rounded border-gray-300"})}),B.map($=>{var J,O;return e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ke($),style:{width:(J=X[$])==null?void 0:J.width},children:e.jsxs("div",{className:"flex items-center gap-1",children:[(O=X[$])==null?void 0:O.label,P===$&&e.jsx("span",{className:"text-blue-600",children:k==="asc"?"":""})]})},$)})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ne.map($=>e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>u==null?void 0:u($),children:[e.jsx("td",{className:"px-4 py-3",onClick:J=>J.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:p.includes($.id),onChange:()=>ue($.id),className:"rounded border-gray-300"})}),B.map(J=>e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[J==="tags"&&W($),J==="firstName"&&ve($.userId),J==="lastName"&&ee($.userId),J==="device"&&($.deviceId||$.deviceType),J==="jobCode"&&($.jobCode||""),J==="costCode"&&($.costCode||""),J==="clockIn"&&se($.clockIn),J==="clockOut"&&($.clockOut?se($.clockOut):""),J==="totalHours"&&$.totalHours.toFixed(2),J==="originalClockIn"&&se($.originalClockIn||$.clockIn),J==="originalClockOut"&&($.originalClockOut?se($.originalClockOut):""),J==="manager"&&($.manager?"":""),J==="payCode"&&($.payCode||""),J==="timezone"&&Q($.timezone)]},J))]},$.id))})]})})}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between p-2",children:[e.jsxs("div",{className:"text-sm text-gray-700 font-semibold",children:[p.length>0?e.jsxs("span",{children:[p.length," selected of ",ne.length]}):e.jsxs("span",{children:["Showing ",ne.length," entries"]}),p.length>0&&e.jsxs("span",{className:"ml-4",children:["Selected Total Hours:"," ",p.reduce(($,J)=>{const O=ne.find(je=>je.id===J);return $+((O==null?void 0:O.totalHours)||0)},0).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:Ce,className:"text-blue-600 hover:text-blue-800 text-sm",children:"Select All"}),e.jsx("button",{onClick:()=>setSelectedEntries([]),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Select None"})]})]})}),p.length>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[d==="batched"?e.jsxs("button",{onClick:()=>h==null?void 0:h("recall",p),className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:[e.jsx(rr,{size:16}),"Recall"]}):e.jsxs("button",{onClick:()=>h==null?void 0:h("batch",p),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Ze,{size:16}),"Batch"]}),e.jsxs("button",{onClick:()=>h==null?void 0:h("allocate",p),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(kt,{size:16}),"Allocate"]})]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs("div",{className:"flex items-center gap-2 ",children:[e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsx(Ns,{size:16})}),e.jsx("span",{className:"px-3 py-1 bg-blue-600 text-white rounded-lg",children:"1"}),e.jsx("button",{className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsx(ds,{size:16})})]})})]})})]})}function jm({entry:t,projects:s,tasks:a,users:r,selectedDate:n,onSave:i,onClose:l}){const[u,o]=c.useState("individual"),[m,h]=c.useState([]),[d,g]=c.useState({userId:"",projectId:"",taskId:"",date:n.toISOString().split("T")[0],startTime:"",endTime:"",breakDuration:0,totalHours:0,description:"",isOvertime:!1,overtimeHours:0}),[p,x]=c.useState({}),{theme:A}=Pe();c.useEffect(()=>{t?(o("individual"),g({userId:t.userId,projectId:t.projectId,taskId:t.taskId||"",date:t.date,startTime:t.startTime||"",endTime:t.endTime||"",breakDuration:t.breakDuration||0,totalHours:t.totalHours,description:t.description||"",isOvertime:t.isOvertime||!1,overtimeHours:t.overtimeHours||0}),h([t.userId])):(g({userId:"",projectId:"",taskId:"",date:n.toISOString().split("T")[0],startTime:"",endTime:"",breakDuration:0,totalHours:0,description:"",isOvertime:!1,overtimeHours:0}),h([])),x({})},[t,n]);const y=()=>{if(d.startTime&&d.endTime){const f=new Date(`2000-01-01T${d.startTime}`),w=new Date(`2000-01-01T${d.endTime}`);if(w<=f)return 0;const z=(w.getTime()-f.getTime())/(1e3*60*60),P=d.breakDuration/60;return Math.max(0,z-P)}return d.totalHours};c.useEffect(()=>{if(d.startTime&&d.endTime){const f=y();g(w=>({...w,totalHours:f}))}},[d.startTime,d.endTime,d.breakDuration]);const N=()=>d.projectId?a.filter(f=>f.projectId===d.projectId):[],v=f=>{h(w=>w.includes(f)?w.filter(b=>b!==f):[...w,f])},j=()=>{const f={};if(u==="individual"&&!d.userId&&(f.userId="Employee is required"),u==="group"&&m.length===0&&(f.employees="Select at least one employee"),d.projectId||(f.projectId="Project is required"),d.date||(f.date="Date is required"),d.totalHours<=0&&(f.totalHours="Total hours must be greater than 0"),d.startTime&&d.endTime){const w=new Date(`2000-01-01T${d.startTime}`);new Date(`2000-01-01T${d.endTime}`)<=w&&(f.endTime="End time must be after start time")}return x(f),Object.keys(f).length===0},D=f=>{if(f.preventDefault(),!!j())if(u==="group"){const w=m.map(b=>({id:`timesheet-${Date.now()}-${b}`,userId:b,projectId:d.projectId,taskId:d.taskId||void 0,date:d.date,startTime:d.startTime||"00:00",endTime:d.endTime||"00:00",breakDuration:d.breakDuration||void 0,totalHours:d.totalHours,description:d.description||void 0,status:"draft",isOvertime:d.isOvertime,overtimeHours:d.overtimeHours||void 0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}));i(w)}else{const w={id:(t==null?void 0:t.id)||`timesheet-${Date.now()}`,userId:d.userId||"current-user",projectId:d.projectId,taskId:d.taskId||void 0,date:d.date,startTime:d.startTime||"00:00",endTime:d.endTime||"00:00",breakDuration:d.breakDuration||void 0,totalHours:d.totalHours,description:d.description||void 0,status:(t==null?void 0:t.status)||"draft",isOvertime:d.isOvertime,overtimeHours:d.overtimeHours||void 0,createdAt:(t==null?void 0:t.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};i(w)}},C=(f,w)=>{g(b=>({...b,[f]:w})),p[f]&&x(b=>({...b,[f]:""}))};return e.jsx(Ue,{open:!0,onClose:l,title:t?"Edit Timesheet Entry":"Add Timesheet Entry",size:"lg",children:e.jsxs("form",{onSubmit:D,className:"space-y-6 p-6",children:[!t&&e.jsxs("div",{className:`bg-${A==null?void 0:A.theme.name}-50 border border-${A==null?void 0:A.theme.name}-200 rounded-lg p-3`,children:[e.jsx("label",{className:"block text-sm font-semibold mb-3",style:{color:A==null?void 0:A.theme.colors.primary[800]},children:"Entry Type"}),e.jsxs("div",{className:`flex items-center space-x-1 bg-${A==null?void 0:A.theme.name}-200 rounded-lg p-1`,children:[e.jsxs("button",{type:"button",onClick:()=>{o("individual"),h([])},className:`flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-md transition-all duration-200 flex-1 justify-center ${u==="individual"?`bg-white text-${A==null?void 0:A.theme.name}-600 shadow-sm`:"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(wt,{size:16}),"Individual"]}),e.jsxs("button",{type:"button",onClick:()=>{o("group"),g(f=>({...f,userId:""}))},className:`flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-md transition-all duration-200 flex-1 justify-center ${u==="group"?`bg-white text-${A==null?void 0:A.theme.name}-600 shadow-sm`:"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(ot,{size:16}),"Group/Multiple"]})]})]}),u==="individual"?e.jsxs(he,{label:"Employee",isRequired:!0,icon:e.jsx(wt,{size:16}),children:[e.jsxs("select",{value:d.userId,onChange:f=>C("userId",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${p.userId?"border-red-300":"border-gray-300"}`,disabled:!!t,children:[e.jsx("option",{value:"",children:"Select employee"}),r.map(f=>e.jsxs("option",{value:f.id,children:[f.name," - ",f.position]},f.id))]}),p.userId&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:p.userId})]}):e.jsxs("div",{children:[e.jsx(he,{label:"Select Employees",isRequired:!0,icon:e.jsx(ot,{size:16}),postText:`(${m.length} selected)`,children:e.jsx("div",{className:`border rounded-lg p-3 max-h-48 overflow-y-auto ${p.employees?"border-red-300":"border-gray-300"}`,children:e.jsx("div",{className:"space-y-2",children:r.map(f=>e.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.includes(f.id),onChange:()=>v(f.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:f.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[f.position,"  ",f.department]})]})]},f.id))})})}),p.employees&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:p.employees}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Same timesheet entry will be created for all selected employees"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs(he,{label:"Date",isRequired:!0,icon:e.jsx(Je,{size:16}),children:[e.jsx("input",{type:"date",value:d.date,onChange:f=>C("date",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${p.date?"border-red-300":"border-gray-300"}`}),p.date&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:p.date})]}),e.jsxs(he,{label:"Project",isRequired:!0,icon:e.jsx(Zs,{size:16}),children:[e.jsxs("select",{value:d.projectId,onChange:f=>{C("projectId",f.target.value),C("taskId","")},className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${p.projectId?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select a project"}),s.map(f=>e.jsx("option",{value:f.id,children:f.name},f.id))]}),p.projectId&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:p.projectId})]})]}),e.jsx(he,{label:"Project",icon:e.jsx(et,{size:16}),postText:"(Optional)",children:e.jsxs("select",{value:d.taskId,onChange:f=>C("taskId",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!d.projectId,children:[e.jsx("option",{value:"",children:"No specific task"}),N().map(f=>e.jsx("option",{value:f.id,children:f.title},f.id))]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx(he,{label:"Start Time",icon:e.jsx(Oe,{size:16}),children:e.jsx("input",{type:"time",value:d.startTime,onChange:f=>C("startTime",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsxs(he,{label:"End Time",icon:e.jsx(Oe,{size:16}),children:[e.jsx("input",{type:"time",value:d.endTime,onChange:f=>C("endTime",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${p.endTime?"border-red-300":"border-gray-300"}`}),p.endTime&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:p.endTime})]}),e.jsx(he,{label:"Break Duration",icon:e.jsx(Oe,{size:16}),postText:"(minutes)",children:e.jsx("input",{type:"number",min:"0",max:"480",value:d.breakDuration,onChange:f=>C("breakDuration",parseInt(f.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})]}),e.jsxs(he,{label:"Total Hours",isRequired:!0,icon:e.jsx(Nn,{size:16}),children:[e.jsx("input",{type:"number",min:"0",max:"24",step:"0.25",value:d.totalHours,onChange:f=>C("totalHours",parseFloat(f.target.value)||0),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${p.totalHours?"border-red-300":"border-gray-300"}`}),p.totalHours&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:p.totalHours}),d.startTime&&d.endTime&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Calculated: ",y().toFixed(2)," hours"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isOvertime",checked:d.isOvertime,onChange:f=>C("isOvertime",f.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isOvertime",className:"ml-2 block text-sm text-gray-700",children:"This is overtime work"})]}),d.isOvertime&&e.jsx(he,{label:"Overtime Hours",children:e.jsx("input",{type:"number",min:"0",max:"24",step:"0.25",value:d.overtimeHours,onChange:f=>C("overtimeHours",parseFloat(f.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})]}),e.jsx(he,{label:"Description",children:e.jsx("textarea",{value:d.description,onChange:f=>C("description",f.target.value),rows:3,placeholder:"Describe the work performed...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ss,{size:16}),t?"Update Entry":u==="group"?`Create ${m.length} Entries`:"Save Entry"]})]})]})})}function Nm({users:t,entries:s,projects:a,tasks:r,selectedWeek:n,onSaveEntry:i,onUpdateEntry:l,onNavigateWeek:u}){const[o,m]=c.useState(null),[h,d]=c.useState({hours:"",projectId:"",taskId:"",description:""}),[g,p]=c.useState(null),{theme:x}=Pe(),y=(B=>{const E=new Date(B),M=E.getDay(),F=E.getDate()-M+(M===0?-6:1);return new Date(E.setDate(F))})(n),v=(()=>{const B=[],E=new Date(y);for(let M=0;M<7;M++){const F=new Date(E);F.setDate(E.getDate()+M),B.push(F)}return B})(),j=(B,E)=>{const M=E.toISOString().split("T")[0];return s.filter(F=>F.userId===B&&F.date===M)},D=(B,E)=>j(B,E).reduce((F,_)=>F+_.totalHours,0),C=B=>s.filter(E=>E.userId===B).reduce((E,M)=>E+M.totalHours,0),f=B=>{const E=B.toISOString().split("T")[0];return s.filter(M=>M.date===E).reduce((M,F)=>M+F.totalHours,0)},w=()=>s.reduce((B,E)=>B+E.totalHours,0),b=(B,E)=>{const M=E.toISOString().split("T")[0],F=j(B,E);if(F.length===1){const _=F[0];m({userId:B,date:M,entryId:_.id}),d({hours:_.totalHours.toString(),projectId:_.projectId,taskId:_.taskId||"",description:_.description||""})}else F.length>1?p({userId:B,date:M}):(m({userId:B,date:M}),d({hours:"",projectId:"",taskId:"",description:""}))},z=()=>{if(!o)return;const B=parseFloat(h.hours);if(isNaN(B)||B<=0){alert("Please enter valid hours");return}if(!h.projectId){alert("Please select a project");return}if(o.entryId){const E=s.find(M=>M.id===o.entryId);if(E){const M={...E,totalHours:B,projectId:h.projectId,taskId:h.taskId||void 0,description:h.description||void 0,updatedAt:new Date().toISOString()};l(M)}}else{const E={id:`timesheet-${Date.now()}`,userId:o.userId,projectId:h.projectId,taskId:h.taskId||void 0,date:o.date,totalHours:B,description:h.description||void 0,status:"draft",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};i(E)}m(null),d({hours:"",projectId:"",taskId:"",description:""})},P=()=>{m(null),p(null),d({hours:"",projectId:"",taskId:"",description:""})},S=B=>B.toLocaleDateString("en-US",{month:"short",day:"numeric"}),k=B=>B.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),G=B=>{var E;return((E=a.find(M=>M.id===B))==null?void 0:E.name)||"Unknown"};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Je,{size:24,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold",style:{color:x==null?void 0:x.theme.colors.primary[900]},children:["Week of ",k(y)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[v[0].toLocaleDateString("en-US",{month:"short",day:"numeric"})," -"," ",v[6].toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>u("prev"),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ns,{size:20})}),e.jsx("button",{onClick:()=>{u("next")},className:"px-3 py-1 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Today"}),e.jsx("button",{onClick:()=>u("next"),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ds,{size:20})}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-sm font-bold text-blue-600",children:[w().toFixed(1),"h"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Hours"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 sticky left-0 bg-gray-50 z-10 min-w-[200px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wt,{size:16}),"Employee"]})}),v.map((B,E)=>e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-900 min-w-[120px]",children:e.jsxs("div",{children:[e.jsx("div",{children:B.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:"text-xs font-normal text-gray-600",children:S(B)})]})},E)),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-900 bg-blue-50 min-w-[100px]",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(B=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 sticky left-0 bg-white z-10 border-r border-gray-200",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:B.name}),e.jsx("div",{className:"text-xs text-gray-500",children:B.position})]})}),v.map((E,M)=>{const F=E.toISOString().split("T")[0],_=j(B.id,E),L=D(B.id,E),R=(o==null?void 0:o.userId)===B.id&&(o==null?void 0:o.date)===F,q=(g==null?void 0:g.userId)===B.id&&(g==null?void 0:g.date)===F;return e.jsxs("td",{className:"px-2 py-2 text-center border-r border-gray-100",children:[R?e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute top-0 left-0 right-0 bg-white border-2 border-blue-500 rounded-lg shadow-lg p-3 z-20 min-w-[280px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{children:e.jsx("input",{type:"number",step:"0.5",min:"0",max:"24",value:h.hours,onChange:V=>d({...h,hours:V.target.value}),placeholder:"Hours",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0})}),e.jsx("div",{children:e.jsxs("select",{value:h.projectId,onChange:V=>d({...h,projectId:V.target.value,taskId:""}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Project"}),a.map(V=>e.jsx("option",{value:V.id,children:V.name},V.id))]})}),h.projectId&&e.jsx("div",{children:e.jsxs("select",{value:h.taskId,onChange:V=>d({...h,taskId:V.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"No Task"}),r.filter(V=>V.projectId===h.projectId).map(V=>e.jsx("option",{value:V.id,children:V.title},V.id))]})}),e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-200",children:[e.jsxs("button",{onClick:z,className:"flex-1 px-2 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors flex items-center justify-center gap-1",children:[e.jsx(Ss,{size:14}),"Save"]}),e.jsxs("button",{onClick:P,className:"flex-1 px-2 py-1 border border-gray-300 text-gray-700 text-sm rounded hover:bg-gray-50 transition-colors flex items-center justify-center gap-1",children:[e.jsx(zt,{size:14}),"Cancel"]})]})]})})}):q?e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute top-0 left-0 bg-white border-2 border-blue-500 rounded-lg shadow-lg p-3 z-20 min-w-[280px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-sm text-gray-900",children:"Multiple Entries"}),e.jsx("button",{onClick:P,className:"text-gray-400 hover:text-gray-600",children:e.jsx(zt,{size:16})})]}),_.map((V,Z)=>e.jsxs("div",{className:"text-left p-2 bg-gray-50 rounded text-xs",children:[e.jsxs("div",{className:"font-medium text-blue-600",children:[V.totalHours,"h"]}),e.jsx("div",{className:"text-gray-600",children:G(V.projectId)}),V.description&&e.jsx("div",{className:"text-gray-500 mt-1",children:V.description})]},Z))]})})}):null,e.jsx("button",{onClick:()=>b(B.id,E),className:`w-full px-2 py-2 rounded transition-all ${L>0?"bg-blue-50 hover:bg-blue-100 text-blue-700 font-medium":"hover:bg-gray-100 text-gray-400"}`,children:L>0?e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(Oe,{size:14}),L.toFixed(1),"h",_.length>1&&e.jsxs("span",{className:"text-xs",children:["(",_.length,")"]})]}):e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(Tt,{size:14,className:"opacity-0 group-hover:opacity-50"}),e.jsx("span",{children:"-"})]})})]},M)}),e.jsxs("td",{className:"px-4 py-3 text-center bg-blue-50 font-semibold text-blue-700",children:[C(B.id).toFixed(1),"h"]})]},B.id))}),e.jsx("tfoot",{className:"bg-gray-50 border-t-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-gray-900 sticky left-0 bg-gray-50 z-10",children:"Total Hours"}),v.map((B,E)=>e.jsxs("td",{className:"px-4 py-3 text-center font-semibold text-gray-900 border-r border-gray-200",children:[f(B).toFixed(1),"h"]},E)),e.jsxs("td",{className:"px-4 py-3 text-center bg-blue-100 font-bold text-blue-700",children:[w().toFixed(1),"h"]})]})})]})}),e.jsx("div",{className:`bg-${x==null?void 0:x.theme.name}-50 border border-blue-200 rounded-lg p-3`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(et,{size:20,className:`text-${x==null?void 0:x.theme.name}-600 font-semibold`}),e.jsxs("div",{className:`text-sm text-${x==null?void 0:x.theme.name}-800`,children:[e.jsx("p",{className:"font-semibold mb-2",children:"How to use:"}),e.jsxs("ul",{className:`list-disc list-inside space-y-1 text-${x==null?void 0:x.theme.name}-700`,children:[e.jsx("li",{children:"Click any cell to add or edit hours for that employee and day"}),e.jsx("li",{children:"Cells with multiple entries will show an expanded view when clicked"}),e.jsx("li",{children:"Hours are directly editable in the grid"}),e.jsx("li",{children:'All entries start as "draft" status'})]})]})]})})]})}function wm({selectedWeek:t,entries:s,totalHours:a,projects:r,tasks:n,users:i,onEditEntry:l,onDeleteEntry:u,onCopyEntry:o,onApproveTimesheet:m,onRejectTimesheet:h,onSubmitWeeklyTimesheet:d}){const[g,p]=c.useState(!1),{theme:x}=Pe(),A=L=>{const R=new Date(L),q=R.getDay(),V=R.getDate()-q+(q===0?-6:1);return new Date(R.setDate(V))},y=L=>{const R=A(L),q=new Date(R);return q.setDate(R.getDate()+6),q},N=A(t),v=y(t),j=L=>{const R=L.toISOString().split("T")[0];return s.filter(q=>q.date===R)},D=L=>j(L).reduce((q,V)=>q+V.totalHours,0),C=()=>s.filter(L=>L.isOvertime).reduce((L,R)=>L+(R.overtimeHours||0),0),f=()=>a-C(),w=()=>s.length>0,b=()=>{const L=[],R=new Date(N);for(let q=0;q<7;q++){const V=new Date(R);V.setDate(R.getDate()+q),L.push(V)}return L},z=L=>L.toLocaleDateString("en-US",{month:"short",day:"numeric"}),P=L=>L.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),S=L=>new Date(`2000-01-01T${L}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),k=L=>{switch(L){case"draft":return"bg-gray-100 text-gray-800";case"submitted":return"bg-blue-100 text-blue-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},G=L=>{var R;return((R=r.find(q=>q.id===L))==null?void 0:R.name)||"Unknown Project"},B=L=>{var R;return L?((R=n.find(q=>q.id===L))==null?void 0:R.title)||"Unknown Task":"No specific task"},E=L=>{var R;return((R=i.find(q=>q.id===L))==null?void 0:R.name)||"Unknown User"},M=L=>{var R;return((R=i.find(q=>q.id===L))==null?void 0:R.position)||""},F=()=>{const L={id:`weekly-${Date.now()}`,userId:"current-user",weekStart:N.toISOString().split("T")[0],weekEnd:v.toISOString().split("T")[0],entryIds:s.map(R=>R.id),totalHours:a,regularHours:f(),overtimeHours:C(),status:"submitted",submittedAt:new Date().toISOString(),createdAt:new Date().toISOString()};d(L),p(!1)},_=b();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Je,{size:24,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold",style:{color:x==null?void 0:x.theme.colors.primary[900]},children:["Week of ",P(N)]}),e.jsxs("p",{className:"text-gray-600",children:[N.toLocaleDateString("en-US",{month:"short",day:"numeric"})," -"," ",v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-bold text-blue-600",children:[a.toFixed(1),"h"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[f().toFixed(1),"h regular  ",C().toFixed(1),"h overtime"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:()=>p(!0),disabled:!w(),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${w()?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(Cs,{size:16}),"Submit Week"]})})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-8 border-b border-gray-200",children:[e.jsx("div",{className:"p-3 font-semibold text-gray-900 bg-gray-50",children:"Day"}),_.map((L,R)=>e.jsxs("div",{className:"p-3 text-center border-l border-gray-200",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:L.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:"text-sm text-gray-600",children:z(L)})]},R))]}),e.jsxs("div",{className:"grid grid-cols-8 border-b border-gray-200",children:[e.jsx("div",{className:"p-3 font-medium text-gray-700 bg-gray-50",children:"Hours"}),_.map((L,R)=>{const q=D(L);return e.jsx("div",{className:"p-3 text-center border-l border-gray-200",children:e.jsxs("div",{className:`text-sm font-semibold ${q>=8?"text-green-600":q>=4?"text-yellow-600":q>0?"text-orange-600":"text-gray-400"}`,children:[q.toFixed(1),"h"]})},R)})]}),e.jsxs("div",{className:"grid grid-cols-8",children:[e.jsx("div",{className:"p-3 font-medium text-gray-700 bg-gray-50",children:"Entries"}),_.map((L,R)=>{const q=j(L);return e.jsx("div",{className:"p-3 text-center border-l border-gray-200",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[q.length," ",q.length===1?"entry":"entries"]})},R)})]})]}),e.jsx("div",{className:"space-y-4",children:_.map((L,R)=>{const q=j(L),V=D(L);return q.length===0?null:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-1 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:P(L)}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[V.toFixed(1),"h"]})]})}),e.jsx("div",{className:"p-1 space-y-3",children:q.map(Z=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-1",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 px-3 py-1.5 rounded-lg",children:[e.jsx(wt,{size:16,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:E(Z.userId)}),e.jsx("div",{className:"text-xs text-gray-500",children:M(Z.userId)})]})]}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${k(Z.status)}`,children:Z.status.charAt(0).toUpperCase()+Z.status.slice(1)}),e.jsxs("div",{className:"font-semibold text-gray-900",children:[Z.totalHours,"h"]}),Z.isOvertime&&e.jsx("div",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded-full text-xs font-medium",children:"Overtime"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1 text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Zs,{size:12}),e.jsx("span",{children:G(Z.projectId)})]}),Z.taskId&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(et,{size:12}),e.jsx("span",{children:B(Z.taskId)})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Oe,{size:12}),e.jsxs("span",{children:[S(Z.startTime)," - ",S(Z.endTime)]})]}),Z.breakDuration&&Z.breakDuration>0&&e.jsxs("div",{className:"text-gray-600",children:["Break: ",Z.breakDuration," min"]})]})]}),Z.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:Z.description})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[Z.status==="submitted"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m(Z.id,"current-user"),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve",children:e.jsx(dr,{size:16})}),e.jsx("button",{onClick:()=>{const be=prompt("Enter rejection reason:");be&&h(Z.id,be)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject",children:e.jsx(zt,{size:16})})]}),Z.status==="draft"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>l(Z),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:e.jsx(Tt,{size:16})}),e.jsx("button",{onClick:()=>o(Z),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Copy",children:e.jsx(Ts,{size:16})})]}),e.jsx("button",{onClick:()=>u(Z.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(lt,{size:16})})]})]})},Z.id))})]},R)})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3",children:[e.jsx("h3",{className:"text-sm font-semibold mb-4",style:{color:x==null?void 0:x.theme.colors.primary[800]},children:"Weekly Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-1",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-bold text-blue-600",children:[a.toFixed(1),"h"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Hours"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-bold text-green-600",children:[f().toFixed(1),"h"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Regular"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-bold text-orange-600",children:[C().toFixed(1),"h"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Overtime"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-bold text-purple-600",children:[s.filter(L=>L.status==="approved").length,"/",s.length]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Approved"})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-1 w-full max-w-md",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Submit Weekly Timesheet"}),e.jsxs("div",{className:"space-y-4 mb-1",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-1",children:[e.jsxs("p",{className:"text-sm text-blue-800",children:["You are about to submit your timesheet for the week of ",z(N)," - ",z(v),"."]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Total Hours:"})," ",a.toFixed(1),"h"]}),e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Regular:"})," ",f().toFixed(1),"h"]}),e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Overtime:"})," ",C().toFixed(1),"h"]}),e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Entries:"})," ",s.length]})]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Once submitted, you won't be able to edit these entries until they are approved or rejected."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:F,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Confirm Submit"}),e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})})]})}const Zt=[{id:"1",name:"John Smith",firstName:"John",lastName:"Smith",email:"john@example.com",role:"employee",department:"Construction",position:"Foreman"},{id:"2",name:"Sarah Johnson",firstName:"Sarah",lastName:"Johnson",email:"sarah@example.com",role:"employee",department:"Construction",position:"Electrician"},{id:"3",name:"Mike Davis",firstName:"Mike",lastName:"Davis",email:"mike@example.com",role:"manager",department:"Construction",position:"Project Manager"},{id:"4",name:"Emily Brown",firstName:"Emily",lastName:"Brown",email:"emily@example.com",role:"employee",department:"Construction",position:"Plumber"},{id:"5",name:"David Wilson",firstName:"David",lastName:"Wilson",email:"david@example.com",role:"employee",department:"Construction",position:"Carpenter"}],Qt=[{id:"1",name:"Office Tower Construction",code:"OTC-001",status:"active",startDate:"2024-01-01",endDate:"2024-12-31"},{id:"2",name:"Shopping Mall Renovation",code:"SMR-002",status:"active",startDate:"2024-02-01",endDate:"2024-11-30"},{id:"3",name:"Residential Complex",code:"RC-003",status:"active",startDate:"2024-03-01",endDate:"2025-06-30"}],es=[{id:"1",title:"Foundation Work",projectId:"1",description:"Foundation excavation and concrete pouring",status:"in-progress"},{id:"2",title:"Electrical Installation",projectId:"1",description:"Install electrical wiring and fixtures",status:"pending"},{id:"3",title:"Plumbing Work",projectId:"2",description:"Install plumbing systems",status:"in-progress"},{id:"4",title:"Framing",projectId:"3",description:"Structural framing work",status:"in-progress"}],Sm=[{id:"1",userId:"1",projectId:"1",taskId:"1",clockIn:"2025-10-15T08:00:00",clockOut:"2025-10-15T17:00:00",originalClockIn:"2025-10-15T08:00:00",originalClockOut:"2025-10-15T17:00:00",totalHours:8.5,overtimeHours:0,regularHours:8.5,status:"clocked-out",deviceType:"mobile",deviceId:"MOB-001",jobCode:"CONST-001",costCode:"LABOR-CONST",manager:!0,payCode:"REGULAR",timezone:"America/New_York",date:"2025-10-15",breaks:[{id:"b1",startTime:"2025-10-15T12:00:00",endTime:"2025-10-15T12:30:00",duration:30,type:"lunch"}]},{id:"2",userId:"2",projectId:"1",taskId:"2",clockIn:"2025-10-15T07:30:00",clockOut:"2025-10-15T16:30:00",originalClockIn:"2025-10-15T07:30:00",originalClockOut:"2025-10-15T16:30:00",totalHours:8.5,overtimeHours:.5,regularHours:8,status:"clocked-out",deviceType:"web",jobCode:"ELEC-001",costCode:"LABOR-ELEC",payCode:"REGULAR",timezone:"America/New_York",date:"2025-10-15",breaks:[{id:"b2",startTime:"2025-10-15T12:00:00",endTime:"2025-10-15T12:30:00",duration:30,type:"lunch"}]},{id:"3",userId:"3",projectId:"2",taskId:"3",clockIn:"2025-10-15T09:00:00",clockOut:"2025-10-15T18:00:00",originalClockIn:"2025-10-15T08:45:00",originalClockOut:"2025-10-15T18:00:00",totalHours:8.5,overtimeHours:.5,regularHours:8,status:"clocked-out",deviceType:"kiosk",deviceId:"KIOSK-002",jobCode:"PLUMB-001",costCode:"LABOR-PLUMB",manager:!0,payCode:"REGULAR",timezone:"America/New_York",date:"2025-10-15",breaks:[]},{id:"4",userId:"4",projectId:"3",taskId:"4",clockIn:"2025-10-15T08:00:00",status:"clocked-in",originalClockIn:"2025-10-15T08:00:00",totalHours:0,overtimeHours:0,regularHours:0,deviceType:"mobile",jobCode:"CARP-001",costCode:"LABOR-CARP",payCode:"REGULAR",timezone:"America/New_York",date:"2025-10-15",breaks:[]},{id:"5",userId:"5",projectId:"1",taskId:"1",clockIn:"2025-10-14T08:00:00",clockOut:"2025-10-14T17:30:00",originalClockIn:"2025-10-14T08:00:00",originalClockOut:"2025-10-14T17:30:00",totalHours:9,overtimeHours:1,regularHours:8,status:"clocked-out",deviceType:"mobile",jobCode:"CONST-001",costCode:"LABOR-CONST",payCode:"OVERTIME",timezone:"America/New_York",date:"2025-10-14",breaks:[{id:"b3",startTime:"2025-10-14T12:00:00",endTime:"2025-10-14T12:30:00",duration:30,type:"lunch"}]},{id:"6",userId:"1",projectId:"2",taskId:"3",clockIn:"2025-10-13T08:00:00",clockOut:"2025-10-13T17:00:00",originalClockIn:"2025-10-13T08:00:00",originalClockOut:"2025-10-13T17:00:00",totalHours:8.5,overtimeHours:0,regularHours:8.5,status:"clocked-out",deviceType:"mobile",jobCode:"PLUMB-001",costCode:"LABOR-PLUMB",payCode:"REGULAR",timezone:"America/New_York",date:"2025-10-13",breaks:[{id:"b4",startTime:"2025-10-13T12:00:00",endTime:"2025-10-13T12:30:00",duration:30,type:"lunch"}]},{id:"7",userId:"2",projectId:"3",taskId:"4",clockIn:"2025-10-13T07:30:00",clockOut:"2025-10-13T16:30:00",originalClockIn:"2025-10-13T07:30:00",originalClockOut:"2025-10-13T16:30:00",totalHours:8.5,overtimeHours:0,regularHours:8.5,status:"clocked-out",deviceType:"web",jobCode:"CARP-001",costCode:"LABOR-CARP",payCode:"REGULAR",timezone:"America/New_York",date:"2025-10-13",breaks:[{id:"b5",startTime:"2025-10-13T12:00:00",endTime:"2025-10-13T12:30:00",duration:30,type:"lunch"}]},{id:"8",userId:"5",projectId:"1",taskId:"1",clockIn:"2025-10-16T08:00:00",clockOut:"2025-10-16T18:00:00",originalClockIn:"2025-10-16T08:00:00",originalClockOut:"2025-10-16T18:00:00",totalHours:9.5,overtimeHours:1.5,regularHours:8,status:"submitted",deviceType:"kiosk",deviceId:"KIOSK-001",jobCode:"CONST-001",costCode:"LABOR-CONST",payCode:"OVERTIME",timezone:"America/New_York",date:"2025-10-16",breaks:[{id:"b6",startTime:"2025-10-16T12:00:00",endTime:"2025-10-16T12:30:00",duration:30,type:"lunch"}]}],Cm=[{id:"n1",timeEntryId:"1",authorId:"3",content:"Great work on the foundation today. Team completed ahead of schedule.",createdAt:"2025-10-15T17:30:00"},{id:"n2",timeEntryId:"2",authorId:"3",content:"Electrical work progressing well. Minor delay due to material delivery.",createdAt:"2025-10-15T16:45:00"}],km=[{id:"s1",timeEntryId:"1",approvedBy:"3",status:"approved",approvedAt:"2025-10-15T18:00:00",comments:"Approved - excellent work"},{id:"s2",timeEntryId:"2",approvedBy:"3",status:"pending",approvedAt:"2025-10-15T17:00:00"}],Tm=[{id:"r1",timeEntryId:"1",userId:"1",title:"Safety Champion",description:"Maintained excellent safety standards throughout the day",awardedBy:"3",awardedAt:"2025-10-15T17:00:00",points:50}],Dm=[{id:"e1",timeEntryId:"5",userId:"5",type:"overtime",reason:"Project deadline - critical path activity",hours:1,status:"approved",requestedAt:"2025-10-14T17:30:00",comments:"Approved for critical deadline"}],Im=[{id:"l1",userId:"1",latitude:40.7128,longitude:-74.006,accuracy:10,timestamp:"2025-10-15T08:00:00",address:"123 Construction Site, New York, NY"},{id:"l2",userId:"2",latitude:40.758,longitude:-73.9855,accuracy:15,timestamp:"2025-10-15T07:30:00",address:"456 Building Ave, New York, NY"}],Am=[{id:"conflict1",batchId:"BATCH-2025-10-15-002",timeEntryIds:["3","4"],conflictType:"missing_clock_out",severity:"high",description:"Employee 4 has not clocked out yet",resolved:!1},{id:"conflict2",batchId:"BATCH-2025-10-15-003",timeEntryIds:["5"],conflictType:"overtime_threshold",severity:"medium",description:"Overtime hours exceed daily threshold",resolved:!0}],Pm=[{id:"te1",userId:"1",projectId:"1",taskId:"1",date:"2025-10-15",startTime:"08:00",endTime:"17:00",totalHours:8.5,breakDuration:30,description:"Foundation work - excavation and concrete pouring",status:"approved",isOvertime:!1,approvedBy:"3",approvedAt:"2025-10-15T18:00:00",createdAt:"2025-10-15T17:30:00"},{id:"te2",userId:"2",projectId:"1",taskId:"2",date:"2025-10-15",startTime:"07:30",endTime:"16:30",totalHours:8.5,breakDuration:30,description:"Electrical wiring installation",status:"submitted",isOvertime:!0,overtimeHours:.5,createdAt:"2025-10-15T16:45:00"},{id:"te3",userId:"1",projectId:"2",taskId:"3",date:"2025-10-14",startTime:"08:00",endTime:"17:30",totalHours:9,breakDuration:30,description:"Plumbing installation",status:"approved",isOvertime:!0,overtimeHours:1,approvedBy:"3",approvedAt:"2025-10-14T18:00:00",createdAt:"2025-10-14T17:45:00"},{id:"te4",userId:"4",projectId:"3",taskId:"4",date:"2025-10-15",startTime:"08:00",endTime:"16:00",totalHours:7.5,breakDuration:30,description:"Framing work",status:"draft",createdAt:"2025-10-15T16:15:00"},{id:"te5",userId:"5",projectId:"1",taskId:"1",date:"2025-10-13",startTime:"08:00",endTime:"18:00",totalHours:9.5,breakDuration:30,description:"Foundation concrete work - extended hours",status:"approved",isOvertime:!0,overtimeHours:1.5,approvedBy:"3",approvedAt:"2025-10-13T19:00:00",createdAt:"2025-10-13T18:15:00"}];function er(){const{theme:t}=Pe(),s=Aa(),[a,r]=c.useState(),[n,i]=c.useState(Sm),[l,u]=c.useState(null),[o,m]=c.useState(!1),[h,d]=c.useState("time-record"),[g,p]=c.useState(Pm),[x,A]=c.useState("grid"),[y,N]=c.useState(new Date),[v,j]=c.useState(new Date),[D,C]=c.useState(!1),[f,w]=c.useState(null);c.useEffect(()=>{document.title="Time Management - Space Rivers",r(s.pathname.split("/").pop()||"time-editor")},[s]);const b="1",z=$=>{const J={id:Math.random().toString(36).slice(2,11),userId:$.userId||b,projectId:$.projectId,taskId:$.taskId,clockIn:$.clockIn||new Date().toISOString(),originalClockIn:$.originalClockIn||new Date().toISOString(),status:"clocked-in",deviceType:$.deviceType||"web",deviceId:$.deviceId,jobCode:$.jobCode,costCode:$.costCode,payCode:$.payCode||"REGULAR",timezone:$.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,date:$.date||new Date().toISOString().split("T")[0],totalHours:0,overtimeHours:0,regularHours:0,breaks:[]};i([...n,J])},P=$=>{i(J=>J.map(O=>{if(O.id===$){const je=new Date().toISOString(),ae=new Date(O.clockIn),Ie=(new Date(je).getTime()-ae.getTime())/(1e3*60*60);return{...O,clockOut:je,originalClockOut:je,status:"clocked-out",totalHours:Math.round(Ie*100)/100,regularHours:Math.min(Ie,8),overtimeHours:Math.max(0,Ie-8)}}return O}))},S=$=>{i(J=>J.map(O=>O.id===$?{...O,status:"on-break"}:O))},k=$=>{i(J=>J.map(O=>O.id===$?{...O,status:"clocked-in"}:O))},G=$=>{u($),m(!0),d("time-record")},B=($,J)=>{},E=()=>{l&&(T(!0),ne({projectId:l.projectId,taskId:l.taskId,jobCode:l.jobCode,costCode:l.costCode,payCode:l.payCode,clockIn:l.clockIn,clockOut:l.clockOut}))},M=()=>{l&&(i($=>$.map(J=>{if(J.id===l.id){let O=J.totalHours;if(H.clockIn&&H.clockOut){const je=new Date(H.clockIn);O=(new Date(H.clockOut).getTime()-je.getTime())/(1e3*60*60)}return{...J,projectId:H.projectId||J.projectId,taskId:H.taskId||J.taskId,jobCode:H.jobCode||J.jobCode,costCode:H.costCode||J.costCode,payCode:H.payCode||J.payCode,clockIn:H.clockIn||J.clockIn,clockOut:H.clockOut||J.clockOut,totalHours:Math.round(O*100)/100,regularHours:Math.min(O,8),overtimeHours:Math.max(0,O-8)}}return J})),T(!1),m(!1),u(null))},F=()=>{i($=>$.map(J=>I.includes(J.id)?{...J,projectId:ue.projectId||J.projectId,taskId:ue.taskId||J.taskId,jobCode:ue.jobCode||J.jobCode,costCode:ue.costCode||J.costCode,payCode:ue.payCode||J.payCode}:J)),m(!1),U([]),Ce({projectId:"",taskId:"",jobCode:"",costCode:"",payCode:"",applyToAll:!1})},_=$=>{Array.isArray($)?p(J=>[...J,...$]):g.find(J=>J.id===$.id)?p(J=>J.map(O=>O.id===$.id?$:O)):p(J=>[...J,$]),C(!1),w(null)},L=$=>{w($),C(!0)},R=$=>{confirm("Are you sure you want to delete this entry?")&&p(J=>J.filter(O=>O.id!==$))},q=$=>{const J={...$,id:`time-sheet-${Date.now()}`,status:"draft",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};p(O=>[...O,J])},V=($,J)=>{p(O=>O.map(je=>je.id===$?{...je,status:"approved",approvedBy:J,approvedAt:new Date().toISOString()}:je))},Z=($,J)=>{p(O=>O.map(je=>je.id===$?{...je,status:"rejected",rejectedReason:J,updatedAt:new Date().toISOString()}:je))},be=$=>{p(J=>J.map(O=>$.entryIds.includes(O.id)&&O.status==="draft"?{...O,status:"submitted",updatedAt:new Date().toISOString()}:O))},X=$=>{j(J=>{const O=new Date(J);return $==="prev"?O.setDate(O.getDate()-7):O.setDate(O.getDate()+7),O})},ve=$=>{var J;return((J=Zt.find(O=>O.id===$))==null?void 0:J.name)||"Unknown User"},ee=$=>{var J;return((J=Zt.find(O=>O.id===$))==null?void 0:J.firstName)||"Unknown"},me=$=>{var J;return((J=Zt.find(O=>O.id===$))==null?void 0:J.lastName)||"User"},se=$=>{var J;return $?((J=Qt.find(O=>O.id===$))==null?void 0:J.name)||"Unknown Project":"No Project"},Q=$=>{var J;return $?((J=es.find(O=>O.id===$))==null?void 0:J.title)||"Unknown Task":"No Task"},W=$=>new Date($).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),K=$=>new Date($).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}),[I,U]=c.useState([]),[ce,T]=c.useState(!1),[H,ne]=c.useState({}),[ue,Ce]=c.useState({projectId:"",taskId:"",jobCode:"",costCode:"",payCode:"",applyToAll:!1}),ke=$=>{U(J=>{const O=J.includes($)?J.filter(je=>je!==$):[...J,$];if(O.length===1){const je=n.find(ae=>ae.id===O[0]);u(je||null),m(!0)}else O.length===0?(u(null),m(!1)):(u(null),m(!0));return O})},$e=()=>{if(!l&&I.length===0)return null;const $=I.length>1,J=I.length===n.length,O=l?Cm.filter(re=>re.timeEntryId===l.id):[],je=l?km.filter(re=>re.timeEntryId===l.id):[];l&&Tm.filter(re=>re.timeEntryId===l.id),l&&Dm.filter(re=>re.timeEntryId===l.id);const ae=l?Im.filter(re=>new Date(re.timestamp).toDateString()===new Date(l.clockIn).toDateString()):[];return e.jsx(Ue,{open:o,onClose:()=>{m(!1),U([]),u(null)},title:$?`Bulk Edit (${I.length} entries)`:"Entry Details",size:"xl",children:e.jsxs("div",{className:"h-full flex flex-col -mx-6 -my-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4",children:l?e.jsxs("p",{className:"text-blue-100 text-sm",children:[ve(l.userId),"  ",K(l.clockIn).split(" ")[0]]}):$?e.jsxs("p",{className:"text-blue-100 text-sm",children:[I.length," entries selected for batch operations"]}):null}),e.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[{id:"time-record",label:"Record",icon:Oe},{id:"gps-map",label:"GPS",icon:Nt},{id:"notes",label:"Notes",icon:et},{id:"sign-off",label:"Sign-Off",icon:Ze},{id:"recognition",label:"Identity Verification",icon:bs},{id:"exemptions",label:"Exemptions",icon:it}].map(({id:re,label:Ie,icon:We})=>e.jsxs("button",{onClick:()=>d(re),className:`flex items-center gap-1.5 px-3 py-2 text-xs font-semibold rounded-md transition-all duration-200 ${h===re?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(We,{size:12}),Ie]},re))}),!ce&&e.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 text-sm text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all duration-200 border border-blue-200",children:[e.jsx(Hr,{size:14}),J?"Edit All":$?`Edit ${I.length}`:"Edit"]}),ce&&l&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{T(!1),ne({})},className:"px-4 py-2 text-sm border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Ze,{size:14}),"Save Changes"]})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[h==="time-record"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-5 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:J?"All Entries Summary":$?"Selected Entries Summary":"Time Summary"}),l&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${l.status==="clocked-out"?"bg-green-500":l.status==="clocked-in"?"bg-blue-500":"bg-yellow-500"}`}),e.jsx("span",{className:`text-sm font-medium ${l.status==="clocked-out"?"text-green-700":l.status==="clocked-in"?"text-blue-700":"text-yellow-700"}`,children:l.status==="clocked-out"?"Completed":l.status==="clocked-in"?"Active":"On Break"})]})]}),l&&!ce?e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Clock In"}),e.jsx("div",{className:"font-semibold text-gray-900",children:K(l.clockIn)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Clock Out"}),e.jsx("div",{className:"font-semibold text-gray-900",children:l.clockOut?K(l.clockOut):"Still Active"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm col-span-2",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total Hours"}),e.jsxs("div",{className:"font-bold text-xl text-blue-600",children:[l.totalHours.toFixed(2),"h"]})]})]}):l&&ce?e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-2 block",children:"Clock In"}),e.jsx("input",{type:"datetime-local",value:H.clockIn?new Date(H.clockIn).toISOString().slice(0,16):"",onChange:re=>ne({...H,clockIn:new Date(re.target.value).toISOString()}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-2 block",children:"Clock Out"}),e.jsx("input",{type:"datetime-local",value:H.clockOut?new Date(H.clockOut).toISOString().slice(0,16):"",onChange:re=>ne({...H,clockOut:re.target.value?new Date(re.target.value).toISOString():void 0}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm col-span-2",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total Hours (Auto-calculated)"}),e.jsxs("div",{className:"font-bold text-xl text-blue-600",children:[H.clockIn&&H.clockOut?((new Date(H.clockOut).getTime()-new Date(H.clockIn).getTime())/(1e3*60*60)).toFixed(2):l.totalHours.toFixed(2),"h"]})]})]}):$?e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Selected Entries"}),e.jsx("div",{className:"font-semibold text-gray-900",children:I.length})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Date Range"}),e.jsx("div",{className:"font-semibold text-gray-900",children:"Multiple Dates"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm col-span-2",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total Hours"}),e.jsxs("div",{className:"font-bold text-xl text-blue-600",children:[I.reduce((re,Ie)=>{const We=n.find(Ke=>Ke.id===Ie);return re+((We==null?void 0:We.totalHours)||0)},0).toFixed(2),"h"]})]})]}):null]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-4",children:$?"Selected Employees":"Employee Information"}),e.jsx("div",{className:"space-y-3",children:l&&!ce?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Name"}),e.jsx("span",{className:"font-medium text-gray-900",children:ve(l.userId)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Device"}),e.jsx("span",{className:"font-medium text-gray-900",children:l.deviceId||l.deviceType})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Pay Type"}),e.jsx("span",{className:"font-medium text-green-600",children:l.payCode||"Regular"})]})]}):l&&ce?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Name"}),e.jsx("span",{className:"font-medium text-gray-900",children:ve(l.userId)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Device"}),e.jsx("span",{className:"font-medium text-gray-900",children:l.deviceId||l.deviceType})]}),e.jsxs("div",{className:"py-2",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Pay Type"}),e.jsxs("select",{value:H.payCode||l.payCode||"REGULAR",onChange:re=>ne({...H,payCode:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"REGULAR",children:"Regular"}),e.jsx("option",{value:"OVERTIME",children:"Overtime"}),e.jsx("option",{value:"DOUBLE_TIME",children:"Double Time"}),e.jsx("option",{value:"HOLIDAY",children:"Holiday"})]})]})]}):$?e.jsxs("div",{className:"space-y-2",children:[I.slice(0,5).map(re=>{const Ie=n.find(We=>We.id===re);return Ie?e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-600",children:ve(Ie.userId)}),e.jsxs("span",{className:"font-medium text-gray-900",children:[Ie.totalHours.toFixed(2),"h"]})]},re):null}),I.length>5&&e.jsx("div",{className:"text-center py-2",children:e.jsxs("span",{className:"text-sm text-gray-500",children:["... and ",I.length-5," more entries"]})})]}):null})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-4",children:$?"Bulk Edit Job Details":ce?"Edit Job Details":"Job Details"}),e.jsx("div",{className:"space-y-3",children:l&&!ce?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-start py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Project"}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium text-gray-900",children:se(l.projectId)}),l.taskId&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Q(l.taskId)})]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Job Code"}),e.jsx("span",{className:"font-medium text-gray-900",children:l.jobCode||"N/A"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Cost Code"}),e.jsx("span",{className:"font-medium text-gray-900",children:l.costCode||"N/A"})]})]}):l&&ce?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project"}),e.jsxs("select",{value:H.projectId||l.projectId||"",onChange:re=>ne({...H,projectId:re.target.value,taskId:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"No Project"}),Qt.map(re=>e.jsx("option",{value:re.id,children:re.name},re.id))]})]}),(H.projectId||l.projectId)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task"}),e.jsxs("select",{value:H.taskId||l.taskId||"",onChange:re=>ne({...H,taskId:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"No Task"}),es.filter(re=>re.projectId===(H.projectId||l.projectId)).map(re=>e.jsx("option",{value:re.id,children:re.title},re.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Code"}),e.jsx("input",{type:"text",value:H.jobCode||"",onChange:re=>ne({...H,jobCode:re.target.value}),placeholder:l.jobCode||"Enter job code",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cost Code"}),e.jsx("input",{type:"text",value:H.costCode||"",onChange:re=>ne({...H,costCode:re.target.value}),placeholder:l.costCode||"Enter cost code",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}):$?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsxs("p",{className:"text-sm text-blue-800 mb-2",children:[e.jsx("strong",{children:"Bulk Edit Mode:"})," Changes will be applied to all ",I.length," ","selected entries"]}),e.jsx("p",{className:"text-xs text-blue-600",children:"Leave fields empty to keep original values"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project"}),e.jsxs("select",{value:ue.projectId,onChange:re=>Ce({...ue,projectId:re.target.value,taskId:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Keep Original"}),Qt.map(re=>e.jsx("option",{value:re.id,children:re.name},re.id))]})]}),ue.projectId&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task"}),e.jsxs("select",{value:ue.taskId,onChange:re=>Ce({...ue,taskId:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Keep Original"}),es.filter(re=>re.projectId===ue.projectId).map(re=>e.jsx("option",{value:re.id,children:re.title},re.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Code"}),e.jsx("input",{type:"text",value:ue.jobCode,onChange:re=>Ce({...ue,jobCode:re.target.value}),placeholder:"Keep Original",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cost Code"}),e.jsx("input",{type:"text",value:ue.costCode,onChange:re=>Ce({...ue,costCode:re.target.value}),placeholder:"Keep Original",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pay Code"}),e.jsxs("select",{value:ue.payCode,onChange:re=>Ce({...ue,payCode:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Keep Original"}),e.jsx("option",{value:"REGULAR",children:"Regular"}),e.jsx("option",{value:"OVERTIME",children:"Overtime"}),e.jsx("option",{value:"DOUBLE_TIME",children:"Double Time"}),e.jsx("option",{value:"HOLIDAY",children:"Holiday"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:F,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:["Apply to ",I.length," Entries"]}),e.jsx("button",{onClick:()=>{Ce({projectId:"",taskId:"",jobCode:"",costCode:"",payCode:"",applyToAll:!1})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]})]}):null})]})]}),h==="gps-map"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Nt,{size:18,className:"text-blue-600"}),"GPS Locations"]}),ae.length>0?e.jsx("div",{className:"space-y-4",children:ae.map((re,Ie)=>e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-1 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["Location ",Ie+1]})]}),e.jsx("span",{className:"text-xs text-gray-500",children:W(re.timestamp)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Latitude"}),e.jsx("div",{className:"font-semibold text-gray-900",children:re.latitude})]}),e.jsxs("div",{className:"bg-white rounded-lg p-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Longitude"}),e.jsx("div",{className:"font-semibold text-gray-900",children:re.longitude})]}),e.jsxs("div",{className:"bg-white rounded-lg p-2 col-span-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Accuracy"}),e.jsxs("div",{className:"font-semibold text-gray-900",children:[re.accuracy,"m"]})]})]}),re.address&&e.jsxs("div",{className:"bg-white rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Address"}),e.jsx("div",{className:"text-sm text-gray-900",children:re.address})]})]},Ie))}):e.jsxs("div",{className:"text-center py-2",children:[e.jsx(Nt,{size:48,className:"mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No GPS location data available"})]})]})}),h==="notes"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(et,{size:18,className:"text-blue-600"}),"Notes"]}),e.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors shadow-sm",children:[e.jsx(_e,{size:14}),"Add Note"]})]}),O.length>0?e.jsx("div",{className:"space-y-3",children:O.map(re=>e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-1 border border-blue-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(et,{size:12,className:"text-blue-600"})}),e.jsx("span",{className:"font-medium text-gray-900 text-sm",children:ve(re.authorId)})]}),e.jsx("span",{className:"text-xs text-gray-500",children:W(re.createdAt)})]}),e.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:re.content})]},re.id))}):e.jsxs("div",{className:"text-center py-2",children:[e.jsx(et,{size:48,className:"mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"No notes available"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors",children:"Add First Note"})]})]})}),h==="sign-off"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ze,{size:18,className:"text-green-600"}),"Sign-Off Status"]}),je.length>0?e.jsx("div",{className:"space-y-4",children:je.map(re=>e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-1 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(bs,{size:12,className:"text-green-600"})}),e.jsx("span",{className:"font-medium text-gray-900",children:ve(re.approvedBy)})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${re.status==="approved"?"bg-green-100 text-green-800":re.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:re.status})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 mb-3",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Approved At"}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:W(re.approvedAt)})]}),re.comments&&e.jsxs("div",{className:"bg-white rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Comments"}),e.jsx("p",{className:"text-sm text-gray-800",children:re.comments})]})]},re.id))}):e.jsxs("div",{className:"text-center py-2",children:[e.jsx(bs,{size:48,className:"mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"No sign-off available"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 transition-colors",children:"Request Sign-Off"})]})]})}),h==="recognition"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(bs,{size:18,className:"text-blue-600"}),"Identity Verification"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Verified"})]})]}),l?e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 mb-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[ee(l.userId)[0],me(l.userId)[0]]})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:ve(l.userId)}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",l.userId]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[K(l.clockIn).split(",")[0]," ",K(l.clockIn).split(",")[1]," -",l.clockOut?K(l.clockOut).split(",")[1]:"Active"]})]})]})}):$?e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 mb-1 border border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(bs,{size:24,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:"Multiple Employees"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[I.length," entries selected"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Identity verification for individual entries only"})]})]})}):null,l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-5 mb-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-3 border border-green-200",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("h6",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Sign-In Image"}),e.jsx("p",{className:"text-xs text-gray-600",children:K(l.clockIn)})]}),e.jsx("div",{className:"bg-white rounded-lg p-3 border border-green-200",children:e.jsxs("div",{className:"aspect-square bg-gradient-to-br from-green-100 to-emerald-100 flex flex-col items-center justify-center text-center p-1 rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-green-200 rounded-full flex items-center justify-center mb-2",children:e.jsx(Oe,{size:24,className:"text-green-600"})}),e.jsx("span",{className:"text-xs font-medium text-green-800",children:"Sign-In Photo"}),e.jsx("span",{className:"text-xs text-green-600 mt-1",children:"Captured at clock-in"})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 rounded-lg p-3 border border-red-200",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("h6",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Sign-Out Image"}),e.jsx("p",{className:"text-xs text-gray-600",children:l.clockOut?K(l.clockOut):"Still Active"})]}),e.jsx("div",{className:"bg-white rounded-lg p-3 border border-red-200",children:e.jsx("div",{className:"aspect-square bg-gradient-to-br from-red-100 to-rose-100 flex flex-col items-center justify-center text-center p-1 rounded-lg",children:l.clockOut?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-red-200 rounded-full flex items-center justify-center mb-2",children:e.jsx(Gt,{size:24,className:"text-red-600"})}),e.jsx("span",{className:"text-xs font-medium text-red-800",children:"Sign-Out Photo"}),e.jsx("span",{className:"text-xs text-red-600 mt-1",children:"Captured at clock-out"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-gray-300 rounded-full flex items-center justify-center mb-2",children:e.jsx(Oe,{size:24,className:"text-gray-500"})}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"No Sign-Out"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Employee still active"})]})})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-3 border border-blue-200",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("h6",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Profile Image"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Employee Reference"})]}),e.jsx("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:e.jsxs("div",{className:"aspect-square bg-gradient-to-br from-blue-100 to-indigo-100 flex flex-col items-center justify-center text-center p-1 rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-200 rounded-full flex items-center justify-center mb-2",children:e.jsx(bs,{size:24,className:"text-blue-600"})}),e.jsx("span",{className:"text-xs font-medium text-blue-800",children:"Employee Profile"}),e.jsx("span",{className:"text-xs text-blue-600 mt-1",children:"On file"})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[e.jsx(Ze,{size:14}),"Verify Identity"]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors shadow-sm",children:[e.jsx(it,{size:14}),"Flag Issue"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete Record"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Save"})]})]})]}):$?e.jsxs("div",{className:"text-center py-2",children:[e.jsx(bs,{size:48,className:"mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Identity verification available for individual entries only"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Select a single entry to view and verify identity images"})]}):null]})}),h==="exemptions"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-900 flex items-center gap-3",children:[e.jsx(it,{size:18,className:"text-orange-600"}),"Rule Exemptions"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-orange-700",children:"Active Exemptions"})]})]}),l?e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-lg p-4 mb-4 border border-orange-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-lg font-bold text-orange-600",children:[ee(l.userId)[0],me(l.userId)[0]]})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:ve(l.userId)}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",l.userId]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[K(l.clockIn).split(",")[0]," ",K(l.clockIn).split(",")[1]," -",l.clockOut?K(l.clockOut).split(",")[1]:"Active"]}),e.jsxs("p",{className:"text-sm font-semibold text-orange-700",children:["Total Hours: ",l.totalHours.toFixed(2),"h"]})]})]})}):$?e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-lg p-1 mb-1 border border-orange-200",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(it,{size:24,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:"Multiple Employees"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[I.length," entries selected"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Rule exemptions available for individual entries only"})]})]})}):null,l?e.jsxs(e.Fragment,{children:[e.jsx("h6",{className:"text-sm font-semibold mb-2",style:{color:t==null?void 0:t.theme.colors.primary[800]},children:"Available Rule Exemptions"}),e.jsxs("div",{className:"space-y-4 mb-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-3 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"checkbox",id:"auto-lunch-exempt",className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"auto-lunch-exempt",className:"font-medium text-gray-900 cursor-pointer",children:"Auto Lunch Exempt"}),e.jsx("p",{className:"text-sm text-sm -gray-600 mt-1",children:"Exempt this time record from automatic lunch break deduction. Employee worked straight through without taking a lunch break."}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-medium",children:"Lunch Rule"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Typically deducts 30 minutes for shifts over 6 hours"})]})]})]}),e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(ws,{size:16,className:"text-blue-600"})})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-3 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"checkbox",id:"enforced-start-exempt",className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"enforced-start-exempt",className:"font-medium text-gray-900 cursor-pointer",children:"Enforced Start Exempt"}),e.jsx("p",{className:"text-sm text-sm -gray-600 mt-1",children:"Exempt this time record from enforced start time rules. Employee was allowed to clock in outside the standard start window."}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-xs font-medium",children:"Start Time Rule"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Standard: Clock in between 7:00 AM - 7:15 AM"})]})]})]}),e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx($s,{size:16,className:"text-green-600"})})]})}),e.jsx("div",{className:"bg-gradient-to-r from-red-50 to-rose-50 rounded-lg p-3 border border-red-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"checkbox",id:"enforced-stop-exempt",className:"w-4 h-4 text-red-600 bg-gray-100 border-gray-300 rounded focus:ring-red-500 focus:ring-2"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"enforced-stop-exempt",className:"font-medium text-gray-900 cursor-pointer",children:"Enforced Stop Exempt"}),e.jsx("p",{className:"text-sm text-sm -gray-600 mt-1",children:"Exempt this time record from enforced stop time rules. Employee was allowed to clock out outside the standard stop window."}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded text-xs font-medium",children:"Stop Time Rule"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Standard: Clock out between 3:00 PM - 3:15 PM"})]})]})]}),e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Gt,{size:16,className:"text-red-600"})})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg p-3 border border-gray-200 mb-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(kt,{size:16,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-semibold text-gray-900",children:"Current Rule Status"}),e.jsx("p",{className:"text-sm text-gray-600",children:"All standard time-keeping rules are currently active for this record"})]})]}),e.jsx("span",{className:"px-3 py-1 bg-gray-200 text-gray-800 rounded-full text-xs font-medium",children:"No Exemptions Applied"})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 mt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors shadow-sm",children:[e.jsx(it,{size:14}),"Apply Exemptions"]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[e.jsx(kt,{size:14}),"View All Rules"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete Record"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Save"})]})]})]}):$?e.jsxs("div",{className:"text-center py-2",children:[e.jsx(it,{size:48,className:"mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Rule exemptions available for individual entries only"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Select a single entry to view and modify rule exemptions"})]}):null]})})]})]})})};return e.jsx(ct,{maxWidth:"full",padding:"md",children:e.jsx("div",{className:"bg-white p-6 rounded-xl",children:e.jsx(Be,{title:"Time Management",variant:"default",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"px-6",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsxs("button",{onClick:()=>r("time-editor"),className:"px-3 py-2 border-b-2 font-semibold text-sm flex items-center gap-2 transition-colors",style:{borderColor:a==="time-editor"?(t==null?void 0:t.theme.colors.primary[500])||"#3b82f6":"transparent",color:a==="time-editor"?(t==null?void 0:t.theme.colors.primary[600])||"#2563eb":"#6b7280"},children:[e.jsx(Hr,{size:16}),"Time Editor"]}),e.jsxs("button",{onClick:()=>r("time-clock"),className:"px-3 py-2 border-b-2 font-semibold text-sm flex items-center gap-2 transition-colors",style:{borderColor:a==="time-clock"?(t==null?void 0:t.theme.colors.primary[500])||"#3b82f6":"transparent",color:a==="time-clock"?(t==null?void 0:t.theme.colors.primary[600])||"#2563eb":"#6b7280"},children:[e.jsx(Oe,{size:16}),"Time Clock"]}),e.jsxs("button",{onClick:()=>r("time-sheet"),className:"px-3 py-2 border-b-2 font-semibold text-sm flex items-center gap-2 transition-colors",style:{borderColor:a==="time-sheet"?(t==null?void 0:t.theme.colors.primary[500])||"#3b82f6":"transparent",color:a==="time-sheet"?(t==null?void 0:t.theme.colors.primary[600])||"#2563eb":"#6b7280"},children:[e.jsx(Je,{size:16}),"Timesheet"]})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto sidebar-scroll",children:e.jsxs("div",{className:"p-0",children:[a==="time-editor"&&e.jsx(vm,{timeEntries:n,users:Zt,projects:Qt,tasks:es,batchConflicts:Am,onEditEntry:G,onBatchAction:B,selectedEntries:I,onSelectEntry:ke,onSelectAll:$=>{I.length===$.length?(U([]),m(!1),u(null)):(U($.map(J=>J.id)),m(!0),u(null))}}),a==="time-clock"&&e.jsx(ym,{users:Zt,projects:Qt,tasks:es,timeEntries:n,currentUserId:b,onClockIn:z,onClockOut:P,onBreakStart:S,onBreakEnd:k}),a==="time-sheet"&&e.jsxs("div",{className:"space-y-6 p-3",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>A("grid"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 ${x==="grid"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:"Grid View"}),e.jsx("button",{onClick:()=>A("daily"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 ${x==="daily"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:"Daily View"}),e.jsx("button",{onClick:()=>A("weekly"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 ${x==="weekly"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:"Weekly View"})]}),x==="daily"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{const $=new Date(y);$.setDate($.getDate()-1),N($)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ns,{size:16})}),e.jsx("input",{type:"date",value:y.toISOString().split("T")[0],onChange:$=>N(new Date($.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>{const $=new Date(y);$.setDate($.getDate()+1),N($)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ds,{size:16})})]}),x==="weekly"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{const $=new Date(v);$.setDate($.getDate()-7),j($)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ns,{size:16})}),e.jsxs("span",{className:"px-3 py-2 text-sm font-medium text-gray-900",children:["Week of"," ",v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),e.jsx("button",{onClick:()=>{const $=new Date(v);$.setDate($.getDate()+7),j($)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ds,{size:16})})]})]}),e.jsxs("button",{onClick:()=>{w(null),C(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(_e,{size:16}),"Add Entry"]})]})}),x==="grid"&&e.jsx(Nm,{users:Zt,entries:g,projects:Qt,tasks:es,selectedWeek:v,onSaveEntry:_,onUpdateEntry:$=>{p(J=>J.map(O=>O.id===$.id?$:O))},onNavigateWeek:X}),x==="daily"&&e.jsx(fm,{selectedDate:y,entries:g.filter($=>$.date===y.toISOString().split("T")[0]),totalHours:g.filter($=>$.date===y.toISOString().split("T")[0]).reduce(($,J)=>$+J.totalHours,0),projects:Qt,tasks:es,users:Zt,onEditEntry:L,onDeleteEntry:R,onCopyEntry:q,onApproveTimesheet:V,onRejectTimesheet:Z}),x==="weekly"&&e.jsx(wm,{selectedWeek:v,entries:g.filter($=>{const J=new Date($.date),O=new Date(v);O.setDate(O.getDate()-O.getDay()+1);const je=new Date(O);return je.setDate(O.getDate()+6),J>=O&&J<=je}),totalHours:g.filter($=>{const J=new Date($.date),O=new Date(v);O.setDate(O.getDate()-O.getDay()+1);const je=new Date(O);return je.setDate(O.getDate()+6),J>=O&&J<=je}).reduce(($,J)=>$+J.totalHours,0),projects:Qt,tasks:es,users:Zt,onEditEntry:L,onDeleteEntry:R,onCopyEntry:q,onApproveTimesheet:V,onRejectTimesheet:Z,onSubmitWeeklyTimesheet:be})]})]})}),o&&$e(),D&&e.jsx(jm,{entry:f,projects:Qt,tasks:es,users:Zt,selectedDate:y,onSave:_,onClose:()=>{C(!1),w(null)}})]})})})})}function Em({wbs:t,project:s,division:a,level:r,isExpanded:n,onToggleExpand:i,onEdit:l,onCreateSubWBS:u,children:o}){const m=r*32,h=t.level===0,d=t.level>0,g=rt.Children.count(o)>0,p=t.level<10;return e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center gap-2 py-3 px-4 hover:bg-gray-50 rounded-lg transition-colors border-l-2 ${t.level===0?"border-blue-200 bg-blue-50/30":t.level===1?"border-green-200 bg-green-50/30":t.level===2?"border-yellow-200 bg-yellow-50/30":t.level===3?"border-orange-200 bg-orange-50/30":t.level===4?"border-red-200 bg-red-50/30":t.level===5?"border-purple-200 bg-purple-50/30":t.level===6?"border-pink-200 bg-pink-50/30":t.level===7?"border-indigo-200 bg-indigo-50/30":t.level===8?"border-teal-200 bg-teal-50/30":t.level===9?"border-cyan-200 bg-cyan-50/30":t.level===10?"border-gray-300 bg-gray-100/50":"border-gray-200 bg-gray-50/30"}`,style:{paddingLeft:`${m+16}px`},children:[g&&e.jsx("button",{onClick:i,className:"p-1 hover:bg-gray-200 rounded transition-colors",title:n?"Collapse sub-items":"Expand sub-items",children:n?e.jsx(Ft,{size:16,className:"text-blue-600"}):e.jsx(ds,{size:16,className:"text-blue-600"})}),!g&&e.jsx("div",{className:"w-6"}),e.jsx("div",{className:"flex-shrink-0",children:g?e.jsx(kn,{size:16,className:t.level===0?"text-blue-600":t.level===1?"text-green-600":t.level===2?"text-yellow-600":t.level===3?"text-orange-600":t.level===4?"text-red-600":t.level===5?"text-purple-600":t.level===6?"text-pink-600":t.level===7?"text-indigo-600":t.level===8?"text-teal-600":t.level===9?"text-cyan-600":t.level===10?"text-gray-600":"text-gray-500"}):e.jsx(et,{size:16,className:t.level===0?"text-blue-500":t.level===1?"text-green-500":t.level===2?"text-yellow-500":t.level===3?"text-orange-500":t.level===4?"text-red-500":t.level===5?"text-purple-500":t.level===6?"text-pink-500":t.level===7?"text-indigo-500":t.level===8?"text-teal-500":t.level===9?"text-cyan-500":t.level===10?"text-gray-500":"text-gray-400"})}),e.jsxs("div",{className:"flex-1 flex items-center justify-between min-w-0",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d&&e.jsx(ss,{size:12,className:"text-gray-400 flex-shrink-0"}),e.jsxs("h4",{className:`font-medium truncate ${h?"text-gray-900 text-base":"text-gray-700 text-sm"}`,children:[t.name,d&&e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",t.code,")"]})]}),e.jsxs("span",{className:`px-2 py-1 text-xs rounded-full ${t.level===0?"bg-blue-100 text-blue-700":t.level===1?"bg-green-100 text-green-700":t.level===2?"bg-yellow-100 text-yellow-700":t.level===3?"bg-orange-100 text-orange-700":t.level===4?"bg-red-100 text-red-700":t.level===5?"bg-purple-100 text-purple-700":t.level===6?"bg-pink-100 text-pink-700":t.level===7?"bg-indigo-100 text-indigo-700":t.level===8?"bg-teal-100 text-teal-700":t.level===9?"bg-cyan-100 text-cyan-700":t.level===10?"bg-gray-200 text-gray-800":"bg-gray-100 text-gray-600"}`,children:["L",t.level]}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-mono",children:t.code}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:t.type}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.status==="completed"?"bg-green-100 text-green-700":t.status==="in-progress"?"bg-blue-100 text-blue-700":t.status==="on-hold"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:t.status})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:(s==null?void 0:s.color)||"#6B7280"}}),(s==null?void 0:s.name)||"Unknown Project"]}),t.divisionId&&a&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Zs,{size:12,className:"text-blue-600"}),e.jsx("span",{className:"text-blue-600",children:a.name})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[p&&e.jsx("button",{onClick:()=>u(t),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors border border-transparent hover:border-blue-200",title:`Add sub-item (Level ${t.level+1})`,children:e.jsx(_e,{size:16})}),e.jsx("button",{onClick:()=>l(t),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:h?"Edit parent item":"Edit sub-item",children:e.jsx(ea,{size:16})})]})]})]}),g&&n&&o]})}function Mm(){var me,se,Q;const{showToast:t}=at(),[s,a]=c.useState([]),[r,n]=c.useState([]),[i,l]=c.useState([]),[u,o]=c.useState([]),[m,h]=c.useState(!0),[d,g]=c.useState(!1),[p,x]=c.useState(null),[A,y]=c.useState(null),[N,v]=c.useState(""),[j,D]=c.useState(new Set),[C,f]=c.useState(""),[w,b]=c.useState(""),[z,P]=c.useState("tree"),[S,k]=c.useState({projectId:"",phaseId:"",parentId:void 0,name:"",title:"",description:"",type:"costcodes",divisionId:"",estimatedTime:void 0,dependencies:[],isActive:!0,customFields:{},code:""});c.useEffect(()=>{B()},[]),c.useEffect(()=>{if(N){const W=setTimeout(()=>{G(N)},300);return()=>clearTimeout(W)}else B()},[N]);const G=async W=>{try{const K=new URLSearchParams;W&&K.append("q",W);const I=await le.get(`/wbs?${K.toString()}`);if(I.error)t({message:"Failed to load WBS: "+I.error,variant:"error"});else{const U=I.data,ce=(U==null?void 0:U.hierarchicalResults)||(U==null?void 0:U.items)||U||[];a(ce),(U==null?void 0:U.searchType)==="code"&&(U!=null&&U.hierarchicalResults)&&console.log("Hierarchical search results:",U.hierarchicalResults.length,"items")}}catch{t({message:"Failed to load WBS data",variant:"error"})}},B=async()=>{try{h(!0);const[W,K,I,U]=await Promise.all([le.get("/wbs"),le.get("/projects"),le.get("/phases"),le.get("/divisions")]);if(W.error)t({message:"Failed to load WBS: "+W.error,variant:"error"});else{const ce=W.data,T=(ce==null?void 0:ce.hierarchicalResults)||(ce==null?void 0:ce.items)||ce||[];a(T),(ce==null?void 0:ce.searchType)==="code"&&(ce!=null&&ce.hierarchicalResults)&&console.log("Hierarchical search results:",ce.hierarchicalResults.length,"items")}K.error?t({message:"Failed to load projects: "+K.error,variant:"error"}):n(K.data||[]),I.error?t({message:"Failed to load phases: "+I.error,variant:"error"}):l(I.data||[]),U.error?t({message:"Failed to load divisions: "+U.error,variant:"error"}):o(U.data||[])}catch{t({message:"Failed to load data",variant:"error"})}finally{h(!1)}},E=async W=>{try{const K=await le.post("/wbs",W);K.error?t({message:K.error||"Failed to create WBS",variant:"error"}):(a(I=>[...I,K.data]),t({message:"WBS created successfully",variant:"success"}),F(),g(!1),x(null),y(null))}catch{t({message:"Failed to create WBS",variant:"error"})}},M=async W=>{if(p)try{const K=await le.put(`/wbs/${p.id}`,W);K.error?t({message:K.error||"Failed to update WBS",variant:"error"}):(a(I=>I.map(U=>U.id===p.id?K.data:U)),t({message:"WBS updated successfully",variant:"success"}),F(),g(!1),x(null),y(null))}catch{t({message:"Failed to update WBS",variant:"error"})}},F=()=>{k({projectId:"",phaseId:"",parentId:void 0,name:"",description:"",type:"costcodes",divisionId:"",estimatedTime:void 0,dependencies:[],customFields:{},code:""})},_=W=>{x(W),k({...W,customFields:W.customFields||{}}),g(!0)},L=W=>{y(W),k({projectId:W.projectId,phaseId:W.phaseId,parentId:W.id,name:"",description:"",type:"costcodes",divisionId:"",estimatedTime:void 0,dependencies:[],customFields:{},code:""}),g(!0)},R=W=>{if(W.preventDefault(),!S.name||!S.projectId||!S.type){t({message:"Name, Project, and Type are required",variant:"error"});return}if(!A&&!S.phaseId){t({message:"Phase is required for WBS items",variant:"error"});return}p?M(S):E(S)},q=W=>{D(K=>{const I=new Set(K);return I.has(W)?I.delete(W):I.add(W),I})},V=()=>{const W=(Array.isArray(Z)?Z:[]).filter(I=>I.level===0),K=I=>{const U=(Array.isArray(Z)?Z:[]).filter(ne=>ne.parentId===I.id),ce=r.find(ne=>ne.id===I.projectId);if(!ce)return null;const T=u.find(ne=>ne.id===I.divisionId),H=j.has(I.id);return e.jsx(Em,{wbs:I,project:ce,division:T,level:I.level,isExpanded:H,onToggleExpand:()=>q(I.id),onEdit:_,onCreateSubWBS:L,children:U.length>0&&H&&e.jsx("div",{className:"ml-6",children:U.map(ne=>K(ne))})},I.id)};return W.map(K)},Z=(Array.isArray(s)?s:[]).filter(W=>{var T;if(!r.some(H=>H.id===W.projectId))return!1;const I=!N||W.name.toLowerCase().includes(N.toLowerCase())||((T=W.description)==null?void 0:T.toLowerCase().includes(N.toLowerCase()))||W.code.toLowerCase().includes(N.toLowerCase()),U=!C||W.projectId===C,ce=!w||W.status===w;return I&&U&&ce}),be=(Array.isArray(Z)?Z:[]).filter(W=>W.level===0),X=(Array.isArray(Z)?Z:[]).filter(W=>W.level>0),ve=(Array.isArray(Z)?Z:[]).filter(W=>W.status==="completed"),ee=(Array.isArray(Z)?Z:[]).filter(W=>W.status==="in-progress");return m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-gray-900",children:"Work Breakdown Structure"}),e.jsx("p",{className:"text-sm -gray-600 mt-1",children:"Manage cost codes in a hierarchical structure"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>P("tree"),className:`px-3 py-2 text-sm font-medium transition-all flex items-center gap-2 ${z==="tree"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-50"}`,title:"Tree View",children:[e.jsx(mr,{size:16}),"Tree"]}),e.jsxs("button",{onClick:()=>P("list"),className:`px-3 py-2 text-sm font-medium transition-all flex items-center gap-2 ${z==="list"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-50"}`,title:"List View",children:[e.jsx(Ra,{size:16}),"List"]})]}),e.jsxs("button",{onClick:()=>{g(!0),x(null),y(null),F(),k(W=>({...W,type:"costcodes"}))},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(_e,{size:18}),"Add Parent Item"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-5",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(kn,{size:20,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:be.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Parent Items"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(et,{size:20,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:X.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Sub-items"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(_e,{size:20,className:"text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:ve.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(_e,{size:20,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:ee.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-1",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(xt,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search WBS by name, code ...",value:N,onChange:W=>v(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{children:e.jsxs("select",{value:C,onChange:W=>f(W.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Projects"}),r.map(W=>e.jsx("option",{value:W.id,children:W.name},W.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:w,onChange:W=>b(W.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"not-started",children:"Not Started"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"on-hold",children:"On Hold"})]})})]}),N&&e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:/^[0-9]+(\.[0-9]+)*$/.test(N)||/^[A-Z0-9]+(\.[0-9]+)*$/.test(N)?e.jsxs("span",{className:"text-blue-600",children:[" Searching for WBS code: ",e.jsx("strong",{children:N})," (showing hierarchical results with L1, L2 levels)"]}):e.jsxs("span",{className:"text-gray-600",children:[" Searching in names and descriptions: ",e.jsx("strong",{children:N})]})}),(C||w)&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Active Filters:"}),C&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs",children:["Project: ",(me=r.find(W=>W.id===C))==null?void 0:me.name,e.jsx("button",{onClick:()=>f(""),className:"ml-1 hover:text-blue-900",children:""})]}),w&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:["Status: ",w,e.jsx("button",{onClick:()=>b(""),className:"ml-1 hover:text-green-900",children:""})]})]})]}),z==="tree"?e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-1 border-b border-gray-200",children:e.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"WBS Hierarchy (Tree View)"})}),e.jsx("div",{className:"p-1",children:(Array.isArray(Z)?Z:[]).length>0?e.jsx("div",{className:"space-y-1",children:V()}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(_e,{size:24,className:"text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:N?"No WBS found":"No WBS yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:N?"Try adjusting your search criteria":"Create your first WBS to get started with the Work Breakdown Structure"}),!N&&e.jsxs("button",{onClick:()=>{g(!0),x(null),y(null),F()},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(_e,{size:18}),"Create First Item"]})]})})]}):e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-1 border-b border-gray-200",children:e.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"WBS List View"})}),e.jsx("div",{className:"overflow-x-auto",children:(Array.isArray(Z)?Z:[]).length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"WBS Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Level"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Division"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Est. Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Z.map(W=>{const K=r.find(U=>U.id===W.projectId),I=u.find(U=>U.id===W.divisionId);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-mono",children:W.code})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[W.level>0&&e.jsx(ss,{size:12,className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:W.name}),W.description&&e.jsx("div",{className:"text-xs text-gray-500",children:W.description})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:K?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:K.color||"#6B7280"}}),e.jsx("span",{className:"text-sm text-gray-900",children:K.name})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${W.level===0?"bg-blue-100 text-blue-700":W.level===1?"bg-green-100 text-green-700":W.level===2?"bg-yellow-100 text-yellow-700":W.level===3?"bg-orange-100 text-orange-700":W.level===4?"bg-red-100 text-red-700":W.level===5?"bg-purple-100 text-purple-700":W.level===6?"bg-pink-100 text-pink-700":W.level===7?"bg-indigo-100 text-indigo-700":W.level===8?"bg-teal-100 text-teal-700":W.level===9?"bg-cyan-100 text-cyan-700":W.level===10?"bg-gray-200 text-gray-800":"bg-gray-100 text-gray-600"}`,children:["L",W.level]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:W.type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${W.status==="completed"?"bg-green-100 text-green-700":W.status==="in-progress"?"bg-blue-100 text-blue-700":W.status==="on-hold"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:W.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:I?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zs,{size:12,className:"text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-600",children:I.name})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:W.estimatedTime!==void 0&&W.estimatedTime!==null?e.jsxs("span",{className:"text-sm text-gray-900 font-medium",children:[W.estimatedTime,"h"]}):e.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>_(W),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Edit",children:e.jsx(ea,{size:16})}),W.level<10&&e.jsx("button",{onClick:()=>L(W),className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:`Add sub-item (Level ${W.level+1})`,children:e.jsx(_e,{size:16})})]})})]},W.id)})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(_e,{size:24,className:"text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:N?"No WBS found":"No WBS yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:N?"Try adjusting your search criteria":"Create your first WBS to get started with the Work Breakdown Structure"}),!N&&e.jsxs("button",{onClick:()=>{g(!0),x(null),y(null),F()},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(_e,{size:18}),"Create First Item"]})]})})]}),e.jsx(Ue,{open:d,onClose:()=>{g(!1),x(null),y(null)},title:p?`Edit WBS: ${p.code}`:A?`Create Sub-item under: ${A.name} (Level ${A.level+1})`:"Create New WBS",size:"xl",children:e.jsxs("form",{onSubmit:R,className:"space-y-6 p-6",children:[A&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:["Creating sub-item at Level ",A.level+1,' under "',A.name,'"']})]}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Maximum level is 10."," ",A.level+1<10?"You can create more sub-items.":"This is the maximum level."," ","WBS code will be auto-generated."]})]}),!A&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"You can manually enter a WBS code or leave it empty for auto-generation"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:[!A&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project *"}),e.jsxs("select",{value:S.projectId||"",onChange:W=>k(K=>({...K,projectId:W.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsxs("option",{value:"",children:["Select Project (",r.length," available)"]}),r.map(W=>e.jsx("option",{value:W.id,children:W.name},W.id))]})]}),!A&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WBS Code"}),e.jsx("input",{type:"text",value:S.code||"",onChange:W=>k(K=>({...K,code:W.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter WBS code (optional - will auto-generate if empty)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to auto-generate, or enter a custom code for this parent item"})]}),!A&&S.projectId&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phase *"}),e.jsxs("select",{value:S.phaseId||"",onChange:W=>k(K=>({...K,phaseId:W.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Phase *"}),i.filter(W=>W.projectId===S.projectId).map(W=>e.jsxs("option",{value:W.id,children:[W.name," (",W.code,")"]},W.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a phase for this WBS item (required)"})]}),A&&e.jsx("div",{className:"col-span-2",children:e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Inherited from Parent"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Project:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:((se=r.find(W=>W.id===A.projectId))==null?void 0:se.name)||"Unknown Project"})]}),A.phaseId&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Phase:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:((Q=i.find(W=>W.id===A.phaseId))==null?void 0:Q.name)||"Unknown Phase"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Sub-items inherit Project and Phase from their parent WBS"})]})}),e.jsx(he,{label:"Name",isRequired:!0,children:e.jsx("input",{type:"text",value:S.name||"",onChange:W=>k(K=>({...K,name:W.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})}),e.jsx(he,{label:"Title",children:e.jsx("input",{type:"text",value:S.title||"",onChange:W=>k(K=>({...K,title:W.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter title"})}),e.jsx(he,{label:"Division",children:e.jsxs("select",{value:S.divisionId||"",onChange:W=>k(K=>({...K,divisionId:W.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Division"}),u.map(W=>e.jsx("option",{value:W.id,children:W.name},W.id))]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Time (hours)"}),e.jsx("input",{type:"number",value:S.estimatedTime||"",onChange:W=>k(K=>({...K,estimatedTime:W.target.value?parseFloat(W.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter estimated hours",min:"0",step:"0.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter estimated time in hours (e.g., 8, 8.5, 16)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:S.description||"",onChange:W=>k(K=>({...K,description:W.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter Description..."})]}),e.jsx("div",{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:S.isActive!==!1,onChange:W=>k(K=>({...K,isActive:W.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700",children:"Active"})]})})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>{g(!1),x(null),y(null)},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[p?"Update":"Create"," WBS"]})]})]})})]})}const Fm=c.lazy(()=>yn(()=>import("./index-9nWxpARV.js"),__vite__mapDeps([0,1,2,3,4]))),tr=c.lazy(()=>yn(()=>import("./index-Dl7YX8PE.js"),__vite__mapDeps([5,1,2,3,4])));function Rm(){const[t,s]=c.useState(!1),{isAuthenticated:a,loading:r}=Ye();return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-sm -gray-600 mt-1",children:"Loading..."})]})}):a?e.jsxs("div",{className:"flex-1 flex h-screen overflow-hidden",children:[e.jsx(Ul,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(_l,{onCreateTask:()=>{},onCreateProject:()=>{},onCreateTeam:()=>{},onToggleRightMenu:()=>s(!t),rightMenuOpen:t,projects:[],users:[],teams:[]}),e.jsx("div",{className:"flex flex-1 overflow-hidden",children:e.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden sidebar-scroll sr-main",children:e.jsx("div",{className:"h-full",children:e.jsxs(Ai,{children:[e.jsx(Ve,{path:"/",element:e.jsx(xn,{to:"/dashboard",replace:!0})}),e.jsx(Ve,{path:"/dashboard",element:e.jsx(Xe,{requiredPermissions:["dashboard_view"],children:e.jsx(Au,{})})}),e.jsx(Ve,{path:"/project-planning/projects",element:e.jsx(Xe,{requiredPermissions:["projects_view","tasks_view","wbs_view"],children:e.jsx(Wu,{})})}),e.jsx(Ve,{path:"/project-planning/phases",element:e.jsx(Xe,{requiredPermissions:["projects_view","tasks_view","wbs_view"],children:e.jsx(Hu,{})})}),e.jsx(Ve,{path:"/project-planning/wbs",element:e.jsx(Xe,{requiredPermissions:["projects_view","tasks_view","wbs_view"],children:e.jsx(Mm,{})})}),e.jsx(Ve,{path:"/scheduling/view",element:e.jsx(Xe,{requiredPermissions:["projects_view","tasks_view","wbs_view"],children:e.jsx(Qa,{})})}),e.jsx(Ve,{path:"/scheduling/dependencies",element:e.jsx(Xe,{requiredPermissions:["projects_view","tasks_view","wbs_view"],children:e.jsx(Qa,{})})}),e.jsx(Ve,{path:"/scheduling/critical-path",element:e.jsx(Xe,{requiredPermissions:["projects_view","tasks_view","wbs_view"],children:e.jsx(Qa,{})})}),e.jsx(Ve,{path:"/time-management/time-editor",element:e.jsx(Xe,{requiredPermissions:["projects_view","tasks_view","wbs_view"],children:e.jsx(tr,{target:"time-editor"})})}),e.jsx(Ve,{path:"/time-management/time-clock",element:e.jsx(Xe,{requiredPermissions:["projects_view","tasks_view","wbs_view"],children:e.jsx(tr,{target:"time-clock"})})}),e.jsx(Ve,{path:"/time-management/time-sheet",element:e.jsx(Xe,{requiredPermissions:["projects_view","tasks_view","wbs_view"],children:e.jsx(tr,{target:"time-sheet"})})}),e.jsx(Ve,{path:"/time-management/time-editor-old",element:e.jsx(Xe,{requiredPermissions:["projects_view","tasks_view","wbs_view"],children:e.jsx(er,{})})}),e.jsx(Ve,{path:"/time-management/time-clock-old",element:e.jsx(Xe,{requiredPermissions:["projects_view","tasks_view","wbs_view"],children:e.jsx(er,{})})}),e.jsx(Ve,{path:"/time-management/time-sheet-old",element:e.jsx(Xe,{requiredPermissions:["projects_view","tasks_view","wbs_view"],children:e.jsx(er,{})})}),e.jsx(Ve,{path:"/master-data",element:e.jsx(Xe,{requiredPermissions:["units_view","divisions_view","categories_view","cost_codes_view","vendors_view"],children:e.jsx(Uu,{})})}),e.jsx(Ve,{path:"/reports",element:e.jsx(Xe,{requiredPermissions:["reports_view"],children:e.jsx(Vu,{})})}),e.jsx(Ve,{path:"/reports/analytics",element:e.jsx(Xe,{requiredPermissions:["analytics_view"],children:e.jsx(Po,{})})}),e.jsx(Ve,{path:"/construction",element:e.jsx(Xe,{requiredPermissions:["projects_view"],children:e.jsx(ud,{})})}),e.jsx(Ve,{path:"/construction/projects",element:e.jsx(Xe,{requiredPermissions:["projects_view"],children:e.jsx(Cu,{})})}),e.jsx(Ve,{path:"/costbudget",element:e.jsx(Xe,{requiredPermissions:["projects_view","tasks_view","wbs_view"],children:e.jsx(ku,{})})}),e.jsx(Ve,{path:"/settings",element:e.jsx(Xe,{requiredPermissions:["settings_view"],children:e.jsx(gm,{})})}),e.jsx(Ve,{path:"/theme-manager",element:e.jsx(Xe,{requiredPermissions:["settings_view"],children:e.jsxs("div",{className:"max-w-6xl mx-auto p-1",children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("h1",{className:"text-sm font-bold text-gray-900",children:"Theme Manager"}),e.jsx("p",{className:"text-sm -gray-600 mt-1",children:"Customize your application's appearance and branding"})]}),e.jsx(pi,{})]})})}),e.jsx(Ve,{path:"/admin/auth",element:e.jsx(Xe,{requiredPermissions:["users_view","rbac_modules_view","rbac_permissions_view","rbac_roles_view"],children:e.jsx(po,{})})}),e.jsx(Ve,{path:"/admin/backup",element:e.jsx(Xe,{requiredPermissions:["backup_restore_view"],children:e.jsxs("div",{className:"p-1",children:[e.jsx("h1",{className:"text-sm font-bold",children:"Backup & Restore"}),e.jsx("p",{className:"text-sm -gray-600 mt-1",children:"Coming soon..."})]})})}),e.jsx(Ve,{path:"/admin/api-keys",element:e.jsx(Xe,{requiredPermissions:["api_keys_view"],children:e.jsx(no,{})})}),e.jsx(Ve,{path:"/admin/api-docs",element:e.jsx(Xe,{requiredPermissions:["api_keys_view"],children:e.jsx(eo,{})})}),e.jsx(Ve,{path:"/admin/system",element:e.jsx(Xe,{requiredPermissions:["system_view"],children:e.jsx(Ao,{})})}),e.jsx(Ve,{path:"/admin/process",element:e.jsx(To,{})}),e.jsx(Ve,{path:"/admin/integrations",element:e.jsx(Fm,{})})]})})})})]})]}):e.jsx(dd,{})}function Lm(){return e.jsx(Ii,{children:e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"text-center mt-10",children:"Loading..."}),children:e.jsx(zl,{children:e.jsx(kl,{children:e.jsx(oo,{children:e.jsx(Yl,{children:e.jsx(Rm,{})})})})})})})}fn(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(Lm,{})}));export{kt as $,os as A,xe as B,ct as C,Ue as D,Vt as E,Ns as F,ds as G,cr as H,he as I,Tn as J,nl as K,Dn as L,gt as M,Nt as N,fd as O,_e as P,Nd as Q,ls as R,xt as S,lt as T,ot as U,dn as V,Ki as W,rr as X,Ft as Y,zt as Z,Gt as _,jn as a,et as a0,bs as a1,Hr as a2,Um as a3,Ls as a4,sr as a5,Cs as a6,Ss as a7,wt as a8,Zs as a9,Nn as aa,qa as ab,Ht as ac,ja as ad,Je as b,fe as c,Oe as d,Gi as e,Tt as f,jt as g,Ts as h,it as i,e as j,Ze as k,Bm as l,dr as m,xl as n,or as o,ui as p,us as q,za as r,rn as s,ht as t,Pe as u,ou as v,Xs as w,ws as x,ol as y,$s as z};
