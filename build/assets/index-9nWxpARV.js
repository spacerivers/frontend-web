import{c as Y,u as he,j as e,C as ge,B as D,a as me,P as ue,A as pe,S as ye,b as be,d as je,e as fe,f as we,R as ve,T as ee,D as se,I as Z,E as Ne,g as le,h as Se,X as W,i as Ce,k as ke,l as h,M as te,m as H,n as ae,U as Pe,o as Ae,L as Ee,p as Ie,K as Re}from"./index-BbVouApE.js";import{r as l}from"./vendor-DJ1oPbzn.js";import{A as Oe,S as Me,C as De,a as Te}from"./index-BihgQmCv.js";import"./router-BLkwbmX3.js";import"./charts-BO6COj6_.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=Y("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=Y("ArrowRightCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=Y("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=Y("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=Y("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Ve=()=>{const[P,O]=l.useState([]),[j,M]=l.useState(!0),[b,o]=l.useState(""),[A,V]=l.useState(""),[x,I]=l.useState(""),[m,E]=l.useState(1),[c,S]=l.useState(1),[T,B]=l.useState(0),[_,u]=l.useState(!1),[p,w]=l.useState(!1),[N,z]=l.useState(!1),[q,J]=l.useState(!1),[C,L]=l.useState(null),[U,s]=l.useState(""),[r,a]=l.useState(!1),{theme:t}=he(),[i,g]=l.useState({name:"",description:"",expiresInDays:365,permissions:[]}),K=["jobs:read","jobs:write","jobs:delete","Cost Code:read","Cost Code:write","Cost Code:delete","employee:read","employee:write","employee:delete","timesheed:read","timesheed:write","system:admin"],R=async(n=1)=>{try{M(!0),o("");const f=new URLSearchParams({page:n.toString(),limit:"20"});A&&f.append("search",A),x&&f.append("status",x);const F=await fetch(`/api/api-keys?${f}`);if(!F.ok)throw new Error("Failed to fetch API keys");const Q=await F.json();O(Q.apiKeys),E(Q.currentPage),S(Q.totalPages),B(Q.totalKeys)}catch(f){o(f instanceof Error?f.message:"Failed to fetch API keys")}finally{M(!1)}};l.useEffect(()=>{R()},[]),l.useEffect(()=>{R(m)},[A,x]);const d=async()=>{try{o("");const n=await fetch("/api/api-keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!n.ok){const F=await n.json();throw new Error(F.error||"Failed to create API key")}const f=await n.json();s(f.apiKey),a(!0),u(!1),$(),R()}catch(n){o(n instanceof Error?n.message:"Failed to create API key")}},k=async()=>{if(C)try{o("");const n=await fetch(`/api/api-keys/${C._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!n.ok){const f=await n.json();throw new Error(f.error||"Failed to update API key")}w(!1),$(),R()}catch(n){o(n instanceof Error?n.message:"Failed to update API key")}},y=async()=>{if(C)try{o("");const n=await fetch(`/api/api-keys/${C._id}`,{method:"DELETE"});if(!n.ok){const f=await n.json();throw new Error(f.error||"Failed to delete API key")}z(!1),L(null),R()}catch(n){o(n instanceof Error?n.message:"Failed to delete API key")}},v=async()=>{if(C)try{o("");const n=await fetch(`/api/api-keys/${C._id}/regenerate`,{method:"POST"});if(!n.ok){const F=await n.json();throw new Error(F.error||"Failed to regenerate API key")}const f=await n.json();s(f.apiKey),a(!0),J(!1),R()}catch(n){o(n instanceof Error?n.message:"Failed to regenerate API key")}},$=()=>{g({name:"",description:"",expiresInDays:365,permissions:[]})},G=n=>{L(n),g({name:n.name,description:n.description,expiresInDays:Math.ceil((new Date(n.expiresAt).getTime()-new Date().getTime())/(1e3*60*60*24)),permissions:n.permissions}),w(!0)},re=n=>{L(n),z(!0)},ie=n=>{L(n),J(!0)},oe=n=>{navigator.clipboard.writeText(n)},ce=n=>n.isActive?new Date(n.expiresAt)<=new Date?"text-orange-600 bg-orange-100":"text-green-600 bg-green-100":"text-red-600 bg-red-100",de=n=>n.isActive?new Date(n.expiresAt)<=new Date?"Expired":"Active":"Inactive",xe=n=>n.isActive?new Date(n.expiresAt)<=new Date?e.jsx(Ce,{className:"h-4 w-4"}):e.jsx(ke,{className:"h-4 w-4"}):e.jsx(W,{className:"h-4 w-4"});return e.jsx(ge,{maxWidth:"full",padding:"none",children:e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white px-6 py-4 border-b flex items-center justify-between",style:{borderColor:t==null?void 0:t.theme.colors.primary[200]},children:[e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(D,{onClick:()=>window.open("/admin/api-docs","_blank"),variant:"outline",icon:e.jsx(me,{className:"h-4 w-4"}),children:"API Docs"}),e.jsx(D,{onClick:()=>u(!0),variant:"primary",icon:e.jsx(ue,{className:"h-4 w-4"}),children:"Create API Key"})]})]}),e.jsxs("div",{className:"space-y-3 mt-4",children:[b&&e.jsx("div",{children:e.jsx(pe,{type:"error",message:b})}),e.jsx("div",{className:"bg-white rounded-xl",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search API keys...",value:A,onChange:n=>V(n.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{borderColor:t==null?void 0:t.theme.colors.primary[300]}})]})}),e.jsxs("select",{value:x,onChange:n=>I(n.target.value),className:"border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{borderColor:t==null?void 0:t.theme.colors.primary[300]},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"expired",children:"Expired"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl border overflow-hidden",style:{borderColor:t==null?void 0:t.theme.colors.primary[200]},children:j?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),"Loading API keys..."]}):P.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:A||x?"No API keys found matching your filters":"No API keys available"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Key Prefix"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Used"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usage"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(n=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:n.name}),e.jsx("div",{className:"text-sm text-gray-500",children:n.description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:[n.keyPrefix,"..."]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ce(n)}`,children:[xe(n),e.jsx("span",{className:"ml-1",children:de(n)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsx("span",{children:new Date(n.expiresAt).toLocaleDateString()})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.lastUsed?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{children:new Date(n.lastUsed).toLocaleString()})]}):e.jsx("span",{className:"text-gray-400",children:"Never"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx("span",{children:n.usageCount})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>G(n),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(we,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ie(n),className:"text-orange-600 hover:text-orange-900",title:"Regenerate",children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>re(n),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(ee,{className:"h-4 w-4"})})]})})]},n._id))})]})})}),c>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",P.length," of ",T," API keys (Page ",m," of ",c,")"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>E(m-1),disabled:m===1,className:"px-3 py-1 border rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",style:{borderColor:t==null?void 0:t.theme.colors.primary[300]},children:"Previous"}),e.jsx("button",{onClick:()=>E(m+1),disabled:m===c,className:"px-3 py-1 border rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",style:{borderColor:t==null?void 0:t.theme.colors.primary[300]},children:"Next"})]})]}),e.jsx(se,{title:"Create API Key",open:_,onClose:()=>{u(!1),$()},size:"md",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(Z,{label:"Name",children:e.jsx("input",{type:"text",value:i.name,onChange:n=>g({...i,name:n.target.value}),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter API key name",style:{borderColor:t==null?void 0:t.theme.colors.primary[300]}})}),e.jsx(Z,{label:"Description",children:e.jsx("textarea",{value:i.description,onChange:n=>g({...i,description:n.target.value}),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter description",rows:3,style:{borderColor:t==null?void 0:t.theme.colors.primary[300]}})}),e.jsx(Z,{label:"Expires In (Days)",children:e.jsx("input",{type:"number",value:i.expiresInDays,onChange:n=>g({...i,expiresInDays:parseInt(n.target.value)}),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{borderColor:t==null?void 0:t.theme.colors.primary[300]},min:"1",max:"3650"})}),e.jsx(Z,{label:"Permissions",children:e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:K.map(n=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:i.permissions.includes(n),onChange:f=>{f.target.checked?g({...i,permissions:[...i.permissions,n]}):g({...i,permissions:i.permissions.filter(F=>F!==n)})},className:"rounded text-blue-600 focus:ring-blue-500",style:{borderColor:t==null?void 0:t.theme.colors.primary[300]}}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:n})]},n))})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{onClick:()=>{u(!1),$()},className:"px-4 py-2 border text-gray-700 rounded-lg hover:bg-gray-50",style:{borderColor:t==null?void 0:t.theme.colors.primary[300]},children:"Cancel"}),e.jsx("button",{onClick:d,disabled:!i.name,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Create"})]})]})}),p&&C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-1 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit API Key"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:i.name,onChange:n=>g({...i,name:n.target.value}),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{borderColor:t==null?void 0:t.theme.colors.primary[300]}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:i.description,onChange:n=>g({...i,description:n.target.value}),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{borderColor:t==null?void 0:t.theme.colors.primary[300]},rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Permissions"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:K.map(n=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:i.permissions.includes(n),onChange:f=>{f.target.checked?g({...i,permissions:[...i.permissions,n]}):g({...i,permissions:i.permissions.filter(F=>F!==n)})},className:"rounded text-blue-600 focus:ring-blue-500",style:{borderColor:t==null?void 0:t.theme.colors.primary[300]}}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:n})]},n))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>{w(!1),$()},className:"px-4 py-2 border text-gray-700 rounded-lg hover:bg-gray-50",style:{borderColor:t==null?void 0:t.theme.colors.primary[300]},children:"Cancel"}),e.jsx("button",{onClick:k,disabled:!i.name,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Update"})]})]})}),N&&C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-1 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Delete API Key"}),e.jsxs("p",{className:"text-gray-600 mb-1",children:['Are you sure you want to delete the API key "',C.name,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 border text-gray-700 rounded-lg hover:bg-gray-50",style:{borderColor:t==null?void 0:t.theme.colors.primary[300]},children:"Cancel"}),e.jsx("button",{onClick:y,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})}),q&&C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-1 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Regenerate API Key"}),e.jsxs("p",{className:"text-gray-600 mb-1",children:['Are you sure you want to regenerate the API key "',C.name,'"? The old key will no longer work.']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>J(!1),className:"px-4 py-2 border text-gray-700 rounded-lg hover:bg-gray-50",style:{borderColor:t==null?void 0:t.theme.colors.primary[300]},children:"Cancel"}),e.jsx("button",{onClick:v,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",children:"Regenerate"})]})]})}),r&&U&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-1 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"API Key Generated"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your new API key has been generated. Copy it now as it won't be shown again."}),e.jsx("div",{className:"bg-gray-100 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("code",{className:"text-sm break-all",children:r?U:"••••••••••••••••••••••••••••••••"}),e.jsx("button",{onClick:()=>a(!r),className:"ml-2 text-gray-500 hover:text-gray-700",children:r?e.jsx(Ne,{className:"h-4 w-4"}):e.jsx(le,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsxs("button",{onClick:()=>oe(U),className:"px-4 py-2 border text-gray-700 rounded-lg hover:bg-gray-50 flex items-center space-x-2",style:{borderColor:t==null?void 0:t.theme.colors.primary[300]},children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:"Copy"})]}),e.jsx("button",{onClick:()=>{a(!1),s("")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Done"})]})]})})]})]})})},ze=()=>{const[P,O]=l.useState([]),[j,M]=l.useState(!0),[b,o]=l.useState(null),[A,V]=l.useState({entityType:"",action:"",status:""}),x=async()=>{M(!0);try{const c=await h.getAuditLogs({entityType:A.entityType||void 0,limit:100});if(c.success&&c.data){const S=c.data.data||c.data;O(S.rows||[]),o(null)}else o(c.error||"Failed to load integration logs"),O([])}catch(c){o((c==null?void 0:c.message)||"Failed to load integration logs"),O([])}finally{M(!1)}};l.useEffect(()=>{x()},[A.entityType]);const I=c=>{const S=(c||"").toLowerCase();return S==="validate"?"#3b82f6":S==="move"?"#10b981":S==="reject"?"#ef4444":S==="import"?"#8b5cf6":"#6b7280"},m=l.useMemo(()=>[{key:"createdAt",headerText:"Timestamp",render:c=>new Date(c.createdAt).toLocaleString()},{key:"action",headerText:"Action",render:c=>e.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",backgroundColor:I(c.action),color:"white",fontSize:"12px",fontWeight:500,textTransform:"uppercase"},children:c.action})},{key:"entityType",headerText:"Entity",render:c=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:c.entityType}),e.jsxs("div",{style:{fontSize:"12px",color:"#6b7280"},children:["Record: ",c.recordId||c.batchId||"—"]})]})},{key:"status",headerText:"Status",render:c=>e.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",backgroundColor:c.status==="success"?"#10b981":"#ef4444",color:"white",fontSize:"12px",fontWeight:500,textTransform:"uppercase"},children:c.status})},{key:"message",headerText:"Message",render:c=>c.message||"—"}],[]),E=[{key:"entityType",label:"Entity",options:[{value:"",label:"All"},{value:"Employee",label:"Employee"},{value:"Job",label:"Job"},{value:"Phase",label:"Phase"},{value:"CostCode",label:"Cost Code"}]}];return e.jsx(Oe,{title:"Integration Logs",dataRows:P,dataColumns:m,filters:E,enableSorting:!0,searchKeys:["action","entityType","status","message","recordId","batchId","userId"],isLoading:j,error:b})},Je=()=>e.jsx("div",{className:"p-6 text-gray-600",children:"Inbound Cost Code placeholder"}),_e=()=>{const[P,O]=l.useState([]),[j,M]=l.useState({}),[b,o]=l.useState(!1),[A,V]=l.useState(""),[x,I]=l.useState(!1),[m,E]=l.useState(null),[c,S]=l.useState(null),[T,B]=l.useState(!0),[_,u]=l.useState(!1),p=(a,t)=>{const i=a||{},g=t||{},K=new Set(["id","tenant_id","created_at","updated_at","created_by","updated_by"]),R=Array.from(new Set([...Object.keys(i),...Object.keys(g)])).filter(y=>!K.has(y)),d=y=>y==null?"":typeof y=="object"?JSON.stringify(y):String(y),k=(y,v)=>{try{return JSON.stringify(y)===JSON.stringify(v)}catch{return y===v}};return R.map(y=>{const v=i[y],$=g[y];let G="same";return y in g?y in i?k(v,$)||(G="changed"):G="rightOnly":G="leftOnly",{key:y,left:d(v),right:d($),status:G}})},w=l.useMemo(()=>Object.keys(j).filter(a=>j[a]),[j]),N=async()=>{var t;o(!0);const a=await h.listStagingEmployees({q:A,limit:50});if(a.success){const i=((t=a.data)==null?void 0:t.data)||a.data,g=(i==null?void 0:i.rows)||(i==null?void 0:i.items)||[];O(g)}o(!1)};l.useEffect(()=>{N()},[]);const z=async()=>{w.length!==0&&(o(!0),await h.validateStagingEmployees(w),await N(),o(!1))},q=async()=>{w.length!==0&&(o(!0),await h.moveStagingEmployees(w),await N(),o(!1))},J=async()=>{if(w.length===0)return;const a="Rejected from inbound UI";o(!0),await h.rejectStagingEmployees(w,a),await N(),o(!1)},C=async a=>{var i;S(null);const t=await h.compareStagingEmployee(a.id);if(t.success){const g=((i=t.data)==null?void 0:i.data)||t.data;E({staging:g==null?void 0:g.staging,employee:g==null?void 0:g.employee})}else S(t.error||"Failed to load comparison"),E(null);I(!0)},L=[{key:"code",header:"Code",render:a=>a.code||"—"},{key:"name",header:"Name",render:a=>a.name||"—"},{key:"email",header:"Email",render:a=>a.email||"—"},{key:"validationStatus",header:"Validation"},{key:"status",header:"Status"},{key:"actions",header:"Actions",render:a=>{const t=(a.validationStatus||"").toLowerCase().includes("pending");return e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{title:"Validate",className:"p-1.5 border rounded hover:bg-gray-50",onClick:async()=>{await h.validateStagingEmployees([a.id]),N()},children:e.jsx(H,{className:"h-4 w-4 text-blue-600"})}),e.jsx("button",{title:"Move",className:`p-1.5 border rounded hover:bg-gray-50 disabled:opacity-70 ${t?"bg-gray-100":""}`,disabled:t,onClick:async()=>{if(t){alert("⚠️ Validation Pending — Please validate first before moving.");return}await h.moveStagingEmployees([a.id]),N()},children:e.jsx(X,{className:"h-4 w-4 text-green-600"})}),e.jsx("button",{title:"Reject",className:"p-1.5 border rounded hover:bg-gray-50",onClick:async()=>{await h.rejectStagingEmployees([a.id],"Rejected"),N()},children:e.jsx(W,{className:"h-4 w-4 text-red-600"})}),e.jsx("button",{title:"Delete",className:"p-1.5 border rounded hover:bg-gray-50",onClick:async()=>{confirm("Delete this staging record?")&&(await h.deleteStagingEmployee(a.id),N())},children:e.jsx(ee,{className:"h-4 w-4 text-gray-700"})}),a.status==="Rejected"&&e.jsx("button",{title:"Set Pending",className:"p-1.5 border rounded hover:bg-gray-50",onClick:async()=>{await h.updateStagingEmployeeStatus(a.id,"Pending"),N()},children:e.jsx(ae,{className:"h-4 w-4 text-indigo-600"})}),e.jsx("button",{className:"p-1.5 border rounded hover:bg-gray-50",title:"Compare",onClick:()=>C(a),children:e.jsx(ne,{className:"h-4 w-4 text-purple-600"})})]})}}],s=P.map(a=>({...a,name:[a.firstName,a.middleName,a.lastName].filter(Boolean).join(" ")})).filter(a=>_?a.status==="Rejected":a.status!=="Rejected"),r=[{key:"status",label:"Status",options:[{value:"",label:"All"},{value:"Pending",label:"Pending"},{value:"Moved",label:"Moved"},{value:"Rejected",label:"Rejected"}]},{key:"validationStatus",label:"Validation",options:[{value:"",label:"All"},{value:"Pending",label:"Pending"},{value:"Validated",label:"Validated"},{value:"Error",label:"Error"}]}];return e.jsxs("div",{className:"space-y-4",children:[e.jsx(te,{title:"Employee Staging Data",items:s,columns:L,rowId:a=>a.id,searchKeys:["code","name","email"],filters:r,loading:b,toolbarLeft:e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:_,onChange:a=>u(a.target.checked)}),e.jsx("span",{children:"Rejected"})]}),onSelectionChange:a=>{const t={};a.forEach(i=>{t[i]=!0}),M(t)},onDeleteMany:async a=>{!a||a.length===0||confirm(`Delete ${a.length} staging record(s)?`)&&(await h.deleteStagingEmployees(a),await N())},bulkActionsLeft:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{variant:"outline",size:"sm",disabled:b||w.length===0,onClick:z,children:[e.jsx(H,{className:"h-4 w-4 mr-1 text-blue-600"}),"Validate Selected"]}),e.jsxs(D,{variant:"outline",size:"sm",disabled:b||w.length===0,onClick:()=>{if(P.filter(t=>j[t.id]).some(t=>(t.validationStatus||"").toLowerCase().includes("pending"))){alert("⚠️ Validation Pending — Please validate first before moving.");return}q()},children:[e.jsx(X,{className:"h-4 w-4 mr-1 text-green-600"}),"Move Selected"]}),e.jsxs(D,{variant:"outline",size:"sm",disabled:b||w.length===0,onClick:J,children:[e.jsx(W,{className:"h-4 w-4 mr-1 text-red-600"}),"Reject Selected"]})]})}),e.jsx(se,{title:"Compare Data",open:x,onClose:()=>I(!1),size:"xl",children:e.jsx("div",{className:"p-4 text-sm space-y-3",children:c?e.jsx("div",{className:"text-red-600 text-sm",children:c}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold",children:"Field-by-field differences"}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:T,onChange:a=>B(a.target.checked)}),e.jsx("span",{children:"Show only changes"})]})]}),e.jsx("div",{className:"border rounded overflow-hidden",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left w-48",children:"Field"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Staging"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Employee"})]})}),e.jsx("tbody",{children:p(m==null?void 0:m.staging,m==null?void 0:m.employee).filter(a=>T?a.status!=="same":!0).map(a=>e.jsxs("tr",{className:a.status==="changed"?"bg-yellow-50":a.status==="leftOnly"?"bg-green-50":a.status==="rightOnly"?"bg-red-50":"",children:[e.jsx("td",{className:"px-3 py-2 font-medium",children:a.key}),e.jsx("td",{className:"px-3 py-2",children:a.left||e.jsx("span",{className:"text-gray-400",children:"—"})}),e.jsx("td",{className:"px-3 py-2",children:a.right||e.jsx("span",{className:"text-gray-400",children:"—"})})]},a.key))})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2",children:"Raw • Staging"}),e.jsx("pre",{className:"bg-gray-50 p-2 rounded overflow-auto max-h-[50vh]",children:JSON.stringify(m==null?void 0:m.staging,null,2)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2",children:"Raw • Employee"}),e.jsx("pre",{className:"bg-gray-50 p-2 rounded overflow-auto max-h-[50vh]",children:JSON.stringify(m==null?void 0:m.employee,null,2)})]})]})]})})})]})},Ue=()=>{const[P,O]=l.useState([]),[j,M]=l.useState({}),[b,o]=l.useState(!1),[A,V]=l.useState(!1),[x,I]=l.useState(null),[m,E]=l.useState(null),[c,S]=l.useState(!0),[T,B]=l.useState(!1),_=(s,r)=>{const a=s||{},t=r||{},i=new Set(["id","tenant_id","created_at","updated_at","created_by","updated_by"]),g=Array.from(new Set([...Object.keys(a),...Object.keys(t)])).filter(d=>!i.has(d)),K=d=>d==null?"":typeof d=="object"?JSON.stringify(d):String(d),R=(d,k)=>{try{return JSON.stringify(d)===JSON.stringify(k)}catch{return d===k}};return g.map(d=>{const k=a[d],y=t[d];let v="same";return d in t?d in a?R(k,y)||(v="changed"):v="rightOnly":v="leftOnly",{key:d,left:K(k),right:K(y),status:v}})},u=l.useMemo(()=>Object.keys(j).filter(s=>j[s]),[j]),p=async()=>{var r;o(!0);const s=await h.listStagingProjects({limit:50});if(s.success){const a=((r=s.data)==null?void 0:r.data)||s.data,t=(a==null?void 0:a.rows)||(a==null?void 0:a.items)||[];O(t)}o(!1)};l.useEffect(()=>{p()},[]);const w=async()=>{u.length!==0&&(o(!0),await h.validateStagingProjects(u),await p(),o(!1))},N=async()=>{u.length!==0&&(o(!0),await h.moveStagingProjects(u),await p(),o(!1))},z=async()=>{if(u.length===0)return;const s="Rejected from inbound UI";o(!0),await h.rejectStagingProjects(u,s),await p(),o(!1)},q=async s=>{var a;E(null);const r=await h.compareStagingProject(s.id);if(r.success){const t=((a=r.data)==null?void 0:a.data)||r.data;I({staging:t==null?void 0:t.staging,project:t==null?void 0:t.project})}else E(r.error||"Failed to load comparison"),I(null);V(!0)},J=[{key:"code",header:"Code",render:s=>s.code||"—"},{key:"name",header:"Name",render:s=>s.name||"—"},{key:"client",header:"Client",render:s=>s.client||"—"},{key:"validationStatus",header:"Validation"},{key:"status",header:"Status"},{key:"actions",header:"Actions",render:s=>{const r=(s.validationStatus||"").toLowerCase().includes("pending");return e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{title:"Validate",className:"p-1.5 border rounded hover:bg-gray-50",onClick:async()=>{await h.validateStagingProjects([s.id]),p()},children:e.jsx(H,{className:"h-4 w-4 text-blue-600"})}),e.jsx("button",{title:"Move",className:`p-1.5 border rounded hover:bg-gray-50 disabled:opacity-70 ${r?"bg-gray-100":""}`,disabled:r,onClick:async()=>{if(r){alert("⚠️ Validation Pending — Please validate first before moving.");return}await h.moveStagingProjects([s.id]),p()},children:e.jsx(X,{className:"h-4 w-4 text-green-600"})}),e.jsx("button",{title:"Reject",className:"p-1.5 border rounded hover:bg-gray-50",onClick:async()=>{await h.rejectStagingProjects([s.id],"Rejected"),p()},children:e.jsx(W,{className:"h-4 w-4 text-red-600"})}),e.jsx("button",{title:"Delete",className:"p-1.5 border rounded hover:bg-gray-50",onClick:async()=>{confirm("Delete this staging record?")&&(await h.deleteStagingProject(s.id),p())},children:e.jsx(ee,{className:"h-4 w-4 text-gray-700"})}),s.status==="Rejected"&&e.jsx("button",{title:"Set Pending",className:"p-1.5 border rounded hover:bg-gray-50",onClick:async()=>{await h.updateStagingProjectStatus(s.id,"Pending"),p()},children:e.jsx(ae,{className:"h-4 w-4 text-indigo-600"})}),e.jsx("button",{className:"p-1.5 border rounded hover:bg-gray-50",title:"Compare",onClick:()=>q(s),children:e.jsx(ne,{className:"h-4 w-4 text-purple-600"})})]})}}],L=P.filter(s=>T?s.status==="Rejected":s.status!=="Rejected"),U=[{key:"status",label:"Status",options:[{value:"",label:"All"},{value:"Pending",label:"Pending"},{value:"Moved",label:"Moved"},{value:"Rejected",label:"Rejected"}]},{key:"validationStatus",label:"Validation",options:[{value:"",label:"All"},{value:"Pending",label:"Pending"},{value:"Validated",label:"Validated"},{value:"Error",label:"Error"}]}];return e.jsxs("div",{className:"space-y-4",children:[e.jsx(te,{title:"Job (Project) Staging Data",items:L,columns:J,rowId:s=>s.id,searchKeys:["code","name","client"],filters:U,loading:b,toolbarLeft:e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:T,onChange:s=>B(s.target.checked)}),e.jsx("span",{children:"Rejected"})]}),onSelectionChange:s=>{const r={};s.forEach(a=>{r[a]=!0}),M(r)},onDeleteMany:async s=>{!s||s.length===0||confirm(`Delete ${s.length} staging record(s)?`)&&(await h.deleteStagingProjects(s),await p())},bulkActionsLeft:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{variant:"outline",size:"sm",disabled:b||u.length===0,onClick:w,children:[e.jsx(H,{className:"h-4 w-4 mr-1 text-blue-600"}),"Validate Selected"]}),e.jsxs(D,{variant:"outline",size:"sm",disabled:b||u.length===0,onClick:()=>{if(P.filter(r=>j[r.id]).some(r=>(r.validationStatus||"").toLowerCase().includes("pending"))){alert("⚠️ Validation Pending — Please validate first before moving.");return}N()},children:[e.jsx(X,{className:"h-4 w-4 mr-1 text-green-600"}),"Move Selected"]}),e.jsxs(D,{variant:"outline",size:"sm",disabled:b||u.length===0,onClick:z,children:[e.jsx(W,{className:"h-4 w-4 mr-1 text-red-600"}),"Reject Selected"]})]})}),e.jsx(se,{title:"Compare Data",open:A,onClose:()=>V(!1),size:"xl",children:e.jsx("div",{className:"p-4 text-sm space-y-3",children:m?e.jsx("div",{className:"text-red-600 text-sm",children:m}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold",children:"Field-by-field differences"}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:s=>S(s.target.checked)}),e.jsx("span",{children:"Show only changes"})]})]}),e.jsx("div",{className:"border rounded overflow-hidden",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left w-48",children:"Field"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Staging"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Project"})]})}),e.jsx("tbody",{children:_(x==null?void 0:x.staging,x==null?void 0:x.project).filter(s=>c?s.status!=="same":!0).map(s=>e.jsxs("tr",{className:s.status==="changed"?"bg-yellow-50":s.status==="leftOnly"?"bg-green-50":s.status==="rightOnly"?"bg-red-50":"",children:[e.jsx("td",{className:"px-3 py-2 font-medium",children:s.key}),e.jsx("td",{className:"px-3 py-2",children:s.left||e.jsx("span",{className:"text-gray-400",children:"—"})}),e.jsx("td",{className:"px-3 py-2",children:s.right||e.jsx("span",{className:"text-gray-400",children:"—"})})]},s.key))})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2",children:"Raw • Staging"}),e.jsx("pre",{className:"bg-gray-50 p-2 rounded overflow-auto max-h-[50vh]",children:JSON.stringify(x==null?void 0:x.staging,null,2)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2",children:"Raw • Project"}),e.jsx("pre",{className:"bg-gray-50 p-2 rounded overflow-auto max-h-[50vh]",children:JSON.stringify(x==null?void 0:x.project,null,2)})]})]})]})})})]})},$e=()=>{const[P,O]=l.useState([]),[j,M]=l.useState({}),[b,o]=l.useState(!1),[A,V]=l.useState(!1),[x,I]=l.useState(null),[m,E]=l.useState(null),[c,S]=l.useState(!0),[T,B]=l.useState(!1),_=(s,r)=>{const a=s||{},t=r||{},i=new Set(["id","tenant_id","created_at","updated_at","created_by","updated_by"]),g=Array.from(new Set([...Object.keys(a),...Object.keys(t)])).filter(d=>!i.has(d)),K=d=>d==null?"":typeof d=="object"?JSON.stringify(d):String(d),R=(d,k)=>{try{return JSON.stringify(d)===JSON.stringify(k)}catch{return d===k}};return g.map(d=>{const k=a[d],y=t[d];let v="same";return d in t?d in a?R(k,y)||(v="changed"):v="rightOnly":v="leftOnly",{key:d,left:K(k),right:K(y),status:v}})},u=l.useMemo(()=>Object.keys(j).filter(s=>j[s]),[j]),p=async()=>{var r;o(!0);const s=await h.listStagingPhases({limit:50});if(s.success){const a=((r=s.data)==null?void 0:r.data)||s.data,t=(a==null?void 0:a.rows)||(a==null?void 0:a.items)||[];O(t)}o(!1)};l.useEffect(()=>{p()},[]);const w=async()=>{u.length!==0&&(o(!0),await h.validateStagingPhases(u),await p(),o(!1))},N=async()=>{u.length!==0&&(o(!0),await h.moveStagingPhases(u),await p(),o(!1))},z=async()=>{if(u.length===0)return;const s="Rejected from inbound UI";o(!0),await h.rejectStagingPhases(u,s),await p(),o(!1)},q=async s=>{var a;E(null);const r=await h.compareStagingPhase(s.id);if(r.success){const t=((a=r.data)==null?void 0:a.data)||r.data;I({staging:t==null?void 0:t.staging,phase:t==null?void 0:t.phase})}else E(r.error||"Failed to load comparison"),I(null);V(!0)},J=[{key:"code",header:"Code",render:s=>s.code||"—"},{key:"name",header:"Name",render:s=>s.name||"—"},{key:"projectCode",header:"Project Code",render:s=>s.projectCode||"—"},{key:"validationStatus",header:"Validation"},{key:"status",header:"Status"},{key:"actions",header:"Actions",render:s=>{const r=(s.validationStatus||"").toLowerCase().includes("pending");return e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{title:"Validate",className:"p-1.5 border rounded hover:bg-gray-50",onClick:async()=>{await h.validateStagingPhases([s.id]),p()},children:e.jsx(H,{className:"h-4 w-4 text-blue-600"})}),e.jsx("button",{title:"Move",className:`p-1.5 border rounded hover:bg-gray-50 disabled:opacity-70 ${r?"bg-gray-100":""}`,disabled:r,onClick:async()=>{if(r){alert("⚠️ Validation Pending — Please validate first before moving.");return}await h.moveStagingPhases([s.id]),p()},children:e.jsx(X,{className:"h-4 w-4 text-green-600"})}),e.jsx("button",{title:"Reject",className:"p-1.5 border rounded hover:bg-gray-50",onClick:async()=>{await h.rejectStagingPhases([s.id],"Rejected"),p()},children:e.jsx(W,{className:"h-4 w-4 text-red-600"})}),e.jsx("button",{title:"Delete",className:"p-1.5 border rounded hover:bg-gray-50",onClick:async()=>{confirm("Delete this staging record?")&&(await h.deleteStagingPhase(s.id),p())},children:e.jsx(ee,{className:"h-4 w-4 text-gray-700"})}),s.status==="Rejected"&&e.jsx("button",{title:"Set Pending",className:"p-1.5 border rounded hover:bg-gray-50",onClick:async()=>{await h.updateStagingPhaseStatus(s.id,"Pending"),p()},children:e.jsx(ae,{className:"h-4 w-4 text-indigo-600"})}),e.jsx("button",{className:"p-1.5 border rounded hover:bg-gray-50",title:"Compare",onClick:()=>q(s),children:e.jsx(ne,{className:"h-4 w-4 text-purple-600"})})]})}}],L=P.filter(s=>T?s.status==="Rejected":s.status!=="Rejected"),U=[{key:"status",label:"Status",options:[{value:"",label:"All"},{value:"Pending",label:"Pending"},{value:"Moved",label:"Moved"},{value:"Rejected",label:"Rejected"}]},{key:"validationStatus",label:"Validation",options:[{value:"",label:"All"},{value:"Pending",label:"Pending"},{value:"Validated",label:"Validated"},{value:"Error",label:"Error"}]}];return e.jsxs("div",{className:"space-y-4",children:[e.jsx(te,{title:"Phase Staging Data",items:L,columns:J,rowId:s=>s.id,searchKeys:["code","name","projectCode"],filters:U,loading:b,toolbarLeft:e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:T,onChange:s=>B(s.target.checked)}),e.jsx("span",{children:"Rejected"})]}),onSelectionChange:s=>{const r={};s.forEach(a=>{r[a]=!0}),M(r)},onDeleteMany:async s=>{!s||s.length===0||confirm(`Delete ${s.length} staging record(s)?`)&&(await h.deleteStagingPhases(s),await p())},bulkActionsLeft:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{variant:"outline",size:"sm",disabled:b||u.length===0,onClick:w,children:[e.jsx(H,{className:"h-4 w-4 mr-1 text-blue-600"}),"Validate Selected"]}),e.jsxs(D,{variant:"outline",size:"sm",disabled:b||u.length===0,onClick:()=>{if(P.filter(r=>j[r.id]).some(r=>(r.validationStatus||"").toLowerCase().includes("pending"))){alert("⚠️ Validation Pending — Please validate first before moving.");return}N()},children:[e.jsx(X,{className:"h-4 w-4 mr-1 text-green-600"}),"Move Selected"]}),e.jsxs(D,{variant:"outline",size:"sm",disabled:b||u.length===0,onClick:z,children:[e.jsx(W,{className:"h-4 w-4 mr-1 text-red-600"}),"Reject Selected"]})]})}),e.jsx(se,{title:"Compare Data",open:A,onClose:()=>V(!1),size:"xl",children:e.jsx("div",{className:"p-4 text-sm space-y-3",children:m?e.jsx("div",{className:"text-red-600 text-sm",children:m}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold",children:"Field-by-field differences"}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:s=>S(s.target.checked)}),e.jsx("span",{children:"Show only changes"})]})]}),e.jsx("div",{className:"border rounded overflow-hidden",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left w-48",children:"Field"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Staging"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Phase"})]})}),e.jsx("tbody",{children:_(x==null?void 0:x.staging,x==null?void 0:x.phase).filter(s=>c?s.status!=="same":!0).map(s=>e.jsxs("tr",{className:s.status==="changed"?"bg-yellow-50":s.status==="leftOnly"?"bg-green-50":s.status==="rightOnly"?"bg-red-50":"",children:[e.jsx("td",{className:"px-3 py-2 font-medium",children:s.key}),e.jsx("td",{className:"px-3 py-2",children:s.left||e.jsx("span",{className:"text-gray-400",children:"—"})}),e.jsx("td",{className:"px-3 py-2",children:s.right||e.jsx("span",{className:"text-gray-400",children:"—"})})]},s.key))})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2",children:"Raw • Staging"}),e.jsx("pre",{className:"bg-gray-50 p-2 rounded overflow-auto max-h-[50vh]",children:JSON.stringify(x==null?void 0:x.staging,null,2)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2",children:"Raw • Phase"}),e.jsx("pre",{className:"bg-gray-50 p-2 rounded overflow-auto max-h-[50vh]",children:JSON.stringify(x==null?void 0:x.phase,null,2)})]})]})]})})})]})},Be=[{id:"employees",label:"Employees",icon:Pe,component:e.jsx(_e,{})},{id:"job",label:"Job",icon:Ae,component:e.jsx(Ue,{})},{id:"phase",label:"Phase",icon:Ee,component:e.jsx($e,{})},{id:"costCode",label:"Cost Code",icon:Fe,component:e.jsx(Je,{})}],qe=()=>e.jsx(Me,{tabs:Be}),We=()=>e.jsx("div",{className:"p-6 text-gray-600",children:"Outbound placeholder"}),Ge=[{id:"inbound",label:"Inbound",icon:Le,component:e.jsx(qe,{})},{id:"outbound",label:"Outbound",icon:Ke,component:e.jsx(We,{})},{id:"apiKeys",label:"API Keys",icon:Re,component:e.jsx(Ve,{})},{id:"auditLogs",label:"Integration Logs",icon:le,component:e.jsx(ze,{})}],es=()=>(l.useEffect(()=>{document.title="Integration - Space Rivers"},[]),e.jsx(De,{children:e.jsx(Te,{title:"Integration",children:e.jsx(Ie,{tabs:Ge})})}));export{es as default};
